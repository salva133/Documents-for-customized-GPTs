﻿# triggered by on_law_enactment_started
je_abolish_monarchy = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_internal_affairs

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					NOT = { has_law = law_type:law_monarchy }
					NOT = {
						any_civil_war = {
							civil_war_progress > 0.5
							is_civil_war_type = revolution
						}
					}
					NOT = {
						any_interest_group = {
							law_stance = {
								law = law_type:law_monarchy
								value > neutral
							}
							is_powerful = yes
						}
					}
				}
				change_variable = {
					name = abolishing_monarchy_var
					add = 1
				}
			}
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		NOT = { has_law = law_type:law_monarchy }
		NOT = {
			any_civil_war = {
				civil_war_progress > 0.5
				is_civil_war_type = revolution
			}
		}
		NOT = {
			any_interest_group = {
				law_stance = {
					law = law_type:law_monarchy
					value > neutral
				}
				is_powerful = yes
			}
		}
	}

	on_complete = {
		set_variable = stamped_out_monarchy_var
		trigger_event = {
			id = 1848.2
		}
		if = {
			limit = { has_journal_entry = je_warlord_china }
			chi_add_1_fragile_unity = yes
			set_variable = china_warlord_abolished_monarchy
		}
	}

	invalid = {
		NOR = {
			is_enacting_law = law_type:law_presidential_republic
			is_enacting_law = law_type:law_parliamentary_republic
			is_enacting_law = law_type:law_council_republic
			has_law = law_type:law_presidential_republic
			has_law = law_type:law_parliamentary_republic
			has_law = law_type:law_council_republic
		}
	}

	current_value = {
		value = root.var:abolishing_monarchy_var
	}

	goal_add_value = {
		add = 60
	}

	progressbar = yes

	weight = 100
}
﻿je_antarctica = {

	group = je_group_expeditions

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = expedition_events.20 #posts a notification
			65 = cold.5 #the pole
			50 = cold.2 #discovery hut
			20 = cold.1 #mountains
			10 = cold.3 #lost
			10 = cold.6 #eating the dogs
			30 = cold.8 #pack ice
			50 = cold.11 #great ice barrier
			20 = cold.12 #glacier
			5 = cold.13 #strange rock
		}
	}
	
	immediate = {
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			save_scope_as = expedition_leader
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = expedition_low_peril_loc
				trigger = {
					var:expedition_peril < 4
				}
			}
			triggered_desc = {
				desc = expedition_medium_peril_loc
				trigger = {
					var:expedition_peril <= 5
				}
			}
			triggered_desc = {
				desc = expedition_high_peril_loc
				trigger = {
					var:expedition_peril >= 6
				}
			}
		}
	}
	
    fail = {
		custom_tooltip = {
			text = je_expedition_fail
			var:expedition_peril >= 8
		}
    }
	
	on_fail = {
		trigger_event = { id = cold.4 }
		remove_variable = on_expedition
		remove_modifier = modifier_large_expedition_cost
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	current_value = {
		value = var:expedition_progress
	}

	goal_add_value = {
		add = 8
	}
	
	complete = {
		custom_tooltip = {
			text = je_expedition_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
			has_variable = south_pole_event_var
		}
	}
	
	on_complete = {
		trigger_event = { id = cold.7 }
		remove_variable = on_expedition
		remove_modifier = modifier_large_expedition_cost
		set_variable = antarctica_expedition_success_var #great exhibition check
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	progressbar = yes
	
    weight = 200
    transferable = no
    should_be_pinned_by_default = yes
}
﻿je_autocracy = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		OR = {
			has_law = law_type:law_monarchy
			has_law = law_type:law_theocracy
		}
		has_law = law_type:law_state_religion
		has_law = law_type:law_autocracy
	}

	possible = {
		has_technology_researched = nationalism
		OR = {
			ig:ig_landowners = {
				is_powerful = yes
			}
			ig:ig_devout = {
				is_powerful = yes
			}
		}
	}

	immediate = {
		set_variable = {
			name = autocracy_var
			value = 1
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					OR = {
						has_law = law_type:law_monarchy
						has_law = law_type:law_theocracy
					}
					has_law = law_type:law_state_religion
					has_law = law_type:law_autocracy
					NOT = {
						any_civil_war = {
							civil_war_progress > 0.5
						}
					}
				}
				change_variable = {
					name = autocracy_var
					add = 1
				}
			}
		}
		random_events = {
			10 = 0
			1 = autocracy.2
			1 = autocracy.3
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		OR = {
			has_law = law_type:law_monarchy
			has_law = law_type:law_theocracy
		}
		has_law = law_type:law_state_religion
		has_law = law_type:law_autocracy
		NOT = {
			any_civil_war = {
				civil_war_progress > 0.5
			}
		}
	}

	on_complete = {
		trigger_event = {
			id = autocracy.1
		}
	}

	fail = {
		OR = {
			NOT = { has_law = law_type:law_state_religion }
			NOT = { has_law = law_type:law_autocracy }
		}
	}

	current_value = {
		value = root.var:autocracy_var
	}

	goal_add_value = {
		add = 360
	}

	progressbar = yes

	weight = 100
}
﻿je_belle_epoque = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises

	is_shown_when_inactive = {
		has_technology_researched = shift_work
		has_technology_researched = camera
		has_technology_researched = electrical_generation
		country_rank >= rank_value:major_power
	}

	possible = {
		is_at_war = no
		custom_tooltip = {
			text = belle_epoque_sol_trigger
			any_scope_state = {
				filter = {
					is_incorporated = yes
				}
				average_sol >= 15
				percent > 0.5
			}
		}
		capital = {
			average_sol >= 15
		}
		capital = {
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 40
				has_active_production_method = pm_electric_streetlights				
			}
			devastation = 0
			turmoil < 0.1
		}
		
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_arts_academy
				level >= 3
				has_active_production_method = pm_photographic_art
			}
		}
		
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_university
				level >= 10
				has_active_production_method = pm_philosophy_department
			}
		}
	}

	immediate = {
		set_variable = {
			name = belle_epoque_var
			value = 0
		}
		if = {
			limit = {
				c:USA ?= this
				owns_entire_state_region = STATE_NEW_YORK
				s:STATE_NEW_YORK = {
					any_scope_state = { average_sol >= 15 }
				}
			}
			s:STATE_NEW_YORK = {
				save_scope_as = belle_epoque_state
			}
		}
		else_if = {
			limit = {
				c:USA ?= this
				owns_entire_state_region = STATE_CALIFORNIA
				s:CALIFORNIA = {
					any_scope_state = { average_sol >= 15 }
				}
			}
			s:STATE_CALIFORNIA = {
				save_scope_as = belle_epoque_state
			}
		}
		else_if = {
			limit = {
				c:USA ?= this
				owns_entire_state_region = STATE_PENNSYLVANIA
				s:STATE_PENNSLYVANIA = {
					any_scope_state = { average_sol >= 15 }
				}
			}
			s:STATE_PENNSLYVANIA = {
				save_scope_as = belle_epoque_state
			}
		}

		if = {
			limit = {
				OR = {
					c:TPG ?= this
					c:CHI ?= this
				}
				owns_entire_state_region = STATE_GUANGDONG
				s:STATE_GUANGDONG = {
					any_scope_state = { average_sol >= 15 }
				}
			}
			s:STATE_GUANGDONG = {
				save_scope_as = belle_epoque_state
			}
		}
		else_if = {
			limit = {
				OR = {
					c:TPG ?= this
					c:CHI ?= this
				}
				owns_entire_state_region = STATE_SUZHOU
				s:STATE_SUZHOU = {
					any_scope_state = { average_sol >= 15 }
				}
			}
			s:STATE_SUZHOU = {
				save_scope_as = belle_epoque_state
			}
		}
		else_if = {
			limit = {
				OR = {
					c:TPG ?= this
					c:CHI ?= this
				}
				owns_entire_state_region = STATE_NANJING
				s:STATE_NANJING = {
					any_scope_state = { average_sol >= 15 }
				}
			}
			s:STATE_NANJING = {
				save_scope_as = belle_epoque_state
			}
		}

		else = {
			capital = {
				save_scope_as = belle_epoque_state
			}
		}
	}
	
	goal_add_value = {
		add = 120 #10 years timeout
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
	}

	fail = {
		OR = {
			trigger_if = {
				limit = {
					has_variable = belle_epoque_var
				}
				custom_tooltip = {
					text = belle_epoque_fail_tt
					any_scope_war = {
						any_scope_front = {
							any_scope_state = {
								this = scope:belle_epoque_state
							}
						}
					}
				}
			}
			trigger_if = {
				limit = {
					has_variable = belle_epoque_var
				}
				custom_tooltip = {
					text = belle_epoque_invalid_tt
					scope:belle_epoque_state = {
						NOT = {
							owner = root
						}
					}
				}
			}
		}
	}

	on_weekly_pulse = {
		events = {
			belle_epoque_events.1 # eiffel tower complete
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			40 = belle_epoque_events.2 #Art Noveau
			10 = belle_epoque_events.3 #Leader Joins Symbolists
			10 = belle_epoque_events.4 #Cabaret
			30 = belle_epoque_events.5 #Rabies Vaccine 
			10 = belle_epoque_events.6 #Film 
			10 = belle_epoque_events.7 #Cinéorama
			10 = belle_epoque_events.8 #Steam Car 
			10 = belle_epoque_events.9 #Paris-Rouen 
			10 = belle_epoque_events.10 #Noveaux Riches 
			10 = belle_epoque_events.11 #Roller-Skating 
			10 = belle_epoque_events.12 #Metro 
			10 = belle_epoque_events.13 #Colonial Exhibitions
			5000 = belle_epoque_events.16 #Grande Roue de Paris 
			10 = belle_epoque_events.17 #Fin de Siècle 
			10 = belle_epoque_events.18 #Decadent Movement 
			10 = belle_epoque_events.19 #Symbolist Manifesto 
			10 = belle_epoque_events.20 #Botanical Gardens 
		}
		effect = {
			change_variable = {
				name = belle_epoque_var
				add = 1
			}
			random_list = {
				80 = {

				}
				20 = {
					random_country = {
						limit = {
							any_scope_state = {
								any_neighbouring_state = {
									owner = {
										has_journal_entry = je_belle_epoque
										any_scope_building = {
											has_active_production_method = pm_craftsman_sewing
										}
									}
								}
								has_building = building_railway
							}	
						}
						trigger_event = { id = belle_epoque_events.14 weeks = 1 }
					}
				}
			}
		}
	}

	current_value = {
		value = var:belle_epoque_var
	}

	invalid = {
		trigger_if = {
			limit = {
				has_variable = belle_epoque_var
			}
			NOT = { exists = scope:belle_epoque_state }
		}
	}
	
	progressbar = yes

	weight = 10
}

﻿je_boxer_rebellion = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_historical_content

    is_shown_when_inactive = {
        exists = c:CHI
        THIS = c:CHI
        has_technology_researched = pan-nationalism
        country_has_primary_culture = cu:manchu
    }
    possible = {
        has_technology_researched = political_agitation
        any_state = {
        	state_region = { is_homeland = cu:han }
	        NOT = { owner = ROOT }
        }
    }
    immediate = {
        trigger_event = { id = boxer_rebellion_events.1 } # The Yihetuan Movement
    }
    complete = {
        custom_tooltip = {
            text = qing_owns_all_han_states_tt
            NOT = {
                any_state = {
                    state_region = { is_homeland = cu:han }
                    NOT = { owner = ROOT }
                }
            }
        }
    }
    on_complete = {
        trigger_event = { id = boxer_rebellion_events.2 } # The Mandate of Heaven
    }
    timeout = 1825
    on_timeout = {
        trigger_event = { id = boxer_rebellion_events.3 } # The Qing and the Han
    }
    weight = 1000
    should_be_pinned_by_default = yes
}
﻿je_brazil_navy = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		c:BRZ ?= THIS
		has_dlc_feature = rp1_content
	}

	possible = {
		country_rank >= rank_value:minor_power
		any_scope_character = {
			has_role = admiral
		}
		OR = {
			has_technology_researched = power_of_the_purse
			has_technology_researched = screw_frigate
		}
	}

	immediate = {
		set_variable = {
			name = brazil_navy_var
			value = 0
		}
		# startup event
		trigger_event = {
			id = brazil_navy.1
			popup = yes
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			5 = brazil_navy.2 # Navy complains that it's not as powerful as it should be
			5 = brazil_navy.3 # navy is strong
		}
		effect = {
			if = {
				limit = {
					NOT = {
						any_country = {
							naval_power_projection > root.naval_power_projection
							count > 10
						}
					}
					NOT = {
						any_country = {
							naval_power_projection > root.naval_power_projection
							country_is_in_south_america = yes
						}
					}
				}
				change_variable = {
					name = brazil_navy_var
					add = 1
				}
			}
		}
	}

	is_progressing = {
		NOT = {
			any_country = {
				naval_power_projection > root.naval_power_projection
				count > 10
			}
		}
		NOT = {
			any_country = {
				naval_power_projection > root.naval_power_projection
				country_is_in_south_america = yes
			}
		}
	}

	complete = {
		any_scope_character = {
			has_role = admiral
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
		NOT = {
			any_country = {
				naval_power_projection > root.naval_power_projection
				count > 10
			}
		}
		custom_tooltip = {
			text = best_south_american_navy
			NOT = {
				any_country = {
					naval_power_projection > root.naval_power_projection
					country_is_in_south_america = yes
				}
			}
		}
	}

	on_complete = {
		trigger_event = {
			id = brazil_navy.4
			popup = yes
		}
		if = {
			limit = {
				has_journal_entry = je_pedro_brazil
			}
			show_as_tooltip = {
				add_pedropoint_effect = yes
			}
		}
	}

	fail = {
		country_rank < rank_value:minor_power
	}

	timeout = 25550

	current_value = {
		value = root.var:brazil_navy_var
	}

	goal_add_value = {
		add = 480
	}

	progressbar = yes

	weight = 100

	can_revolution_inherit = no
	transferable = no
	should_be_pinned_by_default = yes
}
﻿je_canada_can = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		OR = {
			country_has_primary_culture = cu:anglo_canadian
			country_has_primary_culture = cu:franco_canadian
		}
		is_subject = yes
	}

	possible = {
		has_technology_researched = nationalism
	}

	complete = {
		calc_true_if = {
			amount >= 9
			owns_entire_state_region = STATE_ONTARIO
			owns_entire_state_region = STATE_NEW_BRUNSWICK
			owns_entire_state_region = STATE_QUEBEC
			owns_entire_state_region = STATE_NEWFOUNDLAND
			owns_entire_state_region = STATE_ALBERTA
			owns_entire_state_region = STATE_BRITISH_COLUMBIA
			owns_entire_state_region = STATE_SASKATCHEWAN
			owns_entire_state_region = STATE_MANITOBA
			owns_entire_state_region = STATE_YUKON_TERRITORY
			owns_entire_state_region = STATE_NORTHWEST_TERRITORIES
			owns_entire_state_region = STATE_NUNAVUT
		}
	}

	on_complete = {
		trigger_event = { id = can_aus.5 }
	}

	invalid = {
		is_subject = no
	}

	weight = 100

	should_be_pinned_by_default = yes
}

je_canada_gbr = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		any_subject_or_below = {
			OR = {
				country_has_primary_culture = cu:anglo_canadian
				country_has_primary_culture = cu:franco_canadian
			}
			count >= 2
		}
		NOT = {
			OR = {
				country_has_primary_culture = cu:anglo_canadian
				country_has_primary_culture = cu:franco_canadian
			}
		}
	}

	possible = {
		has_technology_researched = nationalism
	}

	complete = {
		any_subject_or_below = {
			calc_true_if = {
				amount >= 9
				owns_entire_state_region = STATE_ONTARIO
				owns_entire_state_region = STATE_NEW_BRUNSWICK
				owns_entire_state_region = STATE_QUEBEC
				owns_entire_state_region = STATE_NEWFOUNDLAND
				owns_entire_state_region = STATE_ALBERTA
				owns_entire_state_region = STATE_BRITISH_COLUMBIA
				owns_entire_state_region = STATE_SASKATCHEWAN
				owns_entire_state_region = STATE_MANITOBA
				owns_entire_state_region = STATE_YUKON_TERRITORY
				owns_entire_state_region = STATE_NORTHWEST_TERRITORIES
				owns_entire_state_region = STATE_NUNAVUT
			}
		}
	}

	on_complete = {
		trigger_event = { id = can_aus.6 }
	}

	weight = 100

	should_be_pinned_by_default = yes
}

je_australia_aus = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		OR = {
			country_has_primary_culture = cu:australian
			country_has_primary_culture = cu:maori
		}
		is_subject = yes
	}

	possible = {
		has_technology_researched = nationalism
	}

	complete = {
		calc_true_if = {
			amount >= 7
			owns_entire_state_region = STATE_NEW_SOUTH_WALES
			owns_entire_state_region = STATE_VICTORIA
			owns_entire_state_region = STATE_TASMANIA
			owns_entire_state_region = STATE_QUEENSLAND
			owns_entire_state_region = STATE_SOUTH_AUSTRALIA
			owns_entire_state_region = STATE_WESTERN_AUSTRALIA
			owns_entire_state_region = STATE_NORTHERN_TERRITORY
			owns_entire_state_region = STATE_NORTH_ISLAND
			owns_entire_state_region = STATE_SOUTH_ISLAND
		}
	}

	on_complete = {
		trigger_event = { id = can_aus.7 }
	}

	invalid = {
		is_subject = no
	}

	should_be_pinned_by_default = yes
}

je_australia_gbr = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		any_subject_or_below = {
			OR = {
				country_has_primary_culture = cu:australian
				country_has_primary_culture = cu:maori
			}
			count >= 2
		}
		NOT = {
			OR = {
				country_has_primary_culture = cu:australian
				country_has_primary_culture = cu:maori
			}
		}
	}

	possible = {
		has_technology_researched = nationalism
	}

	complete = {
		any_subject_or_below = {
			calc_true_if = {
				amount >= 7
				owns_entire_state_region = STATE_NEW_SOUTH_WALES
				owns_entire_state_region = STATE_VICTORIA
				owns_entire_state_region = STATE_TASMANIA
				owns_entire_state_region = STATE_QUEENSLAND
				owns_entire_state_region = STATE_SOUTH_AUSTRALIA
				owns_entire_state_region = STATE_WESTERN_AUSTRALIA
				owns_entire_state_region = STATE_NORTHERN_TERRITORY
				owns_entire_state_region = STATE_NORTH_ISLAND
				owns_entire_state_region = STATE_SOUTH_ISLAND
			}
		}
	}

	on_complete = {
		trigger_event = { id = can_aus.8 }
	}

	weight = 100

	should_be_pinned_by_default = yes
}
﻿je_suez_survey = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = survey_suez_taken
				add = 1
			}
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	on_complete = {
		remove_modifier = modifier_surveying_suez
		trigger_event = { id = canal_events.100 }
	}

	current_value = {
		value = root.var:survey_suez_taken
	}

	goal_add_value = {
		value = 18
	}

	invalid = {
		OR = {
			NOT = { has_variable = survey_suez_taken }
			any_state = {
				state_region = s:STATE_SINAI
				NOT = { owner = ROOT }
				any_scope_building = {
					is_building_type = building_suez_canal
				}
			}
		}
	}

	on_invalid = {
		remove_variable = survey_suez_taken
		remove_modifier = modifier_surveying_suez
	}

	progressbar = yes

	weight = 10
	should_be_pinned_by_default = yes
}

je_suez_canal = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	complete = {
		any_scope_state = {
			state_region = s:STATE_SINAI
			any_scope_building = {
				is_building_type = building_suez_canal
				occupancy >= 0.9
			}
		}
	}

	on_complete = {
		set_global_variable = suez_canal_complete
	}
	should_be_pinned_by_default = yes
}

je_panama_survey = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = survey_panama_taken
				add = 1
			}
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	on_complete = {
		remove_modifier = modifier_surveying_panama
		trigger_event = { id = canal_events.101 }
	}

	current_value = {
		value = root.var:survey_panama_taken
	}

	goal_add_value = {
		value = 12
	}

	invalid = { # If the Panama Canal is being built and you're not the one building it, you've blown it, chief.
		OR = {
			NOT = { has_variable = survey_panama_taken }
			any_state = {
				state_region = s:STATE_PANAMA
				NOT = { owner = ROOT }
				any_scope_building = {
					is_building_type = building_panama_canal
				}
			}
		}
	}

	on_invalid = {
		remove_variable = survey_suez_taken
		remove_modifier = modifier_surveying_suez
	}

	progressbar = yes

	weight = 10
	should_be_pinned_by_default = yes
}

je_panama_canal = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	complete = {
		any_scope_state = {
			state_region = s:STATE_PANAMA
			any_scope_building = {
				is_building_type = building_panama_canal
				occupancy >= 0.9
			}
		}
	}

	on_complete = {
		set_global_variable = panama_canal_complete
	}
	should_be_pinned_by_default = yes
}
﻿je_caudillo = {
	icon = "gfx/interface/icons/ig_icons/armed_forces.dds"

	group = je_group_internal_affairs

	# see also: exiling an armed forces character depletes the progress bar

	scripted_button = caudillo_decree_button

	immediate = {
		save_scope_as = caudillo_country_scope
	}

	complete = {
		ig:ig_armed_forces = {
			is_in_government = no
		}
		custom_tooltip = {
			text = caudillo_complete
			root.var:caudillo_var <= 0
		}
	}

	on_complete = {
		trigger_event = { id = caudillo.2 popup = yes }
		show_as_tooltip = {
			ig:ig_armed_forces = {
				remove_ideology = ideology_caudillismo
			}
			remove_modifier = age_of_caudillos_modifier
		}
	}

	fail = {
		ig:ig_armed_forces = {
			is_in_government = yes
		}
		custom_tooltip = {
			text = je_caudillo_goal_tt
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_fail = {
		trigger_event = { id = caudillo.3 popup = yes }
		show_as_tooltip = {
			add_modifier = {
				name = age_of_caudillos_modifier
				multiplier = 2
			}
		}
	}

	on_weekly_pulse = {
		effect = {
            calculate_caudillo_progress = yes
        }
	}

	on_monthly_pulse = {
		effect = {
			change_variable = { name = caudillo_var add = var:caudillo_next }
		}
		random_events = {
			# Pulse events affect the progress bar
			120 = 0 
			10 = caudillo.4
			25 = caudillo.6
		}
	}

	current_value = {
		value = root.var:caudillo_var
	}

	goal_add_value = {
		add = 1200
	}

	progressbar = yes

	weight = 100

	can_revolution_inherit = yes
	transferable = yes
	should_be_pinned_by_default = yes
}
﻿je_central_africa_expedition = { #Nile River

	group = je_group_expeditions

	on_monthly_pulse = {
		random_events = {
			70 = 0
			
			30 = expedition_events.20 #posts a notification
			15 = expedition_events.41 #malaria
			2 = expedition_events.110 #new leader (should normally occur organically if your leader dies)
			15 = expedition_events.70 #dysentery
			20 = expedition_events.30 #local guides
			20 = expedition_events.540 #rhino hunt
			10 = expedition_events.520 #pay more taxes
			20 = expedition_events.530 #lost mules
			10 = expedition_events.550 #beetle in ear
			10 = expedition_events.560 #commander vice
			15 = expedition_events.570 #study geography
			
			15 = expedition_events.130 #kidnapped ambassador
			5 = expedition_events.140 #leader's breakdown
			20 = expedition_events.150 #expedition thief
			10 = expedition_events.160 #cancelled expedition
			20 = expedition_events.90 #previous explorers
			20 = expedition_events.695 #lost foreign expedition
		}
	}
	
	immediate = {
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			save_scope_as = expedition_leader
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = expedition_low_peril_loc
				trigger = {
					var:expedition_peril < 4
				}
			}
			triggered_desc = {
				desc = expedition_medium_peril_loc
				trigger = {
					var:expedition_peril <= 5
				}
			}
			triggered_desc = {
				desc = expedition_high_peril_loc
				trigger = {
					var:expedition_peril >= 6
				}
			}
		}
	}
	
    fail = {
		OR = {
			custom_tooltip = {
				text = je_expedition_fail
				OR = {
					NOT = {
						has_variable = on_expedition
					}
					var:expedition_peril >= 8
				}
			}
			custom_tooltip = {
				text = expedition_cancelled_tt
				has_variable = no_extra_expenses_var
			}
		}
    }
	
	on_fail = {
		trigger_event = { id = expedition_events.512 }
		remove_variable = on_expedition
		remove_variable = central_africa_expedition_var
		set_variable = failed_central_africa_expedition_var
		remove_modifier = modifier_large_expedition_cost
		remove_modifier = expedition_extra_expenses_modifier
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	complete = {
		custom_tooltip = {
			text = je_expedition_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}
	
	on_complete = {
		trigger_event = { id = expedition_events.511 }
		remove_variable = on_expedition
		remove_variable = central_africa_expedition_var
		remove_modifier = modifier_large_expedition_cost
		remove_modifier = expedition_extra_expenses_modifier
		set_variable = central_africa_expedition_success_var #grand exhibition check
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	current_value = {
		value = var:expedition_progress
	}

	goal_add_value = {
		add = 8
	}
	
	progressbar = yes
	
    weight = 200
    transferable = no
    should_be_pinned_by_default = yes
}
﻿je_communism_1 = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		NOT = { has_variable = communism_1_done }
		OR = {
			has_technology_researched = socialism
			has_technology_researched = anarchism
		}
	}

	scripted_progress_bar = communism_1_progress_bar

	possible = {
		any_interest_group = {
			is_marginal = no
			OR = {
				law_stance = {
					law = law_type:law_council_republic
					value > neutral
				}
				any_scope_character = {
					OR = {
						has_role = politician
						has_role = agitator
					}
					OR = {
						has_ideology = ideology:ideology_communist
						has_ideology = ideology:ideology_vanguardist
						has_ideology = ideology:ideology_anarchist
					}
				}
			}
		}
	}

	immediate = {
		root = {
			save_scope_as = root_country
		}
		set_communism_vars = yes
		trigger_event = { id = communism.10 days = 1 popup = yes }
	}

	on_weekly_pulse = {
		effect = {
			calculate_communism_progress = yes
		}
	}

	on_monthly_pulse = {
		random_events = {
			200 = 0
			5 = communism.7
		}
		effect = {
			calculate_communism_progress = yes
		}
	}

	fail = {
		custom_tooltip = {
			text = communism_progress_bar_at_full_tt
			scope:journal_entry = {
				"scripted_bar_progress(communism_1_progress_bar)" >= 100
			}
		}
	}

	on_fail = {
		set_variable = communism_1_done
		trigger_event = { id = communism.1 popup = yes }
		custom_tooltip = communism_je_1_fail_tt
	}

	timeout = 1095

	on_timeout = {
		trigger_event = { id = communism.11 popup = yes }
		custom_tooltip = communism_je_1_complete_tt
	}

	should_be_pinned_by_default = yes
}

je_communism_2 = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_law = law_type:law_council_republic
				}
				change_variable = {
					name = je_communism_2_var
					add = 1
				}
			}
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		has_law = law_type:law_council_republic
		has_revolution = no
		has_any_secessionists_broken_out = no 
	}

	on_complete = {
		trigger_event = { id = communism.2 popup = yes }
	}

	current_value = {
		value = root.var:je_communism_2_var
	}

	goal_add_value = {
		add = 60
	}

	progressbar = yes
}

je_anarchy = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	complete = {
		has_law = law_type:law_anarchy
		average_sol >= 15 # if you change this, also change event option in communism.2
	}

	on_complete = {
		trigger_event = {
			id = communism.4
			popup = yes
		}
	}

	fail = {
		NOT = { has_law = law_type:law_council_republic }
	}
}

je_vanguard = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	complete = {
		# id you change this, also change options in communism.2
		any_interest_group = {
			leader = {
				OR = {
					has_ideology = ideology:ideology_vanguardist
					has_ideology = ideology:ideology_communist
					has_ideology = ideology:ideology_anarchist
				}
			}
			count >= 3
		}
		custom_tooltip = {
			text = vanguard_custom_tooltip
			NOT = {
				any_interest_group = {
					is_powerful = yes
					leader = {
						NOR = {
							has_ideology = ideology:ideology_vanguardist
							has_ideology = ideology:ideology_communist
							has_ideology = ideology:ideology_anarchist
						}
					}
				}
			}
		}
		has_law = law_type:law_single_party_state
	}

	on_complete = {
		trigger_event = { id = communism.5 popup = yes }
	}

	fail = {
		NOT = { has_law = law_type:law_council_republic }
	}

	on_weekly_pulse = {
		events = {
			communism.3
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = vanguard_instruction_status
				trigger = {
					always = yes
				}
			}
		}
	}
}

je_communist_welfare = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	complete = {
		# if you change this, also change event option in communism.2
		approaching_bureaucracy_shortage = no
		has_law = law_type:law_public_schools
		institution_investment_level = {
			institution = institution_schools
			value = 5
		}
		has_law = law_type:law_public_health_insurance
		institution_investment_level = {
			institution = institution_health_system
			value = 5
		}
		has_law = law_type:law_old_age_pension
		institution_investment_level = {
			institution = institution_social_security
			value = 5
		}
		has_law = law_type:law_worker_protections
		institution_investment_level = {
			institution = institution_workplace_safety
			value = 5
		}
	}

	on_complete = {
		trigger_event = {
			id = communism.6
			popup = yes
		}
	}

	fail = {
		NOT = { has_law = law_type:law_council_republic }
	}
}

je_5_year_plan = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_internal_affairs

	immediate = {
		root = {
			save_scope_as = five_year_plan_country
		}
	}

	complete = {
		OR = {
			has_law = law_type:law_command_economy
			has_law = law_type:law_cooperative_ownership
		}
		custom_tooltip = {
			text = custom_loc_five_year_plan_goal
				scope:journal_entry = {
				is_goal_complete = yes
			}
		}
		in_default = no
	}

	on_complete = {
		add_modifier = {
			name = five_year_plan_welfare_mod
			months = long_modifier_time
		}
	}

	current_value = {
		value = root.gdp
	}

	goal_add_value = {
		value = root.gdp
		multiply = 0.25
	}

	fail = {
		NOT = { has_law = law_type:law_council_republic }
	}

	progressbar = yes
}
﻿je_congo_expedition = {	

	group = je_group_expeditions

	on_monthly_pulse = {
		random_events = {
			70 = 0
			30 = expedition_events.20 #posts a notification
			30 = expedition_events.620 #boat repair
			40 = expedition_events.630 #white fog 
			30 = expedition_events.640 #crocodile attack
			40 = expedition_events.650 #rear column
			30 = expedition_events.660 #trading enclave
			40 = expedition_events.670 #lost in the forest 
			80 = expedition_events.680 #naming the falls
			30 = expedition_events.690 #trading gifts
			
			#Events shared with the Nile and Niger expeditions
			20 = expedition_events.30 #find local guides
			20 = expedition_events.40 #crewmember drowns
			10 = expedition_events.41 #malaria
			10 = expedition_events.70 #dysentery
			20 = expedition_events.50 #river attack
			20 = expedition_events.90 #previous expedition
			50 = expedition_events.120 #dr livingstone I presume
			15 = expedition_events.130 #kidnapped ambassador
			10 = expedition_events.140 #leader's breakdown
			15 = expedition_events.150 #expedition thief
			20 = expedition_events.160 #cancelled expedition
			10 = expedition_events.560 #commander vice
			30 = expedition_events.695 #lost foreign expedition
		}
	}
	
	immediate = {
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			save_scope_as = expedition_leader
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = expedition_low_peril_loc
				trigger = {
					var:expedition_peril < 4
				}
			}
			triggered_desc = {
				desc = expedition_medium_peril_loc
				trigger = {
					var:expedition_peril <= 5
				}
			}
			triggered_desc = {
				desc = expedition_high_peril_loc
				trigger = {
					var:expedition_peril >= 6
				}
			}
		}
	}
	
    fail = {
		OR = {
			custom_tooltip = {
				text = je_expedition_fail
				var:expedition_peril >= 8
			}
			custom_tooltip = {
				text = expedition_cancelled_tt
				has_variable = no_extra_expenses_var
			}
		}
    }
	
	on_fail = {
		trigger_event = { id = expedition_events.612 }
		remove_variable = on_expedition
		remove_variable = congo_river_expedition_var
		set_variable = failed_congo_river_var
		remove_modifier = modifier_large_expedition_cost
		remove_modifier = expedition_extra_expenses_modifier
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	complete = {
		custom_tooltip = {
			text = je_expedition_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}
	
	on_complete = {
		trigger_event = { id = expedition_events.611 }
		remove_variable = on_expedition
		remove_variable = congo_river_expedition_var
		remove_modifier = modifier_large_expedition_cost
		remove_modifier = expedition_extra_expenses_modifier
		set_variable = congo_river_expedition_success_var #grand exhibition check
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	current_value = {
		value = var:expedition_progress
	}

	goal_add_value = {
		add = 8
	}
	
	progressbar = yes
	
    weight = 200
    transferable = no
    should_be_pinned_by_default = yes
}
﻿je_free_state = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		has_variable = scramble_for_africa_complete
		has_law = law_type:law_monarchy #Check there is a Monarch
		NOT = { has_global_variable = free_state_created }
	}

	possible = {
		ruler ?= {
			OR = {
				has_trait = cruel
				has_trait = ambitious
			}
		}
		any_scope_state = {
			is_incorporated = no
			custom_tooltip = {
				text = in_africa_tt
				state_in_africa = yes
			}
			any_neighbouring_state = {
				is_incorporated = no
				custom_tooltip = {
					text = in_africa_tt
					state_in_africa = yes
				}
			}
		}
		has_law = law_type:law_colonial_exploitation
	}

	immediate = {
		custom_tooltip = { 
			text = free_state_immediate_tooltip
			trigger_event = { id = congo_free_state_events.1 popup = yes }
		}
		set_variable = {
			name = free_state_international_opinion
			value = 0
		}
		ruler = {
			set_variable = free_state_monarch
		}
		random_scope_state = {
			limit = {
				is_incorporated = no
				state_in_africa = yes
				any_neighbouring_state = {
					is_incorporated = no
					state_in_africa = yes
				}
			}
			save_scope_as = colonial_state
		}
	}

	complete = {
		OR = {
			scope:journal_entry = {
				is_goal_complete = yes
			}
			NOT = { has_law = law_type:law_monarchy }
			custom_tooltip = {
				text = free_state_monarch_dead_tooltip
				ruler = {
					NOT = {
						has_variable = free_state_monarch
					}
				}
			}	
		}
	}

	on_complete = {
		if = {
			limit = {
				exists = c:AFS
			}
			c:AFS = {
				remove_modifier = free_state_mort
			}
		}
		trigger_event = { id = congo_free_state_events.5 popup = yes }
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = { #check if the possible conditions are still true
					has_law = law_type:law_monarchy
					has_law = law_type:law_colonial_exploitation
					exists = c:AFS
					c:AFS = {
						is_subject_of = ROOT
					}
				}
				change_variable = {
					name = free_state_international_opinion
					add = 1
				}
			}
		}
		random_events = {
			100 = 0
			20 = congo_free_state_events.2 #rumours
			10 = congo_free_state_events.3 #people dying
			10 = congo_free_state_events.4 #newspaper article
			30 = congo_free_state_events.6 #report
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = free_state_status_known
				trigger = {
					var:free_state_international_opinion >= 90
				}
			}
			triggered_desc = {
				desc = free_state_status_suspected
				trigger = {
					var:free_state_international_opinion >= 45
				}
			}
			triggered_desc = {
				desc = free_state_status_new
				trigger = {
					var:free_state_international_opinion < 45
				}
			}
		}
	}
	
	invalid = {
		custom_tooltip = {
			text = free_state_journal_complete_tt
			OR = {
				AND = {
					NOT = {
						exists = c:AFS
					}
					has_variable = free_state_made
				}
				AND = {
					exists = c:AFS
					c:AFS = {
						NOT = { is_subject_of = ROOT }
					}
				}
			}
		}
		NOT = { has_law = law_type:law_colonial_exploitation }
	}

	weight = 200
	should_be_pinned_by_default = yes
	
	current_value = {
		value = root.var:free_state_international_opinion
	}

	goal_add_value = {
		add = 120 #10 years of monthly ticks
	}
	
	progressbar = yes

	transferable = no
}

﻿je_corn_laws = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		NOT = { has_variable = corn_laws_abolished }
		ig:ig_landowners = {
			is_marginal = no
		}
		OR = {
			has_export_priority_tariffs = g:grain
			has_law = law_type:law_isolationism
			has_law = law_type:law_mercantilism
		}
	}

	possible = {
		market_capital.market = {
			mg:grain = { 
				market_goods_pricier > 0.25 
			}
		}
		OR = {
			has_law = law_type:law_isolationism
			AND = {
				has_law = law_type:law_mercantilism
				has_export_priority_tariffs = g:grain
			}
		}
		ig:ig_landowners = {
			is_powerful = yes
			is_in_government = yes
		}
	}

	complete = {
		has_law = law_type:law_free_trade
	}

	on_complete = {
		set_variable = corn_laws_abolished
		trigger_event = { id = corn_laws.1 }
		show_as_tooltip = {
			if = {
				limit = {
					ig:ig_landowners = {
						is_in_government = yes
						leader = {
							NOT = { has_ideology = ideology:ideology_market_liberal }
						}
					}
				}
				ig:ig_landowners = {
					add_modifier = {
						name = repealed_corn_laws
						months = long_modifier_time
					}
				}
			}
			add_loyalists = {
				value = 0.1
				pop_type = laborers
			}
		}
	}

	invalid = {
		ig:ig_landowners = {
			is_marginal = yes
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = corn_laws.2
			10 = corn_laws.3
			10 = corn_laws.4
		}
	}

	weight = 100
	should_be_pinned_by_default = yes
}
﻿je_dual_monarchy = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content

	complete = {
		cu:hungarian = {
			NOT = { culture_is_discriminated_in = ROOT }
		}
	}

	on_complete = {
		trigger_event = {
			id = dual_monarchy.1
		}
	}

	fail = {
		cu:hungarian = {
			culture_secession_progress = {
				target = ROOT
				value > 0.5
			}
		}
	}

	on_fail = {
		set_variable = dual_monarchy_fail
		trigger_event = {
			id = dual_monarchy.1
		}
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = austria_hunary_invalid
				NOT = {
					any_scope_state = {
						state_region = {
							is_homeland = cu:hungarian
						}
					}
				}
			}
			NOT = {
				this = c:AUS
			}
		}
	}

	weight = 100
	should_be_pinned_by_default = yes
}
﻿je_consolidate_colonial_rule = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		calc_true_if = {
			amount >= 7
			country_or_subject_owns_entire_state_region = STATE_BURMA
			country_or_subject_owns_entire_state_region = STATE_KACHIN
			country_or_subject_owns_entire_state_region = STATE_SHAN_STATES
			country_or_subject_owns_entire_state_region = STATE_PEGU
			country_or_subject_owns_entire_state_region = STATE_SINDH
			country_or_subject_owns_entire_state_region = STATE_PUNJAB
			country_or_subject_owns_entire_state_region = STATE_KASHMIR
			country_or_subject_owns_entire_state_region = STATE_PASHTUNISTAN
			country_or_subject_owns_entire_state_region = STATE_BALUCHISTAN
			country_or_subject_owns_entire_state_region = STATE_HIMALAYAS
		}
	}

	on_complete = {
		trigger_event = { id = east_indies.1 }
		set_variable = consolidated_colonial_rule
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					NOT = {
						any_civil_war = {
							is_civil_war_type = secession
							civil_war_progress > 0.3
						}
					}
				}
				change_variable = {
					name = east_indies_revolt_var
					add = 1
				}
			}
		}
	}

	invalid = {
		has_variable = bic_collapse_var
	}

	current_value = {
		value = root.var:east_indies_revolt_var
	}

	goal_add_value = {
		add = 120
	}

	progressbar = yes

	timeout = 7300

	weight = 100
}

je_reform_indies = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_internal_affairs

	is_shown_when_inactive = {
		OR = {
			AND = {
				exists = c:BIC
				c:BIC = THIS
			}
			AND = {
				exists = c:DEI
				c:DEI = THIS
			}
		}
	}

	possible = {
		OR = {
			has_law = law_type:law_free_trade
			has_law = law_type:law_mercantilism
			NOT = { has_law = law_type:law_land_based_taxation }
			NOT = { has_law = law_type:law_serfdom }
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		OR = {
			has_law = law_type:law_free_trade
			has_law = law_type:law_mercantilism
		}
		NOT = { has_law = law_type:law_land_based_taxation }
		NOT = { has_law = law_type:law_serfdom }
		has_law = law_type:law_slavery_banned
	}

	on_complete = {
		trigger_event = { id = east_indies.2 }
		show_as_tooltip = {
			add_journal_entry = {
				type = je_ethical_policy
			}
		}
		set_variable = reformed_indies
	}

	invalid = {
		has_variable = bic_collapse_var
	}


	current_value = {
		value = root.gdp
	}

	goal_add_value = {
		value = root.gdp
		multiply = 0.5
	}

	progressbar = yes

	weight = 100
}

je_ethical_policy = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	group = je_group_internal_affairs

	complete = {
		literacy_rate > 0.5
		root.average_sol > 15
	}

	on_complete = {
		trigger_event = { id = east_indies.3 }
	}

	invalid = {
		has_variable = bic_collapse_var
	}

	weight = 100
}
﻿je_colonial_administration = {
	icon = "gfx/interface/icons/invention_icons/colonization.dds"
	
	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		country_is_in_africa = no
		OR = {
			has_interest_marker_in_region = sr:region_senegal
			has_interest_marker_in_region = sr:region_niger
			has_interest_marker_in_region = sr:region_ethiopia
			has_interest_marker_in_region = sr:region_zanj
			has_interest_marker_in_region = sr:region_southern_africa
			has_interest_marker_in_region = sr:region_congo
		}
	}

	possible = {
		any_scope_state = {
			state_is_in_africa = yes
		}
		has_technology_researched = civilizing_mission
	}

	immediate = {
		random_state_region = {
			limit = {
				region = sr:region_senegal
			}
			save_scope_as = senegal_region_scope
		}
		random_state_region = {
			limit = {
				region = sr:region_niger
			}
			save_scope_as = niger_region_scope
		}
		random_state_region = {
			limit = {
				region = sr:region_ethiopia
			}
			save_scope_as = ethiopia_region_scope
		}
		random_state_region = {
			limit = {
				region = sr:region_zanj
			}
			save_scope_as = zanj_region_scope
		}
		random_state_region = {
			limit = {
				region = sr:region_southern_africa
			}
			save_scope_as = southern_africa_region_scope
		}
		random_state_region = {
			limit = {
				region = sr:region_congo
			}
			save_scope_as = congo_region_scope
		}
	}
	
	# Establish Colonial Administration
	scripted_button = je_colonial_administration_button_senegal
	scripted_button = je_colonial_administration_button_niger
	scripted_button = je_colonial_administration_button_ethiopia
	scripted_button = je_colonial_administration_button_zanj
	scripted_button = je_colonial_administration_button_southern_africa
	scripted_button = je_colonial_administration_button_congo

	# Expand Colonial Administration
	scripted_button = je_colonial_administration_button_expand_senegal
	scripted_button = je_colonial_administration_button_expand_niger
	scripted_button = je_colonial_administration_button_expand_ethiopia
	scripted_button = je_colonial_administration_button_expand_zanj
	scripted_button = je_colonial_administration_button_expand_southern_africa
	scripted_button = je_colonial_administration_button_expand_congo

	weight = 100

	should_be_pinned_by_default = yes
}
﻿je_age_of_princes = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		can_form_nation = ETH
	}

	possible = {
		hidden_trigger = { always = yes }
	}

	complete = {
		c:ETH ?= THIS
	}

	on_complete = {
		trigger_event = { id = formation.4 popup = yes }
	}

	on_monthly_pulse = {
		random_events = {
			11 = 0
			1 = ethiopia.1
		}
	}

	weight = 100
	should_be_pinned_by_default = yes
}
﻿je_fascism_1 = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_internal_affairs

	is_shown_when_inactive = {
		NOT = { has_variable = completed_fascism_1_var }
		has_technology_researched = mass_propaganda
		NOT = { is_country_type = decentralized }
	}

	possible = {
		any_interest_group = {
			OR = {
				is_being_bolstered = yes
				is_in_government = yes
			}
			any_scope_character = {
				OR = {
					has_role = politician
					has_role = agitator
				}
				OR = {
					has_ideology = ideology:ideology_fascist
					has_ideology = ideology:ideology_integralist
				}
			}
		}
	}

	immediate = {
		random_interest_group = {
			limit = {
				OR = {
					is_being_bolstered = yes
					is_in_government = yes
				}
				any_scope_character = {
					OR = {
						has_role = politician
						has_role = agitator
					}
					OR = {
						has_ideology = ideology:ideology_fascist
						has_ideology = ideology:ideology_integralist
					}
				}
			}
			save_scope_as = fascist_ig
			set_variable = og_fascist_ig
		}
	}

	complete = {
		any_interest_group = {
            is_in_government = yes
            leader = {
				OR = {
					has_ideology = ideology:ideology_fascist
					has_ideology = ideology:ideology_integralist
				}
            }
        }
		is_at_war = no
        institution_investment_level = {
            institution = institution_police
            value >= 3
        }
        OR = {
            has_law = law_type:law_dedicated_police
            has_law = law_type:law_militarized_police
        }
        any_scope_character = {
            has_role = general
            is_busy = no
            is_ruler = no
            count >= 2
        }
    }

	on_complete = {
		set_variable = {
			name = completed_fascism_1_var
		}
		trigger_event = { id = fascism_events.1 }
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = fascism_events.2
		}
	}

	invalid = {
		# pelly_says = no
		NOT = {
			any_interest_group = {
				custom_tooltip = {
					text = fascism_1_tt
					any_scope_character = {
						OR = {
							has_role = politician
							has_role = agitator
						}
						OR = {
							has_ideology = ideology:ideology_fascist
							has_ideology = ideology:ideology_integralist
						}
					}
				}
				OR = {
					is_being_bolstered = yes
					is_in_government = yes
				}
			}
		}
	}

	weight = 10000
	can_deactivate = no
}

je_fascism_2 = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_internal_affairs

	immediate = {
		random_interest_group = {
			limit = {
				OR = {
					is_being_bolstered = yes
					is_in_government = yes
				}
				leader = {
					OR = {
						has_ideology = ideology:ideology_fascist
						has_ideology = ideology:ideology_integralist
					}
				}
			}
			save_scope_as = fascist_ig
			set_variable = og_fascist_ig
		}
	}

	complete = {
		OR = {
			has_law = law_type:law_dedicated_police
			has_law = law_type:law_militarized_police
		}
		institution_investment_level = {
			institution = institution_police
			value >= 3
		}
		OR = {
			has_law = law_type:law_national_guard
			has_law = law_type:law_secret_police
		}
		OR = {
			has_law = law_type:law_autocracy
			has_law = law_type:law_oligarchy
			has_law = law_type:law_single_party_state
		}
		custom_tooltip = {
			text = fascism_2_tt
			trigger_if = {
				limit = {
					any_interest_group = {
						leader = {
							OR = {
								has_ideology = ideology:ideology_vanguardist
								has_ideology = ideology:ideology_communist
								has_ideology = ideology:ideology_anarchist
								has_ideology = ideology:ideology_radical
							}
						}
					}
				}
				any_interest_group = {
					filter = {
						leader = {
							OR = {
								has_ideology = ideology:ideology_vanguardist
								has_ideology = ideology:ideology_communist
								has_ideology = ideology:ideology_anarchist
								has_ideology = ideology:ideology_radical
							}
						}
					}
					OR = {
						is_marginal = yes
						is_being_suppressed = yes
					}
					count = all
				}
			}
		}
	}
	on_complete = {
		trigger_event = { id = fascism_events.3 }
	}

	on_monthly_pulse = {
		random_events = {
			200 = 0
			10 = fascism_events.4
		}
	}

	invalid = {
		NOT = {
			any_interest_group = {
				custom_tooltip = {
					text = fascism_1_tt
					leader = {
						OR = {
							has_ideology = ideology:ideology_fascist
							has_ideology = ideology:ideology_integralist
						}
					}
				}
				OR = {
					is_being_bolstered = yes
					is_in_government = yes
				}
			}
		}
	}

	weight = 10000
	can_deactivate = no
}

je_modernization_program = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	group = je_group_internal_affairs

	immediate = {
		random_interest_group = {
			limit = {
				has_variable = og_fascist_ig
			}
			save_scope_as = fascist_ig
			leader = {
				save_scope_as = fascist_leader
			}
		}
	}

	complete = {
		NOT = { has_law = law_type:law_free_trade }
		custom_tooltip = {
			text = je_modernization_program_tt
			capital = {
				infrastructure >= 150
			}
		}
		any_scope_state = { 
			filter = {
				is_incorporated = yes
			}
			any_scope_building = {
				is_building_type = building_railway
				level >= 2
			}
			percent = 1
		}
		any_scope_state = {
			is_incorporated = yes
			has_building = building_port
			count >= 2
		}
	}

	on_complete = {
		trigger_event = { id = fascism_events.5 }
	}

	on_monthly_pulse = {
	}

	invalid = {
		NOT = {
			any_interest_group = {
				custom_tooltip = {
					text = fascism_1_tt
					leader = {
						OR = {
							has_ideology = ideology:ideology_fascist
							has_ideology = ideology:ideology_integralist
						}
					}
				}
				OR = {
					is_being_bolstered = yes
					is_in_government = yes
				}
			}
		}
	}

	weight = 10000
	can_deactivate = no
}

je_ethno_nationalist = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_internal_affairs

	is_shown_when_inactive = {
		NOT = { has_variable = completed_ethno_nationalism_var }
		any_interest_group = {
			any_scope_character = {
				OR = {
					has_role = politician
					has_role = agitator
				}
				OR = {
					has_ideology = ideology:ideology_fascist
					has_ideology = ideology:ideology_ethno_nationalist
				}
			}
		}
		NOT = { is_country_type = unrecognized }
		NOT = { is_country_type = decentralized }
	}

	possible = {
		any_interest_group = {
			OR = {
				is_being_bolstered = yes
				is_in_government = yes
			}	
			any_scope_character = {
				OR = {
					has_role = politician
					has_role = agitator
				}
				OR = {
					has_ideology = ideology:ideology_fascist
					has_ideology = ideology:ideology_ethno_nationalist
				}
			}
		}
	}

	complete = {
		has_law = law_type:law_ethnostate
		OR = {
			has_law = law_type:law_migration_controls
			has_law = law_type:law_closed_borders
		}
		custom_tooltip = {
			text = je_ethno_nationalist_tt
			NOT = {
				any_state = {
					is_homeland_of_country_cultures = ROOT
					NOT = { owner = ROOT }
				}
			}
		}
	}

	on_complete = {
		set_variable = {
			name = completed_ethno_nationalism_var
		}
		trigger_event = { id = fascism_events.6 }
	}

	invalid = {
		NOT = {
			any_interest_group = {
				custom_tooltip = {
					text = ethnonationalist_tt
					leader = {
						has_ideology = ideology:ideology_ethno_nationalist
					}
				}
				OR = {
					is_being_bolstered = yes
					is_in_government = yes
				}
			}
		}
	}

	weight = 10000
	can_deactivate = no
}

﻿je_schleswig_holstein_question = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		hidden_trigger = { NOT = { has_global_variable = schleswig_holstein_question_solved } }		
		OR = {
			country_has_primary_culture = cu:north_german
			country_has_primary_culture = cu:south_german
		}
	}

	possible = {
		hidden_trigger = { NOT = { has_global_variable = schleswig_holstein_question_solved } }			
		OR = {
			country_has_primary_culture = cu:north_german
			country_has_primary_culture = cu:south_german
		}			
	}

	complete = {
		trigger_if = {
			limit = {
				OR = {
					c:HOL ?= this
					c:SCH ?= this
				}
			}
			is_subject = no
		}
		trigger_if = {
			limit = {
				NOT = { c:HOL ?= this }
				NOT = { c:SCH ?= this }
				exists = c:DEN
			}
			custom_tooltip = {
				text = je_schleswig_holstein_question_state_ownership_desc
				any_scope_state = { state_region = s:STATE_SCHLESWIG_HOLSTEIN }
				s:STATE_SCHLESWIG_HOLSTEIN = {
					NOT = {
						any_scope_state = {
							OR = {
								NOT = {
									owner = {
										OR = {
											country_has_primary_culture = cu:north_german
											country_has_primary_culture = cu:south_german
										}
									}
								}
								owner = {
									is_subject_of = c:DEN
								}
							}
						}
					}
				}
			}
		}
		trigger_if = {
			limit = {
				c:LUB ?= this
			}
			country_or_subject_owns_entire_state_region = STATE_SCHLESWIG_HOLSTEIN
		}
	}
	
	fail = {
		custom_tooltip = {
			has_global_variable = schleswig_holstein_question_solved
			text = je_schleswig_holstein_question_solved_fail_trigger_desc
		}
		NOT = { has_modifier = schleswig_holstein_question_solver }
	}	

	on_complete = {
		add_modifier = {
			name = schleswig_holstein_question_solver
			months = long_modifier_time
		}	
		hidden_effect = { set_global_variable = schleswig_holstein_question_solved }		
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = { 
				desc = je_schleswig_holstein_question_status
			}
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes
}

je_german_unification_idea = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		OR = {
			country_has_primary_culture = cu:north_german
			country_has_primary_culture = cu:south_german
		}
	}

	possible = {
		OR = {
			country_has_primary_culture = cu:north_german
			country_has_primary_culture = cu:south_german
		}	
	}
 
	complete = {		
		any_country = {
			filter = {
				OR = {
					country_has_primary_culture = cu:north_german
					country_has_primary_culture = cu:south_german				
				}
			}
			has_technology_researched = nationalism	
			percent >= 0.75
		}
	}

	on_complete = {
		hidden_effect = {
			if = {
				limit = {
					any_country = { 
						country_rank >= rank_value:great_power 
						OR = {
							AND = {
								country_has_primary_culture = cu:north_german
								root = { country_has_primary_culture = cu:north_german }
							}						
							AND = {
								country_has_primary_culture = cu:south_german
								root = { country_has_primary_culture = cu:south_german }
							}						
						}
					}			
				}			
				random_country = {
					limit = { 
						country_rank >= rank_value:great_power 
						OR = {
							AND = {
								country_has_primary_culture = cu:north_german
								root = { country_has_primary_culture = cu:north_german }
							}						
							AND = {
								country_has_primary_culture = cu:south_german
								root = { country_has_primary_culture = cu:south_german }
							}						
						}					
					}
					save_scope_as = german_unifier_candidate
				}				
			}
			else_if = {
				limit = {
					any_country = { 
						country_rank >= rank_value:great_power 
						OR = {
							country_has_primary_culture = cu:north_german
							country_has_primary_culture = cu:south_german					
						}
					}			
				}			
				random_country = {
					limit = { 
						country_rank >= rank_value:great_power 
						OR = {
							country_has_primary_culture = cu:north_german					
							country_has_primary_culture = cu:south_german						
						}					
					}
					save_scope_as = german_unifier_candidate
				}				
			}
			else_if = {
				limit = {
					any_country = { 
						country_rank >= rank_value:major_power 
						OR = {
							AND = {
								country_has_primary_culture = cu:north_german
								root = { country_has_primary_culture = cu:north_german }
							}						
							AND = {
								country_has_primary_culture = cu:south_german
								root = { country_has_primary_culture = cu:south_german }
							}						
						}
					}			
				}			
				random_country = {
					limit = { 
						country_rank >= rank_value:major_power 
						OR = {
							AND = {
								country_has_primary_culture = cu:north_german
								root = { country_has_primary_culture = cu:north_german }
							}						
							AND = {
								country_has_primary_culture = cu:south_german
								root = { country_has_primary_culture = cu:south_german }
							}						
						}					
					}
					save_scope_as = german_unifier_candidate
				}				
			}	
			else_if = {
				limit = {
					any_country = { 
						country_rank >= rank_value:major_power 
						OR = {
							country_has_primary_culture = cu:north_german
							country_has_primary_culture = cu:south_german					
						}
					}			
				}			
				random_country = {
					limit = { 
						country_rank >= rank_value:major_power 
						OR = {
							country_has_primary_culture = cu:north_german					
							country_has_primary_culture = cu:south_german						
						}					
					}
					save_scope_as = german_unifier_candidate
				}				
			}			
		}	
		
		hidden_effect = { set_variable = je_german_unification_idea }
		trigger_event = { id = german_unification.5 } # German National Identity
	}

	status_desc = {
		first_valid = {
			triggered_desc = { 
				desc = je_german_unification_idea_status
			}
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes
}

je_north_german_unification = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_historical_content
	
	complete = {
		custom_tooltip = {
			has_global_variable = schleswig_holstein_question_solved
			text = je_schleswig_holstein_question_solved_trigger_desc
		}
		hidden_trigger = {
			has_variable = je_unification_progress
		}	
		has_technology_researched = nationalism
		is_unification_candidate = GER
		custom_tooltip = {
			text = je_german_unification_sole_candidate_trigger_desc
			NOT = {
				any_country = {
					NOT = { this = root }				
					is_unification_candidate = GER
				}
			}	
		}				
	}

	on_monthly_pulse = {
		events = {
			german_unification.3 # Bismarck
		}
	
		effect = {
			if = { 
				limit = { NOT = { has_variable = je_unification_progress } } 
				set_variable = je_unification_progress
			}
		}	
	}

	on_complete = {
		trigger_event = { id = german_unification.1 } # North German Confederation
		remove_variable = je_unification_progress
	}

	status_desc = {
		first_valid = {
			triggered_desc = { 
				desc = je_north_german_status
			}
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes
}

je_south_german_unification = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			has_global_variable = schleswig_holstein_question_solved
			text = je_schleswig_holstein_question_solved_trigger_desc
		}	
		hidden_trigger = {
			has_variable = je_unification_progress
		}	
		has_technology_researched = nationalism
		is_unification_candidate = GER
		custom_tooltip = {
			text = je_german_unification_sole_candidate_trigger_desc
			NOT = {
				any_country = {
					NOT = { this = root }				
					is_unification_candidate = GER
				}
			}	
		}	
	}

	on_monthly_pulse = {
		effect = {
			if = { 
				limit = { NOT = { has_variable = je_unification_progress } } 
				set_variable = je_unification_progress
			}
		}
	}

	on_complete = {
		trigger_event = { id = german_unification.1 } # South German Confederation
		remove_variable = je_unification_progress
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_south_german_status
				trigger = {
					always = yes
				}
			}
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes
}

je_german_unification = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		has_variable = je_german_confederate_unifier
	}

	possible = {
		hidden_trigger = { has_variable = je_german_confederate_unifier }
		country_rank >= rank_value:major_power
		has_technology_researched = pan-nationalism
		is_subject = no
	}

	complete = {
		custom_tooltip = {
			c:GER ?= this
			text = je_german_unification_complete_trigger_desc
		}	
	}

	on_complete = {
		show_as_tooltip = {
			trigger_event = { id = german_unification.4 popup = yes } # German Unification
		}
		remove_variable = je_unification_progress
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_german_status
			}
		}
	}

	invalid = {
		OR = {
			country_has_primary_culture = cu:hungarian
			c:HRE ?= THIS
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes
}

﻿je_greek_nationalism = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		country_has_primary_culture = cu:greek
	}

	possible = {
		has_technology_researched = nationalism
		custom_tooltip = {
			text = greek_state_possible_tt
			any_scope_state = {
				state_region = {
					is_homeland = cu:greek
				}
				count >= 3
			}
		}
		is_subject = no
	}

	immediate = {
		trigger_event = { id = greece.1 }
	}

	complete = {
		custom_tooltip = {
			text = greek_state_complete_tt
			any_scope_state = {
				state_region = {
					is_homeland = cu:greek
				}
				count >= 7
			}
		}
	}

	on_complete = {
		trigger_event = { id = greece.2 }
	}

	weight = 20
}
﻿je_risorgimento = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		OR = {
			country_has_primary_culture = cu:north_italian
			country_has_primary_culture = cu:south_italian
		}
		NOR = {
			is_revolutionary = yes
			is_secessionist = yes
		}
	}	
	
	scripted_button = je_risorgimento_austrian_radicals_button
	scripted_button = je_risorgimento_italian_radicals_button

	immediate = {
		set_variable = { name = italian_states_radicals_total_bar value = 0 }
		cu:north_italian = {
			save_scope_as = north_italian_scope
		}
		cu:south_italian = {
			save_scope_as = south_italian_scope
		}
		trigger_event = { id = italian_unification.10 popup = yes }
	}
		
	possible = {
		has_technology_researched = nationalism
		NOR = {
			country_tier = hegemony
			country_tier = empire
		}
	}

	complete = {
		hidden_trigger = {
			has_variable = je_unification_progress
		}
		custom_tooltip = {
			text = is_italy_tt
			c:ITA ?= this
		}
		
	}

	on_weekly_pulse = {
		events = {
			italian_unification.4
		}
		effect = {
			do_risorgimento_math = yes
		}
	}

	on_monthly_pulse = {
		random_events = {
			180 = 0
			20 = italian_unification.2
		}
		effect = {
			do_risorgimento_math = yes
			if = { 
				limit = { NOT = { has_variable = je_unification_progress } } 
				set_variable = je_unification_progress
			}
		}
	}

	on_complete = {
		show_as_tooltip = {
			trigger_event = { id = italian_unification.1 popup = yes }
		}
	}

	current_value = {
		value = root.var:italian_states_radicals_total_bar
	}

	goal_add_value = {
		add = 25
	}

	progressbar = yes

	weight = 100

	should_be_pinned_by_default = yes
}
﻿je_land_reclamation = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"
	
	group = je_group_internal_affairs

	on_yearly_pulse = {
		random_events = {
			4 = 0
			1 = land_reclamation.1
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		remove_modifier = modifier_reclaiming_land
		show_as_tooltip = {
			add_modifier = { # prestige
				name = land_reclamation_complete
				months = long_modifier_time
			}
		}
	}

	fail = {
		OR = {
			NOT = { owns_entire_state_region = STATE_FRIESLAND }
			NOT = { owns_entire_state_region = STATE_HOLLAND }
		}
	}

	on_fail = {
		remove_modifier = modifier_reclaiming_land
		remove_variable = dutch_land_reclaimer
	}

	current_value = {
		value = global_var:land_reclamation_global
	}

	goal_add_value = { # if you change this, update the thresholds in the event
		add = 10
	}

	progressbar = yes

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = land_reclamation_no_tech
				trigger = {
					NOT = { has_technology_researched = concrete_dockyards }
				}
			}
			triggered_desc = {
				desc = land_reclamation_tech
				trigger = {
					has_technology_researched = concrete_dockyards
				}
			}
		}
	}

	weight = 10
	should_be_pinned_by_default = yes
}
﻿ je_dreadnoughts = {
 	icon = "gfx/interface/icons/event_icons/event_military.dds"

   group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = ironclad_tech
 		navy_size >= 10
 	}

 	possible = {
 		has_technology_researched = dreadnought
 		navy_size >= 30
 	}

 	complete = {
 		is_at_war = yes
        country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_dreadnought  
            value >= 0.2  
        }
 		# for these JE's we would want this to be true for X months, but excluding that for the sake of readability
        any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
               commander_military_formation = {
                   formation_navy_unit_type_fraction = {  
                       target = unit_type:combat_unit_type_dreadnought  
                       value >= 0.2  
                   }
               }
            }
			percent >= 0.25
        }
 	}

 	on_complete = {
 		trigger_event = { id = naval_tech_events.1 }
 	}

 	timeout = 3650
 }

 je_destroyers = {
 	icon = "gfx/interface/icons/event_icons/event_military.dds"

   group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = monitor_tech
 		has_technology_researched = ironclad_tech
 		navy_size >= 10
 	}

 	possible = {
 		has_technology_researched = destroyer
 		navy_size >= 30
 	}

 	complete = {
 		is_at_war = yes
 		country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_destroyer
            value >= 0.2  
        }
 		# for these JE's we would want this to be true for X months, but excluding that for the sake of readability
 		any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
               commander_military_formation = {
                   formation_navy_unit_type_fraction = {  
                       target = unit_type:combat_unit_type_destroyer  
                       value >= 0.2  
                   }
               }
            }
			percent >= 0.25
        }
 	}

 	on_complete = {
 		trigger_event = { id = naval_tech_events.2 }
 	}

 	timeout = 3650
 }

 je_battleships = {
 	icon = "gfx/interface/icons/event_icons/event_military.dds"

   group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = dreadnought
 		navy_size >= 10
 	}

 	possible = {
 		has_technology_researched = battleship_tech
 		navy_size >= 30
 	}

 	complete = {
 		is_at_war = yes
 		country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_battleship
            value >= 0.2  
        }
 		# for these JE's we would want this to be true for X months, but excluding that for the sake of readability
 		any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
               commander_military_formation = {
                   formation_navy_unit_type_fraction = {  
                       target = unit_type:combat_unit_type_battleship  
                       value >= 0.2  
                   }
               }
            }
			percent >= 0.25
        }
 	}

 	on_complete = {
 		trigger_event = { id = naval_tech_events.3 }
 	}

 	timeout = 3650
 }

﻿# Path to Liberalism
je_liberalism_1 = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
   group = je_group_internal_affairs

	is_shown_when_inactive = {
		NOT = { has_variable = liberalism_1_done }
		has_technology_researched = democracy
		has_technology_researched = international_trade
	}

	possible = {
		any_interest_group = {
			OR = {
				is_being_bolstered = yes
				is_in_government = yes
			}
			OR = {
				trigger_if = {
					limit = {
						owner = {
							has_technology_researched = feminism
						}
					}
					has_ideology = ideology:ideology_liberal_modern
				}
				trigger_else = {
					has_ideology = ideology:ideology_liberal
				}
				any_scope_character = {
					OR = {
						has_role = politician
						has_role = agitator
					}
					OR = {
						has_ideology = ideology:ideology_radical
						has_ideology = ideology:ideology_market_liberal
						has_ideology = ideology:ideology_humanitarian
						has_ideology = ideology:ideology_humanitarian_royalist
						has_ideology = ideology:ideology_feminist
					}
				}
			}
		}
	}

	complete = {
		OR = {
			has_law = law_type:law_census_voting
			has_law = law_type:law_universal_suffrage
		}

		government_legitimacy >= 50
		any_interest_group = {
			is_in_government = yes
			OR = {
				has_ideology = ideology:ideology_liberal
				has_ideology = ideology:ideology_liberal_modern
				leader = { has_ideology = ideology:ideology_radical }
				leader = { has_ideology = ideology:ideology_market_liberal }
			}
		}
		is_at_war = no
		NOT = {
			any_interest_group = {
				is_insurrectionary = yes
			}
		}
	}
	
	on_complete = {
		set_variable = liberalism_1_done
		trigger_event = { id = liberalism.1 }
	}
	
	weight = 10000
}

# Freedom of Trade
je_liberalism_2 = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"
	
	group = je_group_internal_affairs

	complete = {
		has_law = law_type:law_free_trade
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	current_value = {
		value = root.num_trade_routes
	}

	goal_add_value = {
		value = root.num_trade_routes
		multiply = 0.25
	}
	
	on_complete = {
		trigger_event = { id = liberalism.2 }
	}

	progressbar = yes
	
	weight = 5000
}

# Freedom of Thought
je_liberalism_3 = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	group = je_group_internal_affairs

	complete = {
		OR = {
			has_law = law_type:law_right_of_assembly
			has_law = law_type:law_protected_speech
		}
		OR = {
			has_law = law_type:law_freedom_of_conscience
			has_law = law_type:law_total_separation
		}
		any_scope_building = {
			is_building_type = building_university
			level >= 3
			occupancy > 0.9
		}
		any_scope_building = {
			is_building_type = building_arts_academy
			level >= 3
			occupancy > 0.9
		}
	}
	
	on_complete = {
		trigger_event = { id = liberalism.3 }
	}
	
	weight = 5000
}

# The New Colossus
je_liberalism_4 = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_internal_affairs

	complete = {
		OR = {
			has_law = law_type:law_freedom_of_conscience
			has_law = law_type:law_total_separation
		}
		has_law = law_type:law_slavery_banned
		has_law = law_type:law_multicultural
		has_law = law_type:law_no_migration_controls
		average_sol >= 12
	}
	
	on_complete = {
		trigger_event = { id = liberalism.4 }
	}
	
	weight = 5000
}
﻿je_trans_siberian_railway = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_global_variable = trans_siberian_done }
		owns_entire_state_region = STATE_MOSCOW
		any_state = {
			filter = {
				OR = {
					region = sr:region_east_siberia
					region = sr:region_west_siberia
				}
			}
			percent > 0.8
			owner = ROOT
		}
	}

	possible = {
		has_technology_researched = railways
	}

	complete = {
		any_scope_state = {
			filter = {
				OR = {
					state_region = s:STATE_MOSCOW
					state_region = s:STATE_YAROSLAVL
					state_region = s:STATE_NIZHNY_NOVGOROD
					state_region = s:STATE_CHUVASHIA
					state_region = s:STATE_KAZAN
					state_region = s:STATE_UFA
					state_region = s:STATE_CHELYABINSK
					state_region = s:STATE_URAL
					state_region = s:STATE_TOBOLSK
					state_region = s:STATE_TOMSK
					state_region = s:STATE_KRASNOYARSK
					state_region = s:STATE_IRKUTSK
					state_region = s:STATE_BURYATIA
					state_region = s:STATE_TRANS_BAIKAL
				}
			}
			has_building = building_railway
			percent = 1
		}
		OR = {
			AND = {
				any_scope_state = {
					state_region = s:STATE_YAKUTSK
					has_building = building_railway
				}
				any_scope_state = {
					state_region = s:STATE_OKHOTSK
					has_building = building_railway
				}
			}
			AND = {
				any_scope_state = {
					state_region = s:STATE_AMUR
					has_building = building_railway
				}
				any_scope_state = {
					state_region = s:STATE_OUTER_MANCHURIA
					has_building = building_railway
				}
			}
		}
	}

	on_complete = {
		set_global_variable = trans_siberian_done
		trigger_event = { id = major_railways.1 }
	}

	weight = 50
}

je_trans_continental_railway = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_global_variable = trans_continental_done }
		owns_entire_state_region = STATE_NEW_YORK
		any_scope_state = {
			state_region = s:STATE_NEBRASKA
		}
	}

	possible = {
		has_technology_researched = railways
		owns_entire_state_region = STATE_NEBRASKA
		owns_entire_state_region = STATE_CALIFORNIA
	}

	complete = {
		any_scope_state = {
			state_region = s:STATE_NEBRASKA
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_WYOMING
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_UTAH
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_NEVADA
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_CALIFORNIA
			has_building = building_railway
		}
	}

	on_complete = {
		set_global_variable = trans_continental_done
		trigger_event = { id = major_railways.2 }
	}

	weight = 50
}

je_canada_pacific_railway = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_global_variable = canada_pacific_done }
		OR = {
			any_scope_state = {
				state_region = s:STATE_QUEBEC
			}
			any_scope_state = {
				state_region = s:STATE_BRITISH_COLUMBIA
			}
			any_scope_state = {
				state_region = s:STATE_ONTARIO
			}
			any_scope_state = {
				state_region = s:STATE_ALBERTA
			}
			any_scope_state = {
				state_region = s:STATE_SASKATCHEWAN
			}
			any_scope_state = {
				state_region = s:STATE_MANITOBA
			}
		}
	}

	possible = {
		has_technology_researched = railways
		any_scope_state = {
			state_region = s:STATE_QUEBEC
		}
		any_scope_state = {
			state_region = s:STATE_BRITISH_COLUMBIA
		}
		any_scope_state = {
			state_region = s:STATE_ONTARIO
		}
		any_scope_state = {
			state_region = s:STATE_ALBERTA
		}
		any_scope_state = {
			state_region = s:STATE_SASKATCHEWAN
		}
		any_scope_state = {
			state_region = s:STATE_MANITOBA
		}
	}

	complete = {
		any_scope_state = {
			state_region = s:STATE_QUEBEC
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_BRITISH_COLUMBIA
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_ONTARIO
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_ALBERTA
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_SASKATCHEWAN
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_MANITOBA
			has_building = building_railway
		}
	}
	
	on_complete = {
		set_global_variable = canada_pacific_done
		trigger_event = { id = major_railways.3 }
	}
	
	weight = 50
}
﻿je_manifest_destiny_mexico = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_historical_content
	
	# note that if you change this, also update the decision
	complete = {
		owns_entire_state_region = STATE_CALIFORNIA
		owns_entire_state_region = STATE_NEVADA
		owns_entire_state_region = STATE_UTAH
		owns_entire_state_region = STATE_ARIZONA
		owns_entire_state_region = STATE_NEW_MEXICO
		owns_entire_state_region = STATE_TEXAS
	}

	on_complete = {
		trigger_event = { id = manifest_destiny.1 }
	}

	weight = 100
	should_be_pinned_by_default = yes
}

je_manifest_destiny_frontier_wars = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"
	
	group = je_group_historical_content
	
	# note that if you change this, also update the decision
	complete = {
		owns_entire_state_region = STATE_MONTANA
		owns_entire_state_region = STATE_WYOMING
		owns_entire_state_region = STATE_COLORADO
		owns_entire_state_region = STATE_NORTH_DAKOTA
		owns_entire_state_region = STATE_SOUTH_DAKOTA
		owns_entire_state_region = STATE_NEBRASKA
		owns_entire_state_region = STATE_KANSAS
	}
	
	on_complete = {
		trigger_event = { id = manifest_destiny.2 }
	}

	on_monthly_pulse = {
		random_events = {
			10 = 0
			1 = manifest_destiny.3
		}
	}
	
	weight = 100
	
	transferable = no
	should_be_pinned_by_default = yes
}
﻿je_terakoya = {
	icon = "gfx/interface/icons/institution_icons/schools.dds"
	
	group = je_group_historical_content

	modifiers_while_active = {
		modifier_jap_terakoya
	}

	complete = {
		institution_investment_level = {
			institution = institution_schools
			value >= 3
		}
	}

	on_complete = {
		add_modifier = {
			name = modifier_legacy_of_terakoya
			months = long_modifier_time
			is_decaying = yes
		}
	}

	weight = 100
	should_be_pinned_by_default = yes
}

je_meiji_restoration = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		exists = c:JAP
		c:JAP = ROOT
		NOT = { has_variable = meiji_restoration_complete }
		has_law = law_type:law_monarchy
	}

	possible = {
		has_law = law_type:law_monarchy
		ig:ig_landowners = {
			is_in_government = no
		}
		OR = {
			government_legitimacy >= 50
			ig:ig_landowners = { is_marginal = yes }
			has_revolution = yes						
		}
	}

	immediate = {
		set_variable = {
			name = shogunate_var
			value = 0
		}
	}

	is_progressing = {
		meiji_completion_trigger = yes
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					meiji_completion_trigger = yes
				}
				change_variable = {
					name = shogunate_var
					add = 1
				}
			}
		}
	}

	complete = {
		# If-else clause to avoid errors because of missing variable before JE activates
		trigger_if = {
			limit = { exists = var:shogunate_var }
			OR = {
				custom_tooltip = {
					text = defeat_shogunate_civil_war_tt
					scope:journal_entry = { is_goal_complete = yes }
				}
				AND = {
					scope:journal_entry = { is_goal_complete = yes }
					meiji_completion_trigger = yes
				}	
			}
		}
		trigger_else = {
			custom_tooltip = je_meiji_restoration_goal
			OR = {
				custom_tooltip = defeat_shogunate_civil_war_tt
				meiji_completion_trigger = yes	
			}
		}
	}

	on_complete = {
		set_variable = meiji_restoration_complete
		if = {
			limit = { has_modifier = shogun_ig_forced_to_open_market }
			remove_modifier = shogun_ig_forced_to_open_market
		}			
		trigger_event = {
			id = meiji.1
		}
	}
	
	on_fail = {
		if = {
			limit = { has_modifier = shogun_ig_forced_to_open_market }
			remove_modifier = shogun_ig_forced_to_open_market
		}
		if = {
			limit = { has_law = law_type:law_monarchy }		
			add_modifier = {
				name = honorable_restoration_failed
				months = very_long_modifier_time
				is_decaying = yes
			}
		}
	}

	fail = {
		OR = {
			ig:ig_landowners = {
				is_in_government = yes
			}
			NOT = { has_law = law_type:law_monarchy }			
		}
	}

	current_value = {
		value = root.var:shogunate_var
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 10000
	should_be_pinned_by_default = yes
}


je_meiji_main = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	group = je_group_historical_content

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		set_variable = meiji_reforms_complete_var
		trigger_event = {
			id = meiji.2
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = meiji.4
			10 = meiji.5
			10 = meiji.6
		}
	}

	current_value = {
		value = var:meiji_var
	}

	goal_add_value = {
		add = 3
	}

	progressbar = yes

	weight = 10000
	should_be_pinned_by_default = yes
}

je_meiji_economy = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_historical_content

	complete = {
		in_default = no
		any_scope_state = {
			filter = {
				is_incorporated = yes
			}
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 5
			}
			has_building = building_railway
			percent > 0.7
		}
	}

	on_complete = {
		change_variable = {
			name = meiji_var
			add = 1
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = meiji.7
			10 = meiji.8
		}
	}

	transferable = no

	weight = 5000
}

je_meiji_army = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_historical_content

	complete = {
		NOT = { has_law = law_type:law_serfdom }
		ig:ig_armed_forces = {
			is_in_government = no
		}
		has_technology_researched = napoleonic_warfare
		NOR = {
			any_scope_building = {
				is_building_type = building_barracks
				has_active_production_method = pm_no_organization
			}
			any_military_formation = {
				filter = {
					is_army = yes
				}
				any_combat_unit = {
					has_unit_type = unit_type:combat_unit_type_irregular_infantry
				}
				percent >= 0.25
			}
		}
	}

	on_complete = {
		change_variable = {
			name = meiji_var
			add = 1
		}
		trigger_event = {
			id = meiji.3
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = meiji.9
			10 = meiji.10
		}
	}

	transferable = no

	weight = 5000
}

je_meiji_diplomacy = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"
	
	group = je_group_historical_content

	complete = {
		NOT = { has_law = law_type:law_isolationism }
		NOT = { has_law = law_type:law_traditionalism }
		NOT = { has_law = law_type:law_closed_borders }
		is_subject = no
	}

	on_complete = {
		change_variable = {
			name = meiji_var
			add = 1
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = meiji.11
			10 = meiji.12
		}
	}

	weight = 10000
}

﻿je_rifling = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_technology

    is_shown_when_inactive = {
        has_technology_researched = percussion_cap
    }
    possible = {
        has_technology_researched = rifling
        army_size >= 20
    }
    complete = {
        any_scope_building = { 
            is_building_type = building_arms_industry
            OR = {
                has_active_production_method = pm_rifles
                has_active_production_method = pm_repeaters
                has_active_production_method = pm_bolt_action_rifles
            }
            level >= 3
            occupancy >= 0.75
        }
		can_research = repeaters
    }
    on_complete = {
        trigger_event = { 
            id = military_tech_events.401 
        }
    }
	
	fail = {
		has_technology_researched = repeaters
	}
	
    timeout = 3650
}

je_machine_guns = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_technology
    is_shown_when_inactive = {
        is_player = yes
        has_technology_researched = handcranked_machine_gun
    }
    possible = {
        has_technology_researched = automatic_machine_guns
        army_size >= 20
    }
    complete = {
        army_mobilization_option_fraction = {  
			target = mobilization_option:mobilization_option_machinegunners  
			value >= 0.2  
		} 
		any_scope_war = {
			any_scope_front = {
				any_scope_general = {
					owner = ROOT
					this.commander_military_formation = {
						has_mobilization_option = mobilization_option:mobilization_option_machinegunners
					}
				}
			}
		}
    }
    on_complete = {
        trigger_event = { 
            id = military_tech_events.402
        }
    }
    timeout = 3650
}

je_ironclads = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_technology
    is_shown_when_inactive = {
        is_player = yes
        has_technology_researched = screw_frigate
    }
    possible = {
        has_technology_researched = ironclad_tech
        navy_size >= 30
    }
    complete = {
        country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_ironclad
            value >= 0.2  
        }
        any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
                commander_military_formation = {
                    formation_navy_unit_type_fraction = {  
                        target = unit_type:combat_unit_type_ironclad
                        value >= 0.2  
                    }
                }
            }
            percent >= 0.25
        }
    }
    on_complete = {
        trigger_event = { 
            id = military_tech_events.403
        }
    }
    timeout = 3650
}

je_monitors = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_technology
    is_shown_when_inactive = {
        is_player = yes
        has_technology_researched = screw_frigate
    }
    possible = {
        has_technology_researched = monitor_tech
        navy_size >= 20
    }
    complete = {
        country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_monitor
            value >= 0.2  
        }
        any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
                commander_military_formation = {
                    formation_navy_unit_type_fraction = {  
                        target = unit_type:combat_unit_type_monitor
                        value >= 0.2  
                    }
                }
            }
            percent >= 0.25
        }
    }
    on_complete = {
        trigger_event = { 
            id = military_tech_events.404
        }
    }
    timeout = 3650
}
﻿je_military_aviation = {
 	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_technology
 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = defense_in_depth
 		army_size >= 25
 	}

 	possible = {
 		has_technology_researched = military_aviation
 		army_size >= 40
 	}

 	complete = {
		army_mobilization_option_fraction = {  
			target = mobilization_option:mobilization_option_aerial_recon  
			value >= 0.2  
		}
 		any_scope_war = {
 			any_scope_front = {
				any_scope_general = {
					owner = ROOT
					this.commander_military_formation = {
						has_mobilization_option = mobilization_option:mobilization_option_aerial_recon
					}
				}
 			}
 		}
 	}

 	on_complete = {
 		trigger_event = { id = aviation.1 }
 	}

 	timeout = 3650
}

je_trench_warfare = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		OR = {
			has_technology_researched = general_staff
			has_technology_researched = electric_telegraph
		}
	}

	possible = {
		has_technology_researched = trench_works
	}

	complete = {
		any_scope_war = {
			any_scope_front = {
				any_military_formation = {
					owner = ROOT
					formation_army_unit_type_fraction = {
						target = unit_type:combat_unit_type_trench_infantry
						value >= 0.25
					}
				}
			}
		}
	}

	on_complete = {
		trigger_event = { id = trench_warfare.1 }
	}

	timeout = 3650
}

﻿je_niger_river_expedition = {
	
	group = je_group_expeditions

	on_monthly_pulse = {
		random_events = {
			70 = 0
			30 = expedition_events.20 #posts a notification
			20 = expedition_events.30 #local guides
			20 = expedition_events.40 #crew member drowns
			10 = expedition_events.41 #malaria
			10 = expedition_events.70 #dysentery
			20 = expedition_events.50 #river attack
			15 = expedition_events.60 #expedition film
			20 = expedition_events.80 #hippo
			20 = expedition_events.90 #previous expedition
			15 = expedition_events.100 #kidnap
			2 = expedition_events.110 #new leader(should normally occur organically if your leader dies)
			40 = expedition_events.120 #dr livingstone
			20 = expedition_events.130 #kidnapped ambassador
			10 = expedition_events.140 #leader's breakdown
			15 = expedition_events.150 #expedition thief
			20 = expedition_events.160 #cancelled expedition
			10 = expedition_events.560 #commander vice
			20 = expedition_events.695 #lost foreign expedition
		}
	}
	
	immediate = {
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			save_scope_as = expedition_leader
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = expedition_low_peril_loc
				trigger = {
					var:expedition_peril < 4
				}
			}
			triggered_desc = {
				desc = expedition_medium_peril_loc
				trigger = {
					var:expedition_peril <= 5
				}
			}
			triggered_desc = {
				desc = expedition_high_peril_loc
				trigger = {
					var:expedition_peril >= 6
				}
			}
		}
	}
	
    complete = {
		custom_tooltip = {
			text = je_expedition_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
    }
	
	on_complete = {
		trigger_event = { id = expedition_events.11 }
		remove_variable = on_expedition
		remove_variable = niger_river_expedition_var
		remove_modifier = modifier_large_expedition_cost 
		remove_modifier = expedition_extra_expenses_modifier
		set_variable = niger_river_expedition_success_var #grand exhibition check
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
    
    fail = {
		OR = {
			custom_tooltip = {
				text = je_expedition_fail
				OR = {
					NOT = {
						has_variable = on_expedition
					}
					var:expedition_peril >= 8
				}
			}
			custom_tooltip = {
				text = expedition_cancelled_tt
				has_variable = no_extra_expenses_var
			}
		}
    }
	
	on_fail = {
		trigger_event = { id = expedition_events.12 }
		remove_variable = on_expedition
		remove_variable = niger_river_expedition_var
		set_variable = failed_niger_river_var
		remove_modifier = modifier_large_expedition_cost
		remove_modifier = expedition_extra_expenses_modifier
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	current_value = {
		value = var:expedition_progress
	}

	goal_add_value = {
		add = 8
	}
	
	progressbar = yes
	
    weight = 200
    transferable = no
    should_be_pinned_by_default = yes
}
﻿je_submarines = {
 	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = self_propelled_torpedoes
        navy_size >= 10
 	}

 	possible = {
 		has_technology_researched = submarine
        navy_size >= 30
 	}
 	complete = {
        country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_submarine
            value >= 0.2  
        }
        any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
               commander_military_formation = {
                   formation_navy_unit_type_fraction = {  
                       target = unit_type:combat_unit_type_submarine
                       value >= 0.2  
                   }
               }
            }
			percent >= 0.25
        }
 	}

 	on_complete = {
 		trigger_event = { id = naval_tech_events.4 }
 	}

 	invalid = {
 	}

 	weight = 10000
 	can_deactivate = no
 }

 je_carriers = {
 	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
        navy_size >= 10
 		has_technology_researched = dreadnought
 	}

 	possible = {
 		has_technology_researched = carrier_tech
        navy_size >= 30
 	}
 	complete = {
        country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_carrier
            value >= 0.2  
        }
        any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
                commander_military_formation = {
                   formation_navy_unit_type_fraction = {  
                       target = unit_type:combat_unit_type_carrier
                       value >= 0.2  
                   }
                }
            }
			percent >= 0.25
        }
 	}

 	on_complete = {
 		trigger_event = { id = naval_tech_events.5 }
 	}

 	invalid = {
 	}

 	weight = 10000
 	can_deactivate = no
 }

﻿je_opium = {	
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		is_player = yes
		any_market = {
			owner = root
		}
		NOT = { has_variable = opium_je_done }
		any_scope_state = {
			has_potential_resource = bg_opium_plantations
		}
	}

	possible = {
		any_scope_building = {
			is_building_type = building_opium_plantation
		}
		NOT = {
			any_primary_culture = {
				has_cultural_obsession = opium
			}
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_opium_plantation
			cash_reserves_ratio > 0.5
			weekly_profit > 0
			occupancy >= 0.75
			level >= 10
		}
		any_market = {
			NOT = { owner = root }
			any_trade_route = {
				exporter.owner = root
				goods = g:opium
			}
			owner = {
				any_primary_culture = {
					NOT = {
						has_cultural_obsession = opium
					}
				}
			}
		}
	}

	on_complete = {
		trigger_event = { id = opium_events.1 }
		set_variable = {
			name = opium_je_done
		}
	}

	transferable = no
	weight = 100
}

﻿je_opium_obsession = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_internal_affairs

	scripted_button = ban_opium_button
	scripted_button = unban_opium_button

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = opium_wars.6
			5 = opium_wars.7
			5 = opium_wars.8
		}
		effect = {
			if = {
				limit = {
					is_banning_goods = opium
					is_at_war = no
				}
				change_variable = {
					name = opium_wars_completion_tracker
					add = 1
				}
			}
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
		custom_tooltip = {
			text = opium_ban_tt
			is_banning_goods = opium
		}
		is_at_war = no
	}

	on_complete = {
		remove_variable = opium_wars_target
		trigger_event = {
			id = opium_wars.3
		}
	}

	fail = {
		OR = {
			has_law = law_type:law_free_trade
			any_country = {
				custom_tooltip = {
					text = opiumwars_fail_tt
					has_variable = opium_wars_aggressor
				}
				any_scope_state = {
					is_treaty_port = yes
					state_region = {
						any_scope_state = {
							owner = ROOT
						}
					}
				}
			}
		}
	}

	on_fail = {
		trigger_event = {
			id = opium_wars.4
		}
	}

	current_value = {
		value = root.var:opium_wars_completion_tracker
	}

	goal_add_value = {
		add = 60
	}
	
    timeout = 3650
    on_timeout = {
		hidden_effect = { remove_modifier = opium_wars_addiction_modifier }
		add_modifier = {
			name = opium_wars_addiction_modifier
			months = long_modifier_time
		}
		add_radicals = {
			value = large_radicals
		}		
		if = {
			limit = { has_journal_entry = je_warlord_china }
			chi_remove_1_fragile_unity = yes
		}	
    }	

	progressbar = yes

	weight = 10000
	should_be_pinned_by_default = yes
}

je_opium_wars = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_foreign_affairs
	
	complete = {
		any_scope_state = {
			is_treaty_port = yes
			state_region = {
				any_scope_state = {
					owner = scope:target
				}
			}
		}
	}

	on_complete = {
		trigger_event = {
			id = opium_wars.5
			days = 5
		}
	}

	fail = {
		custom_tooltip = {
			text = opium_wars_fail_tt
			scope:target = {
				NOT = {
					any_primary_culture = {
						has_cultural_obsession = opium
					}
				}
			}
		}
	}

	invalid = {
		NOT = {
			exists = scope:target
		}
	}

	on_invalid = {
		remove_variable = opium_wars_aggressor
	}

	on_fail = {
		custom_tooltip = {
			text = opium_wars_fail_invalid_tt
			remove_variable = opium_wars_aggressor
		}
	}

	on_timeout = {
		custom_tooltip = {
			text = opium_wars_fail_invalid_tt
			remove_variable = opium_wars_aggressor
		}
	}

	weight = 10000
	should_be_pinned_by_default = yes

	timeout = 1825
}

﻿je_patagonia = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		exists = c:PAT
		any_neighbouring_state = {
			owner = c:PAT
		}
		OR = {
			country_has_primary_culture = cu:south_andean
			country_has_primary_culture = cu:platinean
		}
	}

	scripted_button = patagonia_button

	possible = {
		NOT = { has_law = law_type:law_no_colonial_affairs }
	}

	complete = {
		OR = {
			owns_entire_state_region = STATE_ARAUCANIA
			AND = {
				owns_entire_state_region = STATE_PATAGONIA
				owns_entire_state_region = STATE_RIO_NEGRO
			}
		}
	}

	on_complete = {
		trigger_event = { id = patagonia.1 }
	}

	on_monthly_pulse = {
		random_events = {
			85 = 0
			10 = patagonia.2
			5 = bp1_patagonia.1
		}
	}

	weight = 20
}
﻿je_pedro_brazil = {
	icon = "gfx/interface/icons/law_icons/monarchy.dds"

	group = je_group_historical_content

	on_monthly_pulse = {
		events = {
			# Landowners become republicans
			pedro.2
			# Pedro comes of age
			pedro.3
			# AF/LA are marginalized
			pedro.5
			# AF/LA are powerful and not in government
			pedro.6
			# Republicans ask Pedro to be President
			pedro.9
			# Pedro signs the constitution
			pedro.11
		}
		random_events = {
			100 = 0
			10 = pedro.4 # Pedro becomes ill
			10 = pedro.12 # Death of Pedro's heirs
			10 = pedro.14 # To the Highest Standards
		}
		effect = {
			if = {
				limit = {
					any_civil_war = {
						civil_war_progress > 0.5
					}
					NOT = { has_variable = je_pedro_civilwar_point }
				}
				change_variable = { name = pedropoints subtract = 1 }
				set_variable = { name = je_pedro_civilwar_point years = 3 }
			}
			if = {
				limit = {
					OR = {
						in_default = yes
						has_modifier = declared_bankruptcy
					}
					NOT = { has_variable = je_pedro_default_point }
				}
				change_variable = { name = pedropoints subtract = 1 }
				set_variable = { name = je_pedro_default_point }
			}
			if = {
				limit = {
					country_rank >= rank_value:great_power
					NOT = { has_variable = je_pedro_gp_point }
				}
				change_variable = { name = pedropoints add = 1 }
				set_variable = { name = je_pedro_gp_point }
			}
		}
	}

	on_weekly_pulse = {
		events = {
			# startup event
			pedro.1
		}
	}

	immediate = {
		set_variable = {
			name = pedropoints
			value = 0
		}
		root = {
			save_scope_as = brazil_scope
		}
		ig:ig_intelligentsia = {
			save_scope_as = intelligentsia_ig
		}
	}

	complete = {
		has_law = law_type:law_monarchy
		AND = {
			custom_tooltip = {
				text = je_pedro_success
				var:pedropoints > 5
			}
			custom_tooltip = {
				text = pedro_dead
				ruler = {
					NOT = {
						has_variable = is_pedro
					}
				}
			}
		}
	}

	on_complete = {
		hidden_effect = {
			ruler ?= { set_character_immortal = no }
			if = {
				limit = {
					exists = heir
				}
				heir = { set_character_immortal = no }
			}
		}
		custom_tooltip = {
			text = pedro_heir_empowered_tt
		}
		custom_tooltip = {
			text = pedro_je_royalists_more_common_tt
			set_variable = brz_enduring_empire
		}
		# Monarchy survives
		trigger_event = {
			id = pedro.7
			popup = yes
		}
	}

	fail = {
		OR = {
			AND = {
				custom_tooltip = {
					text = je_pedro_fail
					var:pedropoints <= 0
				}
				ig:ig_landowners = {
					is_marginal = no
				}
				ig:ig_armed_forces = {
					is_marginal = no
				}
			}
			AND = {
				custom_tooltip = {
					text = je_pedro_fail_2
					var:pedropoints <= 5
				}
				custom_tooltip = {
					text = pedro_dead
					ruler = {
						NOT = {
							has_variable = is_pedro
						}
					}
				}
			}
		}
	}

	on_fail = {
		hidden_effect = {
			ruler ?= { set_character_immortal = no }
			if = {
				limit = {
					exists = heir
				}
				heir = { set_character_immortal = no }
			}
		}
		# Monarchy ended by coup
		trigger_event = {
			id = pedro.8
			popup = yes
		}
		show_as_tooltip = {
			if = {
				limit = {
					NOT = { has_law = law_type:law_landed_voting }
				}
				activate_law = law_type:law_landed_voting
			}
			activate_law = law_type:law_presidential_republic
			if = {
				limit = {
					ig:ig_landowners = {
						is_in_government = no
						is_marginal = no
					}
				}
				ig:ig_landowners = {
					add_ruling_interest_group = yes
				}
			}
			if = {
				limit = {
					ig:ig_armed_forces = {
						is_in_government = no
						is_marginal = no
					}
				}
				ig:ig_armed_forces = {
					add_ruling_interest_group = yes
				}
			}
		}
	}

	invalid = {
		NOT = { has_law = law_type:law_monarchy }
	}

	on_invalid = {
		hidden_effect = {
			ruler ?= { set_character_immortal = no }
			if = {
				limit = {
					exists = heir
				}
				heir = { set_character_immortal = no }
			}
		}
	}

	current_value = {
		value = root.var:pedropoints
	}

	goal_add_value = {
		add = 10
	}

	progressbar = yes

	weight = 100

	can_revolution_inherit = no
	transferable = no
	should_be_pinned_by_default = yes
}

# added by pedro.9
je_pedro_republic = {
	icon = "gfx/interface/icons/law_icons/presidential_republic.dds"

	group = je_group_historical_content

	complete = {
		has_law = law_type:law_presidential_republic
	}

	timeout = 3600

	on_complete = {
		# the actual ending event needs to be triggered from on_law_enactment_pass
		show_as_tooltip = {
			ruler = {
				set_character_as_ruler = yes
				set_as_interest_group_leader = yes
			}
		}
	}

	fail = {
		OR = {
			NOT = { has_journal_entry = je_pedro_brazil }
			custom_tooltip = {
				text = pedro_dead
				ruler = {
					NOT = {
						has_variable = is_pedro
					}
				}
			}
		}
	}

	on_timeout = {
		remove_pedropoint_effect = yes
	}

	invalid = {
		NOR = {
			has_law = law_type:law_monarchy
			has_law = law_type:law_presidential_republic
		}
	}

	weight = 100
	can_revolution_inherit = no
	transferable = no
	should_be_pinned_by_default = yes
}

# Added by pedro.13
je_isabel = {
	icon = "gfx/interface/icons/law_icons/monarchy.dds"

	group = je_group_historical_content

	immediate = {
		heir = {
			save_scope_as = isabel_scope
		}
	}	

	complete = {
		NOT = {
			has_law = law_type:law_no_womens_rights
		}
		scope:journal_entry = { is_goal_complete = yes }
	}

	on_complete = {
		trigger_event = {
			id = pedro.13
			popup = yes
		}
		custom_tooltip = {
			text = isabel_je_tt
		}
		show_as_tooltip = {
			ruler = { remove_modifier = isabel_heir_popularity }
			heir = { remove_modifier = isabel_heir_popularity }
		}
	}

	fail = {
		OR = {
			NOT = { has_journal_entry = je_pedro_brazil }
			heir ?= {
				custom_tooltip = {
					text = is_isabella_tt
					NOT = {
						has_variable = isabel_var
					}
				}
			}
			NOT = {
				exists = heir
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					NOT = {
						has_law = law_type:law_no_womens_rights
					}
				}
			}
			change_variable = {
				name = isabel_points
				add = 1
			}
		}
	}

	is_progressing = {
		has_journal_entry = je_pedro_brazil
		scope:target ?= {
			is_heir = yes
		}
		NOT = {
			has_law = law_type:law_no_womens_rights
		}
	}

	current_value = {
		value = root.var:isabel_points
	}

	goal_add_value = {
		add = 120
	}

	progressbar = yes

	weight = 100
	can_revolution_inherit = no
	transferable = no
	should_be_pinned_by_default = yes
}
﻿je_peru_bolivia = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	immediate = {
		cu:quechua = {
			save_scope_as = quechua_culture
		}
		cu:south_andean = {
			save_scope_as = south_andean_culture
		}
		c:BOL = {
			save_scope_as = bolivia_scope
		}
		set_variable = pbc_member
	}
	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					c:BOL ?= this
					government_legitimacy >= 50
				}
				change_global_variable = {
					name = peru_bolivia_var
					add = 1
				}
			}
		}
	}

	complete = {
		hidden_trigger = {
			c:BOL = this
		}
		scope:journal_entry = { is_goal_complete = yes }
		OR = {
			c:SPU ?= {
				is_subject_of = c:BOL
			}
			c:NPU ?= {
				is_subject_of = c:BOL
			}
			c:IQU ?= {
				is_subject_of = c:BOL
			}
			c:PEU ?= {
				is_subject_of = c:BOL
			}
		}
		custom_tooltip = {
			text = bol_no_revolutions_tt
			NOT = {
				any_country = {
					is_subject_of = c:BOL
					OR = {
						country_has_primary_culture = cu:south_andean
						country_has_primary_culture = cu:quechua
						country_has_primary_culture = cu:peruvian
					}
					has_revolution = yes
				}
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = peru_bolivia_completion_nonbolivia_tt
			if = {
				limit = {
					c:BOL ?= this
				}
				trigger_event = {
					id = peru_bolivia_events.1
				}
			}
		}
	}

	is_progressing = {
		c:BOL ?= {
			government_legitimacy >= 50
		}
		OR = {
			c:SPU ?= {
				is_subject_of = c:BOL
			}
			c:NPU ?= {
				is_subject_of = c:BOL
			}
			c:IQU ?= {
				is_subject_of = c:BOL
			}
			c:PEU ?= {
				is_subject_of = c:BOL
			}
		}
		NOT = {
			any_country = {
				is_subject_of = c:BOL
				has_revolution = yes
			}
		}
	}

	fail = {
		OR = {
			NOT = {
				exists = c:BOL
			}
			AND = {
				OR = {
					NOT = {
						exists = c:SPU
					}
					c:SPU ?= {
						NOT = { is_subject_of = c:BOL }
					}
				}
				OR = {
					NOT = {
						exists = c:NPU
					}
					c:NPU ?= {
						NOT = { is_subject_of = c:BOL }
					}
				}
				OR = {
					NOT = {
						exists = c:IQU
					}
					c:IQU ?= {
						NOT = { is_subject_of = c:BOL }
					}
				}
				OR = {
					NOT = {
						exists = c:PEU
					}
					c:PEU ?= {
						NOT = { is_subject_of = c:BOL }
					}
				}
			}
			NOT = {
				country_has_primary_culture = cu:south_andean
			}
			c:BOL ?= {
				is_subject = yes
			}
		}
	}

	on_fail = {
		if = { #Why? So that [somehow] this doesn't cause four fail events to fire at once. That should be impossible, but you never know.
			limit = {
				c:BOL ?= this
			} 
			if = {
				limit = {
					any_country = {
						has_variable = pbc_member
						is_player = yes
					}
				}
				random_country = {
					limit = {
						has_variable = pbc_member
						is_player = yes
					}
					trigger_event = { id = peru_bolivia_events.3 popup = yes }
				}
			}
			else = {
				ordered_country = {
					limit = {
						has_variable = pbc_member
					}
					order_by = gdp
					trigger_event = { id = peru_bolivia_events.3 popup = yes }
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					exists = c:BOL
				}
			}
			if = {
				limit = {
					any_country = {
						has_variable = pbc_member
						is_player = yes
					}
				}
				random_country = {
					limit = {
						has_variable = pbc_member
						is_player = yes
					}
					trigger_event = { id = peru_bolivia_events.3 popup = yes }
				}
			}
			else = {
				ordered_country = {
					limit = {
						has_variable = pbc_member
					}
					order_by = gdp
					trigger_event = { id = peru_bolivia_events.3 popup = yes }
				}
			}
		}
	}

	invalid = {
		OR = {
			AND = {
				OR = {
					c:IQU ?= this
					c:SPU ?= this
					c:NPU ?= this
					c:PEU ?= this
				}
				NOT = {
					is_subject_of = c:BOL
				}
			}
			NOT = {
				exists = c:BOL
			}
			AND = {
				exists = c:BOL 
				c:BOL = {
					NOT = {
						has_journal_entry = je_peru_bolivia
					}
				}
			}
		}
	}

	current_value = {
		value = global_var:peru_bolivia_var #This variable is initialised in Argentina's country file, because of load orders.
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 10000

	should_be_pinned_by_default = yes
}

je_war_of_the_confederation = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	immediate = {
		cu:quechua = {
			save_scope_as = quechua_culture
		}
		cu:south_andean = {
			save_scope_as = south_andean_culture
		}
		c:BOL = {
			save_scope_as = bolivia_scope
		}
		root = {
			save_scope_as = home_country_scope
		}
	}

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					exists = global_var:peru_bolivia_var
				}
				set_variable = { name = peru_bolivia_opposition_var value = global_var:peru_bolivia_var }
			}
		}
	}

	complete = {
		OR = {
			custom_tooltip = {
				text = peru_bolivia_dead_tt
				NOT = {
					exists = c:PBC
				}
				OR = {
					NOT = {
						exists = c:BOL
					}
					AND = {
						OR = {
							NOT = {
								exists = c:SPU
							}
							c:SPU ?= {
								NOT = { is_subject_of = c:BOL }
							}
						}
						OR = {
							NOT = {
								exists = c:NPU
							}
							c:NPU ?= {
								NOT = { is_subject_of = c:BOL }
							}
						}
						OR = {
							NOT = {
								exists = c:IQU
							}
							c:IQU ?= {
								NOT = { is_subject_of = c:BOL }
							}
						}
						OR = {
							NOT = {
								exists = c:PEU
							}
							c:PEU ?= {
								NOT = { is_subject_of = c:BOL }
							}
						}
					}
					c:BOL ?= {
						is_subject = yes
					}
				}
			}
			AND = {
				c:BOL ?= {
					relations:root >= relations_threshold:amicable
				}
				c:BOL ?= {
					OR = {
						is_in_customs_union_with = root
						has_diplomatic_pact = {
							who = root
							type = alliance
						}
						has_diplomatic_pact = {
							who = root
							type = defensive_pact
						}								
					}
				}
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = peru_bolivia_complete_tt
			if = {
				limit = {
					AND = {
						c:BOL ?= {
							relations:root >= relations_threshold:amicable
						}
						c:BOL ?= {
							OR = {
								is_in_customs_union_with = root
								has_diplomatic_pact = {
									who = root
									type = alliance
								}
								has_diplomatic_pact = {
									who = root
									type = defensive_pact
								}								
							}
						}
					}
				}
				trigger_event = { id = peru_bolivia_events.6 popup = yes }
			}
			else = {
				trigger_event = { id = peru_bolivia_events.5 popup = yes }
			}
		}
	}

	fail = {
		custom_tooltip = {
			text = peru_bolivia_success_tt
			exists = c:PBC
		}
	}

	on_fail = {
		trigger_event = { id = peru_bolivia_events.7 popup = yes }
	}

	invalid = {
		OR = {
			AND = {
				OR = {
					c:IQU ?= this
					c:SPU ?= this
					c:NPU ?= this
					c:PEU ?= this
				}
				NOT = {
					is_subject_of = c:BOL
				}
			}
			NOR = {
				exists = c:BOL
				exists = c:PBC
			}
			AND = {
				NOT = {
					exists = c:PBC
				}
				c:BOL = {
					NOT = {
						has_journal_entry = je_peru_bolivia
					}
				}
			}
		}
	}

	current_value = {
		value = var:peru_bolivia_opposition_var
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 10000

	should_be_pinned_by_default = yes
}
﻿# triggered by on_law_enactment_started
je_spanish_flu = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_crises

	immediate = {
		if = {
			limit = {
				has_variable = spanish_flu_over
			}
			remove_variable = spanish_flu_over
		}
	}

	on_monthly_pulse = {
		effect = {
			random_list = {
				1 = {
					modifier = {
						if = {
							limit = {
								NOT = {
									has_variable = plague_lockdown
									has_variable = plague_measures
								}
							}
						}
					add = -1
					}
					#nothing happens
				}
				3 = {
					modifier = {
						if = {
							limit = {
								has_variable = plague_lockdown
							}
							add = -2
						}
						else_if = {
							limit = {
								has_variable = plague_measures
								}
							add = -1
						}
					}
					trigger_event = { id = plague.2 }
				}			
				3 = {
					modifier = {
						if = {
							limit = {
								has_variable = plague_lockdown
							}
							add = -2
						}
						else_if = {
							limit = {
								has_variable = plague_measures
								}
							add = -1
						}
					}
					trigger_event = { id = plague.200 }
				}
			}
		}
		
		random_events = {
			10 = 0
			1 = plague.7
			1 = plague.8
			1 = plague.9
		}
	}
	
	on_weekly_pulse = {
		effect = {
			every_scope_state = {
				limit = {
					has_variable = plague_restrictions_tracker
					has_modifier = plague_modifier
				}
				if = {
					limit = {
						owner = {
							has_variable = plague_lockdown
						}
					}
					change_variable = {
						name = plague_restrictions_tracker
						add = 2
					}
				}
				else_if = {
					limit = {
						owner = {
							has_variable = plague_measures
						}
					}
					change_variable = {
						name = plague_restrictions_tracker
						add = 1
					}
				}
			}
		}
	}

	complete = {
		NOT = {
			any_scope_state = {
				has_modifier = plague_modifier
			}
		}
	}

	on_complete = {
		# This is just here to generate a list of plague states
		# For obvious reasons this doesn't do anything in practice
		every_scope_state = {
			limit = {
				has_modifier = plague_modifier
			}
			remove_modifier = plague_modifier
		}
		set_variable = spanish_flu_over
	}

	weight = 100
	should_be_pinned_by_default = yes
}
﻿je_objective_expand_goods_production = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
		scope:target = {
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
			is_subsidized = no
		}
	}		
	
	current_value = {
		value = scope:target.level
	}
	
	goal_add_value = {
		value = 1
	}
	
	is_progressing = {
		exists = scope:target
		scope:target = { is_under_construction = yes }
	}
	
	invalid = {
		custom_tooltip = {
			text = je_objective_expand_goods_production_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}
		}
	}
	
	
	on_complete = {
		hidden_effect = {
			owner = {
				start_tutorial_lesson = { 
					tutorial_lesson = expand_goods_production_complete
					journal_entry = je:je_objective_expand_goods_production
				}
			}
		}
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_expand_goods_production
	}
		
	weight = 1000
	transferable = yes
}

je_refining_goods = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {	
	}
	
	complete = {
		any_scope_building = {
			is_building_type = building_steel_mills
			level >= 4
			occupancy >= 0.9
			is_subsidized = no
		}
	}

	is_progressing = {
		any_scope_building = {
			is_building_type = building_steel_mills
			is_under_construction = yes 
		}
	}
	
	weight = 1002
	transferable = yes
}

je_specialized_goods = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {	
	}
	
	complete = {
		any_scope_building = {
			is_building_type = building_motor_industry
			level >= 2
			occupancy >= 0.9
			is_subsidized = no
		}
	}

	is_progressing = {
		any_scope_building = {
			is_building_type = building_motor_industry
			is_under_construction = yes 
		}
	}
	
	weight = 1003
	transferable = yes
}

je_expanding_the_market = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {	
	}
	
	complete = {
		market = {
		   owner = ROOT
		   participants >= 8
		}
	}

	weight = 1005
	transferable = yes
}

je_strong_market = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives
	active_update_frequency = 1

	immediate = {	
	}
	
	complete = {
		gdp > {
			value = global_gdp
			multiply = 0.25
		}
	}

	on_complete = {
		hidden_effect = {
			owner = {
				start_tutorial_lesson = { 
					tutorial_lesson = economic_dominance_complete
					journal_entry = je:je_strong_market
				}
			}
		}
	}

	weight = 1012
	transferable = yes
}

je_specialized_inputs = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {	
	}
	
	complete = {
		OR = {
			any_scope_building = {
				filter = {
					OR = {
						is_building_type = building_rye_farm
						is_building_type = building_wheat_farm
						is_building_type = building_maize_farm
						is_building_type = building_millet_farm
					}
				}
				percent >= 0.75
				OR = {
					has_active_production_method = pm_tractors
					has_active_production_method = pm_compression_ignition_tractors
				}
				weekly_profit > 0
				occupancy >= 0.5
				is_subsidized = no
			}
			any_scope_building = {
				filter = {
					OR = {
						is_building_type = building_coal_mine
						is_building_type = building_iron_mine
						is_building_type = building_lead_mine
						is_building_type = building_sulfur_mine
					}
				}
				percent >= 0.75
				OR = {
					has_active_production_method = pm_steam_donkey_building_coal_mine
					has_active_production_method = pm_steam_donkey_mine
				}
				weekly_profit > 0
				occupancy >= 0.5
				is_subsidized = no
			}
			any_scope_building = {
				is_building_type = building_railway
				or = {
					level >= 5
				}
			}
		}
	}

	on_complete = {
		set_variable = player_obj_home_focus
	}
	
	invalid = {
		has_variable = player_obj_export_focus
	}

	weight = 1002
	transferable = yes
}

je_utilizing_our_strength = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {
	}
	
	complete = {
		custom_tooltip = {
			text = tt_utilizing_our_strength_sub_obj
			market_capital.market = {
				mg:engines = {
					market_goods_cheaper < 0.25
				}
			}
		}
	}
	
	weight = 1010
	transferable = yes
}

je_exporting_profits = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {
	}
	
	complete = {
		market_capital.market = {
			mg:engines = {
				market_goods_exports > 50
			}
		}
	}

	invalid = {
		has_variable = player_obj_home_focus
	}
	
	on_complete = {
		set_variable = player_obj_export_focus
	}

	weight = 1010
	transferable = yes
}

je_raise_exports_value = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {
	}
	
	complete = {
		custom_tooltip = {
			text = tt_raise_exports_value_sub_obj
			market_capital.market = {
				mg:engines = {
					market_goods_pricier > 0.5
				}
			}
		}
	}
	
	weight = 1010
	transferable = yes
}

je_lower_production_costs = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {
	}
	
	complete = {
		custom_tooltip = {
			text = tt_lower_production_costs_sub_obj
			market_capital.market = {
				mg:coal = {
					market_goods_cheaper > 0.2
				}
			}
			market_capital.market = {
				mg:iron = {
					market_goods_cheaper > 0.2
				}
			}
			market_capital.market = {
				mg:steel = {
					market_goods_cheaper > 0.2
				}
			}
		}
	}
	
	weight = 1010
	transferable = yes
}
﻿je_objective_encourage_liberal_ideas = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/egalitarian_society.dds"

	group = je_group_objectives

	complete = {
		ig:ig_intelligentsia = {
			is_powerful = yes
			is_being_bolstered = yes
			is_in_government = yes
		}
	}
	
	on_complete = {
		hidden_effect = {
			owner = {
				start_tutorial_lesson = { 
					tutorial_lesson = liberalizing_the_government_complete
					journal_entry = je:je_objective_encourage_liberal_ideas
				}
			}
		}
	}
		
	weight = 1000
	transferable = yes
}

je_liberate_the_slaves = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/egalitarian_society.dds"

	group = je_group_objectives
	
	complete = {
		has_law = law_type:law_slavery_banned
	}

	weight = 1003
	transferable = yes
}

je_pass_laws = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/egalitarian_society.dds"

	group = je_group_objectives
	
	complete = {
		NOT = { has_law = law_type:law_state_religion }
		has_law = law_type:law_multicultural
		has_law = law_type:law_public_schools
		has_law = law_type:law_protected_speech
	}

	is_progressing = {
		OR = {
			is_enacting_law = law_type:law_freedom_of_conscience
			is_enacting_law = law_type:law_total_separation
			is_enacting_law = law_type:law_multicultural
			is_enacting_law = law_type:law_public_schools
			is_enacting_law = law_type:law_protected_speech
		}
	}

	weight = 1001
	transferable = yes
}

je_public_services = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/egalitarian_society.dds"

	group = je_group_objectives
	
	complete = {
		institution_investment_level = {
			institution = institution_schools
			value >= 3
		}
		institution_investment_level = {
			institution = institution_health_system
			value >= 3
		}
		institution_investment_level = {
			institution = institution_social_security
			value >= 3
		}
		institution_investment_level = {
			institution = institution_workplace_safety
			value >= 3
		}
	}

	is_progressing = {
		OR = {
			expanding_institution = institution_schools
			expanding_institution = institution_health_system
			expanding_institution = institution_social_security
			expanding_institution = institution_workplace_safety
		}
	}

	invalid = {
		OR = {
			NOT = { has_law = law_type:law_multicultural }
			NOT = { has_law = law_type:law_public_schools }
			NOT = { has_law = law_type:law_protected_speech }
			has_law = law_type:law_state_religion
		}
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_public_services
	}
	
	weight = 1002
	transferable = yes
}

je_women_and_children = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/egalitarian_society.dds"

	group = je_group_objectives
	
	complete = {
		has_law = law_type:law_compulsory_primary_school
		has_law = law_type:law_womens_suffrage
	}

	is_progressing = {
		or = {
			is_enacting_law = law_type:law_compulsory_primary_school
			is_enacting_law = law_type:law_womens_suffrage
		}
	}

	invalid = {
		OR = {
			NOT = { has_law = law_type:law_multicultural }
			NOT = { has_law = law_type:law_public_schools }
			NOT = { has_law = law_type:law_protected_speech }
			has_law = law_type:law_state_religion
		}
	}
	
	on_invalid = {
		remove_active_objective_subgoal = sg_women_and_children
	}
	
	weight = 1004
	transferable = yes
}

je_egalitarian_society = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/egalitarian_society.dds"

	group = je_group_objectives
	active_update_frequency = 1
	
	complete = {
		pop_type_percent_country = {
			pop_type = peasants
			percent < 0.1
		}
		root.average_sol >= 20
		literacy_rate >= 0.9
	}

	is_progressing = {
		OR = {
			expanding_institution = institution_schools
			expanding_institution = institution_health_system
			expanding_institution = institution_social_security
			expanding_institution = institution_workplace_safety
		}
	}

	invalid = {
		OR = {
			NOT = { has_law = law_type:law_multicultural }
			NOT = { has_law = law_type:law_public_schools }
			NOT = { has_law = law_type:law_protected_speech }
			NOT = { has_law = law_type:law_compulsory_primary_school }
			NOT = { has_law = law_type:law_womens_suffrage }
			has_law = law_type:law_state_religion
		}
	}
	
	on_invalid = {
		remove_active_objective_subgoal = sg_egalitarian_society
	}

	on_complete = {
		hidden_effect = {
			owner = {
				start_tutorial_lesson = { 
					tutorial_lesson = egalitarian_society_complete
					journal_entry = je:je_egalitarian_society
				}
			}
		}
	}

	weight = 1005
	transferable = yes
}
﻿### Great Game Journal Entries
je_great_game_control = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	scripted_progress_bar = great_game_core_progress_bar

    immediate = {
		set_global_variable = { name = great_game_gbr_progress value = 100 }
		set_global_variable = { name = great_game_rus_progress value = 100 }
		if = {
			limit = {
				OR = {
					c:GBR ?= this
					c:RUS ?= this
				}
			}
			set_variable = { name = great_game_no_longer_power_bloc_leader_var value = 0 }
		}
		else = {
			set_variable = { name = great_game_subjected_var value = 0 }
		}
		
		if = {
			limit = {
				is_player = yes
			}
			calculate_great_game_passive_progress = yes

			scope:journal_entry = {
				set_global_variable = { name = great_game_gbr_progress value = "scripted_bar_progress(great_game_core_progress_bar)" }
				set_global_variable = { name = great_game_rus_progress value = 200 }
				change_global_variable = { name = great_game_rus_progress subtract = global_var:great_game_gbr_progress }
			}

			every_country = {
				limit = {
					OR = {
						c:RUS ?= this
						c:GBR ?= this
						c:PER ?= this
						has_journal_entry = je_unify_afghanistan
					}
					is_player = no
					NOT = {
						has_journal_entry = je_great_game_control
					}
				}
				add_journal_entry = { type = je_great_game_control }
			}
		}
		sr:region_central_asia = {
			save_scope_as = central_asia_region
		}
		sr:region_persia = {
			save_scope_as = persia_region
		}
		sr:region_caucasus = {
			save_scope_as = caucasus_region
		}
    }

	complete = {
		trigger_if = {
			limit = {
				OR = {
					c:GBR ?= this
					c:RUS ?= this
				}
			}
			OR = {
				custom_tooltip = {
					text = great_game_complete_tt
					sr:region_caucasus = {
						NOT = {
							any_scope_state = {
								is_capital = yes
								owner = {
									NOR = {
										AND = {
											exists = c:GBR
											is_subject_of = c:GBR
										}
										AND = {
											exists = c:RUS
											is_subject_of = c:RUS
										}
										this.power_bloc ?= {
											c:GBR ?= this.power_bloc_leader
										}
										this.power_bloc ?= {
											c:RUS ?= this.power_bloc_leader
										}
									}
								}
							}
						}
					}
					sr:region_central_asia = {
						NOT = {
							any_scope_state = {
								is_capital = yes
								owner = {
									NOR = {
										AND = {
											exists = c:GBR
											is_subject_of = c:GBR
										}
										AND = {
											exists = c:RUS
											is_subject_of = c:RUS
										}
										this.power_bloc ?= {
											c:GBR ?= this.power_bloc_leader
										}
										this.power_bloc ?= {
											c:RUS ?= this.power_bloc_leader
										}
									}
								}
							}
						}
					}
					sr:region_persia = {
						NOT = {
							any_scope_state = {
								is_capital = yes
								owner = {
									NOR = {
										AND = {
											exists = c:GBR
											is_subject_of = c:GBR
										}
										AND = {
											exists = c:RUS
											is_subject_of = c:RUS
										}
										this.power_bloc ?= {
											c:GBR ?= this.power_bloc_leader
										}
										this.power_bloc ?= {
											c:RUS ?= this.power_bloc_leader
										}
									}
								}
							}
						}
					}
				}
				trigger_if = {
					limit = {
						c:RUS ?= this
					}
					c:GBR ?= {
						country_rank < rank_value:great_power
					}
				}
				trigger_if = {
					limit = {
						c:GBR ?= this
					}
					c:RUS ?= {
						country_rank < rank_value:great_power
					}
				}
			}
		}
		trigger_if = {
			limit = {
				OR = {
					c:PER ?= this
					is_afghan_nation = yes
				}
			}
			is_country_type = recognized
			country_rank >= rank_value:major_power
			custom_tooltip = {
				text = not_in_european_power_bloc_tt
				NOT = {
					power_bloc ?= {
						power_bloc_leader = {
							OR = {
								country_is_in_europe = yes
								any_primary_culture = {
									has_discrimination_trait = european_heritage
								}
							}
						}
					}
				}
			}
			custom_tooltip = {
				text = europeans_expelled_from_casia_tt
				NOT = {
					c:GBR ?= {
						OR = {
							any_subject_or_below = {
								any_scope_state = {
									OR = {
										region = sr:region_persia
										region = sr:region_central_asia
									}
								}
							}
							any_scope_state = {
								OR = {
									region = sr:region_persia
									region = sr:region_central_asia
								}
							}
						}
					}
				}
				NOT = {
					c:RUS ?= {
						OR = {
							any_subject_or_below = {
								any_scope_state = {
									OR = {
										region = sr:region_persia
										region = sr:region_central_asia
									}
								}
							}
							any_scope_state = {
								OR = {
									region = sr:region_persia
									region = sr:region_central_asia
								}
							}
						}
					}
				}
			}
		}
	}

	invalid = {
		OR = {
			NOT = {
				exists = c:GBR
			}
			NOT = {
				exists = c:RUS
			}
		}
	}

	on_invalid = {
		set_global_variable = great_game_failed
	}

	fail = {
		OR = {
			trigger_if = {
				limit = {
					OR = {
						c:RUS ?= this
						c:GBR ?= this
					}
				}
				OR = {
					is_in_power_bloc = no
				}
				custom_tooltip = {
					text = not_leader_of_power_bloc_tt
					is_in_power_bloc = yes
					is_power_bloc_leader = no
					var:great_game_no_longer_power_bloc_leader_var >= 60
				}
				AND = {
					custom_tooltip = {
						text = any_casia_country_recognised_tt
						any_country = {
							capital = {
								OR = {
									region = sr:region_persia
									region = sr:region_central_asia
								}
							}
							is_country_type = recognized
							country_rank >= rank_value:major_power
						}
					}
					custom_tooltip = {
						text = europeans_expelled_from_casia_tt
						NOT = {
							c:GBR ?= {
								OR = {
									any_subject_or_below = {
										any_scope_state = {
											OR = {
												region = sr:region_persia
												region = sr:region_central_asia
											}
										}
									}
									any_scope_state = {
										OR = {
											region = sr:region_persia
											region = sr:region_central_asia
										}
									}
								}
							}
						}
						NOT = {
							c:RUS ?= {
								OR = {
									any_subject_or_below = {
										any_scope_state = {
											OR = {
												region = sr:region_persia
												region = sr:region_central_asia
											}
										}
									}
									any_scope_state = {
										OR = {
											region = sr:region_persia
											region = sr:region_central_asia
										}
									}
								}
							}
						}
					}
				}
			}
			trigger_if = {
				limit = {
					c:RUS ?= this
				}
				c:RUS ?= {
					country_rank < rank_value:great_power
				}
			}
			trigger_if = {
				limit = {
					c:GBR ?= this
				}
				c:GBR ?= {
					country_rank < rank_value:great_power
				}
			}
			trigger_if = {
				limit = {
					OR = {
						c:PER ?= this
						is_afghan_nation = yes
					}
				}
				custom_tooltip = {
					text = puppeted_for_too_long_tt
					is_subject = yes
					var:great_game_subjected_var >= 60
				}
			}
		}
	}
	
	on_fail = {
		set_global_variable = great_game_failed
	}

    on_weekly_pulse = {
        effect = {
            if = {
                limit = {
					is_player = yes
                    NOT = { has_global_variable = gg_started }
                }
                set_global_variable = gg_started
            }
			update_gg_progressbar_tooltips = yes
        }
    }

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					is_player = yes
				}
				calculate_great_game_passive_progress = yes
			}
			if = {
				limit = {
					OR = {
						c:GBR ?= this
						c:RUS ?= this
					}
				}
				if = {
					limit = {
						is_in_power_bloc = yes
						is_power_bloc_leader = no
					}
					change_variable = {
						name = great_game_no_longer_power_bloc_leader_var
						add = 1
					}
				}
				if = {
					limit = {
						is_in_power_bloc = yes
						is_power_bloc_leader = yes
					}
					set_variable = {
						name = great_game_no_longer_power_bloc_leader_var
						value = 0
					}
				}
			}
			else = {
				if = {
					limit = {
						is_subject = yes
					}
					change_variable = {
						name = great_game_subjected_var
						add = 1
					}
				}
				if = {
					limit = {
						is_subject = no
					}
					set_variable = {
						name = great_game_subjected_var
						value = 0
					}
				}
			}
		}
	}

	on_complete = {
		if = {
			limit = {
				OR = {
					c:GBR ?= this
					c:RUS ?= this
				}
			}
			custom_tooltip = outcome_depends_on_score_tt
			if = {
				limit = {
					OR = {
						scope:journal_entry = { scripted_bar_progress = { name = great_game_core_progress_bar value >= 120 } }
						AND = {
							c:GBR ?= { country_rank < rank_value:great_power }
							c:RUS ?= { country_rank >= rank_value:great_power }
						}
					}
				}
				if = {
					limit = {
						exists = c:RUS
					}
					c:RUS = {
						trigger_event = { id = gg_core.1 popup = yes }
					}
				}
				if = {
					limit = {
						exists = c:GBR
					}
					c:GBR = {
						trigger_event = { id = gg_core.2 popup = yes }
					}
				}
			}
			else_if = {
				limit = {
					scope:journal_entry = { scripted_bar_progress = { name = great_game_core_progress_bar value > 80 } }
					scope:journal_entry = { scripted_bar_progress = { name = great_game_core_progress_bar value < 120 } }
					AND = {
						c:GBR ?= { country_rank >= rank_value:great_power }
						c:RUS ?= { country_rank >= rank_value:great_power }
					}
				}
				if = {
					limit = {
						exists = c:RUS
					}
					c:RUS = {
						trigger_event = { id = gg_core.3 popup = yes }
					}
				}
				if = {
					limit = {
						exists = c:GBR
					}
					c:GBR = {
						trigger_event = { id = gg_core.3 popup = yes }
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						scope:journal_entry = { scripted_bar_progress = { name = great_game_core_progress_bar value <= 80 } }
						AND = {
							c:RUS ?= { country_rank < rank_value:great_power }
							c:GBR ?= { country_rank >= rank_value:great_power }
						}
					}
				}
				if = {
					limit = {
						exists = c:RUS
					}
					c:RUS = {
						trigger_event = { id = gg_core.2 popup = yes }
					}
				}
				if = {
					limit = {
						exists = c:GBR
					}
					c:GBR = {
						trigger_event = { id = gg_core.1 popup = yes }
					}
				}
			}
		}
		else = {
			custom_tooltip = europeans_forced_to_end_great_game_tt
			trigger_event = { id = gg_core.4 popup = yes }
			c:GBR ?= {
				if = {
					limit = {
						has_journal_entry = je_great_game_control
					}
					post_notification = great_game_loss_to_natives
				}
			}
			c:RUS ?= {
				if = {
					limit = {
						has_journal_entry = je_great_game_control
					}
					post_notification = great_game_loss_to_natives
				}
			}
		}
		hidden_effect = {
			set_variable = achievement_great_game_no_re
		}
	}

	weight = 1000
	transferable = yes
}

### Russia

je_secure_persian_border = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
        custom_tooltip = {
            text = je_secure_persian_border_complete_tt
            has_global_variable = caucasus_consolidated_var
        }
	}

	on_complete = {
		great_game_russia_progress_15 = yes
	}

    fail = {
        custom_tooltip = {
            text = je_secure_persian_border_fail_tt
            has_global_variable = caucasus_failure_var
        }
    }

	on_fail = {
		great_game_britain_progress_15 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_pacify_kazakh_steppes = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
        custom_tooltip = {
            text = je_pacify_kazakh_steppes_success_tt
            has_global_variable = kazakhstan_victory_var
        }
	}

	on_complete = {
		great_game_russia_progress_10 = yes
	}

    fail = {
        custom_tooltip = {
            text = je_pacify_kazakh_steppes_fail_tt
            has_global_variable = kazakhstan_defeat_var
        }
    }

	on_fail = {
		great_game_britain_progress_25 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_codify_chinese_border = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

    immediate = {
        s:STATE_AMUR = {
            save_scope_as = amur_scope
        }
        s:STATE_OUTER_MANCHURIA = {
            save_scope_as = primorye_scope
        }
        s:STATE_JETISY = {
            save_scope_as = jetisy_scope
        }
        s:STATE_ALTAI = {
            save_scope_as = altai_scope
        }
    }

	complete = {
        owns_entire_state_region = STATE_AMUR
        owns_entire_state_region = STATE_OUTER_MANCHURIA
        owns_entire_state_region = STATE_JETISY
        owns_entire_state_region = STATE_ALTAI
        NOT = {
            custom_tooltip = {
                text = china_doesnt_have_claim_tt
                any_country = {
                    NOT = {
                        this = ROOT
                    }
                    OR = {
                        has_claim = s:STATE_AMUR
                        has_claim = s:STATE_OUTER_MANCHURIA
                        has_claim = s:STATE_JETISY
                        has_claim = s:STATE_ALTAI
                    }
                }
            }
        }
	}

	on_complete = {
        set_global_variable = china_border_codified_variable
		great_game_russia_progress_15 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_consolidate_central_asia = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
        any_state = {
            filter = {
                OR = {
                    state_region = s:STATE_AKMOLINSK
                    state_region = s:STATE_URALSK
                    state_region = s:STATE_AKTOBE
                    state_region = s:STATE_SEMIRECHE
                    state_region = s:STATE_FERGANA
                    state_region = s:STATE_UZBEKIA
                    state_region = s:STATE_KHIVA
                    state_region = s:STATE_TAJIKISTAN
                    state_region = s:STATE_KIRGHIZIA
                    state_region = s:STATE_TURKMENIA
                    state_region = s:STATE_MERZ
                }
            }
			custom_tooltip = {
				text = completely_owned_by_this_country_or_subjects_tt
				OR = {
					owner = ROOT
					owner = {
						is_subject_of = ROOT
					}
				}
				NOT = {
					this.state_region = {
						any_scope_state = {
							owner = {
								NOR = {
									this = ROOT
									is_subject_of = ROOT
								}
							}
						}
					}
				}
			}
            percent = 1
        }
	}

	on_complete = {
		great_game_russia_progress_15 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_chinese_concessions = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		OR = {
			any_scope_state = {
				region = sr:region_manchuria
				is_treaty_port = yes
			}
			AND = {
				country_or_subject_owns_entire_state_region = STATE_SHENGJING
				country_or_subject_owns_entire_state_region = STATE_SOUTHERN_MANCHURIA
				country_or_subject_owns_entire_state_region = STATE_NORTHERN_MANCHURIA
			}
		}
        any_state = {
            filter = {
                region = sr:region_manchuria
				custom_tooltip = {
					text = owned_by_russia_or_chinese_country
					OR = {
						owner = c:RUS
						owner = {
							OR = {
								country_has_primary_culture = cu:manchu
								country_has_primary_culture = cu:han
							}
						}
					}
				}
            }
			any_scope_building = {
				is_building_type = building_railway
				levels_owned_by_country = {  
					target = c:RUS  
					value  >= 1
				}
			}
            percent >= 1
        }
	}

	on_complete = {
		set_global_variable = manchurian_railway_variable
		great_game_russia_progress_15 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_acquire_korean_protectorate = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
        exists = c:KOR
        c:KOR ?= {
            is_subject_of = ROOT
        }
	}

	on_complete = {
		set_global_variable = korean_protectorate_success
		great_game_russia_progress_25 = yes
	}

    fail = {
        c:KOR ?= {
            is_country_type = recognized
        }
    }

    on_fail = {
		set_global_variable = korean_protectorate_failure
		great_game_britain_progress_10 = yes
    }

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

### Britain

je_disrupt_russian_caucasus = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		c:CIR ?= {
            owns_entire_state_region = STATE_KUBAN
        }
	}
	
	on_complete = {
		great_game_britain_progress_15 = yes
	}

	fail = {
		custom_tooltip = {
			text = circassia_dead_tt
			OR = {	
				c:CIR ?= {
					is_country_alive = no
				}
				NOT = {
					exists = c:CIR
				}	
			}
		}
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_counter_russian_pacific_influence = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		any_diplomatically_relevant_country = {
			country_rank >= rank_value:unrecognized_major_power
			OR = {
				capital.region = sr:region_japan
				capital.region = sr:region_manchuria
				capital.region = sr:region_north_china
				capital.region = sr:region_south_china
				capital.region = sr:region_indonesia
			}
			OR = {
				has_diplomatic_pact = {
					who = ROOT
					type = alliance
				}
				has_diplomatic_pact = {
					who = ROOT
					type = defensive_pact
				}
				is_in_same_power_bloc = ROOT
			}
		}
	}

	on_complete = {
		great_game_britain_progress_10 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_consolidate_british_india = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	immediate = {
		c:BIC = {
			save_scope_as = india_scope
		}
		c:GBR = {
			save_scope_as = britain_scope
		}
		sr:region_north_india = {
			save_scope_as = north_india_region
		}
		sr:region_south_india = {
			save_scope_as = south_india_region
		}
		s:STATE_BURMA = {
			save_scope_as = burma_state_scope
		}
		s:STATE_KACHIN = {
			save_scope_as = kachin_state_scope
		}
		s:STATE_PEGU = {
			save_scope_as = pegu_state_scope
		}
	}

	complete = {
		OR = {
			any_scope_state = {
				state_region = s:STATE_DELHI
			}
			any_subject_or_below = {
				any_scope_state = {
					state_region = s:STATE_DELHI
				}
			}
		}
		custom_tooltip = {
			text = raj_expanded_westward_tt
			NOT = {
				any_country = {
					capital = {
						OR = {
							region = sr:region_north_india
							region = sr:region_south_india
						}
					}
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}
		custom_tooltip = {
			text = raj_expanded_eastwards_tt
			NOT = {
				any_state = {
					state_region = s:STATE_BURMA
					NOR = {
						owner = ROOT
						owner = {
							is_subject_of = ROOT
						}
					}
				}
			}
			NOT = {
				any_state = {
					state_region = s:STATE_PEGU
					NOR = {
						owner = ROOT
						owner = {
							is_subject_of = ROOT
						}
					}
				}
			}
			NOT = {
				any_state = {
					state_region = s:STATE_KACHIN
					NOR = {
						owner = ROOT
						owner = {
							is_subject_of = ROOT
						}
					}
				}
			}
		}
	}

	on_complete = {
		great_game_britain_progress_10 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_pamir_expedition_objective = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	scripted_button = je_pamir_expedition_dismiss_button

	complete = {
		c:RUS ?= {
			NOR = {
				custom_tooltip = {
					text = does_not_own_tajikistan_tt
					any_scope_state = {
						state_region = s:STATE_TAJIKISTAN
					}
				}
				any_subject_or_below = {
					custom_tooltip = {
						text = does_not_own_tajikistan_subject_tt
						any_scope_state = {
							state_region = s:STATE_TAJIKISTAN
						}
					}
				}
			}
		}
		OR = {
			custom_tooltip = {
				text = britain_owns_tajikistan_tt
				any_scope_state = {
					state_region = s:STATE_TAJIKISTAN
				}
			}
			trigger_if = {
				limit = {
					exists = this.power_bloc
					is_power_bloc_leader = yes
				}
				this.power_bloc = {
					any_power_bloc_member = {
						custom_tooltip = {
							text = britain_owns_tajikistan_subject_tt
							any_scope_state = {
								state_region = s:STATE_TAJIKISTAN
							}
						}
					}
				}
			}
		}
	}

	on_complete = {
		great_game_britain_progress_50 = yes
	}

	fail = {
		custom_tooltip = {
			text = has_cancelled_pamir_expedition_tt
			has_variable = dismissed_pamir_expedition
		}
	}

	invalid = {
		OR = {
			NOT = {
				has_journal_entry = je_great_game_control
			}
		}
	}

	weight = 1000
	transferable = yes
}

### Generic GP objectives

je_maintain_afghan_protectorate = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	immediate = {
		set_variable = {
			name = afghanistan_variable
			value = 0
		}
		set_global_variable = afghanistan_conflict_started
		cu:pashtun = {
			save_scope_as = pashtun_scope
		}
		cu:tajik = {
			save_scope_as = tajik_scope
		}
		sr:region_persia = {
			save_scope_as = persia_region
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					custom_tooltip = {
						text = all_pashtun_or_tajik_countries_puppeted_tt
						any_country = {
							filter = {
								capital = {
									region = sr:region_persia
								}
								OR = {
									country_has_primary_culture = cu:tajik
									country_has_primary_culture = cu:pashtun
								}
							}
							is_subject_of = root
							count = all
						}
					}
				}
				change_variable = { name = afghanistan_variable add = 1 }
			}
			else_if = {
				limit = {
					NOT = {
						any_country = {
							capital = {
								region = sr:region_persia
							}
							OR = {
								country_has_primary_culture = cu:tajik
								country_has_primary_culture = cu:pashtun
							}
						}
					}
					any_state = {
						filter = {
							region = sr:region_persia
							state_region = {
								is_homeland = cu:pashtun
							}
						}
						OR = {
							owner = ROOT
							owner = {
								is_subject_of = ROOT
							}
						}
						percent >= 0.6
					}
				}
				change_variable = { name = afghanistan_variable add = 1 }
			}
			else = {
				change_variable = { name = afghanistan_variable subtract = 1 }
			}
			clamp_variable = { name = afghanistan_variable max = 120 min = 0 }
		}
	}
	
	complete = {
		trigger_if = {
			limit = {
				any_country = {
					capital = {
						region = sr:region_persia
					}
					OR = {
						country_has_primary_culture = cu:tajik
						country_has_primary_culture = cu:pashtun
					}
				}
			}
			custom_tooltip = {
				text = all_pashtun_or_tajik_countries_puppeted_tt
				any_country = {
					filter = {
						capital = {
							region = sr:region_persia
						}
						OR = {
							country_has_primary_culture = cu:tajik
							country_has_primary_culture = cu:pashtun
						}
					}
					is_subject_of = root
					percent = 1
				}
			}
		}
		trigger_else = {
			any_state = {
				filter = {
					region = sr:region_persia
					state_region = {
						is_homeland = cu:pashtun
					}
				}
				custom_tooltip = {
					text = owned_by_this_country_or_subjects_tt
					OR = {
						owner = ROOT
						owner = {
							is_subject_of = ROOT
						}
					}
				}
				percent >= 0.6
			}
		}
		country_or_subject_owns_entire_state_region = STATE_KABUL
		country_or_subject_owns_entire_state_region = STATE_HERAT
		country_or_subject_owns_entire_state_region = STATE_KANDAHAR
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		set_global_variable = gg_afghanistan_protectorate_done
		if = {
			limit = {
				c:RUS ?= this
			}
			set_global_variable = afghanistan_russia_victory_var
			great_game_russia_progress_25 = yes
		}
		else_if = {
			limit = {
				c:GBR ?= this
			}
			set_global_variable = afghanistan_britain_victory_var
			great_game_britain_progress_25 = yes
		}
	}

	fail = {
		any_country = {
			filter = {
				capital = {
					region = sr:region_persia
				}
				OR = {
					country_has_primary_culture = cu:tajik
					country_has_primary_culture = cu:pashtun
				}
			}
			is_country_type = recognized
			percent = 1
		}
	}

	on_fail = {
		set_global_variable = gg_afghanistan_protectorate_done
		set_global_variable = afghanistan_afghan_victory_var
	}

	invalid = {
		OR = {
			NOT = {
				has_journal_entry = je_great_game_control
			}
			has_global_variable = gg_afghanistan_protectorate_done
		}
	}

	current_value = {
		value = root.var:afghanistan_variable
	}
	
	goal_add_value = {
		add = 120
	}
	
	progressbar = yes
	
	is_progressing = {
		trigger_if = {
			limit = {
				any_country = {
					capital = {
						region = sr:region_persia
					}
					OR = {
						country_has_primary_culture = cu:tajik
						country_has_primary_culture = cu:pashtun
					}
				}
			}
			any_country = {
				filter = {
					capital = {
						region = sr:region_persia
					}
					OR = {
						country_has_primary_culture = cu:tajik
						country_has_primary_culture = cu:pashtun
					}
				}
				is_subject_of = root
				count = all
			}
		}
		trigger_else = {
			any_state = {
				filter = {
					region = sr:region_persia
					state_region = {
						is_homeland = cu:pashtun
					}
				}
				OR = {
					owner = ROOT
					owner = {
						is_subject_of = ROOT
					}
				}
				percent >= 0.6
			}
		}
	}


	weight = 1000
	transferable = yes
}

je_consolidate_afghanistan_objective = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		custom_tooltip = {
			text = afghanistan_exists_tt
			exists = c:AFG
		}
		custom_tooltip = {
			text = afghanistan_borders_tt
			has_global_variable = afghan_borders_solidified
		}
	}

	on_complete = {
		if = {
			limit = {
				c:RUS ?= this
			}
			set_global_variable = afghanistan_russia_victory_var
			great_game_russia_progress_10 = yes
		}
		else_if = {
			limit = {
				c:GBR ?= this
			}
			set_global_variable = afghanistan_britain_victory_var
			great_game_britain_progress_10 = yes
		}
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1001
	transferable = yes
}

je_secure_influence_over_persia = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	immediate = {
		set_variable = {
			name = persia_variable
			value = 0
		}
		set_global_variable = persia_conflict_started
	}

	complete = {
		trigger_if = {
			limit = {
				exists = c:PER
			}
			custom_tooltip = {
				text = persia_puppeted_tt
				c:PER ?= {
					is_subject_of = ROOT
				}
			}
		}
		trigger_else = {
			any_state = {
				filter = {
					region = sr:region_persia
					state_region = {
						is_homeland = cu:persian
					}
				}
				custom_tooltip = {
					text = owned_by_this_country_or_subjects_tt
					OR = {
						owner = ROOT
						owner = {
							is_subject_of = ROOT
						}
					}
				}
				percent >= 0.6
			}
		}
		country_or_subject_owns_entire_state_region = STATE_IRAKAJEMI
		country_or_subject_owns_entire_state_region = STATE_TABRIZ
		country_or_subject_owns_entire_state_region = STATE_LARISTAN
		OR = {
			any_scope_state = {
				state_region = s:STATE_KHUZESTAN
			}
			any_subject_or_below = {
				any_scope_state = {
					state_region = s:STATE_KHUZESTAN
				}
			}
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	current_value = {
		value = root.var:persia_variable
	}
	
	goal_add_value = {
		add = 120
	}
	
	progressbar = yes

	is_progressing = {
		trigger_if = {
			limit = {
				exists = c:PER
			}
			c:PER ?= {
				is_subject_of = root
			}
		}
		trigger_else = {
			any_state = {
				filter = {
					region = sr:region_persia
					state_region = {
						is_homeland = cu:persian
					}
				}
				custom_tooltip = {
					text = owned_by_this_country_or_subjects_tt
					OR = {
						owner = ROOT
						owner = {
							is_subject_of = ROOT
						}
					}
				}
				percent >= 0.6
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					exists = c:PER
					c:PER ?= {
						is_subject_of = root
					}
				}
				change_variable = { name = persia_variable add = 1 }
			}
			else_if = {
				limit = {
					NOT ={
						exists = c:PER
					}
					any_state = {
						filter = {
							region = sr:region_persia
							state_region = {
								is_homeland = cu:persian
							}
						}
						custom_tooltip = {
							text = owned_by_this_country_or_subjects_tt
							OR = {
								owner = ROOT
								owner = {
									is_subject_of = ROOT
								}
							}
						}
						percent >= 0.6
					}
				}
				change_variable = { name = persia_variable add = 1 }
			}
			else = {
				change_variable = { name = persia_variable subtract = 1 }
			}
			clamp_variable = { name = persia_variable max = 120 min = 0 }
		}
	}
	
	on_complete = {
		set_global_variable = gg_afghanistan_protectorate_done
		if = {
			limit = {
				c:RUS ?= this
			}
			set_global_variable = persia_russia_victory_var
			great_game_russia_progress_25 = yes
		}
		else_if = {
			limit = {
				c:GBR ?= this
			}
			set_global_variable = persia_britain_victory_var
			great_game_britain_progress_25 = yes
		}
	}
	
	on_fail = {
		set_global_variable = persia_persian_victory_var
	}

    fail = {
        c:PER ?= {
            is_country_type = recognized
        }
    }

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

### Minor objectives

je_unify_afghanistan_objective = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		custom_tooltip = {
			text = has_formed_afghanistan_tt
			c:AFG ?= this
		}
	}
	
	on_complete = {

	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1002
	transferable = yes
}

je_consolidate_persia = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		any_scope_state = {
			state_region = s:STATE_KHUZESTAN
			is_split_state = no
			is_incorporated = yes
		}
		any_scope_state = {
			state_region = s:STATE_SISTAN
			is_split_state = no
			is_incorporated = yes
		}
		any_scope_state = {
			state_region = s:STATE_LARISTAN
			is_split_state = no
			is_incorporated = yes
		}
	}
	
	on_complete = {
		
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_achieve_sovereignty = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		custom_tooltip = {
			text = je_achieve_sovereignty_tt_3
			is_country_type = recognized
		}		
	}
	
	on_complete = {
		custom_tooltip = je_achieve_sovereignty_tt_2
	}

	immediate = {
		set_variable = {
			name = achieve_sovereignty_var
			value = 0
		}
	}

	fail = {
		custom_tooltip = {
			text = je_achieve_sovereignty_tt
			var:achieve_sovereignty_var >= 120
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					is_subject = yes
				}
				change_variable = {
					name = achieve_sovereignty_var
					add = 1
				}
			}
		}
	}

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					is_subject = no
				}
				set_variable = {
					name = achieve_sovereignty_var
					value = 0
				}
			}
		}
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

﻿je_colonization_laws = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		NOT = { has_law = law_type:law_no_colonial_affairs }
	}
	
	on_complete = {
		hidden_effect = {
			owner = {
				start_tutorial_lesson = { 
					tutorial_lesson = colonization_law_passed_complete
					journal_entry = je:je_colonization_laws
				}
			}
		}
	}

	weight = 1000
	transferable = yes
}

je_african_colonies = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		any_scope_state = {
			custom_tooltip = {
				text = "je_african_colonies_own_a_colony"
				state_in_africa = yes
				is_incorporated = no
			}
			custom_tooltip = {
				text = "je_african_colonies_own_whole_state_region"
				is_split_state = no
			}
		}
	}

	on_complete = {
	}

	weight = 1001
	transferable = yes
}

je_expand_navy_and_army = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		ROOT = {
			army_size >= 150
			navy_size >= 75
		}
	}
	
	on_complete = {
	}
		
	weight = 1002
	transferable = yes
}

je_form_alliance = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		any_country = {
			hidden_trigger = { NOT = { THIS = ROOT } }
			country_rank >= rank_value:major_power
			has_diplomatic_pact = {
				who = root
				type = alliance
			}
			count >= 2
		}
	}
	
	on_complete = {
	}
		
	weight = 1003
	transferable = yes
}

je_take_subject = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		any_country = {
			hidden_trigger = { NOT = { THIS = ROOT } }
			or = {
				has_diplomatic_pact = {
					who = root
					type = puppet
				}
				has_diplomatic_pact = {
					who = root
					type = dominion
				}
				has_diplomatic_pact = {
					who = root
					type = protectorate
				}
				has_diplomatic_pact = {
					who = root
					type = personal_union
				}
				has_diplomatic_pact = {
					who = root
					type = vassal
				}
				has_diplomatic_pact = {
					who = root
					type = tributary
				}
			}
			count >= 5
		}
	}
	
	on_complete = {
	}

	weight = 1004
	transferable = yes
}

je_increase_technology = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		has_technology_researched = bolt_action_rifles
		has_technology_researched = dreadnought
		has_technology_researched = malaria_prevention
	}
	
	on_complete = {
	}
		
	weight = 1005
	transferable = yes
}

je_greatest_power = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		global_country_ranking = 1
	}
	
	on_complete = {
	}
		
	weight = 1006
	transferable = yes
}

je_greater_power = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		country_rank = rank_value:great_power
	}
	
	on_complete = {
	}
		
	weight = 1007
	transferable = yes
}

je_great_power = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		country_rank >= rank_value:major_power
	}
	
	on_complete = {
	}
		
	weight = 1008
	transferable = yes
}

je_unrecognized_power = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		NOT = { is_country_type = unrecognized }
	}
	
	on_complete = {
		hidden_effect = {
			add_journal_entry = {
				type = je_the_hegemon
				objective_subgoal = sg_the_hegemon
			}
		}
	}
		
	weight = 1009
	transferable = yes
}

je_the_hegemon = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives
	active_update_frequency = 1

	complete = {
		total_population_including_subjects_share >= 0.4
	}

	on_complete = {
		hidden_effect = {
			owner = {
				start_tutorial_lesson = { 
					tutorial_lesson = hegemon_complete
					journal_entry = je:je_the_hegemon
				}
			}
		}
	}

	weight = 1009
	transferable = yes
}
﻿je_scotland_yard = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		has_law = law_type:law_dedicated_police
	}

	possible = {
		institution_investment_level = {
			institution = institution_police
			value >= 2
		}
	}

	on_monthly_pulse = {
		random_events = {
			# events involving the police are much more likely
			20 = 0
			1 = prostitution.1
			1 = prostitution.2
			1 = prostitution.3
			1 = prostitution.4
			1 = cable_street.1
			1 = crime_events.1
			1 = crime_events.2
			1 = crime_events.10
		}
	}

	complete = {
		institution_investment_level = {
			institution = institution_police
			value = 5
		}
		capital = {
			turmoil < 0.2
		}
	}

	on_complete = {
		trigger_event = { id = scotland_yard.1 }
		set_variable = has_scotland_yard_var
	}

	invalid = {
		NOT = { has_law = law_type:law_dedicated_police }
	}

	weight = 100

	timeout = 7300
}

je_serial_killer = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_crises

	on_yearly_pulse = {
		effect = {
			if = {
				limit = {
					institution_investment_level = {
						institution = institution_police
						value >= 4
					}
					has_modifier = serial_killer_active_investigation
				}
				random_list = {
					60 = { trigger_event = { id = crime_events.11 } } # killer caught
					20 = { trigger_event = { id = crime_events.12 } } # letter
					5 = { trigger_event = { id = crime_events.13 } } # another murder
					15 = { } # nothing happens this year
				}
			}
			else_if = {
				limit = {
					OR = {
						institution_investment_level = {
							institution = institution_police
							value >= 4
						}
						AND = {
							institution_investment_level = {
								institution = institution_police
								value >= 2
							}
							has_modifier = serial_killer_active_investigation
						}
					}
				}
				random_list = {
					40 = { trigger_event = { id = crime_events.11 } } # killer caught
					20 = { trigger_event = { id = crime_events.12 } } # letter
					10 =  { trigger_event = { id = crime_events.13 } } # another murder
					50 = { } # nothing happens this year
				}
			}
			else_if = {
				limit = {
					OR = {
						institution_investment_level = {
							institution = institution_police
							value >= 2
						}
						has_modifier = serial_killer_active_investigation
					}
				}
				random_list = {
					20 = { trigger_event = { id = crime_events.11 } } # killer caught
					20 = { trigger_event = { id = crime_events.12 } } # letter
					20 = { trigger_event = { id = crime_events.13 } } # another murder
					40 = { } # nothing happens this year
				}
			}
			else = {
				random_list = {
					5 = { trigger_event = { id = crime_events.11 } } # killer caught 
					20 = { trigger_event = { id = crime_events.12 } } # letter
					25 = { trigger_event = { id = crime_events.13 } } # another murder
					50 = { } # nothing happens this year
				}
			}
		}
	}

	complete = {
		custom_tooltip = {
			text = serial_killer_je_tt
			has_variable = serial_killer_caught
		}
	}

	on_complete = {
		scope:target = {
			remove_modifier = serial_killer_state_mod
			if = {
				limit = {
					has_modifier = modifier_public_worried
				}
				remove_modifier = modifier_public_worried
			}
		}
		remove_modifier = serial_killer_active_investigation
		remove_variable = ongoing_serial_killer_je
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = serial_killer_highest_chance
				trigger = {
					institution_investment_level = {
						institution = institution_police
						value >= 4
					}
					has_modifier = serial_killer_active_investigation
				}
			}
			triggered_desc = {
				desc = serial_killer_high_chance
				trigger = {
					OR = {
						institution_investment_level = {
							institution = institution_police
							value >= 4
						}
						AND = {
							institution_investment_level = {
								institution = institution_police
								value >= 2
							}
							has_modifier = serial_killer_active_investigation
						}
					}
				}
			}
			triggered_desc = {
				desc = serial_killer_medium_chance
				trigger = {
					OR = {
						institution_investment_level = {
							institution = institution_police
							value >= 2
						}
						has_modifier = serial_killer_active_investigation
					}
				}
			}
			triggered_desc = {
				desc = serial_killer_low_chance
				trigger = { }
			}
		}
	}
	invalid = {
		OR = {
			NOT = { exists = scope:target }
			scope:target = {
				OR = {
					NOT = { owner = ROOT }
					NOT = { has_modifier = serial_killer_state_mod }
				}
			}
		}
	}

	on_invalid = {
		scope:target = {
			remove_modifier = serial_killer_state_mod
			if = {
				limit = {
					has_modifier = modifier_public_worried
				}
				remove_modifier = modifier_public_worried
			}
		}
		remove_modifier = serial_killer_active_investigation
	}
}
﻿# triggered by 1848.5
je_secret_police = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_internal_affairs

	complete = {
		OR = {
			has_law = law_type:law_national_guard
			has_law = law_type:law_secret_police
		}
		institution_investment_level = {
			institution = institution_home_affairs
			value >= 3
		}
	}

	on_complete = {
		trigger_event = {
			id = 1848.6
		}
	}

	timeout = 3650

	weight = 50
}
﻿je_sick_man_main = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_historical_content

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		remove_modifier = sick_man_of_europe
		trigger_event = {
			id = sick_man.2
		}
	}

	timeout = 10950

	on_timeout = {
		remove_modifier = sick_man_of_europe
		trigger_event = {
			id = sick_man.3
		}
		if = {
			limit = {
	       		is_in_power_bloc = yes
	        	is_power_bloc_leader = yes				
			}
			custom_tooltip = sick_man_of_europe_lose_power_bloc
		}
	}

	current_value = {
		value = var:sick_man_var
	}

	goal_add_value = {
		add = 4
	}

	progressbar = yes

	weight = 10000
	
	should_be_pinned_by_default = yes
}

je_sick_man_syria = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		owns_entire_state_region = STATE_ALEPPO
		owns_entire_state_region = STATE_SYRIA
		owns_entire_state_region = STATE_LEBANON
		owns_entire_state_region = STATE_PALESTINE
		owns_entire_state_region = STATE_TRANSJORDAN
		owns_entire_state_region = STATE_ADANA
	}

	on_complete = {
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		set_variable = completed_syria_je
		s:STATE_SINAI = {
			add_claim = ROOT
		}
		s:STATE_UPPER_EGYPT = {
			add_claim = ROOT
		}
		s:STATE_MIDDLE_EGYPT = {
			add_claim = ROOT
		}
		s:STATE_LOWER_EGYPT = {
			add_claim = ROOT
		}
		if = {
			limit = {
				OR = {
					AND = {
						exists = c:EGY
						c:EGY = {
							is_subject_of = ROOT
						}
					}
					AND = {
						owns_entire_state_region = STATE_SINAI
						owns_entire_state_region = STATE_UPPER_EGYPT
						owns_entire_state_region = STATE_MIDDLE_EGYPT
						owns_entire_state_region = STATE_LOWER_EGYPT
					}
				}
			}
			custom_tooltip = je_sick_man_advance
			change_variable = {
				name = sick_man_var
				add = 1
			}
		}
		else = {
			add_journal_entry = {
				type = je_sick_man_egypt
			}
		}
		custom_tooltip = sickman_syria_egypt
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	on_weekly_pulse = {
		events = {
			egyptian_crisis_events.1
		}
	}

	transferable = no

	weight = 5000
	
	should_be_pinned_by_default = yes
}

je_sick_man_egypt = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		OR = {
			AND = {
				exists = c:EGY
				c:EGY = {
					is_subject_of = ROOT
				}
			}
			AND = {
				owns_entire_state_region = STATE_SINAI
				owns_entire_state_region = STATE_UPPER_EGYPT
				owns_entire_state_region = STATE_MIDDLE_EGYPT
				owns_entire_state_region = STATE_LOWER_EGYPT
			}
		}
	}

	on_complete = {
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	transferable = no

	weight = 5000
	
	should_be_pinned_by_default = yes
}

je_sick_man_economy = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_historical_content

	complete = {
		in_default = no
		any_scope_state = {
			is_incorporated = yes
			has_building = building_urban_center
			percent >= 0.75
		}
	}

	on_complete = {
		set_variable = completed_sick_man_economy_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	transferable = no

	weight = 5000
	should_be_pinned_by_default = yes
}

# Literacy and Universities
je_sick_man_education = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	complete = {
		any_scope_building = {
			is_building_type = building_university
			occupancy > 0.9
			level >= 5
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
		literacy_rate >= 0.2
	}

	on_complete = {
		set_variable = completed_sick_man_education_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
	}

	current_value = {
		value = root.literacy_rate
	}

	goal_add_value = {
		value = root.literacy_rate
		add = 0.2
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	transferable = no

	weight = 5000

	should_be_pinned_by_default = yes

	progressbar = yes
}

# Nationalism
je_sick_man_separatism = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	group = je_group_historical_content

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		highest_secession_progress < 0.5
	}

	on_complete = {
		set_variable = completed_separatism_sick_man_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					highest_secession_progress < 0.5
				}
				change_variable = {
					name = sick_man_separatist_var
					add = 1
				}
			}
		}
		random_events = {
			100 = 0
			10 = tanzimat_events.5 # Paranoia Event
		}
	}

	fail = {
		highest_secession_progress > 0.5
	}

	current_value = {
		value = var:sick_man_separatist_var
	}

	goal_add_value = {
		add = 180
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	transferable = no

	weight = 5000

	should_be_pinned_by_default = yes

	progressbar = yes
}

# Army Reform
je_sick_man_army = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		army_size >= 100
		has_technology_researched = napoleonic_warfare
		NOR = {
			any_scope_building = {
				is_building_type = building_barracks				
				OR = {
					building_has_goods_shortage = yes
					has_active_production_method = pm_no_organization
				}
			}
			any_military_formation = {
				filter = {
					is_army = yes
				}
				any_combat_unit = {
					has_unit_type = unit_type:combat_unit_type_irregular_infantry
				}
				percent >= 0.25
			}
		}
	}

	on_complete = {
		set_variable = completed_sick_man_army_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
	}

	on_monthly_pulse = {
		events = {
			tanzimat_events.10 # Tanzimat Draft Question
		}
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	transferable = no

	should_be_pinned_by_default = yes

	weight = 5000
}


# Bureaucractic Reform
je_sick_man_bureaucracy = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_historical_content

	complete = {
		NOR = { 
			has_law = law_type:law_hereditary_bureaucrats 
			has_law = law_type:law_land_based_taxation
			has_law = law_type:law_consumption_based_taxation
		}
		bureaucracy >= 0 
		approaching_bureaucracy_shortage = no
	}

	on_complete = {
		set_variable = completed_sick_man_bureaucracy_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		remove_modifier = outmoded_bureaucracy
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = tanzimat_events.9 # Land registration resisted
		}
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	transferable = no

	weight = 5000

	should_be_pinned_by_default = yes
}


﻿je_skyscraper_site = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_technology

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = skyscraper_var
				add = 1
			}
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
		any_scope_state = {
			is_split_state = no
			is_incorporated = yes
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 20
			}
		}
	}

	on_complete = {
		remove_modifier = skyscraper_survey
		trigger_event = { id = skyscraper.1 } # site found
	}

	invalid = {
		NOT = {
			any_scope_state = {
				is_split_state = no
				is_incorporated = yes
				any_scope_building = {
					is_building_type = building_urban_center
					level >= 20
				}
			}
		}
	}

	on_invalid = {
		remove_modifier = skyscraper_survey
		remove_variable = skyscraper_var
	}

	current_value = {
		value = root.var:skyscraper_var
	}

	goal_add_value = {
		value = 24
	}

	progressbar = yes

	weight = 10

	should_be_pinned_by_default = yes
}

je_skyscraper_construction = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_technology

	complete = {
		scope:target = {
			any_scope_building = {
				is_building_type = building_skyscraper
				is_under_construction = no
			}
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				has_modifier = skyscraper_site
			}
		}
	}
	
	on_fail = {
		remove_variable = skyscraper_var
	}

	on_complete = {
		trigger_event = { id = skyscraper.2 }
		remove_variable = skyscraper_var
		scope:target = {
			remove_modifier = skyscraper_site
		}
	}

	should_be_pinned_by_default = yes
}
﻿je_south_america_migration = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		country_is_in_south_america = yes
		any_primary_culture = {
			has_discrimination_trait = european_heritage
		}
	}

	possible = {
		has_technology_researched = civilizing_mission
		country_rank >= rank_value:minor_power
		average_sol >= 10
		is_at_war = no
		is_subject = no
		OR = {
			has_law = law_type:law_racial_segregation
			has_law = law_type:law_cultural_exclusion
			has_law = law_type:law_multicultural
		}
		NOR = {
			has_law = law_type:law_closed_borders
			has_law = law_type:law_isolationism
		}
	}

	immediate = {
		set_variable = {
			name = south_america_incorporated_population
			value = 0
		}
		set_variable = {
			name = south_america_incorporated_states
			value = 0
		}
		every_scope_state = {
			limit = {
				is_incorporated = yes
				state_is_in_south_america = yes
			}
			ROOT = {
				change_variable = {
					name = south_america_incorporated_population
					add = PREV.state_population
				}
				change_variable = {
					name = south_america_incorporated_states
					add = 1
				}
			}
		}
		set_variable = {
			name = south_america_migration_goal
			value = var:south_america_incorporated_states
		}
		change_variable = {
			name = south_america_migration_goal
			multiply = 1500000
		}
		trigger_event = { id = sa_migration.2 popup = yes }
	}

	on_weekly_pulse = {
		effect = {
			set_variable = {
				name = south_america_incorporated_population
				value = 0
			}
			every_scope_state = {
				limit = {
					is_incorporated = yes
					state_is_in_south_america = yes
				}
				ROOT = {
					change_variable = {
						name = south_america_incorporated_population
						add = PREV.state_population
					}
				}
			}
			set_variable = {
				name = south_america_incorporated_states
				value = 0
			}
			every_scope_state = {
				limit = {
					is_incorporated = yes
					state_is_in_south_america = yes
				}
				ROOT = {
					change_variable = {
						name = south_america_incorporated_states
						add = 1
					}
				}
			}
			set_variable = {
				name = south_america_migration_goal
				value = var:south_america_incorporated_states
			}
			change_variable = {
				name = south_america_migration_goal
				multiply = 1500000
			}
		}
	}

	complete = {
		custom_tooltip = {
			text = sa_migration_completion_tt
			trigger_if = {
				limit = { exists = var:south_america_incorporated_population }
				var:south_america_incorporated_population >= var:south_america_migration_goal 
				var:south_america_incorporated_population > 0
				var:south_america_migration_goal > 0
			}
			trigger_else = {
				always = no
			}
		}
	}

	on_complete = {
		trigger_event = { id = sa_migration.3 popup = yes }
		show_as_tooltip = {
			add_modifier = {
				name = populated_southamerica
			}
		}
	}

	invalid = {
		has_variable = cancel_sa_migration_var
	}

	scripted_button = southamerica_migration_button

	weight = 100

	should_be_pinned_by_default = yes
}

je_central_america_migration = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		capital = {
			OR = {
				region = sr:region_mexico
				region = sr:region_central_america
			}
		}
		any_primary_culture = {
			has_discrimination_trait = european_heritage
		}
	}

	possible = {
		has_technology_researched = civilizing_mission
		country_rank >= rank_value:minor_power
		average_sol >= 10
		is_at_war = no
		is_subject = no
		OR = {
			has_law = law_type:law_racial_segregation
			has_law = law_type:law_cultural_exclusion
			has_law = law_type:law_multicultural
		}
		NOR = {
			has_law = law_type:law_closed_borders
			has_law = law_type:law_isolationism
		}
	}

	immediate = {
		set_variable = {
			name = central_america_incorporated_population
			value = 0
		}
		set_variable = {
			name = central_america_incorporated_states
			value = 0
		}
		every_scope_state = {
			limit = {
				is_incorporated = yes
				OR = {
					region = sr:region_mexico
					region = sr:region_central_america
				}
			}
			ROOT = {
				change_variable = {
					name = central_america_incorporated_population
					add = PREV.state_population
				}
				change_variable = {
					name = central_america_incorporated_states
					add = 1
				}
			}
		}
		set_variable = {
			name = central_america_migration_goal
			value = var:central_america_incorporated_states
		}
		change_variable = {
			name = central_america_migration_goal
			multiply = 1500000
		}
		trigger_event = { id = sa_migration.2 popup = yes }
	}

	on_weekly_pulse = {
		effect = {
			set_variable = {
				name = central_america_incorporated_population
				value = 0
			}
			every_scope_state = {
				limit = {
					is_incorporated = yes
					OR = {
						region = sr:region_mexico
						region = sr:region_central_america
					}
				}
				ROOT = {
					change_variable = {
						name = central_america_incorporated_population
						add = PREV.state_population
					}
				}
			}
			set_variable = {
				name = central_america_incorporated_states
				value = 0
			}
			every_scope_state = {
				limit = {
					is_incorporated = yes
					OR = {
						region = sr:region_mexico
						region = sr:region_central_america
					}
				}
				ROOT = {
					change_variable = {
						name = central_america_incorporated_states
						add = 1
					}
				}
			}
			set_variable = {
				name = central_america_migration_goal
				value = var:central_america_incorporated_states
			}
			change_variable = {
				name = central_america_migration_goal
				multiply = 1000000
			}
		}
	}

	complete = {
		custom_tooltip = {
			text = ca_migration_completion_tt
			var:central_america_incorporated_population >= var:central_america_migration_goal
			var:central_america_incorporated_population > 0
			var:central_america_migration_goal > 0
		}
	}

	on_complete = {
		trigger_event = { id = sa_migration.3 popup = yes }
		show_as_tooltip = {
			add_modifier = {
				name = populated_southamerica
			}
		}
	}

	invalid = {
		has_variable = cancel_sa_migration_var
	}

	scripted_button = southamerica_migration_button

	weight = 100

	should_be_pinned_by_default = yes
}

je_american_west_migration = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		OR = {
			country_is_in_north_america = yes
			country_is_in_central_america = yes
		}
		any_primary_culture = {
			has_discrimination_trait = european_heritage
		}
		any_scope_state = {
			OR = {
				region = sr:region_pacific_coast
				region = sr:region_great_plains
			}
		}
	}

	possible = {
		has_technology_researched = civilizing_mission
		country_rank >= rank_value:minor_power
		any_scope_state = {
			is_incorporated = yes
			OR = {
				region = sr:region_pacific_coast
				region = sr:region_great_plains
			}
			count >= 3
		}
		average_sol >= 10
		is_at_war = no
		is_subject = no
		OR = {
			has_law = law_type:law_racial_segregation
			has_law = law_type:law_cultural_exclusion
			has_law = law_type:law_multicultural
		}
		NOR = {
			has_law = law_type:law_closed_borders
			has_law = law_type:law_isolationism
		}
	}

	immediate = {
		set_variable = {
			name = american_west_incorporated_population
			value = 0
		}
		set_variable = {
			name = american_west_incorporated_states
			value = 0
		}
		every_scope_state = {
			limit = {
				is_incorporated = yes
				OR = {
					region = sr:region_pacific_coast
					region = sr:region_great_plains
				}
			}
			ROOT = {
				change_variable = {
					name = american_west_incorporated_population
					add = PREV.state_population
				}
				change_variable = {
					name = american_west_incorporated_states
					add = 1
				}
			}
		}
		set_variable = {
			name = american_west_migration_goal
			value = var:american_west_incorporated_states
		}
		change_variable = {
			name = american_west_migration_goal
			multiply = 1500000
		}
		trigger_event = { id = sa_migration.2 popup = yes }
	}

	on_weekly_pulse = {
		effect = {
			set_variable = {
				name = american_west_incorporated_population
				value = 0
			}
			every_scope_state = {
				limit = {
					is_incorporated = yes
					OR = {
						region = sr:region_pacific_coast
						region = sr:region_great_plains
					}
				}
				ROOT = {
					change_variable = {
						name = american_west_incorporated_population
						add = PREV.state_population
					}
				}
			}
			set_variable = {
				name = american_west_incorporated_states
				value = 0
			}
			every_scope_state = {
				limit = {
					is_incorporated = yes
					OR = {
						region = sr:region_pacific_coast
						region = sr:region_great_plains
					}
				}
				ROOT = {
					change_variable = {
						name = american_west_incorporated_states
						add = 1
					}
				}
			}
			set_variable = {
				name = american_west_migration_goal
				value = var:american_west_incorporated_states
			}
			change_variable = {
				name = american_west_migration_goal
				multiply = 1000000
			}
		}
	}

	complete = {
		custom_tooltip = {
			text = wa_migration_completion_tt
			var:american_west_incorporated_population >= var:american_west_migration_goal
			var:american_west_incorporated_population > 0
			var:american_west_migration_goal > 0
		}
	}

	on_complete = {
		trigger_event = { id = sa_migration.3 popup = yes }
		show_as_tooltip = {
			add_modifier = {
				name = populated_southamerica
			}
		}
	}

	invalid = {
		OR = { 
			has_variable = cancel_sa_migration_var
			NOT = {
				any_scope_state = {
					OR = {
						region = sr:region_pacific_coast
						region = sr:region_great_plains
					}
				}
			}
		}
	}

	scripted_button = southamerica_migration_button

	weight = 100

	should_be_pinned_by_default = yes
}
﻿je_strike = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_crises

	is_shown_when_inactive = {
		has_technology_researched = political_agitation
		has_technology_researched = human_rights
		NOT = { has_law = law_type:law_council_republic }
		ig:ig_trade_unions = {
			is_marginal = no
			ig_clout >= 0.1
		}
		ig:ig_industrialists = {
			is_marginal = no
		}
	}

	possible = {
		ig:ig_trade_unions = {
			is_in_government = no
			ig_approval < 0
		}
		OR = {
			institution_investment_level = {
				institution = institution_workplace_safety
				value < 3
			}
			institution_investment_level = {
				institution = institution_social_security
				value < 3
			}
		}
		# we should probably simplfy this
		any_scope_state = {
			is_incorporated = yes
			OR = {
				radical_fraction = {
					value >= 0.2
					pop_type = laborers
				}
				radical_fraction = {
					value >= 0.2
					pop_type = machinists
				}
			}
			any_scope_pop = {
				OR = {
					is_pop_type = laborers
					is_pop_type = machinists
				}
				standard_of_living < 15
				pop_is_discriminated = no
				OR = {
					pop_employment_building_group = bg_manufacturing
					pop_employment_building_group = bg_mining
					pop_employment_building_group = bg_private_infrastructure
				}
			}
		}
	}

	immediate = {
		trigger_event = { id = strike.1 }
		set_variable = {
			name = strike_timer_var
			value = 0
		}
	}

	complete = {
		strike_goal_complete_trigger = yes
	}

	on_complete = {
		custom_tooltip = je_end_strike_tt
		if = {
			limit = {
				has_variable = strike_negotiator
			}
			trigger_event = {
				id = strike.8 # strikers appeased
			}
		}
		else_if = {
			limit = {
				has_variable = strike_breaker
			}
			trigger_event = {
				id = strike.9 # strikers crushed
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = strike_timer_var
				add = 1
			}
		}
		events = {
			strike.3
		}
		random_events = {
			10 = 0
			1 = strike.5
			1 = strike.6
			1 = strike.7
		}
	}

	current_value = {
		value = root.var:strike_timer_var
	}

	goal_add_value = {
		value = 60
	}

	progressbar = yes

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_general_strike_warning
				trigger = {
					scope:journal_entry = {
						is_goal_complete = no
					}
				}
			}
			triggered_desc = {
				desc = je_general_strike_active
				trigger = {
					scope:journal_entry = {
						is_goal_complete = yes
					}
				}
			}
		}
	}

	invalid = {
		has_law = law_type:law_council_republic
	}

	on_invalid = {
		custom_tooltip = {
			text = end_strike_tt
			strike_end_effect = yes
		}
	}

	weight = 100
	should_be_pinned_by_default = yes
}

﻿je_suffragists = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		has_technology_researched = human_rights
		OR = {
			has_law = law_type:law_landed_voting
			has_law = law_type:law_wealth_voting
			has_law = law_type:law_census_voting
			has_law = law_type:law_universal_suffrage
		}
	}

	possible = {
		has_technology_researched = feminism
		has_technology_researched = political_agitation
		OR = {
			has_law = law_type:law_women_own_property
			has_law = law_type:law_women_in_the_workplace
		}
		empty_agitator_slots >= 1
	}

	immediate = {
		trigger_event = { id = suffragist_events.9 popup = yes }
	}

	on_monthly_pulse = {
		random_events = {
			200 = 0
			20 = suffragist_events.1
			20 = suffragist_events.2
			20 = suffragist_events.3
			20 = suffragist_events.4
			20 = suffragist_events.5
			20 = suffragist_events.7
			20 = suffragist_events.8
		}
	}

	complete = {
		has_law = law_type:law_womens_suffrage
		in_election_campaign = yes
	}

	on_complete = {
		trigger_event = { id = suffragist_events.10 popup = yes }
	}

	invalid = {
		NOR = {
			has_law = law_type:law_landed_voting
			has_law = law_type:law_wealth_voting
			has_law = law_type:law_census_voting
			has_law = law_type:law_universal_suffrage
		}
	}

	timeout = 7300
	should_be_pinned_by_default = yes
}

﻿je_rubber = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = rubber_je_done }
		any_scope_state = {
			has_potential_resource = bg_rubber
		}
	}

	possible = {
		has_technology_researched = rubber_mastication
		any_scope_building = {
			is_building_type = building_rubber_plantation
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_rubber_plantation
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy >= 0.5
			level >= 5
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.1 }
		set_variable = {
			name = rubber_je_done
		}
	}

	timeout = 3650
}

je_mechanized_farming = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = mechanized_farming_je_done }
		has_technology_researched = threshing_machine
	}

	possible = {
		has_technology_researched = mechanized_farming
	}

	complete = {
		any_scope_building = {
			filter = {
				OR = {
					is_building_type = building_rye_farm
					is_building_type = building_wheat_farm
					is_building_type = building_maize_farm
					is_building_type = building_millet_farm
				}
			}
			percent >= 0.75
			trigger_if = {
				limit = {
					owner = {
						has_technology_researched = compression_ignition
					}
				}
				OR = {
					has_active_production_method = pm_tractors
					has_active_production_method = pm_compression_ignition_tractors
				}
			}
			trigger_else = {
				OR = {
					has_active_production_method = pm_tractors
                }
			}
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
		}
	}

	on_complete = {
		set_variable = mechanized_farming_je_done
		trigger_event = { id = production_tech_events.600 }
	}

	timeout = 3650
}

je_atmospheric_engine = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = atmospheric_engine_je_done }
		has_technology_researched = shaft_mining
		NOT = { has_technology_researched = watertube_boiler }
	}

	possible = {
		has_technology_researched = atmospheric_engine
		any_scope_building = {
			OR = {
				is_building_type = building_coal_mine
				is_building_type = building_iron_mine
				is_building_type = building_sulfur_mine
				is_building_type = building_lead_mine
			}
			level >= 3
		}
	}

	complete = {
		any_scope_building = {
			filter = {
				OR = {
					is_building_type = building_coal_mine
					is_building_type = building_iron_mine
					is_building_type = building_sulfur_mine
					is_building_type = building_lead_mine
				}
			}
			percent > 0.75
			OR = {
			    has_active_production_method = pm_atmospheric_engine_pump_building_coal_mine
			    has_active_production_method = pm_atmospheric_engine_pump_building_iron_mine
			    has_active_production_method = pm_atmospheric_engine_pump_building_lead_mine
			    has_active_production_method = pm_atmospheric_engine_pump_building_sulfur_mine
            }
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
		}
		OR = {
			can_research = railways
			can_research = watertube_boiler
		}
	}

	on_complete = {
		set_variable = atmospheric_engine_je_done
		trigger_event = { id = production_tech_events.601 }
	}

	fail = {
		has_technology_researched = watertube_boiler
	}

	timeout = 3650
}

je_plastics = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = plastics_je_done }
		has_technology_researched = reinforced_concrete
	}

	possible = {
		has_technology_researched = plastics
		any_scope_building = {
			is_building_type = building_glassworks
		}
	}

	complete = {
		any_scope_building = {
			filter = {
				is_building_type = building_glassworks
			}

			percent >= 0.5

			occupancy > 0.75
			weekly_profit > 10
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			level >= 5
			has_active_production_method = pm_houseware_plastics
		}
	}



	on_complete = {
		trigger_event = { id = production_tech_events.200 }
		set_variable = {
			name = plastics_je_done
		}
	}
}

je_radio = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = radio_je_done }
		has_technology_researched = telephone
	}

	possible = {
		has_technology_researched = radio
		any_scope_building = {
			is_building_type = building_electrics_industry
		}
	}

	complete = {
		any_scope_building = {
			filter = {
				is_building_type = building_electrics_industry
			}

			percent >= 0.5
			occupancy > 0.75
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			level >= 5
			has_active_production_method = pm_radios
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.210 }
		set_variable = {
			name = radio_je_done
		}
	}
}

je_dynamite = { 
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = dynamite_je_done }
		has_technology_researched = nitroglycerin
	}

	possible = {
		has_technology_researched = dynamite
		any_scope_building = {
			OR = {
				is_building_type = building_munition_plants
				is_building_type = building_iron_mine
				is_building_type = building_coal_mine
				is_building_type = building_lead_mine
				is_building_type = building_sulfur_mine
			}
		}
		any_scope_building = {
			is_building_type = building_explosives_factory
		}
	}

	complete = {
		OR = {
			any_scope_building = {
				custom_tooltip = je_shortform_building_munition_plants_tooltip
				filter = {
					is_building_type = building_munition_plants
				}
				percent > 0.75
				cash_reserves_ratio >= 0.25
				weekly_profit > 0
				occupancy >= 0.75
			}
			any_scope_building = {
				custom_tooltip = je_shortform_building_mine_tooltip
				filter = {
					OR = {
						is_building_type = building_iron_mine
						is_building_type = building_coal_mine
						is_building_type = building_lead_mine
						is_building_type = building_sulfur_mine
					}
				}
				percent > 0.75
				hidden_trigger = {
					OR = {
	                    has_active_production_method = pm_dynamite_building_coal_mine
	                    has_active_production_method = pm_dynamite_building_iron_mine
	                    has_active_production_method = pm_dynamite_building_lead_mine
	                    has_active_production_method = pm_dynamite_building_sulfur_mine
	                }
                }
                custom_tooltip = has_activated_dynamite
				cash_reserves_ratio >= 0.25
				weekly_profit > 0
				occupancy >= 0.75
			}
		}
		any_scope_building = {
			custom_tooltip = je_shortform_building_chemical_plants_tooltip
			filter = {
				is_building_type = building_explosives_factory
			}
			percent > 0.75
			OR = {
				has_active_production_method = pm_leblanc_process
				has_active_production_method = pm_ammonia-soda_process
				has_active_production_method = pm_vacuum_evaporation
				has_active_production_method = pm_brine_electrolysis
			}
			cash_reserves_ratio >= 0.25
			weekly_profit > 0
			occupancy >= 0.75
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.102 }
		set_variable = {
			name = dynamite_je_done
		}
	}

	timeout = 3650
}

je_combustion_engines = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = combustion_engines_je_done }
		has_technology_researched = rotary_valve_engine
	}

	possible = {
		has_technology_researched = combustion_engine
		any_scope_building = {
			OR = {
				is_building_type = building_urban_center
				is_building_type = building_motor_industry
			}
		}
	}

	complete = {
		OR = {
			any_scope_building = {
				filter = {
					is_building_type = building_urban_center
				}
				percent > 0.75
				has_active_production_method = pm_public_motor_carriages
				cash_reserves_ratio >= 0.25
				weekly_profit > 0
				occupancy >= 0.75
			}
			any_scope_building = {
				filter = {
					is_building_type = building_motor_industry
				}
				percent > 0.75
				has_active_production_method = pm_automobile_production
				cash_reserves_ratio >= 0.25
				weekly_profit > 0
				occupancy >= 0.75
			}
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.103 }
		set_variable = {
			name = combustion_engines_je_done
		}
	}

	timeout = 3650
}

# Branching Out
je_railroads = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = railroad_je_done }
		any_scope_building = {
			OR = {
				is_building_type = building_coal_mine
				is_building_type = building_iron_mine
				is_building_type = building_lead_mine
				is_building_type = building_sulfur_mine
				is_building_type = building_logging_camp
				is_building_type = building_oil_rig
				is_building_type = building_coffee_plantation
				is_building_type = building_cotton_plantation
				is_building_type = building_dye_plantation
				is_building_type = building_opium_plantation
				is_building_type = building_tea_plantation
				is_building_type = building_tobacco_plantation
				is_building_type = building_sugar_plantation
				is_building_type = building_rubber_plantation
				is_building_type = building_banana_plantation
			}
		}
	}

	possible = {
		has_technology_researched = railways
		any_scope_building = {
			is_building_type = building_railway
		}
	}

	complete = {
		trigger_if = {
			limit = {
				any_scope_building = {
					OR = {
						is_building_type = building_coal_mine
						is_building_type = building_iron_mine
						is_building_type = building_lead_mine
						is_building_type = building_sulfur_mine
						is_building_type = building_logging_camp
						is_building_type = building_oil_rig
					}
				}
			}
			any_scope_building = {
				filter = {
					OR = {
						is_building_type = building_coal_mine
						is_building_type = building_iron_mine
						is_building_type = building_lead_mine
						is_building_type = building_sulfur_mine
						is_building_type = building_logging_camp
						is_building_type = building_oil_rig
					}
				}
				percent > 0.2
				OR = {
				    has_active_production_method = pm_rail_transport_mine
				    has_active_production_method = pm_rail_transport_building_logging_camp
				    has_active_production_method = pm_rail_transport_building_oil_rig
                }
				occupancy >= 0.75
			}
		}
		trigger_if = {
			limit = {
				any_scope_building = {
					OR = {
						is_building_type = building_coffee_plantation
						is_building_type = building_cotton_plantation
						is_building_type = building_dye_plantation
						is_building_type = building_opium_plantation
						is_building_type = building_tea_plantation
						is_building_type = building_tobacco_plantation
						is_building_type = building_sugar_plantation
						is_building_type = building_rubber_plantation
						is_building_type = building_banana_plantation
					}
				}
			}
			any_scope_building = {
				filter = {
					OR = {
						is_building_type = building_coffee_plantation
						is_building_type = building_cotton_plantation
						is_building_type = building_dye_plantation
						is_building_type = building_opium_plantation
						is_building_type = building_tea_plantation
						is_building_type = building_tobacco_plantation
						is_building_type = building_sugar_plantation
						is_building_type = building_rubber_plantation
						is_building_type = building_banana_plantation
					}
				}
				percent > 0.2
				has_active_production_method = pm_steam_rail_transport
				occupancy >= 0.75
			}
		}
		any_scope_state = {
			has_building = building_motor_industry
		}
		any_scope_state = {
			has_building = building_railway
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.501 }
		set_variable = {
			name = railroad_je_done
		}
	}

	timeout = 3650
}

je_telephone = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = telephone_je_done }
		has_technology_researched = shift_work
	}

	possible = {
		has_technology_researched = telephone
		NOT = { has_technology_researched = radio }
	}

	complete = {
		any_scope_building = {
			is_building_type = building_electrics_industry
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
			level >= 5
		}
		NOT = { has_technology_researched = radio }
		can_research = radio
	}

	on_complete = {
		trigger_event = { id = production_tech_events.300 }
		set_variable = {
			name = telephone_je_done
		}
	}

	fail = {
		has_technology_researched = radio
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = technology_events.10
		}
	}

	timeout = 3650
}

je_whaling = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = whaling_je_done }
		any_scope_state = {
			has_building = building_whaling_station
		}
		NOT = { has_technology_researched = pumpjacks }
	}

	possible = {
		any_scope_state = {
			has_building = building_whaling_station
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_whaling_station
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
			level >= 3
		}
		any_scope_character = {
			has_role = admiral
			is_busy = no
			is_ruler = no
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.301 }
		set_variable = {
			name = whaling_je_done
		}
	}
	
	invalid = {
		has_technology_researched = pumpjacks
	}

	timeout = 3650
}

je_pumpjacks = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = pumpjacks_je_done }
		has_technology_researched = steam_donkey
		has_technology_researched = dynamite
		any_scope_state = {
			has_potential_resource = bg_oil_extraction
		}
	}

	possible = {
		has_technology_researched = pumpjacks
		any_scope_building = {
			is_building_type = building_oil_rig
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_oil_rig
			occupancy > 0.75
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			level >= 5
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.401 }
		set_variable = {
			name = pumpjacks_je_done
		}
	}

	timeout = 3650
}

je_electrical_generation = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = electrical_generation_je_done }
		has_technology_researched = mechanized_workshops
	}

	possible = {
		has_technology_researched = electrical_generation
		any_scope_building = {
			is_building_type = building_power_plant
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_power_plant
			occupancy > 0.75
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			level >= 5
		}
		OR = {
			can_research = electric_railway
			can_research = steam_turbine
			can_research = shift_work
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.402 }
		set_variable = {
			name = electrical_generation_je_done
		}
	}

	timeout = 3650
}

je_steam_engines = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		has_technology_researched = railways
		NOT = { has_technology_researched = electric_railway }
		any_scope_state = {
			any_neighbouring_state = {
				owner = ROOT
			}
		}
	}

	possible = {
		any_scope_building = {
			is_building_type = building_motor_industry
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_motor_industry
			occupancy > 0.75
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			level >= 3
		}
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_railway
				occupancy > 0.75
			}
			custom_tooltip = {
				text = has_adjacent_railway_tt
				any_neighbouring_state = {
					owner = ROOT
					any_scope_building = {
						is_building_type = building_railway
						occupancy > 0.75
					}
				}
			}
		}
		
	}

	on_complete = {
		trigger_event = { id = production_tech_events.700 }
	}

	timeout = 3650
}
﻿je_elevator = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = elevators_je_done }
		has_technology_researched = steel_frame_buildings
	}

	possible = {
		has_technology_researched = elevator
		any_scope_building = {
			is_building_type = building_steel_mills
		}
		any_scope_building = {
			is_building_type = building_glassworks
		}
		any_scope_building = {
			is_building_type = building_urban_center
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_steel_mills
		}
		any_scope_building = {
			is_building_type = building_glassworks
		}
		any_scope_building = {
			filter = {
				is_building_type = building_urban_center
			}
			is_building_type = building_urban_center
			percent > 0.75
			has_active_production_method = pm_arcades
			cash_reserves_ratio >= 0.25
			weekly_profit > 0
			occupancy >= 0.75
		}
	}

	on_complete = {
		trigger_event = { id = society_tech_events.104 }
		set_variable = {
			name = elevators_je_done
		}
	}

	timeout = 3650
}

je_mutual_funds = {
 	icon = "gfx/interface/icons/event_icons/event_industry.dds"

 	group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		NOT = { has_variable = mutual_funds_je_done }
 		has_technology_researched = central_banking
 	}

 	possible = {
 		has_technology_researched = mutual_funds
 	}

 	complete = {
 		any_scope_building = {
 			filter = {
 				is_building_type = building_financial_district
 			}
 			percent >= 0.5
 			has_active_production_method = pm_financial_district_publicly_traded
 			cash_reserves_ratio >= 0.5
 			weekly_profit > 0
 			occupancy >= 0.75
 		}
 	}

 	on_complete = {
 		trigger_event = { id = society_tech_events.105 }
 		set_variable = {
 			name = mutual_funds_je_done
 		}
 	}

 	timeout = 3650
 }

﻿je_camera = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = camera_je_done }
		has_technology_researched = realism
		NOT = { has_technology_researched = film }
		NOT = { is_country_type = unrecognized }
	}

	possible = {
		has_technology_researched = camera
		any_scope_building = {
			is_building_type = building_arts_academy
			level >= 3
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_arts_academy
			level >= 5
			has_active_production_method = pm_photographic_art
		}
		any_scope_building = {
			filter = {
				is_building_type = building_arts_academy
			}
			percent > 0.75
			has_active_production_method = pm_photographic_art
			occupancy > 0.75
		}
	}

	on_complete = {
		set_variable = camera_je_done
		trigger_event = { id = camera_film_pm_events.1 }
	}

	invalid = {
		has_technology_researched = film
	}

	timeout = 3650
}

je_film = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = film_je_done }
		has_technology_researched = camera
		NOT = { is_country_type = unrecognized }
	}

	possible = {
		has_technology_researched = film
		any_scope_building = {
			is_building_type = building_arts_academy
			level >= 3
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_arts_academy
			level >= 5
			has_active_production_method = pm_film_art
		}
		any_scope_building = {
			filter = {
				is_building_type = building_arts_academy
			}
			percent > 0.75
			has_active_production_method = pm_film_art
			occupancy > 0.75
		}
	}

	on_complete = {
		set_variable = film_je_done
		trigger_event = { id = camera_film_pm_events.2 }
	}

	timeout = 3650
}

﻿je_build_local_arms_industry = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_internal_affairs

	complete = {
		any_scope_state = {
			has_active_building = building_arms_industry
		}
	}

	on_complete = {
		ig:ig_armed_forces = {
			add_modifier = {
				name = ig_domestic_weapons_manufacturing
				months = short_modifier_time
			}
		}
	}


	on_timeout = {
		ig:ig_armed_forces = {
			add_modifier = {
				name = ig_unreliable_weapon_imports
				months = short_modifier_time
			}
		}
	}

	timeout = 600

	weight = 200

	transferable = no
}

je_set_up_grain_import = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_foreign_affairs

	complete = {
		capital.market = {
			any_trade_route = {
				importer.owner = root
				goods = g:grain
			}
		}
	}

	on_complete = {
		scope:target = {
			add_modifier = {
				name = ig_secured_desired_imports
				months = normal_modifier_time
			}
		}
	}


	on_timeout = {
		scope:target = {
			add_modifier = {
				name = ig_refused_desired_imports
				months = normal_modifier_time
			}
		}
	}

	timeout = 600

	weight = 200

	transferable = no
}


je_set_up_steel_import = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_foreign_affairs

	complete = {
		capital.market = {
			any_trade_route = {
				importer.owner = root
				goods = g:steel
			}
		}
	}

	on_complete = {
		ig:ig_industrialists = {
			add_modifier = {
				name = ig_secured_desired_imports
				months = normal_modifier_time
			}
		}
	}


	on_timeout = {
		ig:ig_industrialists = {
			add_modifier = {
				name = ig_refused_desired_imports
				months = normal_modifier_time
			}
		}
	}

	timeout = 600

	weight = 200

	transferable = no
}


je_set_up_paper_import = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_foreign_affairs

	complete = {
		capital.market = {
			any_trade_route = {
				importer.owner = root
				goods = g:paper
			}
		}
	}

	on_complete = {
		ig:ig_intelligentsia = {
			add_modifier = {
				name = ig_secured_desired_imports
				months = normal_modifier_time
			}
		}
	}


	on_timeout = {
		ig:ig_intelligentsia = {
			add_modifier = {
				name = ig_refused_desired_imports
				months = normal_modifier_time
			}
		}
	}

	timeout = 600

	weight = 200

	transferable = no
}

﻿je_tutorial_expand_basic_building = {
	should_be_pinned_by_default = yes
	how_tutorial = lesson_expand_building_how
	why_tutorial = lesson_expand_building_why

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	immediate = {
		scope:target.state = {
			unset_available_for_autonomous_investment = scope:target.type
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }	
	}
	
	current_value = {
		value = scope:target.level
	}
	
	goal_add_value = {
		value = 1
	}
	
	is_progressing = {
		exists = scope:target
		scope:target = { is_under_construction = yes }
	}
	
	invalid = {
		custom_tooltip = {
			text = je_tutorial_expand_basic_building_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}
		}
	}
	
	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_expand_basic_building_complete
				journal_entry = je:je_tutorial_expand_basic_building
			}
		}
		scope:target.state = {
			set_available_for_autonomous_investment = scope:target.type
		}
	}
	
	on_invalid = {
		remove_active_objective_subgoal = sg_expand_basic_building
		scope:target.state = {
			set_available_for_autonomous_investment = scope:target.type
		}
	}

	on_fail = {
		scope:target.state = {
			set_available_for_autonomous_investment = scope:target.type
		}
	}
	
	weight = 1000
	transferable = yes
}

je_tutorial_establish_trade_route = {
	how_tutorial = lesson_establish_trade_route_how
	why_tutorial = lesson_establish_trade_route_why	

	group = je_group_tutorial
	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_establish_trade_route_status_not_progressing
				trigger = {
					scope:journal_entry = {
						is_progressing = no
					}
				}
			}
			desc = je_tutorial_establish_trade_route_status_progressing
		}
	}
	
	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress
				value = 0
			}
			set_variable = {
				name = original_num_import_routes
				value = target.num_import_trade_routes
			}
		}
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress
	}
	
	goal_add_value = {
		value = 4
	}
	
	is_progressing = {
		scope:target = {
			market_goods_has_goods_shortage = no
		}
	}
	
	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress
						add = 1
					}
				}
			}
		}
	}
	
	invalid = {
		NOT = { exists = scope:target }
	}
		
	weight = 1010
	transferable = yes
}

je_tutorial_fix_budget_deficit = {
	how_tutorial = lesson_budget_balance_how
	why_tutorial = lesson_budget_balance_why	

	group = je_group_tutorial
	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	immediate = {
		set_variable = {
			name = original_tax_level
			value = tax_level_value
		}
		set_variable = {
			name = original_num_taxed_goods
			value = num_taxed_goods
		}		
	}
	
	complete = {
		gold_reserves > 0
	}

	is_progressing = {
		weekly_net_fixed_income > 0
	}

	fail = {
		in_default = yes
	}
	
	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_budget_balance_complete
				journal_entry = je:je_tutorial_fix_budget_deficit
			}
		}
	}

	on_fail = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_budget_balance_fail
				journal_entry = je:je_tutorial_fix_budget_deficit
			}
		}
	}
	
	weight = 1010
	transferable = yes
}

je_tutorial_change_production_method = {
	how_tutorial = lesson_production_methods_how
	why_tutorial = lesson_production_methods_why

	group = je_group_tutorial
	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	
	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress
				value = 0
			}
		}
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress
	}
	
	goal_add_value = {
		value = 4
	}
	
	is_progressing = {
		has_variable = has_changed_production_method
	}
	
	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress
						add = 1
					}
				}
			}
		}
	}
	
	invalid = {
		custom_tooltip = {
			text = je_tutorial_change_production_method_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}	
		} 			
	}
	
	weight = 1010
	transferable = yes
}

je_tutorial_expand_productive_building = {
	how_tutorial = lesson_expand_productive_building_how
	why_tutorial = lesson_expand_productive_building_why

	group = je_group_tutorial
	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	immediate = {
		scope:target.state = {
			unset_available_for_autonomous_investment = scope:target.type
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	is_progressing = {
		exists = scope:target
		scope:target = { is_under_construction = yes }
	}
	
	current_value = {
		value = scope:target.level
	}
	
	goal_add_value = {
		value = 1
	}
	
	invalid = {
		custom_tooltip = {
			text = je_tutorial_expand_productive_building_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}	
		} 			
	}
	
	on_complete = {
		scope:target.state = {
			set_available_for_autonomous_investment = scope:target.type
		}
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_expand_productive_building
		scope:target.state = {
			set_available_for_autonomous_investment = scope:target.type
		}
	}

	on_fail = {
		scope:target.state = {
			set_available_for_autonomous_investment = scope:target.type
		}
	}
	
	weight = 1001
	transferable = yes
}

je_tutorial_fix_unproductive_building = {
	how_tutorial = lesson_fix_unproductive_building_how
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress_improve_market
				value = 0
			}
		}
	}

	is_progressing = {
		exists = scope:target
		scope:target = { 
			OR = {
				earnings >= 5.0
				is_subsidized = yes
			}
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress_improve_market
	}
	
	goal_add_value = {
		value = 4
	}

	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress_improve_market
						add = 1
					}
				}
			}
		}
	}
	
	invalid = {
		custom_tooltip = {
			text = je_tutorial_fix_unproductive_building_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}	
		} 			
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_fix_unproductive_building_complete
				journal_entry = je:je_tutorial_fix_unproductive_building
			}
		}
	}
	
	weight = 1010
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_grow_gdp = {
	how_tutorial = lesson_grow_gdp_how
	why_tutorial = lesson_grow_gdp_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = gdp
	}
	goal_add_value = {
		value = gdp
		multiply = 0.25
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_grow_gdp_complete
				journal_entry = je:je_tutorial_grow_gdp
			}
		}
	}
	
	weight = 1002
	transferable = yes
}

je_tutorial_promote_ig = {
	
	how_tutorial = lesson_promote_ig_how
	why_tutorial = lesson_promote_ig_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	is_progressing = {
		any_interest_group = {
			is_being_bolstered = yes
		}
	}
	
	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress
				value = 0
			}
		}
	}
	
	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress
						add = 1
					}
				}
			}
		}
	}
	
	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress
	}
	
	goal_add_value = {
		value = 26
	}
	
	weight = 1002
	transferable = yes
}

je_tutorial_increase_market_access_by_decree = {
	how_tutorial = lesson_market_access_by_decree_how
	why_tutorial = lesson_market_access_by_decree_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress_improve_market
				value = 0
			}
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_increase_market_access_by_decree_status_first
				trigger = {
					scope:journal_entry = {
						is_progressing = no
					}
				}
			}
			desc = je_tutorial_increase_market_access_by_decree_status_second
		}
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress_improve_market
	}
	
	goal_add_value = {
		value = 12
	}

	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress_improve_market
						add = 1
					}
				}
			}
		}
	}
	
	is_progressing = {
		exists = scope:target
		scope:target = { 
			has_decree = decree_road_maintenance
		}
	}

	invalid = {
		custom_tooltip = {
			text = je_tutorial_increase_market_access_by_decree_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}
		}
	}
	
	on_complete = {
	}
	
	on_invalid = {
		remove_active_objective_subgoal = sg_increase_market_access_by_decree
	}
	
	weight = 1006
	transferable = yes
}

je_tutorial_improve_market_access_with_railways = {
	how_tutorial = lesson_market_access_with_railways_how
	why_tutorial = lesson_market_access_with_railways_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	immediate = {
	}

	complete = {
		scope:target = {
			custom_tooltip = {
				text = je_tutorial_improve_market_access_with_railways_tooltip
				state_infrastructure_balance > 0
			}
		}
	}

	is_progressing = {
		scope:target = {
			any_scope_building = {
				is_building_type = building_railway
				is_under_construction = yes
			}
		}
	}
	
	invalid = {
		custom_tooltip = {
			text = je_tutorial_improve_market_access_with_railways_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}
		}
	}
	
	on_complete = {
	}
	
	on_invalid = {
		remove_active_objective_subgoal = sg_improve_market_access_with_railways
	}
	
	weight = 1008
	transferable = yes
}

je_tutorial_increase_immigration = {
	how_tutorial = lesson_increase_immigration_how
	why_tutorial = lesson_increase_immigration_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial
	
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = scope:target.state_population
	}

	goal_add_value = {
		add = 10000
	}

	invalid = {
		custom_tooltip = {
			text = je_tutorial_increase_immigration_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}
		}
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_increase_immigration
	}
	
	weight = 1012
	transferable = yes
}

je_tutorial_improve_supply_network = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	current_value = {
		value = num_convoys_available
	}

	goal_add_value = {
		value = {
			add = 400
		}
	}
	
	weight = 1018
	transferable = yes
}

je_tutorial_improve_consumer_goods_access = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial
		
	complete = {
		exists = scope:target
		scope:target = { state_goods_pricier < 0.2 }
	}
	
	weight = 1021
	transferable = yes
}

je_tutorial_make_interest_group_happy = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial
		
	complete = {
		scope:target = { ig_approval >= 2 }
	}
	
	weight = 1021
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_enact_institution_law = {
	how_tutorial = lesson_enact_institution_law_how
	why_tutorial = lesson_enact_institution_law_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
		
	complete = {
		NOT = { has_law = scope:target }
	}
	
	is_progressing = {
		scope:target = {
			exists = root.currently_enacting_law
			is_same_law_group_as = root.currently_enacting_law.type
		}
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_enact_institution_law_complete
				journal_entry = je:je_tutorial_enact_institution_law
			}
		}
	}
	
	weight = 1022
	transferable = yes
}

je_tutorial_invest_into_an_institution = {
	# how_tutorial = lesson_invest_into_an_institution_how
	# why_tutorial = lesson_invest_into_an_institution_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	
	current_value = scope:target.investment
	
	is_progressing = {
		expanding_institution = scope:target.type
	}
	
	goal_add_value = 1
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	invalid = {
		NOT = { has_institution = scope:journal_entry.target.type }
	}

	on_complete = {
		# owner = {
		# 	start_tutorial_lesson = { 
		# 		tutorial_lesson = lesson_invest_into_an_institution_complete
		# 		journal_entry = je:je_tutorial_invest_into_an_institution
		# 	}
		# }
	}
	
	weight = 1023
	transferable = yes
}

je_tutorial_reform_government = {
	how_tutorial = lesson_reform_government_how
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
		
	complete = {
		government_legitimacy >= 60 
	}

	current_value = legitimacy

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_reform_government_complete
				journal_entry = je:je_tutorial_reform_government
			}
		}
	}
	
	weight = 1024
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_increase_relations = {
	how_tutorial = lesson_increase_relations_how
	why_tutorial = lesson_increase_relations_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
		
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	current_value = {
		value = scope:target.relations:root
	}

	goal_add_value = {
		value = 0
		scope:target = {
			if = {
				limit = {
					relations:root < relations_threshold:hostile
				}
				add = define:NDiplomacy|RELATIONS_THRESHOLD_HOSTILE
			}
			else_if = {
				limit = {
					relations:root < relations_threshold:cold
				}
				add = define:NDiplomacy|RELATIONS_THRESHOLD_COLD
			}
			else_if = {
				limit = {
					relations:root < relations_threshold:poor
				}
				add = define:NDiplomacy|RELATIONS_THRESHOLD_POOR
			}
			else_if = {
				limit = {
					relations:root < relations_threshold:cordial
				}
				add = define:NDiplomacy|RELATIONS_THRESHOLD_CORDIAL
			}
			else_if = {
				limit = {
					relations:root < relations_threshold:amicable
				}
				add = define:NDiplomacy|RELATIONS_THRESHOLD_AMICABLE
			}
			else = {
				add = define:NDiplomacy|RELATIONS_THRESHOLD_FRIENDLY
			}
			subtract = relations:root
		}
	}

	is_progressing = {
		has_diplomatic_pact = {
			who = scope:target
			type = increase_relations 
	 	}
	}

	invalid = {
		NOT = { exists = scope:target }
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_increase_relations
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_increase_relations_complete
				journal_entry = je:je_tutorial_increase_relations
			}
		}
	}
	
	weight = 1026
	transferable = yes
}

je_tutorial_improve_rank = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial
	
	immediate = {
		if = { 
			limit = {
				country_rank = rank_value:great_power
			}
			set_variable = tut_great_power
		}
	
		else_if = { 
			limit = {
				country_rank = rank_value:major_power
			}
			set_variable = tut_major_power
		}
	
		else_if = { 
			limit = {
				country_rank = rank_value:minor_power
			}
			set_variable = tut_minor_power
		}
	
		else_if = { 
			limit = {
				country_rank = rank_value:insignificant_power
			}
			set_variable = tut_insignificant_power
		}

		else_if= {
			limit = {
				country_rank = rank_value:unrecognized_major_power
			}
			set_variable = tut_unrecognized_major_power
		}
		
		else_if= {
			limit = {
				country_rank = rank_value:unrecognized_regional_power
			}
			set_variable = tut_unrecognized_regional_power
		}
	
		else_if= {
			limit = {
				country_rank = rank_value:unrecognized_power
			}
			set_variable = tut_unrecognized_power
		}
	}
	
	complete = {
		OR = {
			scope:journal_entry = { is_goal_complete = yes }
			trigger_if = { 
				limit = {
					has_variable = tut_great_power
				}
				global_country_ranking = 1
			} 
			trigger_else_if = {
				limit = {
					has_variable = tut_major_power		
				}
				country_rank = rank_value:great_power
			}
			trigger_else_if = {
				limit = {
					has_variable = tut_minor_power
				}
				country_rank = rank_value:major_power
			}
			trigger_else_if = {
				limit = {
					has_variable = tut_insignificant_power
				}
				country_rank = rank_value:minor_power
			}
			trigger_else_if = {
				limit = {
					has_variable = tut_unrecognized_major_power
				}
				country_rank > rank_value:unrecognized_major_power
			}
			trigger_else_if = {
				limit = {
					has_variable = tut_unrecognized_regional_power
				}
				country_rank >= rank_value:unrecognized_major_power
			}
			trigger_else_if = {
				limit = {
					has_variable = tut_unrecognized_power
				}
				country_rank >= rank_value:unrecognized_regional_power
			}
		}
	}
	
	current_value = {
		value = prestige
	}

	goal_add_value = {
		value = prestige
		multiply = 1
		min = 100
	}

	on_complete = {
		set_variable = tutorial_form_pb_end
	}
	
	weight = 1028
	transferable = yes
}

je_tutorial_prevent_revolution = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial
		
	complete = {
		any_civil_war = {
			is_civil_war_type = revolution
			count = 0
		}
	}
	
	weight = 1030
	transferable = yes
}

je_tutorial_earn_obligation = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	current_value = {
		value = num_obligations_earned
	}

	goal_add_value = {
		value = 2
	}
	
	weight = 1040
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_expand_military = {
	how_tutorial = lesson_expand_military_how
	why_tutorial = lesson_expand_military_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		has_healthy_economy = yes
	}

	current_value = {
		value = root.army_size
		add = root.navy_size
	}

	goal_add_value = {
		value = root.army_size
		add = root.navy_size
		multiply = 0.2
		min = 2
		max = 20
		round = yes
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_expand_military_complete
				journal_entry = je:je_tutorial_expand_military
			}
		}
	}
	
	weight = 1044
	transferable = yes
}

je_tutorial_recruit_promote_commander = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	how_tutorial = lesson_recruit_promote_commander_how
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_recruit_promote_commander_first
				trigger = {
					NOT = { exists = scope:journal_entry.var:tut_commander_target }
				}
			}
			desc = je_tutorial_recruit_promote_commander_second
		}
	}
	
	complete = {
		custom_tooltip = {
			text = "je_tutorial_recruit_promote_commander_complete_trigger"
			exists = scope:journal_entry.var:tut_commander_target
			scope:journal_entry = {
				var:tut_commander_target = {
					prev.var:tut_commander_target_initial_rank < commander_rank
				}
			}
		}
	}

	weight = 1046
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_mobilize_army = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = {
		any_military_formation = {
			is_army = yes
			is_fully_mobilized = yes
		}
	}

	weight = 1048
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_send_general_to_front = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = {
		scope:target = {
			is_on_front = yes
		}
	}

	weight = 1050
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_convoy_raiding = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = {
		scope:target = {
			has_commander_order = defend
		}
	}

	invalid = {
		custom_tooltip = {
			text = je_tutorial_convoy_raiding_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
				NOT = { 
					scope:target = {
						has_role = general
					}
				}
			}
		}
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_convoy_raiding
	}

	weight = 1052
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_recover_from_default = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress
				value = 0
			}
		}
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress
	}
	
	goal_add_value = {
		value = 4
	}
	
	is_progressing = {
		taking_loans = no
	}
	
	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						root = { in_default = no }
					}
					change_variable = {
						name = num_weeks_in_progress
						add = 1
					}
				}
			}
		}
	}
	
	weight = 1054
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_start_diplomatic_play = {
	how_tutorial = lesson_start_diplomatic_play_how

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = {
		is_diplomatic_play_initiator = yes
	}
	
	weight = 1056
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_is_play_target = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = { #needs triggers
		should_set_wargoal = no
	}
	
	weight = 1058
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_capacity_deficit = {
	how_tutorial = lesson_fix_capacity_deficit_how
	
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial


	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress
						add = 1
					}
				}
			}
		}
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress
	}
	
	goal_add_value = {
		value = 4
	}

	is_progressing = {
		trigger_if = {
			limit = {
				has_variable = tut_bureaucracy_deficit
			}
			bureaucracy > 0
		}
		trigger_else_if = {
			limit = {
				has_variable = tut_authority_deficit
			}
			authority > 0
		}
		trigger_else_if = {
			limit = {
				has_variable = tut_influence_deficit
			}
			influence > 0
		}
	}
	
	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress
				value = 0
			}
		}
		if = {
			limit = {
				bureaucracy < -10
			}
			set_variable = tut_bureaucracy_deficit
		}
		else_if = {
			limit = {
				authority < -10
			}
			set_variable = tut_authority_deficit
		}
		else_if = {
			limit = {
				influence < -10
			}
			set_variable = tut_influence_deficit
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_capacity_deficit_status_bureaucracy
				trigger = {
					has_variable = tut_bureaucracy_deficit
				}
			}
			triggered_desc = {
				desc = je_tutorial_capacity_deficit_status_authority
				trigger = {
					has_variable = tut_authority_deficit
				}
			}
			triggered_desc = {
				desc = je_tutorial_capacity_deficit_status_influence
				trigger = {
					has_variable = tut_influence_deficit
				}
			}
		}
	}
	
	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_fix_capacity_deficit_complete
				journal_entry = je:je_tutorial_capacity_deficit
			}
		}
	}
	
	weight = 1056
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_incorporate_state = {
	how_tutorial = lesson_incorporate_state_how

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	current_value = num_incorporated_states
	
	goal_add_value = 1
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_incorporate_state_status
				trigger = {
					NOT = {
						any_scope_state = {
							is_being_incorporated = yes
						}
					}
				}
			}
			desc = je_tutorial_incorporate_state_status_progressing
		}
	}

	is_progressing = {
		any_scope_state = {
			is_being_incorporated = yes
		}
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_incorporate_state_complete
				journal_entry = je:je_tutorial_incorporate_state
			}
		}
	}
	
	weight = 1064
	transferable = yes
}

je_tutorial_declare_an_interest = {
	how_tutorial = lesson_declare_interest_how
	why_tutorial = lesson_declare_interest_why

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress
				value = 0
			}
		}
	}

	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress
						add = 1
					}
				}
			}
		}
	}

	is_progressing = {
		has_interest_marker_in_region = scope:target.capital.region
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress
	}
	
	goal_add_value = {
		value = 12
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_declare_interest_complete
				journal_entry = je:je_tutorial_declare_an_interest
			}
		}
	}

	weight = 1066
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_colonize_state = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_colonize_state_status_first
				trigger = {
					scope:journal_entry = {
						is_progressing = no
					}
				}
			}
			desc = je_tutorial_colonize_state_status_second
		}
	}

	is_progressing = { 
		any_scope_state = {
			has_variable = tut_colony_target
			is_under_colonization = yes 
		}
	}
	
	complete = {
		custom_tooltip = {
			text = "je_tutorial_colonize_state_grow_a_colony"
			any_scope_state = {
				is_split_state = no
				has_variable = tut_colony_target
			}
		}
	}
	
	weight = 1068
	transferable = yes
	should_update_on_player_command = no
	should_be_pinned_by_default = yes
}

je_tutorial_make_peace = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial
		
	complete = {
		is_at_war = no
	}
	
	weight = 1068
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_research_technology = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	complete = {
		custom_tooltip = {
			text = je_tutorial_research_technology_complete_trigger
			has_variable = tut_began_new_research
			NOT = { exists = technology_being_researched }
		}
	}

	is_progressing = {
		exists = technology_being_researched
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_research_technology_status_progressing
				trigger = {
					scope:journal_entry = {
						is_progressing = yes
					}
				}
			}
			desc = je_tutorial_research_technology_status_not_progressing
		}
	}
	
	weight = 1070
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_create_formation = {
	how_tutorial = lesson_create_formation_how

	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	complete = {
		custom_tooltip = {
			text = je_tutorial_create_formation_complete_trigger
			NOT = {
				has_variable = formation_tutorial_ongoing
			}
		}
	}
	
	current_value = {
	}

	goal_add_value = {
	}

	on_complete = {
	}
	
	weight = 1002
	transferable = yes
}

je_subject_liberty = {
	how_tutorial = lesson_subject_liberty_how
	why_tutorial = lesson_subject_liberty_why

	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	complete = {
		scope:target = {
			liberty_desire < 50
		}
	}
	
	weight = 1002
	transferable = yes
}

je_tutorial_foreign_investment = {
	why_tutorial = lesson_foreign_investmen_why

	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	complete = {
		scope:target = {
			gdp_ownership_ratio = {
				target = ROOT
				value >= 0.2
			}
		}
	}

	invalid = {
		NOT = { exists = scope:target }
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_foreign_investment
	}

	
	weight = 1002
	transferable = yes
}

je_tutorial_establish_company = {
	how_tutorial = lesson_establish_company_how

	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	complete = {
		NOT = { can_establish_company = YES }
	}
	
	current_value = {
	}

	goal_add_value = {
	}

	on_complete = {
	}
	
	weight = 1002
	transferable = yes
}

je_tutorial_form_power_bloc = {
	how_tutorial = lesson_form_power_bloc_how
	why_tutorial = lesson_form_power_bloc_why

	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	complete = {
		is_power_bloc_leader = yes
	}
	
	current_value = {
	}

	goal_add_value = {
	}

	on_complete = {
	}
	
	weight = 1002
	transferable = yes
}

je_tutorial_lobbies = {
	how_tutorial = lesson_lobbies_how

	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
		
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	current_value = scope:target.appeasement

	goal_add_value = 3

	invalid = { NOT = { exists = scope:target } }

	on_invalid = { remove_active_objective_subgoal = sg_foreign_investment }
}
﻿je_electric_underground_railway = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		has_technology_researched = electrical_generation
	}

	possible = {
		has_technology_researched = electric_railway
	}

	complete = {
		trigger_if = {
			limit = {
				ROOT.market_capital = {
					owner = ROOT
				}
			}
			market_capital = {
				any_scope_building = {
					is_building_type = building_urban_center
					level >= 20
				}
				any_scope_building = {
					is_building_type = building_railway
					has_active_production_method = pm_electric_trains
					has_active_production_method = pm_steel_passenger_carriages
					level >= 5
				}
			}
		}
		trigger_else = {
			any_scope_state = {
				has_building = building_trade_center
				any_scope_building = {
					is_building_type = building_urban_center
					level >= 20
				}
				any_scope_building = {
					is_building_type = building_railway
					has_active_production_method = pm_electric_trains
					has_active_production_method = pm_steel_passenger_carriages
					level >= 5
				}
			}
		}
	}

	on_complete = {
		trigger_event = { id = metro.1 }
	}

	weight = 1
}
﻿je_veiled_protectorate = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		trigger_if = {
			limit = {
				exists = c:EGY
			}
			c:EGY = {
				is_subject = no
				is_country_type = unrecognized
			}
		}
		trigger_else = {
			always = no
		}
		country_rank >= rank_value:major_power
		any_scope_state = {
			OR = {
				state_region = s:STATE_LOWER_EGYPT
				state_region = s:STATE_UPPER_EGYPT
				state_region = s:STATE_MIDDLE_EGYPT
				state_region = s:STATE_SINAI
			}
		}
		any_neighbouring_state = {
			owner = c:EGY
		}
	}

	possible = {
		exists = c:EGY
		c:EGY = {
			OR = {
				owes_obligation_to = ROOT
				relations:root <= relations_threshold:poor
			}
			country_rank < rank_value:unrecognized_major_power
		}
		NOT = { THIS = c:TUR }
	}

	complete = {
		c:EGY = {
			is_subject_of = ROOT
		}
	}

	on_complete = {
		trigger_event = {
			id = veiled_protectorate.1
		}
	}

	fail = {
		OR = {
			NOT = { exists = c:EGY }
			c:EGY = {
				is_subject = yes
				NOT = { is_subject_of = ROOT }
			}
			c:EGY = {
				NOT = { is_country_type = unrecognized }
			}
		}
	}

	timeout = 3650

	weight = 10000
	should_be_pinned_by_default = yes
}
﻿je_victoria = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = billy_died
			ruler = {
				NOT = { has_variable = is_billy }
			}
		}
	}

	on_complete = {
		custom_tooltip = hanover_union_ends
		if = {
			limit = {
				exists = c:GBR
				c:GBR = ROOT
			}
			trigger_event = { id = victoria.1 }
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					exists = c:GBR
					c:GBR = ROOT
					ruler = { has_variable = is_billy }
				}
				random_list = {
					11 = { }
					1 = {
						ruler = { kill_character = yes }
					}
				}
			}
		}
	}

	invalid = {
		OR = {
			NOT = {
				exists = c:GBR
			}
			NOT = {
				exists = c:HAN
			}
			c:HAN = {
				NOT = {
					is_subject_of = c:GBR
				}
			}
			c:GBR = {
				custom_tooltip = {
					text = "DEBUG_NO_CHARACTER_IN_GBR_IS_VICTORIA"
					NOT = {
						any_scope_character = {
							has_variable = is_victoria
						}
					}
				}
			}
		}
	}

	weight = 10

	should_be_pinned_by_default = yes
}
﻿je_warlord_china = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	group = je_group_historical_content

	immediate = {
		random_law = {
			limit = { type = law_type:law_monarchy }
			save_scope_as = monarchy_scope
		}
	}

	complete = {
		custom_tooltip = {
			text = won_boxer_tt
			has_variable = won_boxer_rebellion
		}
		custom_tooltip = {
			text = china_recognized_tt
			has_variable = china_warlord_explosion_recognized
		}
		custom_tooltip = {
			text = china_abolished_monarchy_tt
			has_variable = china_warlord_abolished_monarchy
		}
	}

	fail = {
		custom_tooltip = {
			text = je_china_failure_tt
			var:china_warlord_explosion <= 0
		}
	}

	on_fail = {
		trigger_event = { id = warlord_china_events.100 }
	}

	on_complete = {
		trigger_event = { id = warlord_china_events.200 }
	}

	current_value = {
		value = var:china_warlord_explosion
	}

	goal_add_value = {
		add = 5
	}
	
	progressbar = yes

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_subject }
					is_subject = yes
				}
				chi_remove_1_fragile_unity = yes
				set_variable = china_warlord_explosion_subject
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_loans }
					taking_loans = yes
				}
				chi_remove_1_fragile_unity = yes
				set_variable = china_warlord_explosion_loans
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_recognized }
					country_rank != rank_value:unrecognized_power
					country_rank != rank_value:unrecognized_major_power
					country_rank != rank_value:unrecognized_regional_power
				}
				set_variable = china_warlord_explosion_recognized
				chi_add_1_fragile_unity = yes
			}
			if = {
				limit = {
					NOT = { has_variable = china_abolished_monarchy }
					NOT = { has_law = law_type:law_monarchy }
				}
				set_variable = china_abolished_monarchy
				chi_remove_1_fragile_unity = yes
				if = {
					limit = {
						NOT = { has_variable = china_han_empire }
					}
					trigger_event = { id = boxer_rebellion_events.4 days = 0 popup = yes }
				}
			}
		}
	}

	weight = 10000
	should_be_pinned_by_default = yes
}

﻿je_war_crimes = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		has_technology_researched = automatic_machine_guns
		army_size >= 25
	}

	possible = {
		has_technology_researched = chemical_warfare
		army_size >= 40
	}

	complete = {
		army_mobilization_option_fraction = {  
			target = mobilization_option:mobilization_option_chemical_weapons  
			value >= 0.2  
		} 
		any_scope_war = {
			any_scope_front = {
				any_scope_general = {
					owner = ROOT
					this.commander_military_formation = {
						has_mobilization_option = mobilization_option:mobilization_option_chemical_weapons
					}
				}
				any_scope_state = {
					NOT = { owner = ROOT }
				}
			}
		}
	}

	on_complete = {
		trigger_event = { id = war_crimes.1 }
	}

	timeout = 3650
}

je_munitions_factories = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		has_technology_researched = gunsmithing
	}

	possible = {
		has_technology_researched = percussion_cap
		any_scope_building = {
			is_building_type = building_munition_plants
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_munition_plants
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy >= 0.5
			level >= 5
		}
		can_research = rifling
	}

	on_complete = {
		trigger_event = { id = war_crimes.2 }
	}

	fail = {
		has_technology_researched = rifling
	}

	timeout = 3650
}
﻿je_west_america_expedition = {

	group = je_group_expeditions

	on_monthly_pulse = {
		random_events = {
			80 = 0
			
			#Standard event
			20 = expedition_events.20 #posts a notification
			
			20 = expedition_events.220 #river crossing
			20 = expedition_events.230 #bear sighting
			10 = expedition_events.240 #expedition photographs
			20 = expedition_events.250 #mountain spotted
			20 = expedition_events.260 #snow
			20 = expedition_events.270 #plants
			20 = expedition_events.280 #lost
			
			#New events
			30 = expedition_events.290 #build a fort
			15 = expedition_events.291 #pregnant woman
			30 = expedition_events.292 #crew disobeys
			20 = expedition_events.293 #give the crew a quest
			20 = expedition_events.296 #listen to your guide
			30 = expedition_events.297 #cabin fever
			
			#Events shared with the Africa expeditions
			5 = expedition_events.140 #leader's breakdown
			5 = expedition_events.560 #commander vice
		}
	}
	
	immediate = { 
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			save_scope_as = expedition_leader
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = expedition_low_peril_loc
				trigger = {
					var:expedition_peril < 4
				}
			}
			triggered_desc = {
				desc = expedition_medium_peril_loc
				trigger = {
					var:expedition_peril <= 5
				}
			}
			triggered_desc = {
				desc = expedition_high_peril_loc
				trigger = {
					var:expedition_peril >= 6
				}
			}
		}
	}
	
    complete = {
		custom_tooltip = {
			text = je_expedition_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}
	
	on_complete = {
		random_list = {
			33 = {
				trigger = { NOT = { has_global_variable = buenaventura_river_disproven } }
				trigger_event = { id = expedition_events.300 }
			}
			33 = {
				trigger = { NOT = { has_global_variable = oregon_trail_mapped } }
				trigger_event = { id = expedition_events.301 }
			}
			33 = {
				trigger = { NOT = { has_global_variable = great_salt_lake_mapped } }
				trigger_event = { id = expedition_events.302 }
			}
		}
		remove_variable = on_expedition
		remove_variable = congo_river_expedition_var
		remove_modifier = modifier_large_expedition_cost
		set_variable = west_america_expedition_success_var #grand exhibition check
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
    
   fail = {
		custom_tooltip = {
			text = je_expedition_fail
			var:expedition_peril >= 8
		}
    }
	
	on_fail = {
		trigger_event = { id = expedition_events.205 }
		remove_variable = on_expedition
		remove_variable = west_america_expedition_var
		remove_modifier = modifier_large_expedition_cost
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	current_value = {
		value = var:expedition_progress
	}

	goal_add_value = {
		add = 8
	}
	
	progressbar = yes
	
    weight = 200
    transferable = no
    should_be_pinned_by_default = yes
}
﻿je_dialectics = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = dialectics_je_done }
		has_technology_researched = academia
		any_scope_building = {
			is_building_type = building_university
		}
		NOT = { has_technology_researched = philosophical_pragmatism }
	}

	possible = {
		has_technology_researched = dialectics
		any_scope_building = {
			is_building_type = building_university
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_university
			occupancy > 0.9
			level >= 5
			has_active_production_method = pm_philosophy_department
		}
		any_scope_building = {
			filter = {
				is_building_type = building_university
			}
			percent > 0.9
			occupancy > 0.9
			has_active_production_method = pm_philosophy_department
		}
	}

	on_complete = {
		trigger_event = { id = dt_society_events.1 }
		set_variable = {
			name = dialectics_je_done
		}
	}

	invalid = {
		has_technology_researched = philosophical_pragmatism
	}

	timeout = 3650
}

je_realism = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = realism_je_done }
		has_technology_researched = romanticism
		NOT = { has_technology_researched = camera }
		NOT = { is_country_type = unrecognized } # prestige is useless to them
	}

	possible = {
		has_technology_researched = realism
		any_scope_building = {
			is_building_type = building_arts_academy
		}
	}

	complete = {
		any_scope_building = {
			filter = {
				is_building_type = building_arts_academy
			}
			occupancy >= 0.9
			has_active_production_method = pm_realist_art
			percent = 1
		}
	}

	on_complete = {
		trigger_event = { id = dt_society_events.2 }
		set_variable = {
			name = realism_je_done
		}
	}

	timeout = 3650
}

je_academia = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = academia_je_done }
		has_technology_researched = rationalism
		has_technology_researched = urbanization
		NOT = { has_technology_researched = empiricism }
	}

	possible = {
		has_technology_researched = academia
		any_scope_building = {
			is_building_type = building_university
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_university
			occupancy >= 0.9
			level >= 2
		}
	}

	on_complete = {
		trigger_event = { id = dt_society_events.3 }
		set_variable = {
			name = academia_je_done
		}
	}

	timeout = 3650
}
﻿je_splitting_oman = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = said_bin_sultan_al_said_dies
			ruler = {
				NOT = { has_variable = is_said_bin_sultan }
			}
			has_law = law_type:law_monarchy
		}
	}

	on_complete = {
		custom_tooltip = omani_realm_splits
		if = {
			limit = {
				exists = c:OMA
				c:OMA = ROOT
			}
			trigger_event = { id = zanzibar.1 }
		}
	}
	
	# no monthly pulse to kill the sultan.

	invalid = {
		OR = {
			NOT = { exists = c:OMA }
			NOT = { has_law = law_type:law_monarchy }
			exists = c:ZAN
		}
	}

	weight = 10

	should_be_pinned_by_default = yes
}

﻿je_acw_countdown = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	immediate = {
		set_variable = {
			name = acw_progress_var
			value = 0
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		has_law = law_type:law_slavery_banned
	}

	on_complete = {
		set_variable = je_acw_countdown_complete
		remove_modifier = missouri_compromise
		trigger_event = { id = slavery_law_events.7 days = 0 popup = yes }
	}

	fail = {
		OR = {
			has_revolution_over_law_type = law_type:law_slavery_banned
			has_revolution_over_law_type = law_type:law_slave_trade
			has_revolution_over_law_type = law_type:law_legacy_slavery
			has_revolution_over_law_type = law_type:law_debt_slavery
		}		
	
		OR = {
			# CSA
			custom_tooltip = {
				text = acw_landowner_revolt
				any_country = {
					is_revolutionary = yes
					country_definition = root.country_definition
					ig:ig_landowners = {
						is_in_government = yes
					}					
				}
			}
			# FSA
			custom_tooltip = {
				text = acw_antislaver_revolt
				ig:ig_landowners = {
					is_in_government = yes
				}
				NOT = { has_law = law_type:law_slavery_banned }
				NOT = { is_enacting_law = law_type:law_slavery_banned }
				any_country = {
					is_revolutionary = yes
					country_definition = root.country_definition
				}
			}
		}
	}

	on_fail = {
		if = {
			limit = {
				any_country = {
					is_revolutionary = yes
					country_definition = root.country_definition
					ig:ig_landowners = {
						is_in_government = yes
					}				
				}
			}
			set_variable = csa_will_spawn_var
		}
		custom_tooltip = {
			text = acw_will_happen_tt
			trigger_event = { id = acw_je_events.1 }
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_law = law_type:law_slavery_banned
				}
				change_variable = {
					name = acw_progress_var
					add = 1
				}
			}
		}
		random_events = {
			# American Civil War buildup
			200 = 0
			10 = acw_events.1 # The Abolitionist's Martyrdom
			10 = acw_events.3 # The Wilmot Proviso
		}
	}
	on_yearly_pulse = {
		random_events = {
			40 = 0
			20 = acw_events.2 # The Fugitive Slave
			20 = acw_events.5 # Bleeding Kansas
			20 = acw_events.6 # The Caning of Charles Sumner
		}
	}

	current_value = {
		value = root.var:acw_progress_var
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 100

	should_be_pinned_by_default = yes
}

je_acw_war = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = acw_war_tt_complete
			scope:target = { is_country_alive = no }
		}
	}

	on_complete = {
		trigger_event = { id = acw_je_events.2 }
		if = {
			limit = { 
				has_variable = csa_will_spawn_var
			}
			ruler = {
				set_variable = abraham_lincoln
			}
		}
	}

	on_monthly_pulse = {
		events = {
			acw_je_events.4
		}
	}

	should_be_pinned_by_default = yes
	
	can_revolution_inherit = no

	# acw_events.7 fires for the FSA or CSA, but requires the je_acw_war journal to be active
	# acw_events.8 fires for the USA, FSA or CSA, but requires the je_acw_war journal to be active
}

je_acw_reconstruction = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		trigger_event = { id = acw_je_events.3 }
		hidden_effect = { # sanity check just in case something somehow falls through the cracks
			every_scope_state = {
				limit = { has_modifier = unreconstructed_state }
				remove_modifier = unreconstructed_state
			}
		}
	}

	current_value = {
		value = var:reconstruction_var
	}

	goal_add_value = {
		add = 3
	}

	timeout = 4380

	should_be_pinned_by_default = yes

	on_timeout = {
		trigger_event = { id = acw_je_events.3 }
	}
}

je_acw_reincorporate = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	complete = {
		NOT = {
			any_scope_state = {
				has_modifier = unreconstructed_state
				is_incorporated = no
			}
		}
		NOT = {
			any_scope_state = {
				state_region = {
					is_homeland = cu:dixie
				}
				loyalist_fraction = {
					value < 0.2
					culture = cu:dixie
				}
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = dont_lose_dixie_culture
			set_variable = acw_keep_dixie
		}
		custom_tooltip = {
			text = reconstruction_progress
			change_variable = {
				name = reconstruction_var
				add = 1
			}
		}
	}

	on_monthly_pulse = {
		random_events = {
			180 = 0
			20 = acw_followup_events.6
			20 = acw_followup_events.7
			20 = acw_followup_events.8
		}
	}

	invalid = {
		NOT = {
			any_scope_state = {
				state_region = {
					is_homeland = cu:dixie
				}
			}
		}
	}

	timeout = 4380
}

je_acw_equality = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = acw_african_american_culture_complete_tt
			cu:afro_american = {
				NOT = { culture_is_discriminated_in = ROOT }
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = acw_african_american_culture
			set_variable = acw_gain_african_american
		}
		custom_tooltip = {
			text = reconstruction_progress
			change_variable = {
				name = reconstruction_var
				add = 1
			}
		}
	}

	on_monthly_pulse = {
		random_events = {
			180 = 0
			20 = acw_followup_events.4 # Forty Acres and a Mule
			20 = acw_followup_events.5 # Supremacist Violence
			20 = acw_followup_events.6 # Redeemers
		}
	}

	timeout = 4380

	invalid = {
		NOT = {
			any_scope_state = {
				state_region = {
					is_homeland = cu:afro_american
				}
			}
		}
	}
}

je_acw_wild_wild_west = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		NOT = {
			any_scope_state = {
				state_region = {
					OR = {
						is_homeland = cu:dixie
						is_homeland = cu:yankee
					}
				}
				devastation > 0.1
				turmoil > 0.1
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = acw_no_outlaw_crisis
		}
		custom_tooltip = {
			text = reconstruction_progress
			change_variable = {
				name = reconstruction_var
				add = 1
			}
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = crime_events.1 # train robbery
			10 = wild_west.1 # bank robberies
			10 = wild_west.2 # Raids on the Iron Horse
			10 = wild_west.3 # Gunfight at the Corral
		}
		effect = {
			if = {
				limit = {
					NOT = {
						any_scope_state = {
							state_region = {
								OR = {
									is_homeland = cu:dixie
									is_homeland = cu:yankee
								}
							}
							devastation > 0.1
							turmoil > 0.1
						}
					}
				}
				change_variable = {
					name = je_acw_wild_west_var
					add = 1
				}
			}
		}
	}

	invalid = {
		NOT = {
			any_scope_state = {
				state_region = {
					OR = {
						is_homeland = cu:dixie
						is_homeland = cu:yankee
					}
				}
			}
		}
	}

	current_value = {
		value = var:je_acw_wild_west_var
	}
	
	goal_add_value = {
		add = 60
	}

	progressbar = yes

	timeout = 4380
}
﻿je_sale_of_alaska = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		OR = {
			country_is_in_east_asia = yes
			country_is_in_europe = yes
		}
		has_state_in_state_region = STATE_ALASKA
	}
	
	scripted_button = je_sell_alaska_button

	possible = {
		is_subject = no
		any_scope_state = {
			state_region = s:STATE_ALASKA
		}
		custom_tooltip = {
			text = unfriendly_nation_with_interest_in_alaska_tt
			any_country = {
				country_rank >= root.country_rank
				has_interest_marker_in_region = sr:region_pacific_coast
				relations:root < 0
			}
		}
		custom_tooltip = {
			text = friendly_nation_with_interest_in_alaska_tt
			any_country = {
				NOT = {
					is_subject = yes
				}
				country_is_in_north_america = yes
				relations:root >= 0
				country_rank >= rank_value:great_power
				any_scope_state = {
					region = sr:region_pacific_coast
					is_incorporated = yes
				}
			}
		}
	}

	immediate = {
		random_scope_state = {
			limit = {
				state_region = s:STATE_ALASKA
			}
			save_scope_as = alaska_scope
			owner = {
				save_scope_as = alaska_owner_scope
			}
		}
		ruler = {
			save_scope_as = ruler_scope
		}
	}

	complete = {
		custom_tooltip = {
			text = sold_alaska_tt
			has_variable = successful_sale_of_alaska
		}
	}

	fail = {
		NOT = {
			has_state_in_state_region = STATE_ALASKA
			custom_tooltip = {
				text = not_sold_alaska_tt
				has_variable = successful_sale_of_alaska
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = selling_alaska_tt
		}
	}

	weight = 200

	transferable = no

	should_be_pinned_by_default = yes
}

je_alaska = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		has_interest_marker_in_region = region_pacific_coast
		has_technology_researched = nationalism
	}

	scripted_button = je_buy_alaska_button

	possible = {
		is_subject = no
		any_scope_state = {
			is_incorporated = yes
			region = sr:region_pacific_coast
			is_homeland_of_country_cultures = ROOT
		}
		NOT = {
			owns_entire_state_region = STATE_ALASKA
		}
		country_rank >= rank_value:great_power
	}

	immediate = {
		random_state = {
			limit = {
				state_region = s:STATE_ALASKA
				owner = {
					NOT = {
						is_country_type = decentralized
					}
				}
			}
			save_scope_as = alaska_state
		}
	}

	complete = {
		s:STATE_ALASKA = {
			any_scope_state = {
				owner = root
			}
			any_scope_state = {
				OR = {
					owner = root
					owner = {
						is_country_type = decentralized
					}
				}
				count = all
			}
		}
	}

	on_complete = {
		add_modifier = {
			name = conquest_of_alaska
			months = normal_modifier_time
		}
	}

	timeout = 7300

	weight = 200

	transferable = no

	should_be_pinned_by_default = yes
}

﻿je_assassination = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_crises
	
	immediate = {
		random_interest_group = {
			limit = {
				is_powerful = yes
				ig_approval <= -10
			}
			save_scope_as = enemy_ig
			set_variable = enemy_ig_var
		}
		ruler = {
			save_scope_as = assassination_ruler_scope
			set_variable = assassination_ruler_var
		}
		set_variable = {
			name = je_assassination_var #their progress
			value = 0
		}
		set_variable = {
			name = je_assassination_progress #your progress
			value = 0
		}
		set_variable = ongoing_assassination_je #so you don't get the serial killer JE at the same time
	}		
	
	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_variable = killing_own_ruler
				}
				change_variable = {
					name = je_assassination_var
					add = 1
				}
			}
			if = {
				limit = {
					has_variable = has_scotland_yard_var
				}
				70 = { #you stall the plot
				}
				30 = {
					change_variable = {
						name = je_assassination_var
						add = 1
					}
				}
			}
			else_if = {
				limit = {
					institution_investment_level = {
						institution = institution_police
						value >= 4
					}
				}
				random_list = {
					60 = { #you stall the plot
					}
					40 = {
						change_variable = {
							name = je_assassination_var
							add = 1
						}
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_law = law_type:law_dedicated_police
						has_law = law_type:law_secret_police
					}
				}
				random_list = {
					40 = { #you stall the plot
					}
					60 = {
						change_variable = {
							name = je_assassination_var
							add = 1
						}
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_technology_researched = identification_documents
						has_technology_researched = mass_surveillance
					}
				}
				random_list = {
					25 = { #you stall the plot
					}
					75 = {
						change_variable = {
							name = je_assassination_var
							add = 1
						}
					}
				}
			}
			else = {
				change_variable = {
					name = je_assassination_var
					add = 1
				}
			}
		}
		random_events = {
			12 = 0
			1 = assassination_events.2
			1 = assassination_events.3
			1 = assassination_events.4
		}		
	}

	complete = {
		custom_tooltip = {
			text = je_assassination_caught_em_tt
			var:je_assassination_progress >= 4
		}
	}

	on_complete = {
		custom_tooltip = {
			text = assassination_completion_tt
			trigger_event = { id = assassination_events.7 }
		}
		remove_variable = ongoing_assassination_je
	}

	fail = {
		custom_tooltip = {
			text = je_assassination_timeout_tt
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_fail = {
		trigger_event = { id = assassination_events.5 }
		remove_variable = ongoing_assassination_je
	}

	invalid = {
		custom_tooltip = {
			text = je_assassination_tt
			OR = {
				any_scope_character = {
					has_variable = assassination_ruler_var
					is_ruler = no 
				}
				NOT = {
					any_scope_character = {
						has_variable = assassination_ruler_var
					}
				}
			}
		}
	}

	on_invalid = {
		if = { #they're not the ruler anymore (small event to account for all cases)
			limit = {
				scope:assassination_ruler_scope = {
					is_ruler = no
					is_character_alive = yes
				}
			}
			trigger_event = { id = assassination_events.6 }
		}
		else_if = { #they died of other causes / another small event
			limit = {
				NOT = {
					any_scope_character = {
						has_variable = assassination_ruler_var
					}
				}
			}
			trigger_event = { id = assassination_events.8 }
		}
		remove_variable = ongoing_assassination_je
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_assassination_low
				trigger = {
					var:je_assassination_progress < 2
				}
			}
			triggered_desc = {
				desc = je_assassination_middle
				trigger = {
					var:je_assassination_progress = 2
				}
			}
			triggered_desc = {
				desc = je_assassination_high
				trigger = {
					var:je_assassination_progress > 2
				}
			}
		}
	}
	
	current_value = {
		value = root.var:je_assassination_var
	}

	goal_add_value = {
		add = 24
	}

	progressbar = yes

	weight = 100
}
﻿central_america_falls_apart = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	should_be_pinned_by_default = yes

	on_monthly_pulse = {
		random_events = {
			10 = 0
			1 = central_america.3
		}
	}

	complete = {
		any_scope_state = {	
			state_region = s:STATE_GUATEMALA
			turmoil < 0.2
		}
		any_scope_state = {	
			state_region = s:STATE_GUATEMALA
			turmoil < 0.2
		}
		any_scope_state = {	
			state_region = s:STATE_COSTA_RICA
			turmoil < 0.2
		}
		any_scope_state = {	
			state_region = s:STATE_SAN_SALVADOR
			turmoil < 0.2
		}
		any_scope_state = {	
			state_region = s:STATE_NICARAGUA
			turmoil < 0.2
		}
	}

	fail = {
		custom_tooltip = {
			text = central_america_fail_tt
			any_scope_state = {
				OR = {
					state_region = s:STATE_GUATEMALA
					state_region = s:STATE_HONDURAS
					state_region = s:STATE_COSTA_RICA
					state_region = s:STATE_SAN_SALVADOR
					state_region = s:STATE_NICARAGUA
				}
				count < 3
			}
		}
	}

	on_fail = {
		trigger_event = { id = central_america.2 popup = yes }
		custom_tooltip = central_america_capital_tt
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = central_america_breakup_status
			}
		}
	}
}



ragamuffin_war = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	complete = {
		is_at_war = no
		OR = {
			NOT = { exists = c:PNI }
			c:PNI ?= {
				is_country_alive = no
			}
		}
		OR = {
			NOT = { exists = c:PRA }
			c:PRA ?= {
				is_country_alive = no
			}
		}
	}

	on_complete = {
		hidden_effect = { set_variable = ragamuffin_war_completed }
	}

	fail = {
		is_at_war = no
		OR = {
			c:PNI ?= {
				is_country_alive = yes
			}
			c:PRA ?= {
				is_country_alive = yes
			}
		}
	}

	on_fail = {
		trigger_event = { id = south_america.5 }
		hidden_effect = { set_variable = ragamuffin_war_completed }
		remove_pedropoint_effect = yes
	}

	should_be_pinned_by_default = yes

}

ragamuffin_war_minors = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	immediate = {
		c:BRZ = {
			save_scope_as = brz_scope
		}
	}

	complete = {
		is_at_war = no
		is_country_alive = yes
	}

	on_complete = {
		if = {
			limit = {
				c:PNI ?= THIS
			}
			custom_tooltip = {
				text = ragamuffin_war_minors_tt
			}
		}
		else = {
			trigger_event = { id = brazilian_minors.4 popup = yes }
		}
	}

	fail = {
		is_country_alive = no
	}

	should_be_pinned_by_default = yes

}


je_reunify_central_america = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

	should_be_pinned_by_default = yes

	complete = {
		any_scope_state = {
			state_region = s:STATE_SAN_SALVADOR
		}
		any_scope_state = {
			state_region = s:STATE_GUATEMALA
		}
		any_scope_state = {
			state_region = s:STATE_HONDURAS
		}
		any_scope_state = {
			state_region = s:STATE_NICARAGUA
		}
		any_scope_state = {
			state_region = s:STATE_COSTA_RICA
		}
	}
	
	on_complete = {
		if = {
			limit = {
				NOT = { exists = c:UCA }
			}
			change_tag = UCA
		}
		trigger_event = { id = central_america.1 popup = yes }
	}
}
﻿je_coup = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_crises

	immediate = {
		random_interest_group = {
			limit = {
				has_variable = coup_ig_var
			}
			save_scope_as = coup_ig
			remove_variable = coup_ig_var
		}
		if = {
			limit = {
				var:coup_for_law = 1
			}
			random_law = {
				limit = {
					type = law_type:law_monarchy
				}
				save_scope_as = coup_desired_law
			}
		}
		else_if = {
			limit = {
				var:coup_for_law = 2
			}
			random_law = {
				limit = {
					type = law_type:law_presidential_republic
				}
				save_scope_as = coup_desired_law
			}
		}
		else_if = {
			limit = {
				var:coup_for_law = 3
			}
			random_law = {
				limit = {
					type = law_type:law_council_republic
				}
				save_scope_as = coup_desired_law
			}
		}
		else_if = {
			limit = {
				var:coup_for_law = 4
			}
			random_law = {
				limit = {
					type = law_type:law_parliamentary_republic
				}
				save_scope_as = coup_desired_law
			}
		}
		else_if = {
			limit = {
				var:coup_for_law = 5
			}
			random_law = {
				limit = {
					type = law_type:law_theocracy
				}
				save_scope_as = coup_desired_law
			}
		}
		else_if = {
			limit = {
				var:coup_for_law = 6
			}
			random_law = {
				limit = {
					type = law_type:law_autocracy
				}
				save_scope_as = coup_desired_law
			}
		}
		remove_variable = coup_for_law
	}

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					scope:coup_ig = {
						OR = {
							is_powerful = no
							ig_approval >= 0
						}
					}
				}
				change_variable = {
					name = coup_var
					add = -1
				}
			}
			if = {
				limit = {
					scope:coup_ig = {
						is_powerful = yes
						ig_approval < 0
					}
				}
				change_variable = {
					name = coup_var
					add = 1
				}
			}
		}
	}

	on_monthly_pulse = {
		random_events = {
			150 = 0
			10 = coup_pulse_events.1
			10 = coup_pulse_events.2
			10 = coup_pulse_events.3 
			10 = coup_pulse_events.4
			10 = coup_pulse_events.5
			10 = coup_pulse_events.6
			10 = coup_pulse_events.7
			10 = coup_pulse_events.8
			10 = coup_pulse_events.9
			10 = coup_pulse_events.10
			25 = coup_pulse_events.11
			25 = coup_pulse_events.12
			25 = coup_pulse_events.13
			25 = coup_pulse_events.14
			25 = coup_pulse_events.15
			25 = coup_pulse_events.16
			25 = coup_pulse_events.17
			25 = coup_pulse_events.18
		}
	}

	complete = {
		scope:coup_ig = {
			is_powerful = yes
			ig_approval < 0
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		if = {
			limit = {
				scope:coup_ig = {
					is_interest_group_type = ig_armed_forces
				}
			}
			set_variable = achievement_military_junta_var
		}
		remove_variable = coup_var
		
		custom_tooltip = coup_success_tt
		
		if = {
			limit = {
				exists = currently_enacting_law
			}
			currently_enacting_law = {
				type = {
					save_scope_as = law_being_enacted
				}
				currently_active_law_in_group = {
					type = {
						save_scope_as = law_being_replaced
					}
				}
			}
			if = {
				limit = {
					scope:coup_ig = {
						prefers_law = { # If we prefer the current law to the enacting law
							law = scope:law_being_replaced
							comparison_law = scope:law_being_enacted
						}
					}
				}
				cancel_enactment = yes
			}	
		}
		
		trigger_event = { id = coup.2 popup = yes }
		hidden_effect = {
			random_list = {
				25 = {
					trigger_event = { id = coup_aftermath_events.1 days = 30 }
				}
				25 = {
					trigger_event = { id = coup_aftermath_events.2 days = 30 }
				}
				25 = {
					trigger_event = { id = coup_aftermath_events.3 days = 30 }
				}
				25 = {
					trigger_event = { id = coup_aftermath_events.4 days = 30 }
				}
			}
		}
	}

	fail = {
		OR = {
			# fail if the coup has run out of steam
			custom_tooltip = {
				text = coup_no_progress
				root.var:coup_var <= 0
			}
			# fail if the IG is kicked out of government
			scope:coup_ig = {
				is_in_government = no
			}
			# fail if IG changes law stances
			scope:coup_ig = {
				law_stance = {
					law = scope:coup_desired_law.type
					value < approve
				}
			}
		}
	}

	on_fail = {
		custom_tooltip = coup_remove_ig
		# IG is angry that they were removed from government
		if = {
			limit = {
				scope:coup_ig = {
					is_in_government = no
					NOT = {
						has_variable = resigned_from_gov_coup
					}
				}
			}
			trigger_event = { id = coup.3 popup = yes }
		}
		else_if = {
			limit = {
				scope:coup_ig = {
					is_in_government = no
					has_variable = resigned_from_gov_coup
				}
			}
			trigger_event = { id = coup.5 popup = yes }
			remove_variable = resigned_from_gov_coup
		}
		# coup runs out of steam or IG changes law stances
		else_if = {
			limit = {
				OR = {
					root.var:coup_var <= 0
					scope:coup_ig = {
						law_stance = {
							law = scope:coup_desired_law.type
							value < approve
						}
					}
				}
			}
			trigger_event = { id = coup.4 popup = yes }
		}
		remove_variable = coup_var
	}

	invalid = {
		OR = {
			NOT = {
				exists = scope:coup_desired_law
			}
			NOT = {
				exists = scope:coup_ig
			}
			has_law = scope:coup_desired_law.type
		}
	}

	on_invalid = {
		remove_variable = coup_var
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = coup_advancing
				trigger = {
					scope:coup_ig = {
						is_powerful = yes
						ig_approval < 0
					}
				}
			}
			triggered_desc = {
				desc = coup_declining
				trigger = {
					scope:coup_ig = {
						OR = {
							is_powerful = no
							ig_approval >= 0
						}
					}
				}
			}
		}
	}

	current_value = {
		value = root.var:coup_var
	}

	goal_add_value = {
		add = 100
	}

	progressbar = yes

	should_be_pinned_by_default = yes

	transferable = no
	can_revolution_inherit = no

	weight = 100
}
﻿je_eastern_frontier = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_objectives

    scripted_button = greater_khorasan_button
    scripted_button = persian_baluchistan_button
    scripted_button = persia_british_aid_button
    scripted_button = persia_russian_aid_button
    scripted_button = persia_resettle_merv_button

    immediate = {
        s:STATE_HERAT = {
            save_scope_as = herat_scope
        }
        s:STATE_MERZ = {
            save_scope_as = merv_scope
        }
        s:STATE_KABUL = {
            save_scope_as = kabul_scope
        }
        s:STATE_UZBEKIA = {
            save_scope_as = uzbekia_scope
        }
        s:STATE_KHIVA = {
            save_scope_as = khiva_scope
        }
        c:PER ?= {
            save_scope_as = persia_scope
        }
        c:GBR ?= {
            save_scope_as = britain_scope
        }
        c:RUS ?= {
            save_scope_as = russia_scope
        }
        c:TRM ?= {
            save_scope_as = turkmenia_scope
        }
        cu:persian = {
            save_scope_as = persian_culture
        }
        cu:turkmen = {
            save_scope_as = turkmen_culture
        }
    }

	complete = {
        custom_tooltip = {
            text = je_eastern_frontier_tt_1 # Todo PRCAL-14501 Needs state highlighting
            country_or_subject_owns_entire_state_region = STATE_HERAT
            country_or_subject_owns_entire_state_region = STATE_KABUL
            country_or_subject_owns_entire_state_region = STATE_KANDAHAR
            country_or_subject_owns_entire_state_region = STATE_BALKH
            country_or_subject_owns_entire_state_region = STATE_CENTRAL_HIGHLANDS
            country_or_subject_owns_entire_state_region = STATE_MERZ
            country_or_subject_owns_entire_state_region = STATE_NORTHERN_BALUCHISTAN
        }
        custom_tooltip = {
            text = je_eastern_frontier_tt_2 # Todo PRCAL-14501 Needs state highlighting
            country_or_subject_owns_entire_state_region = STATE_TURKMENIA
            country_or_subject_owns_entire_state_region = STATE_KHIVA
        }
        custom_tooltip = {
            text = je_eastern_frontier_tt_3 # Todo PRCAL-14501 Needs state highlighting
            country_or_subject_owns_entire_state_region = STATE_FERGANA
            country_or_subject_owns_entire_state_region = STATE_TAJIKISTAN
            country_or_subject_owns_entire_state_region = STATE_UZBEKIA
        }
        custom_tooltip = {
            text = je_eastern_frontier_tt_4
            has_variable = restoration_of_merv_var
        }
	}

	on_complete = {
        trigger_event = { id = persia_events.1 popup = yes }
        hidden_effect = {
            set_variable = iranzamin_achievement
        }
	}

	weight = 1000
	transferable = yes
}

﻿je_flamethrowers = {
 	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = trench_works
 		has_technology_researched = automatic_machine_guns
 		army_size >= 25
 	}

 	possible = {
 		has_technology_researched = flamethrowers
 		army_size >= 40
 	}

 	complete = {
 		is_at_war = yes
 		army_mobilization_option_fraction = {  
			target = mobilization_option:mobilization_option_flamethrowers  
			value >= 0.2  
		}
 		# for these JE's we would want this to be true for X months, but excluding that for the sake of readability
 		# If this trigger is changed, also change the trigger in the event
 		any_scope_war = {
            any_scope_front = {
               any_scope_general = {
                   owner = ROOT
                   this.commander_military_formation = {
                       has_mobilization_option = mobilization_option:mobilization_option_flamethrowers
                   }
               }
            }
        }
 	}

 	on_complete = {
 		trigger_event = { id = flamethrowers_event.1 }
 	}

 	timeout = 3650
}

﻿je_grand_exhibition = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_crises

	immediate = {
		capital = {
			save_scope_as = grand_exhibition_state
			if = {
				limit = {
					any_scope_building = {
						is_building_type = building_eiffel_tower #they held a huge exhibition there
					}
				}
				random_scope_building = {
					limit = {
						is_building_type = building_eiffel_tower
					}
					save_scope_as = grand_exhibition_building
				}
			}
			else = {
				random_scope_building = {
					limit = {
						is_building_type = building_urban_center
					}
					save_scope_as = grand_exhibition_building
				}
			}
		}
		set_variable = {
			name = grand_exhibition_points_var
			value = 0
		}
		set_variable = {
			name = grand_exhibition_points_change
			value = 0
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_grand_exhibition_bad_points
				trigger = {
					root.var:grand_exhibition_points_var <= 20
				}
			}
			triggered_desc = {
				desc = je_grand_exhibition_medium_points
				trigger = {
					root.var:grand_exhibition_points_var > 20
					root.var:grand_exhibition_points_var < 50
				}
			}
			triggered_desc = {
				desc = je_grand_exhibition_good_points
				trigger = {
					root.var:grand_exhibition_points_var >= 50
					root.var:grand_exhibition_points_var < 100
				}
			}
			triggered_desc = {
				desc = je_grand_exhibition_great_points
				trigger = {
					root.var:grand_exhibition_points_var >= 100
				}
			}
		}
	}
	
	on_weekly_pulse = {
		effect = {
			set_variable = {
				name = grand_exhibition_points_var
				value = grand_exhibition_points
			}
			change_variable = {
				name = grand_exhibition_points_var
				add = var:grand_exhibition_points_change
			}
		}
	}
	
	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = exhibition_events.4
			10 = exhibition_events.5
			10 = exhibition_events.6
			10 = exhibition_events.7
			30 = exhibition_events.8
		}
	}

	complete = {
		custom_tooltip = {
			text = grand_exhibition_complete_tt
			always = no
		}
	}

	current_value = {
		value = root.var:grand_exhibition_points_var
	}

	goal_add_value = {
		value = 100
	}
	
	progressbar = yes
	
	invalid = {
		scope:grand_exhibition_state = {
			devastation >= 0.1
			NOT = {
				owner = root
			}
		}
	}
	
	on_invalid = {
		custom_tooltip = {
			text = invalid_grand_exhibition_tt
			remove_variable = grand_exhibition_decision_taken
		}
	}
	
	timeout = 1825 # 5 years
	
	on_timeout = {
		if = {
			limit = {
				root.var:grand_exhibition_points_var >= 100 
			}
			trigger_event = { id = exhibition_events.3 }
		} 
		else_if = {
			limit = {
				root.var:grand_exhibition_points_var >= 50
			}
			trigger_event = { id = exhibition_events.2 }
		} 
		else = {
			trigger_event = { id = exhibition_events.1 }
		}
	}

	weight = 20

	should_be_pinned_by_default = yes
	
	transferable = no
}
﻿je_hawaii = { #JE for hawaii to stave off annxation
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_internal_affairs

	complete = {
		GDP >= 250000
	}

	on_complete = {
		trigger_event = {
			id = hawaii_events.2
		}
	}

	on_timeout = {
		if = {
			limit = {
				any_country = {
					has_variable = hawaii_interest
				}
			}
			trigger_event = {
				id = hawaii_events.3
			}
		}
	}

	timeout = 3650

	should_be_pinned_by_default = yes
}

je_hawaiian_interest = { #JE for GPs so that they can see the situation is ongoing
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		has_global_variable = gp_hawaii_interest
		country_rank = rank_value:great_power
	}

	possible = {
		hidden_trigger = {
			has_variable = hawaii_interest
		}
		custom_tooltip = influence_hawaii_tt
		country_rank = rank_value:great_power
	}
	
	complete = {
		custom_tooltip = {
			text = je_hawaiian_interest_tt
			OR = {
				NOT = {
					exists = c:HAW
				}
				c:HAW ?= {
					is_subject_of = ROOT
				}
			}
		}
	}
	
	invalid = {
		hidden_trigger = {
			NOT = { has_global_variable = gp_hawaii_interest }
		}
		custom_tooltip = invalid_influence_hawaii_tt
	}
	should_be_pinned_by_default = yes
	
	timeout = 3650
	
	progressbar = yes
}

﻿je_ig_suppression_1 = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_internal_affairs

	complete = {
		scope:target = {
			ig_clout <= 0.2
			is_in_government = no
		}
	}

	on_complete = {
		set_variable = {
			name = completed_ig_suppression_je_var
			months = normal_modifier_time
		}
		remove_variable = ig_leader_exposed_var
		remove_variable = ig_leader_steps_down_var
		remove_variable = ig_leader_in_jail_var
		trigger_event = { id = ig_suppression_events.7 }
	}

	fail = {
		scope:target = {
			is_being_suppressed = no
		}
	}

	status_desc = { #schemes
		first_valid = {
			triggered_desc = {
				desc = je_ig_suppression_status_1
				trigger = {
					has_variable = ig_leader_exposed_var
				}
			}
			triggered_desc = {
				desc = je_ig_suppression_status_2
				trigger = {
					has_variable = ig_leader_steps_down_var
				}
			}
			triggered_desc = {
				desc = je_ig_suppression_status_3
				trigger = {
					has_variable = ig_leader_in_jail_var
				}
			}
		}
	}

	on_monthly_pulse = {
		random_events = {
			200 = 0
			10 = ig_suppression_events.2
			10 = ig_suppression_events.5
			10 = ig_suppression_events.6
			10 = ig_suppression_events.1000
			10 = ig_suppression_events.1001
			10 = ig_suppression_events.1003
		}
	}

	on_yearly_pulse = {
	}

	weight = 200

	transferable = no

	progressbar = no
}

﻿je_indian_removal = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_historical_content
	
	on_monthly_pulse = {
		random_events = {
			10 = 0 
			1 = native_resettlement.2 # john ross
			1 = native_resettlement.3 # Preparing for resettlement
			1 = native_resettlement.4 # Trail of Tears
		}
	}

	complete = {
		OR = {
			has_law = law_type:law_no_colonial_affairs
			cu:cherokee = {
				NOT = { culture_is_discriminated_in = ROOT }
			}
			custom_tooltip = {
				text = indian_removal_fail_tt
				NOT = {
					any_scope_state = {
						any_scope_pop = {
							culture = cu:cherokee
						}
					}
				}
			}
		}
	}
	
	on_complete = {
		custom_tooltip = {
			text = indian_removal_end
			if = {
				limit = {
					NOT = {
						any_scope_pop = {
							culture = cu:cherokee
						}
					}
				}
				trigger_event = { id = native_resettlement.5 }
			}
			else = {
				trigger_event = { id = native_resettlement.6 }
			}
		}
	}
	
	invalid = {
		OR = {
			NOT = { owns_entire_state_region = STATE_GEORGIA }
			NOT = {
				AND = {
					exists = c:SEQ
					exists = c:USA
					c:SEQ = { is_subject_of = c:USA }
				}
			}
		}
	}
	
	weight = 200
	
	should_be_pinned_by_default = yes
	
	transferable = no
}

﻿je_krakatoa = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_crises

	on_monthly_pulse = {
		random_events = {
			10 = 0
			2 = krakatoa.4 #art boom
			5 = krakatoa.3 #crop failure
		}
	}
	
	timeout = 730
	
	weight = 100

	should_be_pinned_by_default = yes
	
	transferable = yes
}
﻿je_famine = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_crises

	is_shown_when_inactive = {
		game_date >= 1937
		NOT = { has_variable = completed_major_famine_var }
		NOT = { is_country_type = decentralized }
		any_scope_state = {
			average_sol <= 10
		}
	}

	possible = {
		institution_investment_level = {
			institution = institution_social_security
			value < 4
		}
		OR = {
			any_scope_state = {
				OR = {
				   custom_tooltip = {
				      text = natural_disaster_variable
					  has_variable = natural_disaster_variable
				   }
		           custom_tooltip = {
				      text = grain_more_than_35_percent_more_expensive_tt
				      sg:grain = {
		                 state_goods_pricier >= 0.7
					  }
		          }
		        }
		        OR = {
				   AND = {
				      is_incorporated = yes
		              average_sol <= 10
		           }
		           AND = {
				      is_incorporated = no
		              average_sol <= 5
		           }
		        }
			}
		}
	}

	immediate = {
		if = {
			limit = {
				any_scope_state = {
					average_sol <= 10
					is_incorporated = yes
					custom_tooltip = {
						text = natural_disaster_variable
						has_variable = natural_disaster_variable
					}
				}
			}
			random_scope_state = {
				limit = {
					average_sol <= 10
					is_incorporated = yes
					custom_tooltip = {
						text = natural_disaster_variable
						has_variable = natural_disaster_variable
					}
				}
				save_scope_as = famine_state
				set_variable = famine_var
			}
			trigger_event = { id = famine_events.1 }
		}
		else_if = {
			limit = {
				any_scope_state = {
					average_sol <= 5
					sg:grain = {
						state_goods_pricier > 0.35 
					}
				}
			}
			random_scope_state = {
				limit = {
					average_sol <= 5
					sg:grain = {
						state_goods_pricier > 0.35 
					}
				}
				save_scope_as = famine_state
				set_variable = famine_var
			}
			trigger_event = { id = famine_events.1 }
		}
	}

	current_value = {
		value =	root.average_sol
	}

	goal_add_value = 3

	complete = {
		scope:journal_entry = {
			custom_tooltip = {
				text = je_major_famines_success
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = completed_major_famine_var
			months = normal_modifier_time
		}
		every_scope_state = {
			limit = {
			  has_modifier = great_famine_modifier
			}
			remove_modifier = great_famine_modifier
		}
		every_scope_state = {
			limit = {
			  has_modifier = emergency_famine_modifier
			}
			remove_modifier = emergency_famine_modifier
		}
		remove_variable = neighbor_country_1_var
		remove_variable = famine_donations_var
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = famine_events.2
			10 = famine_events.3
			10 = famine_events.4
			10 = famine_political.1
			10 = famine_political.2
			10 = famine_political.3
			10 = famine_political.4
			10 = famine_political.5
		}
	}

	timeout = 1825

	weight = 200

	should_be_pinned_by_default = yes

	transferable = no

	progressbar = yes
}

﻿je_french_natural_borders = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		exists = c:FRA
		this = c:FRA
		has_dlc_feature = voice_of_the_people_content
	}

	possible = {
		has_technology_researched = nationalism
		any_interest_group = {
			is_powerful = yes
			is_in_government = yes
			leader = {
				OR = {
					has_ideology = ideology:ideology_jingoist_leader
					has_ideology = ideology:ideology_ethno_nationalist
					has_ideology = ideology:ideology_fascist
					has_ideology = ideology:ideology_integralist
					has_ideology = ideology:ideology_bonapartist
				}
			}
		}
	}

	immediate = {
		trigger_event = { id = natural_borders.1 popup = yes }
	}

	complete = {
		is_at_war = no
		custom_tooltip = {
			text = own_all_french_homelands
			NOT = {
				any_state = {
					state_region = {
						is_homeland = cu:french
					}
					NOT = { owner = ROOT }
				}
			}
		}
		any_scope_state = {
			state_region = s:STATE_WALLONIA
			is_incorporated = yes
			is_split_state = no
		}
		any_scope_state = {
			state_region = s:STATE_FLANDERS
			is_incorporated = yes
			is_split_state = no
		}
		any_scope_state = {
			state_region = s:STATE_RHINELAND
			is_incorporated = yes
			is_split_state = no
		}
		any_scope_state = {
			state_region = s:STATE_NORTH_RHINE
			is_incorporated = yes
			is_split_state = no
		}
	}

	on_complete = {
		set_variable = completed_natural_borders_je
		trigger_event = { id = natural_borders.2 popup = yes }
	}

	invalid = {
		has_variable = reject_natural_borders
	}

	should_be_pinned_by_default = yes

	weight = 100
}

je_confederation_of_the_rhine = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		OR = {
			any_subject_or_below = {
				capital = {
					OR = {
						region = sr:region_rhine
						region = sr:region_north_germany
						region = sr:region_south_germany
					}
				}
			}
			any_scope_state = {
				state_region = {
					OR = {
						is_homeland = cu:south_german
						is_homeland = cu:north_german
					}
				}
				OR = {
					region = sr:region_rhine
					region = sr:region_north_germany
					region = sr:region_south_germany
				}
				is_incorporated = no
				NOT = {
					ROOT = {
						has_claim = prev.state_region
					}
				}
			}
		}
		NOR = {
			country_has_primary_culture = cu:north_german
			country_has_primary_culture = cu:south_german
		}
	}

	possible = {
		country_rank >= rank_value:great_power
		any_state = {
			OR = {
				region = sr:region_rhine
				region = sr:region_north_germany
				region = sr:region_south_germany
			}
			state_region = {
				OR = {
					is_homeland = cu:south_german
					is_homeland = cu:north_german
				}
			}
			OR = {
				owner = {
					is_subject_of = ROOT
					NOT = {
						has_diplomatic_pact = {
							who = ROOT
							type = personal_union
							is_initiator = no
						}
					}
					capital = {
						OR = {
							region = sr:region_rhine
							region = sr:region_north_germany
							region = sr:region_south_germany
						}
					}
					OR = {
						country_has_primary_culture = cu:north_german
						country_has_primary_culture = cu:south_german
					}
				}
				owner = ROOT
			}
			count >= 4
		}
	}

	immediate = {
		save_scope_as = rhine_overlord
		cu:north_german = {
			save_scope_as = north_german_scope
		}
		cu:south_german = {
			save_scope_as = south_german_scope
		}
	}

	scripted_button = je_confederation_of_the_rhine_confederate_button
	scripted_button = je_confederation_of_the_rhine_expand_button

	invalid = {
		NOR = {
			any_country = {
				is_subject_of = ROOT
				capital = {
					OR = {
						region = sr:region_rhine
						region = sr:region_north_germany
						region = sr:region_south_germany
					}
				}
			}
			any_scope_state = {
				state_region = {
					OR = {
						is_homeland = cu:south_german
						is_homeland = cu:north_german
					}
				}
				OR = {
					region = sr:region_rhine
					region = sr:region_north_germany
					region = sr:region_south_germany
				}
				is_incorporated = no
			}
		}
	}

	complete = {
		custom_tooltip = {
			text = no_german_great_powers_tt
			NOT = {
				any_country = {
					OR = {
						country_has_primary_culture = cu:north_german
						country_has_primary_culture = cu:south_german
					}
					country_rank = rank_value:great_power
				}
			}
		}
	}

	fail = {
		exists = c:RHN
		c:RHN ?= {
			NOT = {
				is_subject_of = ROOT
			}
		}
	}

	on_fail = {
		add_modifier = {
			name = modifier_fall_of_germany
			months = normal_modifier_time
			is_decaying = yes
		}
	}

	should_be_pinned_by_default = yes

	weight = 100
}

﻿je_war_nursing = {
 	icon = "gfx/interface/icons/event_icons/event_skull.dds"

   group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = triage
 		is_at_war = yes
 		army_size >= 25
 	}

 	possible = {
 		has_technology_researched = modern_nursing
 		is_at_war = yes
 		army_size >= 40
 	}

 	immediate = {
 		trigger_event = { id = nursing_events.1 }
 		random_scope_war = {
 			save_scope_as = ongoing_journal_war
 		}
 	}

 	complete = {
        army_mobilization_option_fraction = {  
			target = mobilization_option:mobilization_option_field_hospitals  
			value >= 0.2  
		}
 		# for these JE's we would want this to be true for X months, but excluding that for the sake of readability
 		any_scope_war = {
            any_scope_front = {
               any_scope_general = {
                   owner = ROOT
                   this.commander_military_formation = {
                       has_mobilization_option = mobilization_option:mobilization_option_field_hospitals
                   }
               }
            }
        }
 	}

 	on_complete = {
 		trigger_event = { id = nursing_events.4 }
 	}

 	invalid = {
 		is_at_war = no
 	}

 	on_monthly_pulse = {
 		random_events = {
 			100 = 0
 			10 = nursing_events.2
 			10 = nursing_events.3
 		}
 	}
}
﻿je_oregon = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		exists = c:USA
		exists = c:GBR
		c:USA = ROOT
		s:STATE_WASHINGTON = {
			any_scope_state = {
				owner = {
					OR = {
						c:GBR = THIS
						is_subject_of = c:GBR
					}
				}
			}
		}
		s:STATE_OREGON = {
			any_scope_state = {
				owner = {
					OR = {
						c:GBR = THIS
						is_subject_of = c:GBR
					}
				}
			}
		}
		s:STATE_IDAHO = {
			any_scope_state = {
				owner = {
					OR = {
						c:GBR = THIS
						is_subject_of = c:GBR
					}
				}
			}
		}
	}

	possible = { 
		OR = {
			has_interest_marker_in_region = region_pacific_coast
			custom_tooltip = {
				text = oregon_tt
				has_global_variable = oregon_trail_mapped
			}
			owns_entire_state_region = STATE_MONTANA
			owns_entire_state_region = STATE_WYOMING
		}
	}

	complete = {
		OR = {
			AND = {
				has_interest_marker_in_region = region_pacific_coast
				custom_tooltip = {
					text = oregon_tt
					has_global_variable = oregon_trail_mapped
				}
				owns_entire_state_region = STATE_MONTANA
				owns_entire_state_region = STATE_WYOMING
				c:GBR = {
					relations:ROOT >= relations_threshold:cordial
				}
			}
			AND = {
				owns_entire_state_region = STATE_WASHINGTON
				owns_entire_state_region = STATE_IDAHO
				owns_entire_state_region = STATE_OREGON
			}
		}
	}

	on_complete = {
		if = {
			limit = {
				s:STATE_WASHINGTON = {
					any_scope_state = {
						owner = {
							OR = {
								c:GBR = THIS
								is_subject_of = c:GBR
							}
						}
					}
				}
				s:STATE_OREGON = {
					any_scope_state = {
						owner = {
							OR = {
								c:GBR = THIS
								is_subject_of = c:GBR
							}
						}
					}
				}
				s:STATE_IDAHO = {
					any_scope_state = {
						owner = {
							OR = {
								c:GBR = THIS
								is_subject_of = c:GBR
							}
						}
					}
				}
			}
			c:GBR = { trigger_event = { id = oregon.2 } }
		}
		else = {
			s:STATE_IDAHO = {
				add_homeland = cu:yankee
			}
			s:STATE_WASHINGTON = {
				add_homeland = cu:yankee
			}
			s:STATE_OREGON = {
				add_homeland = cu:yankee
			}
			add_modifier = {
				name = oregon_resolved
				months = normal_modifier_time
			}
		}
	}

	weight = 100
}

je_conquer_oregon = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		c:USA = {
			owns_entire_state_region = STATE_WASHINGTON
			owns_entire_state_region = STATE_IDAHO
			owns_entire_state_region = STATE_OREGON
		}
	}

	weight = 100

	transferable = no
}

﻿je_springtime_of_the_peoples = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_crises

	is_shown_when_inactive = {
		has_global_variable = peoples_springtime_happening
		has_technology_researched = egalitarianism
		capital = {
			OR = {
				region = sr:region_england
				region = sr:region_north_sea_coast
				region = sr:region_iberia
				region = sr:region_france
				region = sr:region_occitania
				region = sr:region_rhine
				region = sr:region_italy
				region = sr:region_balkans
				region = sr:region_north_germany
				region = sr:region_south_germany
				region = sr:region_baltic
				region = sr:region_danubia
				region = sr:region_poland
				#region = sr:region_russia
				#region = sr:region_dnieper
			}
		}
	}

	possible = {
		any_interest_group = {
			OR = {
				is_powerful = yes
				is_insurrectionary = yes
			}
			leader = { has_ideology = ideology:ideology_radical }
		}
	}

	immediate = {
		trigger_event = { id = 1848.4 }
	}

	complete = {
		is_at_war = no
		has_revolution = no
		is_revolutionary = no
		has_insurrectionary_interest_groups = no
		OR = {
			custom_tooltip = {
				text = je_springtime_of_the_peoples_tt_1
				always = no
			}
			AND = {
				any_interest_group = {
					is_in_government = yes
					leader = { has_ideology = ideology:ideology_radical }
				}
				NOT = { has_law = law_type:law_monarchy }
				OR = {
					has_law = law_type:law_census_voting
					has_law = law_type:law_universal_suffrage
				}
			}
			custom_tooltip = {
				text = je_springtime_of_the_peoples_tt_2
				always = no
			}
			NOT = {
				any_interest_group = {
					leader = { has_ideology = ideology:ideology_radical }
					is_marginal = no
				}
			}
		}		
	}

	on_complete = {
		set_variable = {
			name = completed_peoples_stringtime
		}
		set_variable = {
			name = completed_peoples_stringtime_recent
			months = short_modifier_time
		}
		custom_tooltip = je_springtime_of_the_peoples_tt_3
		hidden_effect = {
			if = {
				limit = {
					any_interest_group = {
						is_in_government = yes
						leader = { has_ideology = ideology:ideology_radical }
					}
					NOT = { has_law = law_type:law_monarchy }
					OR = {
						has_law = law_type:law_wealth_voting
						has_law = law_type:law_census_voting
						has_law = law_type:law_universal_suffrage
					}
				}
				trigger_event = { id = peoples_springtime.7 }
			}
		}
		custom_tooltip = je_springtime_of_the_peoples_tt_4
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						any_interest_group = {
							leader = { has_ideology = ideology:ideology_radical }
							is_marginal = no
						}
					}
				}
				trigger_event = { id = peoples_springtime.8 }
			}
		}
	}

	on_monthly_pulse = {
		events = {
			1848.5
		}
		random_events = {
			100 = 0
			10 = peoples_springtime.3
			10 = peoples_springtime.4
			10 = peoples_springtime.5
		}
	}

	invalid = {
		has_global_variable = peoples_springtime_happened
	}

	weight = 10000
	should_be_pinned_by_default = yes

	transferable = no
	can_revolution_inherit = no

	timeout = 3650
}

﻿je_prohibition = {	
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		is_player = yes
		OR = {
			has_technology_researched = anarchism
			has_technology_researched = socialism
			has_technology_researched = corporatism
		}
		has_distillery = yes
		market = { exists = yes }
		is_junior_in_customs_union = no
	}

	possible = {
		has_technology_researched = political_agitation
		any_primary_culture = {
			has_cultural_obsession = liquor
		}
		OR = {
			ig:ig_devout = {
				is_powerful = yes 
			}
			ig:ig_intelligentsia = {
				is_powerful = yes
			}
		}
		any_scope_building = {
			is_building_type = building_food_industry
			is_distillery = yes
			level >= 5
		}
	}
	
	immediate = {
		trigger_event = { id = prohibition.1 }
		ig:ig_devout = {
			save_scope_as = devout_ig
		}
		ig:ig_intelligentsia = {
			save_scope_as = intelligentsia_ig
		}
		set_variable = {
			name = prohibition_laws_var
			value = 0
		}
	}
	
	on_monthly_pulse = {
		random_events = {
			200 = 0
			10 = crime_events.2
			10 = pm_events.3
			10 = prohibition.2
			10 = prohibition.3
			10 = prohibition.4
			10 = prohibition.5
			5 = prohibition.6
			2 = prohibition.7
			5 = election_contextual_events.8
		}
		effect = {
			if = {
				limit = {
					is_banning_goods = liquor
				}
				change_variable = {
					name = prohibition_laws_var
					add = 1
				}
			}
		}
	}

	invalid = { # event prohibition.1.b ends the JE and applies these modifiers
		OR = {
			ig:ig_devout = {
				has_modifier = rejected_prohibition_modifier
			}
			ig:ig_intelligentsia = {
				has_modifier = rejected_prohibition_modifier
			}
		}
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
		custom_tooltip = {
			text = liquor_ban_tt
			is_banning_goods = liquor
		}
	}
	

	on_complete = {
		custom_tooltip = prohibition_success.tt
		trigger_event = { id = prohibition.8 }
	}
	
	timeout = 5475
	
	current_value = {
		value = root.var:prohibition_laws_var
	}

	goal_add_value = {
		add = 120 #10 years
	}

	progressbar = yes

	transferable = no
	weight = 100
	should_be_pinned_by_default = yes
}
﻿je_scramble_for_africa = {

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		has_technology_researched = quinine
		any_scope_state = {
			is_incorporated = no
			state_in_africa = yes
		}
	}

	possible = {
		has_technology_researched = malaria_prevention
		any_scope_state = {
			is_incorporated = no
			state_in_africa = yes
			has_state_trait = state_trait_malaria
		}
		OR = {
			has_law = law_type:law_colonial_resettlement
			has_law = law_type:law_colonial_exploitation
		}
	}

	immediate = {
		trigger_event = {
			id = africa_colonial_events.1
			days = 0
			popup = yes
		}
		save_scope_as = scramble_for_africa_self
	}

	complete = {
		custom_tooltip = {
			text = scramble_for_africa_complete_tt
			any_scope_state = {
				is_incorporated = no
				state_in_africa = yes
				count >= 7
			}
		}
		custom_tooltip = {
			text = scramble_for_africa_complete_2_tt
			any_state_region = {
				filter = {
					OR = {
						region = sr:region_nile_basin
						region = sr:region_ethiopia
						region = sr:region_north_africa
						region = sr:region_senegal
						region = sr:region_niger
						region = sr:region_congo
						region = sr:region_southern_africa
						region = sr:region_zanj		
					}
				}
				NOT = {
					any_scope_state = {
						owner = {
							country_is_in_africa = yes
							OR = {
								is_country_type = decentralized
								is_country_type = unrecognized
							}
							is_subject = no
						}
					}
				}
				percent >= 0.95
			}
		}
	}

	on_complete = {
		trigger_event = {
			id = africa_colonial_events.2
			days = 0
			popup = yes
		}
	}

	fail = {
		custom_tooltip = {
			text = scramble_for_africa_fail_tt
			NOT = {
				any_scope_state = {
					is_incorporated = no
					state_in_africa = yes
				}
			}
		}
	}

	#on_fail = {
	#	trigger_event = {
	#		id = africa_colonial_events.3
	#		days = 0
	#		popup = yes
	#	}
	#}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = scramble_for_africa_6_states
				trigger = {
					any_scope_state = {
						count >= 6
						is_incorporated = no
						state_in_africa = yes
					}
				}
			}
			triggered_desc = {
				desc = scramble_for_africa_4_states
				trigger = {
					any_scope_state = {
						count >= 4
						is_incorporated = no
						state_in_africa = yes
					}
				}
			}
			triggered_desc = {
				desc = scramble_for_africa_3_states
				trigger = {
					any_scope_state = {
						count >= 1
						is_incorporated = no
						state_in_africa = yes
					}
				}
			}
			triggered_desc = {
				desc = scramble_for_africa_0_states
			}
		}
	}

	# No timeout. Imperialism never ends.
	# timeout = 7300

	on_timeout = {

	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = africa_colonial_events.4
			10 = africa_colonial_events.5
			10 = africa_colonial_events.6
			5 = africa_colonial_events.7
			10 = patagonia.2
			10 = amazon.2

			10 = africa_colonial_events.40
			10 = africa_colonial_events.41
			10 = africa_colonial_events.51
			10 = africa_colonial_events.53
			10 = africa_colonial_events.54
		}
	}

	weight = 200
	should_be_pinned_by_default = yes
}

﻿je_avert_sepoy_mutiny = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = je_avert_sepoy_mutiny_tt_1
			has_variable = consolidated_colonial_rule
		}
		custom_tooltip = {
			text = je_avert_sepoy_mutiny_tt_2
			has_variable = reformed_indies
		}
	}

	fail = {
		has_any_secessionists_broken_out = yes
	}

	invalid = {
		NOT = {
			owns_entire_state_region = STATE_DELHI
		}
	}

	on_fail = {
		trigger_event = { id = raj.6 popup = yes }
	}

	on_timeout = {
		trigger_event = { id = raj.6 popup = yes }
	}

	on_monthly_pulse = {
		random_events = {
			11 = 0
			1 = raj.3
			1 = raj.4
			1 = raj.5
		}
	}

	timeout = 7300

	weight = 100
	should_be_pinned_by_default = yes
}

je_sepoy_mutiny = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		trigger_if = {
			limit = { exists = c:MUG }
			c:MUG = { is_country_alive = no }
		}
		highest_secession_progress < 0.3
		has_any_secessionists_broken_out = no
		is_at_war = no
	}

	on_complete = {
		if = {
			limit = {
				exists = c:GBR
				is_subject_of = c:GBR
				c:GBR = {
					is_country_alive = yes
					NOT = { has_variable = british_raj_var }
				}
			}
			c:GBR = {
				trigger_event = { id = raj.1 days = 0 popup = yes }
			}
		}
		else = {
			add_modifier = {
				name = company_crushed_mutiny
				months = normal_modifier_time
			}
		}
		hidden_effect = {
			every_scope_state = {
				limit = {
					owner = ROOT
					has_variable = bic_incorporated_state
				}
				set_state_type = incorporated
				remove_variable = bic_incorporated_state
			}
		}
	}

	weight = 100
	should_be_pinned_by_default = yes
}
﻿slave_owner_paranoia = {

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		OR = {
			has_law = law_type:law_slave_trade
			has_law = law_type:law_legacy_slavery
		}
		radical_fraction = {
			value >= 0.1
			pop_type = slaves
		}
		NOT = { has_journal_entry = je_matter_of_slavery } # Disabled for Brazil
	}
	
	possible = {
		radical_fraction = {
			value >= 0.2
			pop_type = slaves
		}
		any_interest_group = {
			any_scope_character = {
				OR = {
					has_role = politician
					has_role = agitator
				}
				has_ideology = ideology:ideology_abolitionist
			}
		}
		NOT = { c:BRZ ?= this }
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = slave_owner_paranoia_radicalization_high
				trigger = {
					radical_fraction = {
						value >= 0.5
						pop_type = slaves
					}
				}
			}
			triggered_desc = {
				desc = slave_owner_paranoia_radicalization_mid
				trigger = {
					radical_fraction = {
						value >= 0.2
						pop_type = slaves
					}
				}
			}
			triggered_desc = {
				desc = slave_owner_paranoia_radicalization_low
			}
		}
	}

	complete = {
		radical_fraction = {
			value < 0.05
			pop_type = slaves
		}
	}

	# 5 years
	timeout = 1825
	
	on_yearly_pulse = {
		random_events = {
			40  = 0
			10 = slave_owner_paranoia_events.1
			10 = slave_owner_paranoia_events.2
			10 = slave_owner_paranoia_events.3
		}
	}
	
	weight = 200
}
﻿je_airships = {

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = completed_airships_je }
		has_technology_researched = modern_sewerage
	}

	possible = {
		has_technology_researched = steel_frame_buildings
	}

	immediate = {
	}

	complete = {
		has_technology_researched = zeppelins
	}

	on_complete = {
		trigger_event = { id = society_tech_events.301 }
		set_variable = {
			name = completed_airships_je
		}
	}

	timeout = 3650
}

je_romanticism = {

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		has_technology_researched = rationalism
		NOT = { has_variable = completed_romanticism_je }
		NOT = { is_country_type = unrecognized }
	}

	possible = {
		has_technology_researched = romanticism
		NOT = { has_technology_researched = realism }
		any_scope_state = {
			has_building = building_urban_center
		}
	}

	immediate = {
	}

	complete = {
		any_scope_building = {
			is_building_type = building_arts_academy
			has_active_production_method = pm_traditional_art
			occupancy >= 0.9
			level >= 2
		}
	}

	on_complete = {
		trigger_event = { id = society_tech_events.302 }
		set_variable = {
			name = completed_romanticism_je
		}
	}

	fail = {
		has_technology_researched = realism
	}

	timeout = 3650
}

﻿je_sol_1 = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_crises

	is_shown_when_inactive = {
		NOT = { has_variable = completed_sol_je }
		NOT = { has_variable = dismissed_poverty_variable }
		NOT = { has_variable = begging_woman_martyr_variable }
		root.average_sol < 10
	}

	possible = {
		root.average_sol < 7
		OR = {
			ig:ig_petty_bourgeoisie = {
				is_powerful = yes
			}
			ig:ig_industrialists = {
				is_powerful = yes
			}
		}
		OR = {
			has_law = law_type:law_no_social_security
			has_law = law_type:law_no_health_system
		}
		OR = {
			has_technology_researched = modern_sewerage
			has_technology_researched = labor_movement
			has_technology_researched = human_rights
		}
		any_scope_state = {
			is_incorporated = yes
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 10
			}
		}
	}

	immediate = {
		trigger_event = { id = sol_events.1 }
	}

	complete = {
		custom_tooltip = {
			text = je_sol_goal_desc
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = completed_sol_je
			months = normal_modifier_time
		}
		trigger_event = { id = sol_events.2 }
	}

	invalid = {
		custom_tooltip = {
			text = je_sol_invalid_desc
			OR = {
				has_variable = dismissed_poverty_variable
				has_variable = begging_woman_martyr_variable
			}
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = sol_events.3
			10 = sol_events.4
			10 = sol_events.5
			10 = sol_events.6
		}
	}

	current_value = {
		value = root.average_sol
	}

	goal_add_value = {
		add = 3
	}

	weight = 200

	should_be_pinned_by_default = yes

	transferable = no

	progressbar = yes
}

﻿je_chinese_missions = {
	icon = "gfx/interface/icons/religion_icons/protestant.dds"

	group = je_group_historical_content

	scripted_button = CHI_deport_missionaries_button

	is_shown_when_inactive = {
		exists = c:CHI
		THIS = c:CHI
	}

	possible = {
		OR = {
			has_modifier = opium_wars_lost
			NOT = {
				has_law = law_type:law_closed_borders
			}
		}
		any_neighbouring_state = {
			is_treaty_port = yes
			custom_tooltip = {
				text = owner_is_christian_tt
				owner = {
					religion = {
						has_discrimination_trait = christian
					}
				}
			}
		}
		NOT = {
			has_law = law_type:law_isolationism
		}
	}

	immediate = {
		custom_tooltip = {
			text = missionary_activities_begin_tt
			trigger_event = {
				id = heavenly.1
			}
		}
		every_scope_state = {
			limit = {
				any_neighbouring_state = {
					is_treaty_port = yes
					owner = {
						religion = {
							has_discrimination_trait = christian
						}
					}
				}
			}
			set_variable = open_to_missionaries_state
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_law = law_type:law_no_migration_controls
					any_scope_state = {
						NOT = {
							has_variable = open_to_missionaries_state
						}
					}
				}
				every_scope_state = {
					limit = {
						NOT = {
							has_variable = open_to_missionaries_state
						}
					}
					set_variable = open_to_missionaries_state
				}
			}
			else = {
				every_scope_state = {
					limit = {
						any_neighbouring_state = {
							is_treaty_port = yes
							owner = {
								religion = {
									has_discrimination_trait = christian
								}
							}
						}
						NOT = {
							has_variable = open_to_missionaries_state
						}
					}
					set_variable = open_to_missionaries_state
				}
			}
		}
		random_events = {
			500 = 0
			10 = CHI_missionaries.1
			10 = CHI_missionaries.2
			10 = CHI_missionaries.3
			10 = CHI_missionaries.4
			10 = CHI_missionaries.5
		}
	}

	complete = {
		custom_tooltip = {
			text = missionary_ban_tt
			has_variable = CHI_deported_missionaries
		}
		OR = {
			is_country_type = recognized
			has_law = law_type:law_state_atheism
			has_law = law_type:law_isolationism
			has_law = law_type:law_closed_borders
		}
	}

	weight = 10000
	should_be_pinned_by_default = yes
}

je_heavenly_kingdom_main = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		exists = c:CHI
		THIS = c:CHI
	}

	possible = {
		custom_tooltip = {
			text = missionaries_enough_time_tt
			OR = {
				AND = {
					has_variable = missionary_works_counter
					var:missionary_works_counter >= 5
					game_date >= 1846
				}
				game_date >= 1856
			}
		}
		is_subject = no
		any_scope_state = {
			is_incorporated = yes
			any_scope_pop = {
				has_pop_religion = protestant
			}
			is_capital = no
			state_region = { 
				OR = {
					is_homeland = cu:han 
					is_homeland = cu:hakka 
				}
			}
			turmoil > 0.15
		}
	}

	immediate = {
		random_scope_state = {
			limit = {
				is_incorporated = yes
				any_scope_pop = {
					has_pop_religion = protestant
				}
				is_capital = no
				state_region = { 
					OR = {
						is_homeland = cu:han 
						is_homeland = cu:hakka 
					}
				}
				turmoil > 0.15
			}
			add_modifier = {
				name = god_worshippers
				months = short_modifier_time
			}
		}
		trigger_event = {
			id = heavenly.2
		}
	}

	on_monthly_pulse = {
		random_events = {
			5 = 0
			1 = heavenly.3
		}
	}

	complete = {
		NOT = {
			any_scope_state = {
				has_modifier = god_worshippers
			}
		}
	}

	fail = {
		any_scope_state = {
			has_modifier = god_worshippers
			count >= 4
		}
		any_scope_state = {
			has_modifier = god_worshippers
			any_scope_pop = {
				has_pop_religion = protestant
				religion_accepted = no
			}
			turmoil >= 0.15
		}
	}

	on_fail = {
		trigger_event = {
			id = heavenly.4
		}
	}

	weight = 10000
	should_be_pinned_by_default = yes
}

je_taiping = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = taiping_destroyed
			hidden_trigger = {
				NOT = {
					exists = c:TPG
				}
			}
		}
	}

	immediate = {
		c:TPG = {
			save_scope_as = taiping_scope
		}
	}

	on_complete = {
		trigger_event = { id = heavenly.5 days = 0 }
		hidden_effect = {
			remove_modifier = taiping_taiping_rebellion
		}
	}

	fail = {
		exists = c:TPG
		has_truce_with = c:TPG
	}

	on_fail = {
		if = {
			limit = { has_journal_entry = je_warlord_china }
			chi_remove_1_fragile_unity = yes
		}
		hidden_effect = {
			remove_modifier = taiping_taiping_rebellion
			c:TPG = {
				remove_modifier = taiping_taiping_rebellion
			}
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes

	transferable = no
}

je_taiping_revolution = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		OR = {
			custom_tooltip = {
				text = china_destroyed
				hidden_trigger = {
					NOT = {
						exists = c:CHI
					}
				}
			}
			AND = {
				exists = c:CHI
				has_truce_with = c:CHI		
			}
		}
		
	}

	immediate = {
		c:CHI = {
			save_scope_as = china_scope
		}
	}

	on_complete = {
		trigger_event = { id = heavenly.6 days = 0 }
		custom_tooltip = {
			text = rebellion_effects_remove
			remove_modifier = taiping_taiping_rebellion
			every_interest_group = {
				limit = {
					has_modifier = taiping_taiping_revolution
				}
				remove_modifier = taiping_taiping_revolution
			}
		}
		
	}

	fail = {
		NOT = {
			exists = c:TPG
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes

	transferable = no
}
﻿je_texas_tex = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		is_subject = no
		is_at_war = no
		exists = c:USA
		c:USA = {
			relations:root >= relations_threshold:cordial
		}
	}

	on_complete = {
		trigger_event = { id = texan_war_of_independence.1 }
	}
	
	weight = 100
	
	transferable = no

	invalid = {
		NOT = { exists = c:TEX }
	}
}

je_texas_usa = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content

	complete = {
		exists = c:TEX
		c:TEX = {
			relations:root >= relations_threshold:cordial
			is_subject = no
			is_at_war = no
		}
	}

	on_complete = {
		custom_tooltip = texas_je_tt		
	}

	invalid = {
		OR = {
			NOT = { exists = c:TEX }
			c:TEX = { is_subject = yes }
		}
	}
	
	weight = 100
	
	transferable = no
}
﻿je_urbanization_events_1 = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_internal_affairs
	
	is_shown_when_inactive = {
		is_player = yes
		pop_type_percent_country = {
			pop_type = peasants
			percent > 0.6
		}
	}
	
	possible = {
		NOR = {
			has_law = law_type:law_serfdom 
			has_law = law_type:law_land_based_taxation
		}
		pop_type_percent_country = { #added again so the tooltip is nicer
			pop_type = peasants
			percent > 0.6
		}
	}
	
	complete = {
		pop_type_percent_country = {
			pop_type = peasants
			percent < 0.35
		}
		NOT = {
			has_law = law_type:law_serfdom 
			has_law = law_type:law_land_based_taxation
		}
		ig:ig_industrialists = {
			is_marginal = no
		}
	}
	
	on_complete = {
		trigger_event = { id = urbanization_events.1 }
	}
	
	weight = 10
	transferable = no
}

je_urbanization_events_2 = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_internal_affairs
	
	is_shown_when_inactive = {
		is_player = yes
		any_scope_state = {
			is_incorporated = yes
			has_building = building_urban_center
		}
	}
	
	possible = {
		any_scope_state = {
			is_incorporated = yes
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 5
			}
		}
		NOT = { has_law = law_type:law_agrarianism }
	}
	
	complete = {
		any_scope_state = {
			filter = {
				is_incorporated = yes
			}
			percent >= 0.75
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 5
			}
		}
		any_scope_state = {
			is_incorporated = yes
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 10
			}
		}
	}
	
	on_monthly_pulse = {
		random_events = {
			70 = 0
			10 = urbanization_events.2
			20 = urbanization_events.4
			20 = urbanization_events.6
		}
	}
	
	on_complete = {
		trigger_event = { id = urbanization_events.5 }
	}
	
	weight = 10
	transferable = no
}
﻿je_conquest_of_algeria = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	complete = {
		country_or_subject_owns_entire_state_region = STATE_ORAN
		country_or_subject_owns_entire_state_region = STATE_ALGIERS
		country_or_subject_owns_entire_state_region = STATE_CONSTANTINE
	}

	on_complete = {
		custom_tooltip = je_conquest_of_algeria_tt
		trigger_event = algeria_events.1
	}

	fail = {
		NOT = { has_state_in_state_region = STATE_ORAN }
		NOT = { has_state_in_state_region = STATE_ALGIERS }
		NOT = { has_state_in_state_region = STATE_CONSTANTINE }
	}

	on_fail = {
		trigger_event = algeria_events.3
	}

	on_monthly_pulse = {
		random_events = {
			90 = 0
			10 = algeria_events.5 # Raid Event
		}
	}

	transferable = no

	should_be_pinned_by_default = yes

	weight = 5000
}

je_the_algerian_departements = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	immediate = {
		random_scope_state = {
			limit = {
				state_region = s:STATE_ALGIERS
			}
			save_scope_as = je_algiers_state_scope
		}
		random_scope_state = {
			limit = {
				state_region = s:STATE_ORAN
			}
			save_scope_as = je_oran_state_scope
		}
		random_scope_state = {
			limit = {
				state_region = s:STATE_CONSTANTINE
			}
			save_scope_as = je_constantine_state_scope
		}
		cu:berber = {
			save_scope_as = berber_culture_scope
		}
		cu:maghrebi = {
			save_scope_as = maghrebi_culture_scope
		}
		cu:french = {
			save_scope_as = french_culture_scope
		}
	}
	complete = {
		custom_tooltip = {
			text = je_the_algerian_departements_tt_1
			any_scope_state = {
				state_region = s:STATE_ALGIERS
				is_incorporated = yes
				is_split_state = no
				turmoil < 0.1
			}
			any_scope_state = {
				state_region = s:STATE_ORAN
				is_incorporated = yes
				is_split_state = no
				turmoil < 0.1
			}
			any_scope_state = {
				state_region = s:STATE_CONSTANTINE
				is_incorporated = yes
				is_split_state = no
				turmoil < 0.1
			}
		}
		OR = {
			custom_tooltip = {
				text = je_the_algerian_departements_tt_3
				any_scope_state = {
					state_region = s:STATE_ALGIERS
					culture_percent_state = {
						target = cu:french
					    value >= 0.2
					}
				}
				any_scope_state = {
					state_region = s:STATE_ORAN
					culture_percent_state = {
						target = cu:french
					    value >= 0.2
					}
				}
				any_scope_state = {
					state_region = s:STATE_CONSTANTINE
					culture_percent_state = {
						target = cu:french
					    value >= 0.2
					}
				}
			}
			custom_tooltip = {
				text = je_the_algerian_departements_tt_2
				cu:maghrebi = {
					NOT = { culture_is_discriminated_in = ROOT }
				}
				cu:berber = {
					NOT = { culture_is_discriminated_in = ROOT }
				}
			}
		}
	}

	on_complete = {
		trigger_event = algeria_events.4
	}

	fail = {
		NOT = { has_state_in_state_region = STATE_ORAN }
		NOT = { has_state_in_state_region = STATE_ALGIERS }
		NOT = { has_state_in_state_region = STATE_CONSTANTINE }
	}

	on_fail = {
		trigger_event = algeria_events.3
	}

	on_monthly_pulse = {
		random_events = {
			90 = 0 
			10 = algeria_events.6
		}
	}

	transferable = no

	should_be_pinned_by_default = yes

	weight = 5000
}

je_reconquest_of_algeria = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = je_reconquest_of_algeria_tt
			exists = c:ALD
			this = c:ALD
		}
		owns_entire_state_region = STATE_ORAN
		owns_entire_state_region = STATE_ALGIERS
		owns_entire_state_region = STATE_CONSTANTINE
	}

	on_complete = {
		trigger_event = algeria_events.8
	}

	fail = {
		NOT = { has_state_in_state_region = STATE_ORAN }
		NOT = { has_state_in_state_region = STATE_ALGIERS }
		NOT = { has_state_in_state_region = STATE_CONSTANTINE }
	}

	transferable = yes

	should_be_pinned_by_default = yes

	weight = 5000
}

je_french_foreign_legion = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	complete = {
		any_scope_state = {
			region = sr:region_north_africa
			any_scope_building = {
				is_building_type = building_barracks
				level >= 20
				occupancy >= 0.5
			}
			count >= 3
		}
	}

	on_complete = {
		trigger_event = { id = algeria_events.9 }
	}

	fail = {
		NOT = { has_state_in_state_region = STATE_ORAN }
		NOT = { has_state_in_state_region = STATE_ALGIERS }
		NOT = { has_state_in_state_region = STATE_CONSTANTINE }
	}

	transferable = yes

	should_be_pinned_by_default = yes

	weight = 5000
}
﻿je_dreyfus_affair = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	immediate = {
		set_variable = {
			name = dreyfus_case_var # Dreyfus' case strength
			value = 0
		}
		set_variable = {
			name = rennes_retrial_var # Time until retrial
			value = 0
		}
	}

	complete = {
		custom_tooltip = {
			text = je_dreyfus_affair_tt.3
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
		custom_tooltip = {
			text = je_dreyfus_affair_tt.1
		}
	}

	on_complete = {
		trigger_event = { 
			id = dreyfus.8 
		}
		custom_tooltip = {
			text = je_dreyfus_affair_tt.4
		}
		if = {
			limit = {
				var:dreyfus_case_var <= 4
			}
			set_variable = dreyfus_trial_reincarceration
		}
		if = {
			limit = {
				var:dreyfus_case_var >= 5
				var:dreyfus_case_var <= 9
			}
			set_variable = dreyfus_trial_lesser_sentence
		}
		if = {
			limit = {
				var:dreyfus_case_var >= 10
			}
			set_variable = dreyfus_trial_exoneration
		}
	}

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = rennes_retrial_var
				add = 1
			}
		}
		random_events = {
			75 = 0
			5 = dreyfus.4
			5 = dreyfus.5
			5 = dreyfus.6
			5 = dreyfus.7
			5 = dreyfus.9
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_dreyfus_status
			}
		}
	}

	current_value = {
		value = var:rennes_retrial_var
	}

	goal_add_value = {
		value = 60  #  5 Years
	}

	weight = 100

	should_be_pinned_by_default = yes
	
	transferable = no

	progressbar = yes
}

﻿je_divided_monarchists = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	immediate = {
		fra_set_divided_monarchist_variables = yes
		random_law = {
			limit = { type = law_type:law_monarchy }
			save_scope_as = monarchy_scope
		}
	}

	scripted_progress_bar = divided_monarchists_orleanist_progress_bar
	scripted_progress_bar = divided_monarchists_legitimist_progress_bar
	scripted_progress_bar = divided_monarchists_bonapartist_progress_bar

	complete = {
		has_law = law_type:law_monarchy
		custom_tooltip = {
			text = je_divided_monarchists_02_tt
			has_variable = one_true_french_dynasty #Can only ever complete upon finishing the Cement the Rightful Dynasty journal entry.
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_divided_monarchists_03_tt
			fra_clear_divided_monarchist_variables = yes #Removes all variables used for math in this JE, to save memory and performance.
		}
	}

	scripted_button = french_monarchy_bonapartist_button
	scripted_button = french_monarchy_orleanist_button
	scripted_button = french_monarchy_legitimist_button

	status_desc = {
		first_valid = {
			triggered_desc = { # Cementing the Rightful Dynasty is active
				desc = status_dynasty_cementing_fra
				trigger = {
					has_journal_entry = je_cement_the_rightful_dynasty
				}
			}
			triggered_desc = { # In the lead and on the throne
				desc = status_in_lead_and_on_throne_fra
				trigger = {
					OR = {
						AND = {
							ruler_is_orleanist = yes
							scope:journal_entry = { 
								"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
								"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" 
							}
						}
						AND = {
							ruler_is_bonapartist = yes
							scope:journal_entry = { 
								"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
								"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" 
							}
						}
						AND = {
							ruler_is_legitimist = yes
							scope:journal_entry = { 
								"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
								"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" 
							}
						}
					}
				}
			}
			triggered_desc = {
				desc = status_throne_challenged_fra
				trigger = {
					OR = {
						scope:journal_entry = { 
							"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
							"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" 
						}
						scope:journal_entry = { 
							"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
							"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" 
						}
						scope:journal_entry = { 
							"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
							"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" 
						}
					}
				}
			}
			triggered_desc = { # Bar not moving, either no supported or not in government
				desc = status_no_dynasty_fra
				trigger = {
					always = yes
				}
			}
		}
	}

	modifiers_while_active = {
		fra_republican_unrest
	}

	on_weekly_pulse = {
		events = {
			french_pretenders.5
		}
		effect = {
			if = {
				limit = {
					NOT = {
						has_variable = fra_divided_monarchists_freeze #This variable stops iteration, and is granted by reaching 360 with one dynasty. It's reset when this JE is completed, or when je_cement_the_rightful_dynasty fails.
					}
				}
				fra_weekly_pulse_legitimist_progress = yes #Calculates how much the Legitimists will get next month. Updates weekly, but is not added until the monthly.
				fra_weekly_pulse_orleanist_progress = yes  #Calculates how much the Orleanists will get next month. Updates weekly, but is not added until the monthly.
				fra_weekly_pulse_bonapartist_progress = yes  #Calculates how much the Bonapartists will get next month. Updates weekly, but is not added until the monthly.
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_law = law_type:law_monarchy
					scope:journal_entry = { 
						OR = {
							"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" >= 360
							"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" >= 360
							"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" >= 360
						}
					}
					NOT = {
						has_variable = fra_divided_monarchists_freeze
					}
				}
				if = { #Fires the event to enthrone the pretender - 1 if contextualised as coup, 10 if contextualised as reinforcement.
					limit = {
						scope:journal_entry = { 
							"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
							"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" 
						}
					}
					if = {
						limit = {
							ruler_is_bonapartist = yes
						}
						trigger_event = { id = french_pretenders.10 popup = yes} #Reinforcement event - fires if the leading dynasty is the one in power.
					}
					else = {
						trigger_event = { id = french_pretenders.1 popup = yes} #Coup event - fires if the leading dynasty is not the one in power.
					}
				}
				else_if = {
					limit = {
						scope:journal_entry = { 
							"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
							"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" 
						}
					}
					if = {
						limit = {
							ruler_is_orleanist = yes
						}
						trigger_event = { id = french_pretenders.10 popup = yes}
					}
					else = {
						trigger_event = { id = french_pretenders.1 popup = yes}
					}
				}
				else_if = {
					limit = {
						scope:journal_entry = { 
							"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
							"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" 
						}
					}
					if = {
						limit = {
							ruler_is_legitimist = yes
						}
						trigger_event = { id = french_pretenders.10 popup = yes}
					}
					else = {
						trigger_event = { id = french_pretenders.1 popup = yes}
					}
				}
				fra_freeze_divided_monarchist_progress = yes #Freezes the bars so that they no longer accumulate progress on the monthly tick, and stay as they are. In the case that Cement the Rightful Dynasty fails, the bars will be set back.
			}
		}
		random_events = {
			400 = 0
			10 = french_pretenders_pulse.2
			10 = french_pretenders_pulse.3
			50 = french_pretenders_pulse.10
			10 = french_pretenders_pulse.11
			10 = french_pretenders_pulse.12
			10 = french_pretenders_pulse.13
			10 = french_pretenders_pulse.14
			10 = french_pretenders_pulse.15
			10 = french_pretenders_pulse.16
			10 = french_pretenders_pulse.17
			10 = french_pretenders_pulse.18
		}
	}

	fail = {
		any_interest_group = {
			is_marginal = no
			law_stance = {
				law = law_type:law_presidential_republic
				value > neutral
			}
		}
		capital = {
			turmoil >= 0.5
		}
		OR = {
			has_journal_entry = je_springtime_of_the_peoples
			radical_fraction = {
				value >= 0.25
			}
			any_civil_war = {
				civil_war_progress > 0.75
			}
		}
	}

	on_fail = {
		trigger_event = { id = french_pretenders.6 popup = yes }
		if = {
			limit = {
				has_variable = fra_divided_monarchists_freeze
			}
			remove_variable = fra_divided_monarchists_freeze #Clears the freeze variable so that progress can be made if this JE is somehow activated again.
		}
		fra_clear_divided_monarchist_variables = yes #Removes all variables used for math in this JE, to save memory and performance.
	}

	invalid = {
		NOT = { #Previous "Stamp Out Monarchism" requirement is deprecated - this can now come back from the dead properly upon restoring the monarchy.
			has_law = law_type:law_monarchy
		}
	}

	on_invalid = {
		if = {
			limit = {
				has_variable = fra_divided_monarchists_freeze
			}
			remove_variable = fra_divided_monarchists_freeze #Clears the freeze variable so that progress can be made if this JE is somehow activated again.
		}
		fra_clear_divided_monarchist_variables = yes #It should not be possible for this JE to somehow be deleted without these variables being cleared.
	}

	weight = 100

	should_be_pinned_by_default = yes
}

je_cement_the_rightful_dynasty = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content

	immediate = {
		set_variable = {
			name = french_dynastic_primary_progress_var
			value = 0
		}

		if = {
			limit = {
				any_scope_character = { ### This is load-bearing cursed script. Do NOT change this to ruler = { } ###
					is_ruler = yes
					has_variable = legitimist_leader
				}
			}
			set_variable = {
				name = legitimist_restoration_var
			}
		}
		else_if = {
			limit = {
				any_scope_character = {
					is_ruler = yes
					has_variable = orleanist_leader
				}
			}
			set_variable = {
				name = orleanist_restoration_var
			}
		}
		else_if = {
			limit = {
				any_scope_character = {
					is_ruler = yes
					has_variable = bonapartist_leader
				}
			}
			set_variable = {
				name = bonapartist_restoration_var
			}
		}
	}

	is_progressing = {
		NOT = {
			any_civil_war = {
				civil_war_progress > 0.10
			}
		}
		government_legitimacy >= 50
	}

	progress_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_cement_the_rightful_dynasty_progressing_fast
				trigger = {
					scope:journal_entry = {
						is_progressing = yes
					}
					government_legitimacy >= 90
				}
			}
			triggered_desc = {
				desc = je_cement_the_rightful_dynasty_progressing_normal
				trigger = {
					scope:journal_entry = {
						is_progressing = yes
					}
					government_legitimacy >= 75
				}
			}
			triggered_desc = {
				desc = je_cement_the_rightful_dynasty_progressing_slow
				trigger = {
					scope:journal_entry = {
						is_progressing = yes
					}
				}
			}
			triggered_desc = {
				desc = je_cement_the_rightful_dynasty_progressing_civil_war
				trigger = {
					any_civil_war = {
						civil_war_progress > 0.10
					}
				}
			}
			desc = je_cement_the_rightful_dynasty_progressing_low_legitimacy
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		NOT = {
			any_civil_war = {
				civil_war_progress > 0.10
			}
		}
	}

	on_complete = {
		trigger_event = { id = french_pretenders_pulse.5 popup = yes }
		set_variable = {
			name = one_true_french_dynasty
		}
	}

	fail = {
		OR = {
			NOT = { has_law = law_type:law_monarchy }
			custom_tooltip = {
				text = je_divided_monarchists_02_fail_tt
				OR = {
					AND = {
						has_variable = orleanist_restoration_var
						OR = {
							ruler = {
								OR = {
									has_variable = legitimist_leader
									has_variable = bonapartist_leader
								}
							}
						}
					}
					AND = {
						has_variable = legitimist_restoration_var
						OR = {
							ruler = {
								OR = {
									has_variable = orleanist_leader
									has_variable = bonapartist_leader
								}
							}
						}
					}
					AND = {
						has_variable = bonapartist_restoration_var
						OR = {
							ruler = {
								OR = {
									has_variable = orleanist_leader
									has_variable = legitimist_leader
								}
							}
						}
					}
				}
			}
		}
	}

	on_fail = {
		remove_variable = french_dynastic_primary_progress_var
		if = {
			limit = {
				has_variable = fra_divided_monarchists_freeze
			}
			remove_variable = fra_divided_monarchists_freeze
		}
		if = {
			limit = {
				has_variable = orleanist_restoration_var
			}
			remove_variable = orleanist_restoration_var
		}
		if = {
			limit = {
				has_variable = legitimist_restoration_var
			}
			remove_variable = legitimist_restoration_var
		}
		if = {
			limit = {
				has_variable = bonapartist_restoration_var
			}
			remove_variable = bonapartist_restoration_var
		}
		je:je_divided_monarchists = {
			add_progress = { value = -300 name = divided_monarchists_bonapartist_progress_bar }
			add_progress = { value = -300 name = divided_monarchists_legitimist_progress_bar }
			add_progress = { value = -300 name = divided_monarchists_orleanist_progress_bar }
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					scope:journal_entry = {
						is_progressing = yes
					}
				}
				if = {
					limit = {
						government_legitimacy >= 90
					}
					change_variable = {
						name = french_dynastic_primary_progress_var
						add = 2
					}
				}
				else_if = {
					limit = {
						government_legitimacy >= 75
					}
					change_variable = {
						name = french_dynastic_primary_progress_var
						add = 1
					}
				}
				else = {
					change_variable = {
						name = french_dynastic_primary_progress_var
						add = 0.5
					}
				}
			}
		}
		random_events = {
			90 = 0
			10 = french_pretenders_pulse.1
			5 = french_pretenders_pulse.4
		}
	}

	current_value = {
		value = root.var:french_dynastic_primary_progress_var
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_indochina = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_foreign_affairs

	immediate = {
		random_country = {
			limit = {
				has_variable = indochina_campaign_target
			}
			save_scope_as = indochina_conquest_target
			capital = {
				state_region = {
					set_variable = indochina_capital_state
					save_scope_as = indochina_capital_state_scope
				}
			}
		}
		set_global_variable = indochina_intervention_happened
	}

	complete = {
		is_subject = no
		is_at_war = no
		OR = {
			trigger_if = {
				limit = {
					exists = scope:indochina_conquest_target
				}
				custom_tooltip = {
					text = conquered_indochina_target_tt
					NOT = { exists = scope:indochina_conquest_target }
				}
			}
			trigger_else = {
				custom_tooltip = {
					text = conquered_indochina_target_blank_tt
					NOT = { exists = scope:indochina_conquest_target }
				}
			}
			AND = {
				exists = scope:indochina_conquest_target
				scope:indochina_conquest_target ?= { is_subject_of = ROOT }
			}
		}
		custom_tooltip = {
			text = indochina_state_controlled_by_us_or_puppet
			any_state = {
				OR = {
					owner = ROOT
					owner = { is_subject_of = ROOT }
				}
				state_region = {
					has_variable = indochina_capital_state
				}
			}
		}
		custom_tooltip = {
			text = indochina_five_states_conquered
			any_state = {
				OR = {
					owner = ROOT
					owner = { is_subject_of = ROOT }
				}
				region = sr:region_indochina
				count >= 5
			}
		}
	}

	on_complete = {
		trigger_event = { id = indochina.4 }
	}
	
	weight = 100
	
	transferable = no

	invalid = {
	}

	should_be_pinned_by_default = yes
}

﻿je_nihilist_movement = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		has_technology_researched = realism
		NOT = {
			has_technology_researched = socialism
		}
		has_law = law_type:law_state_religion
	}

	possible = {
		has_technology_researched = realism
		empty_agitator_slots >= 1
		NOT = {
			has_technology_researched = socialism
		}
		has_law = law_type:law_state_religion
		OR = {
			has_law = law_type:law_monarchy
			has_law = law_type:law_theocracy
		}
		OR = {
			has_law = law_type:law_autocracy
			has_law = law_type:law_oligarchy
		}
		ig:ig_intelligentsia = {
			is_marginal = no
			OR = {
				is_being_suppressed = yes
				ig_approval < 0
			}
		}
	}

	immediate = {
		set_variable = {
			name = nihilism_progress_var
			value = 1
		}
		ig:ig_intelligentsia = {
			save_scope_as = nihilist_ig
		}
		trigger_event = { id = nihilism.1 popup = yes }
	}

	complete = {
		OR = {
			custom_tooltip = {
				text = je_nihilist_movement_trigger_tt_1
				scope:journal_entry = {
					is_goal_complete = yes
				}
				AND = {
					OR = {
						has_law = law_type:law_outlawed_dissent
						has_law = law_type:law_censorship
					}
					any_interest_group = {
						filter = {
							OR = {
								leader = {
									has_ideology = ideology:ideology_atheist
								}
								any_scope_character = {
									has_role = agitator
									has_ideology = ideology:ideology_atheist
								}
							}
						}
						is_being_suppressed = yes
						count = all
					} 
				}
			}
			custom_tooltip = {
				text = je_nihilist_movement_trigger_tt_2
				scope:journal_entry = {
					is_goal_complete = yes
				}
				ig:ig_intelligentsia = {
					OR = {
						ig_approval > 0
						is_marginal = yes
					}
				}
			}
		}
	}

	on_complete = {
		trigger_event = { id = nihilism.2 popup = yes }
	}

	fail = {
		OR = {
			has_law = law_type:law_state_atheism
			has_law = law_type:law_total_separation
		}
	}

	on_fail = {
		add_loyalists = {
			value = medium_radicals
			pop_type = academics
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					OR = {
						ig:ig_intelligentsia = {
							ig_approval > 0
						}
						ig:ig_intelligentsia = {
							is_marginal = yes
						}
						AND = {
							OR = {
								has_law = law_type:law_outlawed_dissent
								has_law = law_type:law_censorship
							}
							any_interest_group = {
								filter = {
									OR = {
										leader = {
											has_ideology = ideology:ideology_atheist
										}
										any_scope_character = {
											has_role = agitator
											has_ideology = ideology:ideology_atheist
										}
									}
								}
								is_being_suppressed = yes
								count = all
							} 
						}
					}
					
				}
				change_variable = {
					name = nihilism_progress_var
					add = 1
				}
			}
		}
		random_events = {
			160 = 0
			30 = nihilism.4
			10 = nihilism.5
			10 = nihilism.6
			10 = nihilism.7
			10 = nihilism.8
			10 = nihilism.9
			10 = nihilism.10
			10 = nihilism.11
			10 = nihilism.12
		}
	}

	timeout = 3650

	on_timeout = {
		trigger_event = { id = nihilism.3 popup = yes }
	}

	current_value = {
		value = root.var:nihilism_progress_var
	}

	goal_add_value = {
		add = 60
	}

	weight = 100

	progressbar = yes

	should_be_pinned_by_default = yes
}

﻿je_the_paris_commune_display = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		has_dlc_feature = voice_of_the_people_content
		NOT = { has_global_variable = paris_commune_happened }
		c:FRA ?= this
		has_technology_researched = socialism
		has_technology_researched = anarchism
		NOT = { has_law = law_type:law_council_republic }
	}

	possible = {
		hidden_trigger = {
			NOT = { has_global_variable = paris_commune_happened }
		}
		c:FRA ?= this
		any_scope_state = {
			state_region = s:STATE_ILE_DE_FRANCE
			turmoil >= 0.2
		}
		OR = {
			custom_tooltip = {
				text = lost_war_tt
				OR = {
					has_variable = recently_lost_war
					AND = {
						has_variable = recently_had_war
						NOT = {
							has_variable = recently_won_war
						}
					}
				}
			}
			custom_tooltip = {
				text = lacks_homeland_tt
				any_state = {
					state_region = { is_homeland = cu:french }
					NOT = { owner = ROOT }
				}
			}
		}
        OR = {
        	socialist_revolution_ongoing = yes
        	liberal_revolution_ongoing = yes
        }
	}

	immediate = {
		trigger_event = { id = paris_commune.1 popup = yes }
	}

	fail = {
		custom_tooltip = {
			text = je_the_paris_commune_france_spawned
			has_variable = paris_commune_spawn
		}
	}

	on_timeout = {

	}

	on_monthly_pulse = {
		
	}

	should_be_pinned_by_default = no

	weight = 8000
}

je_the_paris_commune_france = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_historical_content
	
	can_revolution_inherit = no

	scripted_button = je_the_paris_commune_france_button_a
	scripted_button = je_the_paris_commune_france_button_b

	immediate = {
		add_modifier = {
			name = fra_paris_commune_drain
			multiplier = money_amount_multiplier_more_large
		}

		c:FRA = {
			save_scope_as = france_scope
		}
		c:PRC = {
			save_scope_as = commune_scope
		}
		set_global_variable = {
			name = paris_commune_drift_final_var
			value = 0
		}
		set_variable = { name = PRC_money_transfer value = money_amount_multiplier_very_large }
	}

	complete = {
		custom_tooltip = {
			text = je_the_paris_commune_france_complete
			global_var:paris_commune_progress_var <= 0
		}
	}

	on_complete = {
		trigger_event = { id = paris_commune.2 popup = yes }
		hidden_effect = {
			remove_modifier = fra_paris_commune_drain
		}
	}

	fail = {
		custom_tooltip = {
			text = je_the_paris_commune_communard_complete
			global_var:paris_commune_progress_var >= 100
		}
	}

	on_fail = {
		trigger_event = { id = paris_commune.3 popup = yes }
		hidden_effect = {
			remove_modifier = fra_paris_commune_drain
		}
	}

	invalid = {
		OR = {
			NOT = {
				any_scope_state = {
					state_region = s:STATE_ILE_DE_FRANCE
				}
			}
			has_war_with = c:PRC
			NOT = {
				exists = c:PRC
			}
			has_global_variable = paris_commune_invalid
		}	
	}

	on_invalid = {
		hidden_effect = {
			remove_modifier = fra_paris_commune_drain
		}
	}

	on_timeout = {
		trigger_event = { id = paris_commune.2 popup = yes }
		hidden_effect = {
			remove_modifier = fra_paris_commune_drain
		}
	}

	modifiers_while_active = {
		
	}

	on_weekly_pulse = {
		effect = {
			paris_commune_update_tick = yes
		}
	}

	on_monthly_pulse = {
		effect = {			
			paris_commune_update_tick = yes
			change_global_variable = {
				name = paris_commune_progress_var
				add = global_var:paris_commune_drift_final_var
			}
			if = { #Adversarial system - if you side with France, the automated adversary fires Commune events, if not, it fires Versailles events.
				limit = {
					has_variable = paris_commune_fra_perspective
				}
				random_list = {
					50 = {
						paris_commune_automated_opposition_paris = yes
					}
					50 = {

					}
				}
			}
			else_if = {
				limit = {
					has_variable = paris_commune_prc_perspective
				}
				random_list = {
					50 = {
						paris_commune_automated_opposition_versailles = yes
					}
					50 = {

					}
				}
			}
		}
		random_events = {
			10 = paris_commune_pulse_events.1 # Seizing Church and State
			10 = paris_commune_pulse_events.2 # Forty Warning Shots
			10 = paris_commune_pulse_events.3 # For Want of a Nail
			10 = paris_commune_pulse_events.4 # Petrol Maidens
			10 = paris_commune_pulse_events.5 # Enemy Combatants
			10 = paris_commune_pulse_events.6 # A Priest for Your Captain
			10 = paris_commune_pulse_events.7 # Clapped With Irons
			10 = paris_commune_pulse_events.8 # Four-Hundred Gun Salute
			10 = paris_commune_pulse_events.9 # Our Bodies, Our Rules
			10 = paris_commune_pulse_events.10 # A Fortress Falls
			10 = paris_commune_pulse_events.11 # Working Co-op
			10 = paris_commune_pulse_events.12 # Off to School
			10 = paris_commune_pulse_events.13 # Capital Punishments
			10 = paris_commune_pulse_events.14 # First In, Best Dressed
			10 = paris_commune_pulse_events.15 # Recusing the Republicans
			10 = paris_commune_pulse_events.16 # Go and Fight!
		}
	}

	should_be_pinned_by_default = yes

	weight = 8000

	current_value = {
		value = global_var:paris_commune_progress_var
	}

	goal_add_value = {
		add = 100
	}

	timeout = 730

	progressbar = yes
}

je_the_paris_commune_communards = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_historical_content
	
	can_revolution_inherit = no

	immediate = {
		c:FRA = {
			save_scope_as = france_scope
		}
		c:PRC = {
			save_scope_as = commune_scope
		}
		add_modifier = {
			name = fra_paris_commune_drain_proceeds
			multiplier = c:FRA.var:PRC_money_transfer
		}
	}

	complete = {
		custom_tooltip = {
			text = je_the_paris_commune_communard_complete
			global_var:paris_commune_progress_var >= 100
		}
	}

	on_complete = {
		hidden_effect = {
			c:FRA = {
				trigger_event = { id = paris_commune.3 popup = yes }
			}
		}
		show_as_tooltip = {
			trigger_event = { id = paris_commune.3 popup = yes }
		}
		remove_modifier = fra_paris_commune_drain_proceeds
	}

	fail = {
		custom_tooltip = {
			text = je_the_paris_commune_france_complete
			global_var:paris_commune_progress_var <= 0
		}
	}

	on_fail = {
		show_as_tooltip = {
			trigger_event = { id = paris_commune.2 popup = yes }
		}
		remove_modifier = fra_paris_commune_drain_proceeds
	}

	invalid = {
		OR = {
			NOT = {
				any_scope_state = {
					state_region = s:STATE_ILE_DE_FRANCE
				}
			}
			has_war_with = c:FRA
			NOT = {
				exists = c:FRA
			}
			has_global_variable = paris_commune_invalid
		}	
	}

	on_timeout = {
		show_as_tooltip = {
			trigger_event = { id = paris_commune.2 popup = yes }
		}
		remove_modifier = fra_paris_commune_drain_proceeds
	}

	on_invalid = {
		remove_modifier = fra_paris_commune_drain_proceeds
	}

	should_be_pinned_by_default = yes

	weight = 8000

	current_value = {
		value = global_var:paris_commune_progress_var
	}

	goal_add_value = {
		add = 100
	}

	timeout = 730
	
	progressbar = yes
}
﻿je_the_eastern_border = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

    scripted_button = je_the_eastern_border_treaty_of_aigun
    scripted_button = je_the_eastern_border_treaty_of_beijing
    scripted_button = je_the_eastern_border_russia_chuguchak_protocol
    
    is_shown_when_inactive = {
        exists = c:RUS
        THIS = c:RUS
        is_subject = no
    }
      possible = {
        has_technology_researched = nationalism
        NAND = {
            owns_entire_state_region = STATE_OUTER_MANCHURIA 
            owns_entire_state_region = STATE_JETISY 
            owns_entire_state_region = STATE_TOMSK
            owns_entire_state_region = STATE_KIRGHIZIA  
        }
    }
    immediate = {
        c:CHI = {
            save_scope_as = china_scope
        }
        s:STATE_AMUR = {
            add_claim = c:RUS
        }
        s:STATE_OUTER_MANCHURIA = {
            add_claim = c:RUS
        }
        s:STATE_JETISY = {
            add_claim = c:RUS
        }
        s:STATE_ALTAI = {
            add_claim = c:RUS
        }
        s:STATE_KIRGHIZIA = {
            add_claim = c:RUS
        }
    }
    complete = {
        owns_entire_state_region = STATE_AMUR
        owns_entire_state_region = STATE_OUTER_MANCHURIA 
        owns_entire_state_region = STATE_JETISY 
        owns_entire_state_region = STATE_ALTAI
        OR = {
            owns_entire_state_region = STATE_KIRGHIZIA
            any_country = {
                is_subject_of = c:RUS
                owns_entire_state_region = STATE_KIRGHIZIA
            }
        }
    }
    on_complete = {
        trigger_event = { id = russo_chinese.3 } # The Ruler of the East
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

je_caucasian_war = {
    icon = "gfx/interface/icons/event_icons/event_skull.dds"

    group = je_group_historical_content

    immediate = {
        set_global_variable = caucasian_war_happened
        c:CIR = {
            save_scope_as = circassia_scope
        }
        c:CHC = {
            save_scope_as = imamate_scope
        }
        c:RUS = {
            save_scope_as = russia_scope
        }
        every_scope_state = {
            limit = {
                OR = {
                    state_region = s:STATE_KUBAN
                    state_region = s:STATE_NORTH_CAUCASUS
                    state_region = s:STATE_DAGESTAN
                }
            }
            add_modifier = caucasus_war_attacker
        }
    }

    scripted_button = russia_escalate_caucasian_war

    status_desc = {
        first_valid = {
            triggered_desc = {
                desc = caucasian_war_milyutin_loc
                trigger = {
                    has_variable = milyutin_memorandum_accepted
                }
            }
            triggered_desc = {
                desc = caucasian_war_escalated_loc
                trigger = {
                    OR = {
                        has_variable = escalated_caucasian_war
                        NAND = {
                           c:CHC ?= {
                                has_truce_with = root
                            }
                            c:CIR ?= {
                                has_truce_with = root
                            }
                        }
                    }
                }
            }
            triggered_desc = {
                desc = caucasian_war_non_escalated_loc
                trigger = {
                    c:CHC ?= {
                        has_truce_with = root
                    }
                    c:CIR ?= {
                        has_truce_with = root
                    }
                }
            }    
        }
    }

    complete = {
        custom_tooltip = {
            text = caucasus_secured_tt
            NOT = {
                exists = c:CIR
                exists = c:CHC
            }
        }
		s:STATE_KUBAN = {
			trigger_if = {
				limit = {
					NOT = { root = { has_state_in_state_region = STATE_KUBAN } }
				}
				root = { has_state_in_state_region = STATE_KUBAN }
			}
			region_state:RUS ?= {
				turmoil <= 0.25
				is_split_state = no
			}
		}
		s:STATE_DAGESTAN = {
			trigger_if = {
				limit = {
					NOT = { root = { has_state_in_state_region = STATE_DAGESTAN } }
				}
				root = { has_state_in_state_region = STATE_DAGESTAN }
			}
			region_state:RUS ?= {
				turmoil <= 0.25
				is_split_state = no
			}
		}
		s:STATE_NORTH_CAUCASUS = {
			trigger_if = {
				limit = {
					NOT = { root = { has_state_in_state_region = STATE_NORTH_CAUCASUS } }
				}
				root = { has_state_in_state_region = STATE_NORTH_CAUCASUS }
			}
			region_state:RUS ?= {
				turmoil <= 0.25
				is_split_state = no
			}
		}
    }

    on_complete = {
        set_global_variable = caucasus_consolidated_var
        if = {
            limit = {
                NOT = {
                    has_variable = imamate_defeated
                }
            }
            trigger_event = { id = caucasuswar_end.3 }
        }
        if = {
            limit = {
                NOT = {
                    has_variable = circassia_defeated
                }
            }
            trigger_event = { id = caucasuswar_end.1 }
        }
    }

    fail = {
        custom_tooltip = {
            text = caucasus_lost_tt
            NOT = {
                any_scope_state = {
                    state_region = s:STATE_DAGESTAN
                }
                any_scope_state = {
                    state_region = s:STATE_KUBAN
                }
                any_scope_state = {
                    state_region = s:STATE_NORTH_CAUCASUS
                }
            }
        }
        
    }

    on_fail = {
        set_global_variable = caucasus_failure_var
        trigger_event = { id = caucasuswar_end.4 days = 0 }
        hidden_effect = {
            every_state = {
                limit = {
                    OR = {
                        state_region = s:STATE_KUBAN
                        state_region = s:STATE_NORTH_CAUCASUS
                        state_region = s:STATE_DAGESTAN
                    }
                }
                remove_modifier = caucasus_war_attacker
            }       
        }
    }

    on_weekly_pulse = {
        events = {
            caucasuswar_end.1
            caucasuswar_end.3
        }
    }

    on_monthly_pulse = {
        random_events = {
            200 = 0
            10 = caucasuswar.1
            10 = caucasuswar.2
            10 = caucasuswar.3
            10 = caucasuswar.4
            50 = caucasuswar.6
        }
    }

    weight = 100

    should_be_pinned_by_default = yes
}

je_circassian_expulsions = {
    icon = "gfx/interface/icons/event_icons/event_skull.dds"

    group = je_group_historical_content

    is_shown_when_inactive = {
        has_variable = milyutin_memorandum_accepted
    }

    possible = {
        custom_tooltip = {
            text = circassia_defeated_tt
            NOT = {
                exists = c:CIR
            }
        }
        cu:circassian = {
            culture_is_discriminated_in = ROOT
        }
        owns_entire_state_region = STATE_KUBAN
    }

    immediate = {
        cu:circassian = {
            save_scope_as = circassian_culture_scope
        }
        random_country = {
			limit = {
				any_scope_state = {
                    is_incorporated = yes
					OR = {
						state_region = s:STATE_EASTERN_THRACE
						state_region = s:STATE_KASTAMONU
						state_region = s:STATE_TRABZON
					}
				}
			}
			save_scope_as = expulsion_destination_country
            trigger_event = { id = caucasus_expulsions.2 days = 3 popup = yes }
		}
    }

    scripted_button = russia_halt_circassian_expulsions

    complete = {
        any_scope_state = {
            filter = {
                region = sr:region_caucasus
            }
            custom_tooltip = {
                text = circassians_below_5_percent
                culture_percent_state = {
                    target = cu:circassian
                    value <= 0.05
                }
            }
            percent = 1
        }
    }

    on_complete = {

    }

    fail = {
       OR = {
            custom_tooltip = {
                text = has_halted_deportations_tt
                has_variable = halted_circassian_deportations
            }
            NOT = {
                cu:circassian = {
                    culture_is_discriminated_in = c:RUS
                }
            }
        }
    }

    on_fail = {

    }

    on_monthly_pulse = {
        events = {
            caucasus_expulsions.1
        }
        effect = {
            if = {
                limit = {
                    has_variable = circassian_events_hidden
                    NOT = {
                        has_variable = circassian_expulsion_stall
                    }
                }
                random_scope_state = {
                    limit = {
                        region = sr:region_caucasus
                        any_scope_pop = {
                            culture = cu:circassian
                        }
                    }
                    save_scope_as = circassian_expulsion_state
                }
                random_country = {
                    limit = {
                        any_scope_state = {
                            OR = {
                                state_region = s:STATE_EASTERN_THRACE
                                state_region = s:STATE_KASTAMONU
                                state_region = s:STATE_TRABZON
                            }
                        }
                    }
                    save_scope_as = expulsion_destination_country
                    random_scope_state = {
                        limit = {
                            OR = {
                                state_region = s:STATE_EASTERN_THRACE
                                state_region = s:STATE_KASTAMONU
                                state_region = s:STATE_TRABZON
                            }
                        }
                        save_scope_as = expulsion_destination_state
                    }
                }
                cu:circassian = {
                    save_scope_as = circassian_culture
                }
                set_variable = {
                    name = circassian_expulsion_stall
                    months = 3
                }
                scope:circassian_expulsion_state = {
                    if = {
                        limit = {
                            scope:expulsion_destination_country = {
                                has_variable = refused_circassian_refugees
                            }
                        }
                        kill_population_percent_in_state = {
                            percent = 0.06
                            culture = cu:circassian
                        }
                    }
                    else = {
                        kill_population_percent_in_state = {
                            percent = 0.04
                            culture = cu:circassian
                        }
                    }
                    custom_tooltip = {
                        text = three_pops_deported_tt
                        random_scope_pop = {
                            limit = {
                                culture = cu:circassian
                                strata = poor
                            }
                            move_pop = scope:expulsion_destination_state
                        }
                        random_scope_pop = {
                            limit = {
                                culture = cu:circassian
                                strata = middle
                            }
                            move_pop = scope:expulsion_destination_state
                        }
                        random_scope_pop = {
                            limit = {
                                culture = cu:circassian
                                strata = rich
                            }
                            move_pop = scope:expulsion_destination_state
                        }
                    }
                }
                scope:expulsion_destination_country = {
                    post_notification = ottoman_circassian_refugees_arrived
                }
                post_notification = circassians_deported_message
            }

            random_list = {
                90 = {

                }
                10 = {
                    random_country = {
                        limit = {
                            NOT = {
                                this = root
                            }
                            any_scope_state = {
                                OR = {
                                    state_region = s:STATE_EASTERN_THRACE
                                    state_region = s:STATE_KASTAMONU
                                    state_region = s:STATE_TRABZON
                                }
                            }
                        }
                        trigger_event = { id = caucasus_expulsions.3 popup = yes }
                    }
                }
            }
        }
    }

    weight = 100

    should_be_pinned_by_default = yes
}

je_caucasian_war_circassia = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_historical_content

    modifiers_while_active = {
		caucasus_war_defender_circassia
	}

    immediate = {
         c:RUS = {
            save_scope_as = russia_scope
        }
        s:STATE_KUBAN = {
            save_scope_as = kuban_scope
        }
    }

    status_desc = {
        first_valid = {
            triggered_desc = {
                desc = caucasian_war_milyutin_loc
                trigger = {
                    c:RUS = {
                        has_variable = milyutin_memorandum_accepted
                    }
                }
            }
            triggered_desc = {
                desc = caucasian_war_escalated_loc
                trigger = {
                    OR = {
                        c:RUS = {
                            has_variable = escalated_caucasian_war
                        }
                        NAND = {
                           c:CHC ?= {
                                has_truce_with = c:RUS
                            }
                            c:CIR ?= {
                                has_truce_with = c:RUS
                            }
                        }
                    }
                }
            }
            triggered_desc = {
                desc = caucasian_war_non_escalated_loc
                trigger = {
                    c:CHC ?= {
                        has_truce_with = c:RUS
                    }
                    c:CIR ?= {
                        has_truce_with = c:RUS
                    }
                }
            }    
        }
    }

    complete = {
        custom_tooltip = {
            text = russia_out_of_kuban_tt
            c:RUS ?= {
                NOT = {
                    any_scope_state = {
                        state_region = s:STATE_KUBAN
                    }
                }
            }
        }
    }

    on_complete = {
        trigger_event = { id = caucasuswar_end.2 }
        hidden_effect = {
            set_variable = honor_and_life_achievement
        }
    }

    on_monthly_pulse = {
        effect = {
            
        }
        random_events = {
            100 = 0
            30 = caucasuswar.7
            10 = caucasuswar.10
        }
    }

    weight = 100

    should_be_pinned_by_default = yes
}

je_caucasian_war_imamate = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_historical_content

    modifiers_while_active = {
		caucasus_war_defender_imamate
	}

    immediate = {
        c:RUS = {
            save_scope_as = russia_scope
        }
        s:STATE_NORTH_CAUCASUS = {
            save_scope_as = north_caucasus_scope
        }
        s:STATE_DAGESTAN = {
            save_scope_as = dagestan_scope
        }
    }

    scripted_button = imamate_dispatch_muhammad_amin

    status_desc = {
        first_valid = {
            triggered_desc = {
                desc = caucasian_war_milyutin_loc
                trigger = {
                    c:RUS = {
                        has_variable = milyutin_memorandum_accepted
                    }
                }
            }
            triggered_desc = {
                desc = caucasian_war_escalated_loc
                trigger = {
                    OR = {
                        c:RUS = {
                            has_variable = escalated_caucasian_war
                        }
                        NAND = {
                           c:CHC ?= {
                                has_truce_with = c:RUS
                            }
                            c:CIR ?= {
                                has_truce_with = c:RUS
                            }
                        }
                    }
                }
            }
            triggered_desc = {
                desc = caucasian_war_non_escalated_loc
                trigger = {
                    c:CHC ?= {
                        has_truce_with = c:RUS
                    }
                    c:CIR ?= {
                        has_truce_with = c:RUS
                    }
                }
            }    
        }
    }

    complete = {
        custom_tooltip = {
            text = russia_out_of_dagestan_tt
            c:RUS ?= {
                NOT = {
                    any_scope_state = {
                        state_region = s:STATE_DAGESTAN
                    }
                }
            }
        }
        custom_tooltip = {
            text = russia_out_of_north_caucasus_tt
            c:RUS ?= {
                NOT = {
                    any_scope_state = {
                        state_region = s:STATE_NORTH_CAUCASUS
                    }
                }
            }
        }
    }

    on_complete = {
        trigger_event = { id = caucasuswar_end.5 }
    }

    weight = 100

    should_be_pinned_by_default = yes
}

je_pacify_the_steppes = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_historical_content

    possible = {
        #Enabled at start
    }

    immediate = {
        c:RUS = {
            save_scope_as = russia_scope
        }
        random_character_in_void = {
            limit = {
                has_variable = kenesary_variable
            }
            save_scope_as = kenesary_scope
        }
        set_global_variable = kazakhstan_revolt_happened
    }

    complete = {
        any_subject_or_below = {
            filter = {
                country_has_primary_culture = cu:kazak
            }
            is_subject_type = subject_type_puppet
            liberty_desire <= 25
            percent = 1
        }
    }

    on_complete = {
        trigger_event = { id = kazakhstan_events.3 }
        set_global_variable = kazakhstan_victory_var
    }   

    fail = {
        OR = {
            any_civil_war = {
                civil_war_progress > 0.5
            }
            country_rank < rank_value:great_power
            OR = {
                trigger_if = {
                    limit = {
                        exists = c:KZH
                    }
                    c:KZH ?= {
                        liberty_desire >= 80
                    }
                }
                trigger_if = {
                    limit = {
                        exists = c:UZH
                    }
                    c:UZH ?= {
                        liberty_desire >= 80
                    }
                }
                trigger_if = {
                    limit = {
                        exists = c:OZH
                    }
                    c:OZH ?= {
                        liberty_desire >= 80
                    }
                }
            }   
        }
    }

    on_fail = {
        trigger_event = { id = kazakhstan_events.1 }
        hidden_effect = {
            random_character_in_void = {
                limit = {
                    has_variable = kenesary_variable
                }
                kill_character = {
                    hidden = yes
                }
            }
        }
    }

    invalid = {
        c:KZH ?= {
            NOT = {
                is_subject_of = ROOT
            }
        }
        c:UZH ?= {
            NOT = {
                is_subject_of = ROOT
            }
        }
        c:OZH ?= {
            NOT = {
                is_subject_of = ROOT
            }
        }
    }

    timeout = 3650

    on_timeout = {
        trigger_event = { id = kazakhstan_events.1 }
        hidden_effect = {
            random_character_in_void = {
                limit = {
                    has_variable = kenesary_variable
                }
               kill_character = yes
            }
        }
    }

    on_monthly_pulse = {
        effect = {
            random_list = {
                200 = {

                }
                10 = {
                    random_country = {
                        limit = {
                            country_has_primary_culture = cu:kazak
                            is_subject_of = root
                        }
                        trigger_event = { id = kazakhstan_events.6 }
                    }
                }
                10 = {
                    random_country = {
                        limit = {
                            OR = {
                                country_has_primary_culture = cu:kirgiz	
                                country_has_primary_culture = cu:uzbek	
                                country_has_primary_culture = cu:turkmen	
                                country_has_primary_culture = cu:uighur	
                            }
                            has_interest_marker_in_region = region_central_asia
                            c:RUS.relations:root <= 0
                            NOT = {
                                has_variable = kenesary_recognizer_var
                            }
                        }
                        trigger_event = { id = kazakhstan_events.7 }
                    }
                }
            }
        }
        random_events = {
            200 = 0
            10 = kazakhstan_events.4
            10 = kazakhstan_events.5
            10 = kazakhstan_events.8
        }
    }

    weight = 100

    should_be_pinned_by_default = yes
}

je_the_last_kazakh_khan = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_historical_content

    immediate = {
        c:RUS = {
            save_scope_as = russia_scope
        }
        c:KAZ = {
            save_scope_as = khanate_scope
            ruler = {
                save_scope_as = kenesary_scope
            }
        }
    }

    complete = {
        OR = {
            custom_tooltip = {
                text = khanate_is_destroyed_tt
                NOT = {
                    exists = c:KAZ
                }
            }
            c:KAZ = {
                is_subject_of = c:RUS
            }
        }
    }

    on_complete = {
        trigger_event = { id = kazakhstan_events.3 }
        set_global_variable = kazakhstan_victory_var
    }

    fail = {
        AND = {
            has_truce_with = c:KAZ
            c:KAZ = {
                NOT = {
                    is_subject_of = ROOT
                }
            }
        }
    }

    on_fail = {
        set_global_variable = kazakhstan_defeat_var
    }

    weight = 100

    should_be_pinned_by_default = yes
}

je_conquest_of_central_asia = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"
    
    group = je_group_historical_content

    scripted_button = je_conquest_of_central_asia_turkmen_button
    
    is_shown_when_inactive = {
        has_dlc_feature = ep1_content
        exists = c:RUS
        THIS = c:RUS
        is_subject = no
        any_scope_state = {
            state_region = s:STATE_URALSK
        }
        any_scope_state = {
            state_region = s:STATE_SYRDARYA
        }
        owns_entire_state_region = STATE_AKTOBE
        owns_entire_state_region = STATE_AKMOLINSK
        owns_entire_state_region = STATE_SEMIRECHE
    }
    possible = {
        has_technology_researched = civilizing_mission
        any_scope_state = {
            state_region = s:STATE_URALSK
        }
        any_scope_state = {
            state_region = s:STATE_SYRDARYA
        }
        owns_entire_state_region = STATE_AKTOBE
        owns_entire_state_region = STATE_AKMOLINSK
        owns_entire_state_region = STATE_SEMIRECHE
    }
    immediate = {
        trigger_event = { id = russian_central_asia.1 } # Central Asia initialisation
        set_global_variable = central_asia_consolidation_happened
        if = {
            limit = {
                exists = c:TRM
            }
            c:TRM = {
                save_scope_as = turkmenia_scope
            }
        }
        else = {
            random_neighbouring_state = {
                limit = {
                    OR = {
                        state_region = s:STATE_TURKMENIA
                        state_region = s:STATE_SYRDARYA
                        state_region = s:STATE_UZBEKIA
                        state_region = s:STATE_KIRGHIZIA
                        state_region = s:STATE_KHIVA
                        state_region = s:STATE_TAJIKISTAN
                    }
                    not = { owner = ROOT }
                }
                owner = {
                    save_scope_as = turkmenia_scope
                }
            }
        }
    }
    complete = {
        country_or_subject_owns_entire_state_region = STATE_SYRDARYA
        country_or_subject_owns_entire_state_region = STATE_UZBEKIA
        country_or_subject_owns_entire_state_region = STATE_KIRGHIZIA
        country_or_subject_owns_entire_state_region = STATE_KHIVA # Chorasmia
        country_or_subject_owns_entire_state_region = STATE_TURKMENIA
        country_or_subject_owns_entire_state_region = STATE_TAJIKISTAN
        country_or_subject_owns_entire_state_region = STATE_FERGANA
        country_or_subject_owns_entire_state_region = STATE_MERZ # Merv
    }
    on_complete = {
        trigger_event = { id = russian_central_asia.2 } # The Great Game
        set_global_variable = khanates_russia_victory_var
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

﻿je_silkworm_diseases = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises

	#Activated by event

	complete = {
		OR = {
			custom_tooltip = {
				text = pebrine_cure_tt
				has_variable = pebrine_cure
			}
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		trigger_event = { id = silkworm_diseases.9 }
	}

	fail = {
		NOT = {
			any_scope_state = {
				is_incorporated = yes
				has_building = building_silk_plantation
			}
		}
	}

	on_fail = {
		custom_tooltip = {
			text = pebrine_je_fail_tt
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_variable = pebrine_cure
					any_scope_state = {
						filter = {
							has_modifier = modifier_pebrine_state_modifier
							owner = ROOT
						}
						has_decree = decree_encourage_agricultural_industry
						percent > 0.75
					}
				}
				change_variable = {
					name = pebrine_progress_var
					add = 1
				}
			}
			random_list = {
				80 = {

				}
				20 = {
					random_country = {
						limit = {
							any_scope_state = {
								is_incorporated = yes
								any_scope_building = { 
						            is_building_type = building_silk_plantation
						            level >= 2
						        }
							}
							OR = {
								any_country = {
									NOT = { THIS = PREV }
									market = ROOT.market
									any_scope_state = {
										has_modifier = modifier_pebrine_state_modifier
									}
								}
								any_neighbouring_state = { #Why? Africa.
									is_incorporated = yes
									owner = {
										any_scope_state = {
											is_incorporated = yes
											has_modifier = modifier_pebrine_state_modifier
										}
									}
								}
							}
							OR = {	
								country_is_in_europe = yes
								country_is_in_north_america = yes
							}
							NOT = {
								has_variable = pebrine_outbreak_event
							}
						}
						trigger_event = { id = silkworm_diseases.3 weeks = 1 }
					}
				}
			}
		}
		random_events = {
			150 = 0
			40 = silkworm_diseases.2
			20 = silkworm_diseases.4
			20 = silkworm_diseases.5
			20 = silkworm_diseases.6
			150 = silkworm_diseases.7
		}
	}

	invalid = {
		NOT = {
			any_scope_state = {
				is_incorporated = yes
				has_modifier = modifier_pebrine_state_modifier
			}
		}
	}

	immediate = {
		set_variable = {
			name = pebrine_progress_var
			value = 0
		}
		ROOT = {
			save_scope_as = pebrine_country_scope
		}
		every_country = {
			limit = {
				OR = {
					any_scope_state = {
						any_neighbouring_state = {
							owner = ROOT
						}
					}
					any_scope_state = {
						has_modifier = modifier_pebrine_state_modifier
					}
					market = ROOT.market	
				}			
			}
			post_notification = pebrine_spread_notification
		}
	}

	current_value = {
		value = root.var:pebrine_progress_var
	}

	goal_add_value = {
		add = 12
	}

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_central_archives = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = central_archives_je_done }
		has_technology_researched = law_enforcement
		any_scope_building = {
			is_building_type = building_government_administration
			NOT = { has_active_production_method = pm_vertical_filing_cabinets }
		}
	}

	possible = {
		has_technology_researched = central_archives
		any_scope_building = {
			is_building_type = building_government_administration
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_government_administration
			level >= 10
			occupancy > 0.9
			has_active_production_method = pm_vertical_filing_cabinets
		}
		any_scope_building = {
			filter = {
				is_building_type = building_government_administration
			}
			percent > 0.75
			occupancy > 0.9
			has_active_production_method = pm_vertical_filing_cabinets
		}
	}

	on_complete = {
		trigger_event = { id = dan_society_tech_events.1 }
		set_variable = {
			name = central_archives_je_done
		}
	}
}

﻿je_acre_dispute = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	immediate = {
		s:STATE_ACRE = {
			random_scope_state = {
				save_scope_as = acre_state
			}
		}
	}

	complete = {
		country_or_subject_owns_entire_state_region = STATE_ACRE
	}

	on_complete = {
		trigger_event = { id = acre_dispute.3 popup = yes }
	}

	timeout = 1825

	on_timeout = {
		trigger_event = { id = acre_dispute.4 popup = yes }
	}

	should_be_pinned_by_default = yes
}
﻿je_amazonas = {
	icon = "gfx/interface/icons/invention_icons/rubber.dds"

	group = je_group_historical_content
	
	scripted_button = upgrade_amazon_button_1
	scripted_button = upgrade_amazon_button_2
	scripted_button = amazon_border_treaty_button_1
	scripted_button = amazon_border_treaty_button_2
	scripted_button = acre_dispute_button

	immediate = {
		g:rubber = {
			save_scope_as = rubber_scope
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0 
			50 = amazon.1 # devil's railroad
			10 = amazon.2 # hell on earth
			10 = amazonas.8
		}
	}

	complete = {
		any_scope_state = {
			filter = {
				OR = {
					has_state_trait = state_trait_amazon_rainforest
					has_state_trait = state_trait_amazon_rainforest_level_1
					has_state_trait = state_trait_amazon_rainforest_level_2
				}
				has_potential_resource = bg_rubber
			}
			custom_tooltip = {
				text = je_amazonas_tt
				has_state_trait = state_trait_amazon_rainforest_level_2
			}
			count = all
		}
	}

	on_complete = {
		set_variable = je_amazonas_complete_variable
	}

	weight = 100

	should_be_pinned_by_default = yes
}
﻿# Aberdeen Act - GBR
je_aberdeen_act = {
    icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_historical_content

    immediate = {
        c:BRZ = {
            save_scope_as = brazil_scope
        }
    }

    scripted_button = je_aberdeen_act_button

    complete = {
        c:BRZ ?= {
            NOT = { 
                has_law = law_type:law_slave_trade 
            }
        }
    }

    on_complete = {
        trigger_event = { id = brazilian_slavery.1 }
        show_as_tooltip = {
            if = {
                limit = {
                    has_modifier = brazilian_slave_trade_modifier
                }
                remove_modifier = brazilian_slave_trade_modifier
            }
        }
    }

    on_monthly_pulse = {
        random_events = {
            85 = 0
            10 = brazilian_slavery.2 # Slaver Seized
            5 = brazilian_slavery.4 # Slaver Seized (Brazilian Waters)
        }
    }

    fail = {
        NOT = {
            has_law = law_type:law_slavery_banned
        }
    }

    invalid = {
        NOT = {
            exists = c:BRZ
        }
    }

    on_invalid = {
        if = {
            limit = {
                has_modifier = brazilian_slave_trade_modifier
            }
            hidden_effect = {
                remove_modifier = brazilian_slave_trade_modifier
            }
        }
    }

    timeout = 18250 # 50 Years

    weight = 1000
    should_be_pinned_by_default = yes
}

# Abolition of Slavery - BRZ
je_matter_of_slavery = {
    icon = "gfx/interface/icons/law_icons/slave_trade.dds"

	group = je_group_historical_content

    scripted_progress_bar = matter_of_slavery_progress_bar

    immediate = {
        c:GBR ?= {
            save_scope_as = britain_scope
        }
    }

    scripted_button = golden_law_button
    scripted_button = je_slave_trade_suppression_button
    scripted_button = je_slave_trade_end_suppression_button

    complete = {
        has_law = law_type:law_slavery_banned
        has_revolution = no
    }

    fail = {
        custom_tooltip = {
            text = je_matter_of_slavery_fail
            scope:journal_entry = {
                "scripted_bar_progress(matter_of_slavery_progress_bar)" <= 0
            }
        }
    }

    on_complete = {
        if = {
            limit = {
                has_modifier = unrestricted_slave_trade_modifier
            }
            remove_modifier = unrestricted_slave_trade_modifier
        }
        if = {
            limit = {
                has_modifier = restricted_slave_trade_modifier
            }
            remove_modifier = restricted_slave_trade_modifier
        }
        if = {
            limit = {
                has_journal_entry = je_pedro_brazil
            }
            remove_pedropoint_effect = yes
        }
        if = {
            limit = {
                any_interest_group = {
                    has_modifier = restricted_slave_trade_ig_modifier
                }
            }
            every_interest_group = {
                limit = {
                    has_modifier = restricted_slave_trade_ig_modifier
                }
                remove_modifier = restricted_slave_trade_ig_modifier
            }
        }
        trigger_event = { id = brazilian_slavery.7 popup = yes }
    }

    on_fail = {
        trigger_event = { id = brazilian_slavery.13 popup = yes }
        if = {
            limit = {
                NOT = {
                    has_law = law_type:law_slave_trade
                }
            }
            activate_law = law_type:law_slave_trade
        }
        if = {
            limit = {
                has_modifier = unrestricted_slave_trade_modifier
            }
            remove_modifier = unrestricted_slave_trade_modifier
        }
        if = {
            limit = {
                has_modifier = restricted_slave_trade_modifier
            }
            remove_modifier = restricted_slave_trade_modifier
        }
        show_as_tooltip = {
            ig:ig_rural_folk = {
                add_ideology = ideology_pro_slavery
            }
            add_modifier = {
                name = brazil_slaving_pariah_modifier
            }
        }
        custom_tooltip = je_matter_of_slavery_tt_1
        custom_tooltip = je_matter_of_slavery_tt_2
        if = {
            limit = {
                any_interest_group = {
                    has_modifier = restricted_slave_trade_ig_modifier
                }
            }
            every_interest_group = {
                limit = {
                    has_modifier = restricted_slave_trade_ig_modifier
                }
                remove_modifier = restricted_slave_trade_ig_modifier
            }
        }
    }

    on_weekly_pulse = {
        
    }

    on_monthly_pulse = {
        effect = {
            if = {
				limit = {
					scope:journal_entry = {
						"scripted_bar_progress(matter_of_slavery_progress_bar)" < 0
					}
				}
				scope:journal_entry = {
					set_bar_progress = { value = 0 name = matter_of_slavery_progress_bar }
				}
			}
			if = {
				limit = {
					scope:journal_entry = {
						"scripted_bar_progress(matter_of_slavery_progress_bar)" > 360
					}
				}
				scope:journal_entry = {
					set_bar_progress = { value = 360 name = matter_of_slavery_progress_bar }
				}
			}
        }
        random_events = {
            105 = 0
            10 = brazilian_slavery.8 # Slaves Refuse to Work
            10 = brazilian_slavery.9 # Slave Sabotage
            10 = brazilian_slavery.10 # Slave Escape

            # Slave Paranoia Events
            5 = slave_owner_paranoia_events.1 # A Small Conspiracy
            5 = slave_owner_paranoia_events.2 # Hidden Communities
            5 = slave_owner_paranoia_events.3 # Visiting Abolitionist
        }
    }

    status_desc = {
        first_valid = {
            triggered_desc = {
                desc = je_brazilian_slavery_informal_trade
                trigger = {
                    has_law = law_type:law_slave_trade
                    NOT = { 
                        has_variable = var_slave_trade_suppression_var 
                    }
                }
            }
            triggered_desc = {
                desc = je_brazilian_slavery_suppressed_trade
                trigger = {
                    has_law = law_type:law_slave_trade
                    has_variable = var_slave_trade_suppression_var
                }
            }
            triggered_desc = {
                desc = je_brazilian_slavery_banned_trade
                trigger = {
                    has_law = law_type:law_legacy_slavery
                }
            }
        }
    }

    is_progressing = {
        has_law = law_type:law_slavery_banned
    }

    weight = 1000

    should_be_pinned_by_default = yes
}

﻿je_agricultural_development = {
	icon = "gfx/interface/icons/goods_icons/coffee.dds"

	group = je_group_historical_content
	
	is_shown_when_inactive = {
		c:BRZ ?= this
		has_dlc_feature = rp1_content
	}

	possible = {
		has_technology_researched = intensive_agriculture
		any_scope_state = {
			count >= 2
			is_capital = no
			has_building = building_coffee_plantation
			has_building = building_livestock_ranch
			is_incorporated = yes
		}
		country_has_building_group_levels = {
			type = bg_plantations
			value  >= 50
		}
		custom_tooltip = {
			text = is_not_in_other_market_tt
			ROOT.market_capital = {
				owner = ROOT
			}
		}
	}

	immediate = {
		ig:ig_landowners = {
			save_scope_as = landowners_ig
		}
		market_capital.market = {
			mg:coffee = {
				save_scope_as = coffee_scope
			}
		}
		root = {
			save_scope_as = brazil_scope
		}
		set_variable = coffee_with_milk_1_active
		trigger_event = { id = coffee_with_milk.1 }
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = coffee_with_milk.2
			10 = coffee_with_milk.3
		}
	}

	complete = {
		OR = {
			leading_producer_of = g:meat
			leading_producer_of = g:coffee
			leading_producer_of = g:sugar
		}
		trigger_if = {
			limit = {
				has_variable = coffee_with_milk_1_active
			}
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
		trigger_else = {
			custom_tooltip = {
				text = je_agricultural_development_goal_dummy
				always = no
			}
		}
		country_has_building_group_levels = {
			type = bg_plantations
			value  >= 125
		} 
	}

	on_complete = {
		trigger_event = { id = coffee_with_milk.5 }
		set_variable = agricultural_dev_done
	}

	current_value = {
		value = scope:coffee_scope.market_goods_buy_orders
	}

	goal_add_value = {
		value = scope:coffee_scope.market_goods_buy_orders
		multiply = 2.5
	}

	fail = {
		custom_tooltip = {
			text = is_in_other_market_tt
			ROOT.market_capital = {
				NOT = {
					owner = ROOT
				}
			}
		}
	}

	invalid = {
		NOT = {
			any_scope_state = {
				count >= 2
				is_capital = no
				has_building = building_coffee_plantation
				has_building = building_livestock_ranch
				is_incorporated = yes
			}
		}
	}

	weight = 100

	progressbar = yes

	should_be_pinned_by_default = yes
}

je_coffee_with_milk = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		has_dlc_feature = rp1_content
		OR = {
			custom_tooltip = {
				text = agricultural_development_complete_tt
				has_variable = agricultural_dev_done
			}
			has_journal_entry = je_agricultural_development
		}
	}

	possible = {
		ig:ig_landowners = {
			is_powerful = yes
		}
		any_scope_state = {
			count >= 2
			is_capital = no
			has_building = building_coffee_plantation
			has_building = building_livestock_ranch
			is_incorporated = yes
		}
		OR = {
			has_law = law_type:law_landed_voting
			has_law = law_type:law_wealth_voting
		}
		country_has_building_group_levels = {
			type = bg_plantations
			value  >= 100
		} 
	}

	immediate = {
		ig:ig_landowners = {
			save_scope_as = landowners_ig
		}
		root = {
			save_scope_as = brazil_scope
		}
		set_variable = { name = coffee_with_milk_progress value = 0 }
		trigger_event = { id = coffee_with_milk.4 popup = yes }
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					OR = {
						has_law = law_type:law_tenant_farmers
						has_law = law_type:law_serfdom
					}
					ig:ig_landowners = {
						is_powerful = yes
						is_in_government = yes
					}
				}
				change_variable = { name = coffee_with_milk_progress add = 1 }
			}
			else_if = {
				limit = {
					NOR = {
						has_law = law_type:law_tenant_farmers
						has_law = law_type:law_serfdom
					}
					ig:ig_landowners = {
						is_in_government = no
					}
				}
				change_variable = { name = coffee_with_milk_progress subtract = 1 }
			}
		}
		random_events = {
			500 = 0
			25 = coffee_with_milk.6
			250 = coffee_with_milk.7
			100 = coffee_with_milk.8
			25 = coffee_with_milk.9
			25 = coffee_with_milk.10
			100 = coffee_with_milk.11
			25 = coffee_with_milk.15
			25 = coffee_with_milk.16
		}
	}

	complete = {
		OR = {
			custom_tooltip = {
				text = coffee_with_milk_0_tt
				var:coffee_with_milk_progress <= 0
				has_variable = je_coffee_with_milk_start
			}
			custom_tooltip = {
				text = coffee_with_milk_100_tt
				var:coffee_with_milk_progress >= 240
				has_variable = je_coffee_with_milk_start
			}
		}
	}

	on_complete = {
		if = {
			limit = {
				var:coffee_with_milk_progress >= 120
			}
			trigger_event = { id = coffee_with_milk.12 }
			set_variable = completed_coffee_and_milk_je_landowners
		}
		else_if = {
			limit = {
				var:coffee_with_milk_progress < 120
			}
			trigger_event = { id = coffee_with_milk.13 }
		}
	}

	fail = {
		has_law = law_type:law_collectivized_agriculture
	}

	on_fail = {
		trigger_event = { id = coffee_with_milk.14 }
	}

	invalid = {
		NOT = {
			any_scope_state = {
				count >= 2
				is_capital = no
				has_building = building_coffee_plantation
				has_building = building_livestock_ranch
				is_incorporated = yes
			}
		}
	}

	current_value = {
		value = var:coffee_with_milk_progress
	}
	
	goal_add_value = {
		add = 240
	}

	weight = 100

	progressbar = yes

	should_be_pinned_by_default = yes
}

﻿je_cristo_redentor = {
    icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content
    
    is_shown_when_inactive = {
		has_technology_researched = reinforced_concrete
        country_has_primary_culture = cu:brazilian
        any_scope_state = {
            state_region = s:STATE_RIO_DE_JANEIRO
        }
		has_dlc_feature = rp1_content
    }
    possible = {
		has_technology_researched = pneumatic_tools
		has_technology_researched = reinforced_concrete
        country_has_primary_culture = cu:brazilian
        any_scope_state = {
            state_region = s:STATE_RIO_DE_JANEIRO
        }
        NOT = { has_law = law_type:law_state_atheism }
    }
    immediate = {
        random_scope_state = {
            limit = {
                state_region = s:STATE_RIO_DE_JANEIRO
            }
            save_scope_as = rio_state
        }
        ig:ig_devout = {
           save_scope_as = devout_ig
        }
        trigger_event = { id = cristo_redentor.1 popup = yes }
    }
    complete = {
        s:STATE_RIO_DE_JANEIRO.region_state:BRZ = {
			any_scope_building = {
				is_building_type = building_cristo_redentor
				occupancy >= 0.5
			}
        }
    }
    on_complete = {
        trigger_event = { id = cristo_redentor.2 popup = yes }
    }
    invalid = {
        OR = {
            NOT = {
                any_scope_state = {
                    state_region = s:STATE_RIO_DE_JANEIRO
                }
            }
            has_law = law_type:law_state_atheism
            has_variable = cristo_redentor_rejected
        }
    }

    weight = 1000

    should_be_pinned_by_default = yes
}
﻿je_gran_colombia = {
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

    is_shown_when_inactive = {
        country_has_primary_culture = cu:north_andean
		has_dlc_feature = rp1_content
        NOT = {
            OR = {
                country_tier = empire
                country_tier = hegemony
            }
        }
    }
    possible = {
		has_technology_researched = nationalism
        country_has_primary_culture = cu:north_andean
    }
    immediate = {
        trigger_event = { id = gran_colombia.1 popup = yes }
    }
    complete = {
        custom_tooltip = {
            text = formed_gran_colombia_tt
            c:GCO ?= this
        }
    }
    on_complete = {
        trigger_event = { id = gran_colombia.2 popup = yes }
        if = {
            limit = {
                has_modifier = modifier_seeking_gran_colombia
            }
            remove_modifier = modifier_seeking_gran_colombia
        }
    }
    fail = {
        OR = {
            NOT = {
                country_has_primary_culture = cu:north_andean
            }
            custom_tooltip = {
                text = has_rejected_gran_colombia_tt
                has_variable = rejected_gran_colombia
            }
        }
    }
    on_fail = {
        if = {
            limit = {
                has_modifier = modifier_seeking_gran_colombia
            }
            remove_modifier = modifier_seeking_gran_colombia
        }
    }

    weight = 1000

    should_be_pinned_by_default = yes
}

je_la_plata = {
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

    is_shown_when_inactive = {
        country_has_primary_culture = cu:platinean
		has_dlc_feature = rp1_content
        NOT = {
            OR = {
                country_tier = empire
                country_tier = hegemony
            }
        }
    }
    possible = {
		has_technology_researched = nationalism
        country_has_primary_culture = cu:platinean
    }
    immediate = {
        trigger_event = { id = la_plata.1 popup = yes }
    }
    complete = {
        custom_tooltip = {
            text = formed_la_plata_tt
            c:PLT ?= this
        }
    }
    on_complete = {
        trigger_event = { id = la_plata.2 popup = yes }
        if = {
            limit = {
                has_modifier = modifier_seeking_la_plata
            }
            remove_modifier = modifier_seeking_la_plata
        }
    }
    fail = {
        OR = {
            NOT = {
                country_has_primary_culture = cu:platinean
            }
            custom_tooltip = {
                text = has_rejected_la_plata_tt
                has_variable = rejected_la_plata
            }
        }
    }
    on_fail = {
        if = {
            limit = {
                has_modifier = modifier_seeking_la_plata
            }
            remove_modifier = modifier_seeking_la_plata
        }
    }

    weight = 1000

    should_be_pinned_by_default = yes
}

je_andean_federation = {
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs
    
    is_shown_when_inactive = {
        OR = {
            country_has_primary_culture = cu:north_andean
            country_has_primary_culture = cu:south_andean
        }
		has_technology_researched = nationalism
        NOT = {
            has_variable = rejected_gran_colombia
        }
		has_dlc_feature = rp1_content
    }
    possible = {
        has_technology_researched = pan-nationalism
        OR = {
            country_has_primary_culture = cu:north_andean
            country_has_primary_culture = cu:south_andean
        }
        custom_tooltip = {
            text = andean_federation_reqs_tt
            OR = {
                any_scope_state = {
                    state_is_in_south_america = yes
                    is_incorporated = yes
                    count >= 10
                }
                c:GCO ?= this
                c:PBC ?= this
                c:PLT ?= this
            }
        }
    }
    immediate = {
        trigger_event = { id = andean_federation.1 popup = yes }
    }
    complete = {
        custom_tooltip = {
            text = formed_andean_federation_tt
            c:FND ?= this
        }
    }
    on_complete = {
        trigger_event = { id = andean_federation.2 popup = yes }
        show_as_tooltip = {
            if = {
                limit = {
                    NOT = {
                        country_has_primary_culture = cu:south_andean
                    }
                }
                add_primary_culture = cu:south_andean
            }
            if = {
                limit = {
                    NOT = {
                        country_has_primary_culture = cu:north_andean
                    }
                }
                add_primary_culture = cu:north_andean
            }
        }
    }
    fail = {
        OR = {
            NOT = {
                country_has_primary_culture = cu:north_andean
                country_has_primary_culture = cu:south_andean
            }
            custom_tooltip = {
                text = has_rejected_andean_federation_tt
                has_variable = rejected_andean_federation
            }
        }
    }

    weight = 1000

    should_be_pinned_by_default = yes
}
﻿je_haitian_debt = {
    icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

    scripted_button = je_haitian_debt_negotiation_button
    scripted_button = je_haitian_debt_payment_button
    scripted_button = je_haitian_cancel_debt_button

    immediate = {
        c:FRA ?= {
            save_scope_as = france_scope
        }
    }
    complete = {
        NOR = {
            has_modifier = modifier_french_independence_payments_4
            has_modifier = modifier_french_independence_payments_3
            has_modifier = modifier_french_independence_payments_2
            has_modifier = modifier_french_independence_payments_1
            has_modifier = modifier_cancelled_haiti_debt
        }
    }

    on_complete = {
        trigger_event = { id = hispaniola_events.1 popup = yes }
        c:FRA = { trigger_event = { id = hispaniola_events.2 popup = yes } }
    }

    invalid = {
        NOT = {
            exists = c:FRA
        }
    }

    fail = {
       has_modifier = modifier_cancelled_haiti_debt
    }

    status_desc = {
        first_valid = {
            triggered_desc = {
                desc = je_haitian_debt_status_4
                trigger = { has_modifier = modifier_french_independence_payments_4 }
            }
            triggered_desc = {
                desc = je_haitian_debt_status_3
                trigger = { has_modifier = modifier_french_independence_payments_3 }
            }
            triggered_desc = {
                desc = je_haitian_debt_status_2
                trigger = { has_modifier = modifier_french_independence_payments_2 }
            }
            triggered_desc = {
                desc = je_haitian_debt_status_1
                trigger = { has_modifier = modifier_french_independence_payments_1 }
            }
        }
    }

    weight = 1000
    should_be_pinned_by_default = yes
}
﻿je_government_petition = {
    icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_internal_affairs
    
    immediate = {
        ROOT = {
            var:desired_law_var = {
                save_scope_as = government_petition_law
            }
        }
        random_interest_group = {
            limit = {
                has_variable = petitioning_ig
            }
            save_scope_as = government_petition_ig
        }
    }

    status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_government_petition_status
			}
		}
	}

    complete = {
        exists = scope:government_petition_law
        has_law = scope:government_petition_law.type
    }

    on_complete = {
        add_loyalists = {
            value = medium_radicals
            interest_group = scope:government_petition_ig
        }
        add_modifier = {
            name = modifier_successfully_met_petition_legitimacy
            months = long_modifier_time
            is_decaying = yes
        }
        remove_variable = desired_law_var
    }

    invalid = {
        OR = {
            scope:government_petition_ig ?= {
                law_stance = {
                    law = scope:government_petition_law.type
                    value < approve
                }
            }
            NOT = {
                exists = scope:government_petition_law
            }
        }
    }

    fail = {
        scope:government_petition_ig ?= {
            is_in_government = no
        }
    }

    on_timeout = {
        if = {
            limit = {
                is_enacting_law = scope:government_petition_law.type
            }
            scope:government_petition_ig = {
                if = {
                    limit = {
                        is_powerful = yes
                    }
                    add_modifier = {
                        name = modifier_failed_to_meet_petition
                        months = long_modifier_time
                        is_decaying = yes
                        multiplier = {
                            add = 1.5
                            divide = {
                                add = 1
                                add = ROOT.enactment_phase
                            }
                        }
                    }
                }
                else = {
                    add_modifier = {
                        name = modifier_failed_to_meet_petition
                        months = long_modifier_time
                        is_decaying = yes
                        multiplier = {
                            add = 1
                            divide = {
                                add = 1
                                add = ROOT.enactment_phase
                            }
                        }
                    }
                }
            }
        }
        else = {
            scope:government_petition_ig = {
                if = {
                    limit = {
                        is_powerful = yes
                    }
                    add_modifier = {
                        name = modifier_failed_to_meet_petition
                        months = long_modifier_time
                        is_decaying = yes
                        multiplier = 1.5
                    }
                }
                else = {
                    add_modifier = {
                        name = modifier_failed_to_meet_petition
                        months = long_modifier_time
                        is_decaying = yes
                    }
                }
            }
        }
        remove_variable = desired_law_var
    }

    on_fail = {
		scope:government_petition_ig = {
			add_modifier = {
				name = modifier_failed_to_meet_petition
				months = long_modifier_time
				is_decaying = yes
				multiplier = 2
			}
		}
        remove_variable = desired_law_var
    }

    on_invalid = {
        remove_variable = desired_law_var
    }

    timeout = 1825

    weight = 1000

    should_be_pinned_by_default = yes
}
﻿je_the_krakow_uprising = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

    is_shown_when_inactive = {
		has_dlc_feature = voice_of_the_people_content
        c:AUS ?= this
        country_rank >= rank_value:major_power
        exists = c:KRA
        NOT = {
            has_variable = dismissed_krakow
        }
    }
    scripted_button = je_the_krakow_uprising_annex_button
    possible = {
        OR = {
            custom_tooltip = {
                text = krakow_uprising_happened_tt
                has_variable = krakow_uprising_happened
            }
        }
    }
    immediate = {
        c:KRA = {
            save_scope_as = krakow_scope
        }
    }
    complete = {
        trigger_if = {
            limit = {
                exists = c:KRA
            }
            NOT = {
                c:KRA = {
                    is_country_alive = yes 
                }
            }
        }
        owns_entire_state_region = STATE_WEST_GALICIA
    }
    on_complete = {
        trigger_event = { id = krakow.2 }
    }
    fail = {
        trigger_if = {
            limit = {
                exists = c:KRA
            }
            NOT = {
                c:KRA = {
                    is_country_alive = yes 
                }
            }
        }
        NOT = {
            owns_entire_state_region = STATE_WEST_GALICIA
        }
    }

    timeout = 3650

    weight = 1000
    should_be_pinned_by_default = yes
}
﻿je_francocracia = {
    icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content

    immediate = {
        ruler = {
            save_scope_as = francia_character_scope
            set_character_immortal = no
        }
    }

    complete = {
        custom_tooltip = {
            text = je_francocracia_tt
            NOT = {
                ruler = {
                    has_template = PRG_jose_gaspar_rodriguez_de_francia
                }
            }
        }
    }

    on_complete = {
        trigger_event = { id = paraguay.1 popup = yes }
        remove_modifier = hairy_feet_modifier
        set_variable = death_of_francia_var
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

je_modernizing_paraguay = {
    icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_historical_content

    immediate = {
        g:iron = {
            save_scope_as = iron_scope
        }
        g:wood = {
            save_scope_as = wood_scope
        }
    }

    scripted_button = humanita_fortress_button
    scripted_button = ybycui_iron_works_button
    scripted_button = good_health_prg_button
    scripted_button = army_git_good_button

    complete = {
        scope:journal_entry = {
            is_goal_complete = yes
        }
        custom_tooltip = {
            text = je_modernizing_paraguay.tt_1
            has_global_variable = humanita_fortress_global_var
        }
        custom_tooltip = {
            text = je_modernizing_paraguay.tt_2
            has_global_variable = ybycui_iron_works_global_var
        }
        custom_tooltip = {
            text = je_modernizing_paraguay.tt_3
            has_global_variable = paraguay_army_reform_global_var
        }
        custom_tooltip = {
            text = je_modernizing_paraguay.tt_4
            has_global_variable = improve_living_conditions_global_var
        }
    }

    on_monthly_pulse = {
        random_events = {
            100 = 0
            10 = paraguay.2 # Napoleon of South America
        }
    }

    current_value = {
        value = root.gdp
    }

    goal_add_value = {
        value = root.gdp
    }

    progressbar = yes

    on_complete = {
        trigger_event = { id = paraguay.12 popup = yes }
        show_as_tooltip = {
            add_journal_entry = { type = je_expanding_paraguay }
        }
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

je_expanding_paraguay = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

    immediate = {

    }

    complete = {
        owns_entire_state_region = STATE_CORRIENTES
        OR = {
            country_or_subject_owns_entire_state_region = STATE_URUGUAY
            country_or_subject_owns_entire_state_region = STATE_SANTA_FE
            country_or_subject_owns_entire_state_region = STATE_PARANA
            country_or_subject_owns_entire_state_region = STATE_RIO_GRANDE_DO_SUL
        }
    }

    fail = {
        custom_tooltip = {
            text = lost_war_tt
            OR = {
                has_variable = recently_lost_war
                AND = {
                    has_variable = recently_had_war
                    NOT = {
                        has_variable = recently_won_war
                    }
                }
            }
        }
    }

    on_fail = {
        trigger_event = { id = paraguay.8 popup = yes }
        show_as_tooltip = {
            if = {
                limit = {
                    any_scope_state = {
                        has_modifier = ybycui_iron_works_modifier
                    }
                }
                random_scope_state = {
                    limit = {
                        has_modifier = ybycui_iron_works_modifier
                    }
                    remove_modifier = ybycui_iron_works_modifier
                }
            }
            if = {
                limit = {
                    any_scope_state = {
                        has_modifier = ybycui_prisoner_workforce_modifier
                    }
                }
                random_scope_state = {
                    limit = {
                        has_modifier = ybycui_prisoner_workforce_modifier
                    }
                    remove_modifier = ybycui_prisoner_workforce_modifier
                }
            }
            if = {
                limit = {
                    any_scope_state = {
                        has_modifier = ybycui_steelworks
                    }
                }
                random_scope_state = {
                    limit = {
                        has_modifier = ybycui_steelworks
                    }
                    remove_modifier = ybycui_steelworks
                }
            }
            if = {
                limit = {
                    any_scope_state = {
                        has_modifier = humanita_fortress_modifier
                    }
                }
                random_scope_state = {
                    limit = {
                        has_modifier = humanita_fortress_modifier
                    }
                    remove_modifier = humanita_fortress_modifier
                }
            }
            if = {
                limit = {
                    any_scope_state = {
                        has_modifier = vaccinations_prg_modifier
                    }
                }
                random_scope_state = {
                    limit = {
                        has_modifier = vaccinations_prg_modifier
                    }
                    remove_modifier = vaccinations_prg_modifier
                }
            }
            if = {
                limit = {
                    any_scope_state = {
                        has_modifier = barracks_boost_paraguay_quantity_modifier
                    }
                }
                random_scope_state = {
                    limit = {
                        has_modifier = barracks_boost_paraguay_quantity_modifier
                    }
                    remove_modifier = barracks_boost_paraguay_quantity_modifier
                }
            }
            if = {
                limit = {
                    has_modifier = barracks_boost_paraguay_quality_modifier
                }
                remove_modifier = barracks_boost_paraguay_quality_modifier
            }
            if = {
                limit = {
                    any_scope_character = {
                        has_modifier = napoleon_of_the_americas_modifier
                    }
                }
                random_character = {
                    limit = {
                        has_modifier = napoleon_of_the_americas_modifier
                    }
                    kill_character = yes
                }
            }
            if = {
                limit = {
                    any_scope_character = {
                        has_modifier = el_excelentisimo_modifier
                    }
                }
                random_character = {
                    limit = {
                        has_modifier = el_excelentisimo_modifier
                    }
                    kill_character = yes
                }
            }
            if = {
                limit = {
                    ruler = {
                        NOR = {
                            has_modifier = el_excelentisimo_modifier
                            has_modifier = napoleon_of_the_americas_modifier
                        }
                    }
                }
                ruler = {
                    kill_character = yes
                }
            }
            if = {
                limit = {
                    any_scope_state = {
                        state_region = s:STATE_BAJO_PARAGUAY
                    }
                }
                s:STATE_BAJO_PARAGUAY.region_state:PRG = {
                    add_modifier = {
                        name = thus_unto_tyrants_modifier
                        months = long_modifier_time
                    }
                }
            }
            add_modifier = {
                name = a_broken_land_modifier
                months = long_modifier_time
            }
        }
    }

    on_complete = {
        trigger_event = { id = paraguay.9 popup = yes }
        set_variable = paraguay_war_victory_achievement
    }

    invalid = {
        is_subject = yes
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

je_paraguayan_war = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

    immediate = {
        c:PRG ?= {
            save_scope_as = paraguay_scope
        }
    }

    complete = {
        OR = {
            AND = {
                custom_tooltip = {
                    text = je_paraguayan_war_tt_1
                    OR = {
                        c:PRG ?= {
                            has_variable = recently_lost_war
                        }
                    }
                    has_variable = recently_won_war
                }
                c:PRG = {
                    NOT = {
                        has_state_in_state_region = STATE_MATO_GROSSO
                        has_state_in_state_region = STATE_CORRIENTES
                        has_state_in_state_region = STATE_CHACO
                    }
                }
            }
            AND = {
                custom_tooltip = {
                    text = je_paraguayan_war_tt_1
                    has_variable = recently_won_war
                }
                NOT = { 
                    c:PRG = { 
                        is_country_alive = yes 
                    } 
                }
            }
        }
    }
    
    fail = {
        custom_tooltip = {
            text = je_paraguayan_war_tt_2
            c:PRG ?= {
                has_variable = recently_won_war
            }
            has_variable = recently_lost_war
        }
        c:PRG ?= {
            has_state_in_state_region = STATE_CORRIENTES
            OR = {
                country_or_subject_owns_entire_state_region = STATE_URUGUAY
                country_or_subject_owns_entire_state_region = STATE_SANTA_FE
                country_or_subject_owns_entire_state_region = STATE_PARANA
                country_or_subject_owns_entire_state_region = STATE_RIO_GRANDE_DO_SUL
            }
        }
    }

    on_fail = {
        trigger_event = { id = paraguay.10 popup = yes }
    }

    on_complete = {
        trigger_event = { id = paraguay.7 popup = yes }
    }

    invalid = {
        c:PRG ?= {
            has_journal_entry = je_expanding_paraguay
            NOT = {
                has_war_with = root
            }
            any_diplomatic_play = {
                is_war = yes
                initiator = prev
                target = {
                    any_scope_state = {
                        OR = {
                            state_region = s:STATE_CORRIENTES
                            state_region = s:STATE_URUGUAY
                            state_region = s:STATE_SANTA_FE
                            state_region = s:STATE_PARANA
                            state_region = s:STATE_RIO_GRANDE_DO_SUL
                        }
                    }
                    root = {
                        has_interest_marker_in_region = prev.capital.region
                    }
                }
                OR = {
                    has_play_goal = conquer_state
                    has_play_goal = return_state
                    has_play_goal = make_tributary
                    has_play_goal = make_protectorate
                }
            }
        }
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

﻿je_christ_of_nations = {
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

    scripted_button = christ_of_nations_button

    is_shown_when_inactive = {
        OR = {
            c:POL ?= this
            c:KRA ?= this
            AND = {
                c:GAL ?= this
                ruler = {
                    culture = cu:polish
                }
            }
        }
        NOT = {
            sr:region_poland = {
                any_scope_state = {
                    count = all
                    owner = root
                }
            }
        }
    }

    possible = {
        has_technology_researched = nationalism
    }

    immediate = {
        cu:polish = {
            save_scope_as = polish_culture_scope
        }
    }

    complete = {
        sr:region_poland = {
            any_scope_state = {
                count = all
                owner = root
            }
        }
    }

    on_complete = {
        trigger_event = { id = poland_events.4 days = 0 popup = yes }
    }

    should_be_pinned_by_default = yes
}

je_poland_lithuania = {
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

    is_shown_when_inactive = {
       country_has_primary_culture = cu:polish
    }

    possible = {
        has_technology_researched = pan-nationalism
        custom_tooltip = {
            text = je_poland_lithuania_tt
            c:PLC ?= THIS
        }
    }

    immediate = {
        trigger_event = { id = poland_events.6 popup = yes }
    }

    complete = {
        owns_entire_state_region = STATE_MINSK
        owns_entire_state_region = STATE_KIEV
        any_scope_state = {
            state_region = {
                OR = {
                    is_homeland = cu:ukrainian
                    is_homeland = cu:byelorussian
                }
            }
            count >=7
        }
    }

    on_complete = {
        set_variable = greater_commonwealth_var
        trigger_event = { id = poland_events.7 popup = yes }
        custom_tooltip = plc_discrimination_tt
        show_as_tooltip = {
            add_primary_culture = cu:ukrainian
            add_primary_culture = cu:byelorussian
            add_loyalists = {
                culture = cu:ukrainian
                value = 0.1
            }
            add_loyalists = {
                culture = cu:byelorussian
                value = 0.1
            }
        }
        custom_tooltip = plc_discrimination_tt_2
        show_as_tooltip = {
            add_loyalists = {
                culture = cu:polish
                value = 0.1
            }
        }
    }

    should_be_pinned_by_default = yes
}
﻿je_positivist_movement = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_internal_affairs
	
	is_shown_when_inactive = {
		has_technology_researched = psychiatry
		has_global_variable = positivism_invented
		has_dlc_feature = rp1_content
	}

	possible = {
		has_technology_researched = philosophical_pragmatism
		radical_fraction = {
			value >= 0.1
		}
		OR = {
			country_has_state_religion = rel:catholic
			has_law = law_type:law_state_atheism
		}
		custom_tooltip = {
			text = is_democratic_tt
			country_has_voting_franchise = yes
		}
	}

	immediate = {
		set_variable = {
			name = positivism_progress_var
			value = 0
		}
		trigger_event = { id = positivism.2 popup = yes }
		set_variable = positivism_happened
	}

	scripted_button = je_positivist_movement_embrace_positivism_button
	scripted_button = je_positivist_movement_suppress_positivism_button

	on_weekly_pulse = {
		effect = {
			clamp_variable = {
				name = positivism_progress_var
				max = 100
				min = 0
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			
		}
		random_events = {
			100 = 0
			10 = positivism_pulse.1
			10 = positivism_pulse.2
			10 = positivism_pulse.3
			10 = positivism_pulse.4
			10 = positivism_pulse.5
			10 = bp1_misc.3
		}
	}

	complete = {
		exists = var:positivism_progress_var
		custom_tooltip = {
			text = positivism_at_100_tt
			var:positivism_progress_var >= 100
		}
	}

	on_complete = {
		custom_tooltip = positivism_effects_most_tt
		trigger_event = { id = positivism.3 popup = yes }
	}

	timeout = 3650

	on_timeout = {
		if = {
			limit = {
				var:positivism_progress_var >= 50
			}
			custom_tooltip = {
				text = positivism_positive_epoch_tt
				trigger_event = { id = positivism.3 popup = yes }
			}
			if = {
				limit = {
					var:positivism_progress_var >= 85
				}
				custom_tooltip = positivism_effects_most_tt
			}
			else_if = {
				limit = {
					var:positivism_progress_var >= 65
				}
				custom_tooltip = positivism_effects_avg_tt
			}
			else = {
				custom_tooltip = positivism_effects_least_tt
			}
		}
		else = {
			custom_tooltip = {
				text = positivism_peculiar_cult_tt
				trigger_event = { id = positivism.4 popup = yes }
			}
			if = {
				limit = {
					var:positivism_progress_var >= 35
				}
				custom_tooltip = positivism_effects_least_tt
			}
			else_if = {
				limit = {
					var:positivism_progress_var >= 15
				}
				custom_tooltip = positivism_effects_avg_tt
			}
			else = {
				custom_tooltip = positivism_effects_most_tt
			}
		}
	}

	current_value = {
		value = root.var:positivism_progress_var
	}

	goal_add_value = {
		add = 100
	}

	weight = 100

	progressbar = yes

	should_be_pinned_by_default = yes
}

﻿je_the_red_scare = {
    icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_crises

    is_shown_when_inactive = {
		has_global_variable = labour_movement_researched
    }
    possible = {
        custom_tooltip = {
            text = red_scare_unlock_tt
			any_in_global_list = {
                variable = aes_country_list
                has_diplomatic_relevance = root
                has_law = law_type:law_council_republic
            }
        }
        NOT = {
            has_law = law_type:law_council_republic
        }
    }
    immediate = {
        ordered_country = {
			limit = {
                has_diplomatic_relevance = root
				has_law = law_type:law_council_republic
			}
			order_by = country_rank

			save_scope_as = red_scare_target_nation
		}
        trigger_event = { id = red_scare.1 }
    }
    on_monthly_pulse = {
        random_events = {
            300 = 0
            10 = red_scare.2
            10 = red_scare.3
            10 = red_scare.4
            10 = red_scare.5
            10 = red_scare.6
            10 = red_scare.7
            10 = red_scare.8
            10 = red_scare.9
            10 = red_scare.10
            10 = red_scare.11
            10 = red_scare.12
            10 = red_scare.14
            10 = red_scare.15
        }
    }
    fail = {
        OR = {
            has_law = law_type:law_council_republic
            any_civil_war = {
                this.political_movement ?= {
                    any_supporting_interest_group = {
                        law_stance = {
                            law = law_type:law_council_republic
                            value > neutral
                        }
                    }
                }
                is_civil_war_type = revolution
                civil_war_progress > 0.75
            }
        }
    }
    invalid = {
        NOT = {
			any_in_global_list = {
                variable = aes_country_list
                has_diplomatic_relevance = root
                has_law = law_type:law_council_republic
            }
        }
    }

    timeout = 3650

    on_timeout = {
        trigger_event = { id = red_scare.20 }
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

﻿je_unite_the_principalities = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

    is_shown_when_inactive = {
		country_has_primary_culture = cu:romanian
    }
    scripted_button = je_unite_the_principalities_button
    possible = {
        has_technology_researched = nationalism
        NOT = {
            any_overlord_or_above ?= { # Can't unite the principalities if you're already the lesser in a pact with another Romanian state
                country_has_primary_culture = cu:romanian
            }
        }
    }
    immediate = {
    }
    complete = {
        custom_tooltip = {
            text = je_unite_the_principalities_united_two_principalities_tt
            has_variable = ROM_united_principality
        }
        custom_tooltip = {
            text = je_unite_the_principalities_friend_with_all_great_powers_tt
            NOT = {
                any_country = {
                    country_rank >= rank_value:great_power
                    NOT = { has_war_with = ROOT }
                    has_interest_marker_in_region = ROOT.capital.region
                    relations:root < 0
                }
            }
        }
    }
    on_complete = {
    }
    fail = { # the JE fails if there are no other Romanian countries, or if ROOT is Romania
        OR = {
            custom_tooltip = {
                text = je_unite_the_principalities_no_other_romanians_tt
                NOT = {
                    any_country = {
                        NOT = { this = ROOT }
                        country_has_primary_culture = cu:romanian 
                    }
                }
            }
            custom_tooltip = {
                text = je_unite_the_principalities_romania_is_real_tt
                exists = c:ROM
            }
        }
    }

    # timeout = 0 # no timeout. Romania is eternal.

    weight = 1000
    should_be_pinned_by_default = yes
}

je_all_for_one = {
    icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_historical_content

    scripted_button = je_south_bessarabian_retrocession
    scripted_button = je_marea_unire

    on_monthly_pulse = {
        effect = {
            change_variable = {
                name = romanian_union_var
                add = 1
            }
        }
    }

    complete = {
        scope:journal_entry = { is_goal_complete = yes }
    }

    immediate = {
        random_neighbouring_state = {
            limit = {
                owner = {
                    has_variable = romania_union_partner
                }
            }
            owner = {
                save_scope_as = romania_lesser_union_partner
            }
        }
    }

    on_complete = {
        trigger_event = {
            id = romania.3
        }
    }

    fail = {
        OR = {
            AND = {
                exists = c:ROM
                NOT = { c:ROM ?= this }
            }
            NOT = { exists = scope:romania_lesser_union_partner }
            scope:romania_lesser_union_partner = {
                NOT = { is_subject_of = ROOT }
            }
        }
    }

    on_fail = {
        hidden_effect = {
            remove_variable = ROM_united_principality
        }
    }

    current_value = {
        value = root.var:romanian_union_var
    }

    goal_add_value = {
        value = 120
    }

    progressbar = yes

    weight = 10000
    should_be_pinned_by_default = yes
}

﻿je_south_american_national_identity_emergence = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		capital = {
			state_is_in_south_america = yes
		}
		any_primary_culture = {
			NOR = { 
				cu:central_american = this 
				cu:caribeno = this
			}
			has_discrimination_trait = hispanophone
		}
		hidden_trigger = {
			NOT = { has_variable = completed_culture_genesis }
		}
		hidden_trigger = {
			NOR = {
				c:GCO ?= this
				c:PBC ?= this
				c:FND ?= this
				c:PLT ?= this
			}
		}
		is_revolutionary = no
	}

	possible = {
		has_technology_researched = nationalism
		hidden_trigger = {
			NOT = { has_variable = completed_culture_genesis }
		}
	}

	immediate = {
		set_national_identity_vars = yes
		set_variable = { name = national_identity_progress_var value = 0 }
		calculate_national_identity_progress = yes
		if = {
			limit = {
				c:ARG ?= this
			}
			cu:platinean = {
				save_scope_as = old_national_culture
			}
			cu:argentine = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:PEU ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:peruvian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:NPU ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:peruvian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:SPU ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:peruvian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:BOL ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:bolivian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:ECU ?= this
			}
			cu:north_andean = {
				save_scope_as = old_national_culture
			}
			cu:ecuadorian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:CHL ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:chilean = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:VNZ ?= this
			}
			cu:north_andean = {
				save_scope_as = old_national_culture
			}
			cu:venezuelan = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:URU ?= this
			}
			cu:platinean = {
				save_scope_as = old_national_culture
			}
			cu:uruguayan = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:PRG ?= this
			}
			cu:platinean = {
				save_scope_as = old_national_culture
			}
			cu:paraguayan = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:CLM ?= this
			}
			cu:north_andean = {
				save_scope_as = old_national_culture
			}
			cu:colombian = {
				save_scope_as = new_national_culture
			}
		}
		trigger_event = { id = culture_south_america.4 popup = yes }
	}

	on_weekly_pulse = {
		effect = {
			calculate_national_identity_progress = yes
		}
	}

	on_monthly_pulse = {
		effect = {
			add_national_identity_progress = yes
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		clear_national_identity_vars = yes
		trigger_event = {
			id = culture_south_america.1 popup = yes
		}
		show_as_tooltip = {
			if = {
				limit = {
					c:ARG ?= this
				}
				add_primary_culture = cu:argentine
				remove_primary_culture = cu:platinean
			}
			if = {
				limit = {
					c:PEU ?= this
				}
				add_primary_culture = cu:peruvian
				remove_primary_culture = cu:south_andean
			}
			if = {
				limit = {
					c:NPU ?= this
				}
				add_primary_culture = cu:peruvian
				remove_primary_culture = cu:south_andean
			}
			if = {
				limit = {
					c:SPU ?= this
				}
				add_primary_culture = cu:peruvian
				remove_primary_culture = cu:south_andean
			}
			if = {
				limit = {
					c:BOL ?= this
				}
				add_primary_culture = cu:bolivian
				remove_primary_culture = cu:south_andean
			}
			if = {
				limit = {
					c:ECU ?= this
				}
				add_primary_culture = cu:ecuadorian
				remove_primary_culture = cu:north_andean
			}
			if = {
				limit = {
					c:CHL ?= this
				}
				add_primary_culture = cu:chilean
				remove_primary_culture = cu:south_andean
			}
			if = {
				limit = {
					c:VNZ ?= this
				}
				add_primary_culture = cu:venezuelan
				remove_primary_culture = cu:north_andean
			}
			if = {
				limit = {
					c:URU ?= this
				}
				add_primary_culture = cu:uruguayan
				remove_primary_culture = cu:platinean
			}
			if = {
				limit = {
					c:PRG ?= this
				}
				add_primary_culture = cu:paraguayan
				remove_primary_culture = cu:platinean
			}
			if = {
				limit = {
					c:CLM ?= this
				}
				add_primary_culture = cu:colombian
				remove_primary_culture = cu:north_andean
			}
		}
		hidden_effect = {
			set_variable = completed_culture_genesis
		}
	}

	fail = {
		custom_tooltip = {
			text = completed_pan_national_project_tt
			OR = {
				c:GCO ?= this
				c:FND ?= this
				c:PBC ?= this
				c:PLT ?= this
			}
		}
	}

	on_fail = {
		hidden_effect = {
			set_variable = completed_culture_genesis
		}
	}

	current_value = {
		value = root.var:national_identity_progress_var
	}

	goal_add_value = {
		add = 100
	}

	weight = 100

	progressbar = yes

	should_be_pinned_by_default = yes
}


je_south_american_national_identity = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_internal_affairs

	# Now activated by event

	modifiers_while_active = {
		modifier_assimilation_nnc
	}

	immediate = {
		if = {
			limit = {
				c:ARG ?= this
			}
			cu:platinean = {
				save_scope_as = old_national_culture
			}
			cu:argentine = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:PEU ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:peruvian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:NPU ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:peruvian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:SPU ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:peruvian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:BOL ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:bolivian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:ECU ?= this
			}
			cu:north_andean = {
				save_scope_as = old_national_culture
			}
			cu:ecuadorian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:CHL ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:chilean = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:VNZ ?= this
			}
			cu:north_andean = {
				save_scope_as = old_national_culture
			}
			cu:venezuelan = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:URU ?= this
			}
			cu:platinean = {
				save_scope_as = old_national_culture
			}
			cu:uruguayan = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:PRG ?= this
			}
			cu:platinean = {
				save_scope_as = old_national_culture
			}
			cu:paraguayan = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:CLM ?= this
			}
			cu:north_andean = {
				save_scope_as = old_national_culture
			}
			cu:colombian = {
				save_scope_as = new_national_culture
			}
		}
	}

	complete = {
		NOR = {
			trigger_if = {
				limit = {
					OR = {
						c:ARG ?= this
						c:URU ?= this
						c:PRG ?= this
					}
				}
				any_scope_state = {
					state_region = {
						is_homeland = cu:platinean
					}
				}
			}
			trigger_if = {
				limit = {
					OR = {
						c:PEU ?= this
						c:NPU ?= this
						c:SPU ?= this
						c:BOL ?= this
						c:CHL ?= this
					}
				}
				any_scope_state = {
					state_region = {
						is_homeland = cu:south_andean
					}
				}
			}
			trigger_if = {
				limit = {
					OR = {
						c:ECU ?= this
						c:VNZ ?= this
						c:CLM ?= this
					}
				}
				any_scope_state = {
					state_region = {
						is_homeland = cu:north_andean
					}
				}
			}
		}
	}

	on_complete = {
		trigger_event = {
			id = culture_south_america.3
		}
		add_loyalists = {
			value = large_radicals
			culture = scope:new_national_culture
		}
	}

	scripted_button = je_south_american_national_identity_integrate_a_state

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_populist_unrest = {
	icon = "gfx/interface/icons/invention_icons/nationalism.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		c:BRZ ?= this
		OR = {
			has_technology_researched = socialism
			has_technology_researched = anarchism
			has_technology_researched = corporatism
		}
		has_dlc_feature = rp1_content
	}

	possible = {
		has_technology_researched = political_agitation
		ig:ig_landowners = { 
			is_in_government = yes
			is_strongest_ig_in_government = yes
		}
		ig:ig_petty_bourgeoisie = {
			is_marginal = no
		}
		OR = {
			AND = {
				has_law = law_type:law_monarchy
				custom_tooltip = {
					text = completed_coffee_and_milk_je_tt
					OR = {
						has_variable = completed_coffee_and_milk_je_landowners
						has_journal_entry = je_coffee_with_milk
					}
				}
			}
			has_law = law_type:law_presidential_republic
			has_law = law_type:law_parliamentary_republic
		}
		OR = {
			has_law = law_type:law_wealth_voting
			has_law = law_type:law_landed_voting
		}
	}

	scripted_progress_bar = populist_unrest_progress_bar

	immediate = {
		ig:ig_landowners = {
			save_scope_as = landowners_ig
		}
		ig:ig_petty_bourgeoisie = {
			save_scope_as = pb_ig
		}
		set_populism_vars = yes
		trigger_event = { id = BRZ_populism.1 days = 1 popup = yes }
	}

	on_weekly_pulse = {
		effect = {
			calculate_populism_progress = yes
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = BRZ_populism.2
			10 = BRZ_populism.4
			10 = BRZ_populism.5
			10 = BRZ_populism.6
			100 = BRZ_populism.7
			10 = BRZ_populism.8
			10 = BRZ_populism.9
			10 = bp1_misc.2
		}
	}

	complete = {
		custom_tooltip = {
			text = BRZ_populism_100_tt
			scope:journal_entry = {
				"scripted_bar_progress(populist_unrest_progress_bar)" >= 100
			}
		}
	}

	on_complete = {
		clear_populism_vars = yes
		trigger_event = { id = BRZ_vargas.1 popup = yes }
		show_as_tooltip = {
			activate_law = law_type:law_autocracy
			if = {
				limit = {
					NOT = {
						has_law = law_type:law_presidential_republic
					}
				}
				activate_law = law_type:law_presidential_republic
			}
			add_journal_entry = {
				type = je_new_republic
			}
		}
	}

	fail = {
		custom_tooltip = {
			text = BRZ_populism_0_tt
			scope:journal_entry = {
				"scripted_bar_progress(populist_unrest_progress_bar)" <= 0
			}
		}
	}

	on_fail = {
		clear_populism_vars = yes
		trigger_event = { id = BRZ_populism.3 popup = yes }
	}

	weight = 100

	should_be_pinned_by_default = yes
}

je_new_republic = {
	icon = "gfx/interface/icons/invention_icons/central_planning.dds"

	group = je_group_historical_content

	immediate = {
		ruler = {
			save_scope_as = vargas_scope
			set_character_immortal = yes
			interest_group = {
				save_scope_as = pb_scope
			}
		}
		root = {
			save_scope_as = brazil_scope
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = BRZ_vargas.4
			10 = BRZ_vargas.5
			10 = BRZ_vargas.6
			10 = BRZ_vargas.7
			10 = BRZ_vargas.8
		}
	}

	fail = {
		custom_tooltip = {
			text = vargas_out_tt
			has_variable = new_republic_start
			NOT = {
				ruler = {
					interest_group = {
						is_interest_group_type = ig_petty_bourgeoisie
					}
				}
			}
		}
	}

	on_fail = {
		trigger_event = { id = BRZ_vargas.3 popup = yes }
		hidden_effect = {
			scope:vargas_scope = {
				set_character_immortal = no
			}
		}
	}

	complete = {
		NOT = {
			any_interest_group = {
				is_marginal = no
				leader = {
					has_socialist_ideology = yes
				}
			}
		}
		OR = {
			has_law = law_type:law_regulatory_bodies
			has_law = law_type:law_worker_protections
		}
		has_law = law_type:law_compulsory_primary_school
		has_law = law_type:law_censorship
		has_law = law_type:law_autocracy
		has_law = law_type:law_interventionism
		has_law = law_type:law_presidential_republic
	}

	on_complete = {
		trigger_event = { id = BRZ_vargas.2 popup = yes }
		hidden_effect = {
			scope:vargas_scope = {
				set_character_immortal = no
			}
		}
		set_variable = estado_novo_achievement
	}

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_brazilian_nation_building = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_historical_content

	immediate = {
		cu:brazilian = {
			save_scope_as = brazilian_culture
		}
		cu:paulista = {
			save_scope_as = paulista_culture
		}
		cu:sulista = {
			save_scope_as = sulista_culture
		}
		cu:nordestino = {
			save_scope_as = nordestino_culture
		}
		cu:amazonic = {
			save_scope_as = amazonic_culture
		}
	}

	complete = {
		has_technology_researched = nationalism
		custom_tooltip = {
			text = je_brazilian_nation_building_integrate_nordestino_complete_tt
			has_variable = nordestinos_integrated
		}
		custom_tooltip = {
			text = je_brazilian_nation_building_integrate_sulista_complete_tt
			has_variable = sulistas_integrated
		}
		custom_tooltip = {
			text = je_brazilian_nation_building_integrate_paulista_complete_tt
			has_variable = paulistas_integrated
		}
		custom_tooltip = {
			text = je_brazilian_nation_building_integrate_amazonic_complete_tt
			has_variable = amazonics_integrated
		}
	}

	on_complete = {
		trigger_event = { id = culture_brazil.2 popup = yes }
		show_as_tooltip = {
			add_modifier = {
				name = brz_brasil_brasileiro
				months = long_modifier_time
			}
		}
		if = {
			limit = {
				has_journal_entry = je_pedro_brazil
			}
			add_pedropoint_effect = yes
		}
	}

	timeout = 18262

	on_timeout = {
		trigger_event = { id = culture_brazil.7 popup = yes }
	}

	scripted_button = je_brazilian_nation_building_integrate_nordestino
	scripted_button = je_brazilian_nation_building_integrate_sulista
	scripted_button = je_brazilian_nation_building_integrate_paulista
	scripted_button = je_brazilian_nation_building_integrate_amazonic

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_consolidate_afghanistan = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		has_interest_marker_in_region = region_persia
		country_rank >= rank_value:great_power
		has_dlc_feature = ep1_content
		NOT = {
			has_global_variable = afghan_borders_solidified
		}
	}

	scripted_button = je_consolidate_afghanistan_durand_line
	scripted_button = je_consolidate_afghanistan_indus_line
	scripted_button = je_consolidate_afghanistan_southeast_status_quo
	scripted_button = je_consolidate_afghanistan_torkestan_line
	scripted_button = je_consolidate_afghanistan_amu_darya_line
	scripted_button = je_consolidate_afghanistan_north_status_quo
	scripted_button = je_consolidate_afghanistan_offer_compensation
	scripted_button = je_consolidate_afghanistan_threaten_reprisals
	scripted_button = je_consolidate_afghanistan_approve_of_treaty
	scripted_button = je_consolidate_afghanistan_retract_treaty
	scripted_button = je_consolidate_afghanistan_resolve_southwest_conflict
	scripted_button = je_consolidate_afghanistan_resolve_northern_conflict

	invalid = {
		NOT = {
			exists = c:AFG
		}
	}

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					has_variable = afghan_notification_sender
					scope:gp_scope = {
						has_variable = afghanistan_delimitation_treaty_approved
					}
					scope:rival_gp_scope = {
						has_variable = afghanistan_delimitation_treaty_approved
					}
					c:AFG = {
						NOT = {
							has_variable = received_afghan_border_notification
						}
					}
				}
				if = {
					limit = {
						NOT = { c:AFG ?= { has_variable = afg_proposal_ai_cooldown } }
					}
					c:AFG = {
						trigger_event = { id = gg_afghanistan.1 popup = yes }
					}
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				exists = c:AFG
			}
			c:AFG ?= {
				save_scope_as = afghanistan_scope
			}
		}
		save_scope_as = gp_scope
		if = {
			limit = {
				NOT = {
					any_country = {
						has_variable = afghan_notification_sender
					}
				}
			}
			set_variable = afghan_notification_sender
		}
		if = {
			limit = {
				c:GBR ?= this
				exists = c:RUS
				OR = {
					any_country = {
						is_subject_of = c:RUS
						NOT = {
							c:AFG ?= this
						}
						overlord ?= {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
					c:RUS ?= {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						any_neighbouring_state = {
							c:AFG ?= owner
						}
						NOT = {
							THIS = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					c:RUS = {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						any_neighbouring_state = {
							c:AFG ?= owner
						}
						NOT = {
							THIS = ROOT
						}
					}
				}
				c:RUS = {
					save_scope_as = rival_gp_scope
				}
			}
			else_if = {
				limit = {
					any_country = {
						is_subject_of = c:RUS
						NOT = {
							c:AFG ?= this
						}
						overlord ?= {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
				}
				ordered_country = {
					limit = {
						is_subject_of = c:RUS
						NOT = {
							c:AFG ?= this
						}
						overlord = {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
					order_by = gdp
					overlord = {
						save_scope_as = rival_gp_scope
					}
					save_scope_as = rival_afghan_partition_proxy
				}
			}
		}
		else_if = {
			limit = {
				c:RUS ?= this
				exists = c:GBR
				OR = {
					any_country = {
						is_subject_of = c:GBR
						NOT = {
							c:AFG ?= this
						}
						overlord ?= {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
					c:GBR ?= {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						any_neighbouring_state = {
							c:AFG ?= owner
						}
						NOT = {
							THIS = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					c:GBR = {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						any_neighbouring_state = {
							c:AFG ?= owner
						}
						NOT = {
							THIS = ROOT
						}
					}
				}
				c:GBR = {
					save_scope_as = rival_gp_scope
				}
			}
			else_if = {
				limit = {
					any_country = {
						is_subject_of = c:GBR
						NOT = {
							c:AFG ?= this
						}
						overlord ?= {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
				}
				ordered_country = {
					limit = {
						is_subject_of = c:GBR
						NOT = {
							c:AFG ?= this
						}
						overlord = {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
					order_by = gdp
					overlord = {
						save_scope_as = rival_gp_scope
					}
					save_scope_as = rival_afghan_partition_proxy
				}
			}
		}
		else = {
			if = {
				limit = {
					any_country = {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						any_neighbouring_state = {
							c:AFG ?= owner
						}
						NOT = {
							THIS = ROOT
						}
					}
				}
				random_country = {
					limit = {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						any_neighbouring_state = {
							c:AFG ?= owner
						}
						NOT = {
							THIS = ROOT
						}
					}
					save_scope_as = rival_gp_scope
				}
			}
			else_if = {
				limit = {
					any_country = {
						is_subject = yes
						NOT = {
							c:AFG ?= this
						}
						overlord ?= {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
				}
				ordered_country = {
					limit = {
						is_subject = yes
						NOT = {
							c:AFG ?= this
						}
						overlord = {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
					order_by = gdp
					overlord = {
						save_scope_as = rival_gp_scope
					}
					save_scope_as = rival_afghan_partition_proxy
				}
			}
		}

		if = {
			limit = {
				any_country = {
					is_subject_of = ROOT
					NOT = {
						c:AFG ?= this
					}
					any_neighbouring_state = {
						c:AFG ?= owner
					}
				}
			}
			ordered_country = {
				limit = {
					is_subject_of = ROOT
					NOT = {
						c:AFG ?= this
					}
					any_neighbouring_state = {
						c:AFG ?= owner
					}
				}
				order_by = gdp
				save_scope_as = afghan_partition_proxy
			}
		}
	}
	
	possible = {
		custom_tooltip = {
			text = afghanistan_exists_tt
			exists = c:AFG
		}
		custom_tooltip ={
			text = state_is_bordering_afghanistan_tt
			OR = {
				any_scope_state = {
					OR = {
						region = sr:region_central_asia
						region = sr:region_north_india
					}
					any_neighbouring_state = {
						c:AFG ?= owner
					}
				}
				any_country = {
					is_subject_of = ROOT
					NOT = {
						c:AFG ?= this
					}
					any_scope_state = {
						OR = {
							region = sr:region_central_asia
							region = sr:region_north_india
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
				}
			}
		}
		custom_tooltip = {
			text = is_bordering_afghanistan_tt
			any_country = {
				OR = {
					THIS = ROOT
					is_subject_of = ROOT
				}
				NOT = {
					c:AFG ?= this
				}
				any_neighbouring_state = {
					c:AFG ?= owner
				}
			}
		}
		custom_tooltip = {
			text = another_gp_is_bordering_afghanistan_tt
			OR = {
				any_country = {
					country_rank >= rank_value:great_power
					NOT = {
						THIS = ROOT
					}
					has_interest_marker_in_region = region_persia
					any_scope_state = {
						OR = {
							region = sr:region_central_asia
							region = sr:region_north_india
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
				}
				any_country = {
					is_subject = yes
					NOT = {
						c:AFG ?= this
					}
					overlord ?= {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						NOT = {
							THIS = ROOT
						}
					}
					any_scope_state = {
						OR = {
							region = sr:region_central_asia
							region = sr:region_north_india
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
				}
			}
		}
	}

	complete = {
		trigger_if = {
			limit = {
				exists = scope:gp_scope								
			}
			custom_tooltip = {
				text = first_gp_approves_tt
				scope:gp_scope ?= {
					has_variable = afghanistan_delimitation_treaty_approved
				}	
			}
		}
		trigger_if = {
			limit = {
				exists = scope:rival_gp_scope
			}
			custom_tooltip = {
				text = second_gp_approves_tt
				scope:rival_gp_scope ?= {
					has_variable = afghanistan_delimitation_treaty_approved
				}
			}
		}
		trigger_if = {
			limit = {
				exists = scope:afghanistan_scope
			}
			custom_tooltip = {
				text = afghanistan_approves_tt
				c:AFG = {
					has_variable = afghanistan_delimitation_treaty_approved
				}
			}
		}
	}

	on_complete = {
		if = {
			limit = {
				exists = c:AFG
			}
			custom_tooltip = {
				text = afghanistan_abandon_claims_tt
				every_state = {
					limit = {
						has_claim_by = c:AFG
					}
					state_region = {
						remove_claim = c:AFG
					}
				}
			}
		}
		if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_durand_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = scope:rival_gp_scope
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_indus_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
						NOT = {
							state_region = {
								is_homeland = cu:pashtun
							}
						}
					}
					set_state_owner = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
						NOT = {
							state_region = {
								is_homeland = cu:pashtun
							}
						}
					}
					set_state_owner = scope:rival_gp_scope
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_status_quo
				}
			}
			custom_tooltip = status_quo_southeast_tt
		}

		if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_torkestan_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
					}
					set_state_owner = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
					}
					set_state_owner = scope:rival_gp_scope
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_amu_darya_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
					}
					set_state_owner = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
					}
					set_state_owner = scope:rival_gp_scope
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_status_quo_north
				}
			}
			custom_tooltip = status_quo_north_tt
		}
		if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_compensation_for_afghanistan
				}
			}
			scope:rival_gp_scope ?= {
				create_diplomatic_pact = {
					country = c:AFG
					type = bankroll
				}
				set_variable = { name = forced_bankroll_time value = c:AFG months = 24 }
			}
		}
		if = {
			limit = {
				ROOT = {
					has_variable = proposed_durand_line
				}
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = ROOT
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_indus_line
				}
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
					}
					set_state_owner = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
					}
					set_state_owner = ROOT
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_status_quo
				}
			}
			custom_tooltip = status_quo_southeast_tt
		}

		if = {
			limit = {
				has_variable = proposed_torkestan_line
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
					}
					set_state_owner = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
					}
					set_state_owner = ROOT
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_amu_darya_line
				}
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
					}
					set_state_owner = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
					}
					set_state_owner = ROOT
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_status_quo_north
				}
			}
			custom_tooltip = status_quo_north_tt
		}
		if = {
			limit = {
				ROOT = {
					has_variable = proposed_compensation_for_afghanistan
				}
			}
			create_diplomatic_pact = {
				country = c:AFG
				type = bankroll
			}
			set_variable = { name = forced_bankroll_time value = c:AFG months = 24 }
		}
		set_global_variable = afghan_borders_solidified
		hidden_effect = {
			clear_afghanistan_variables = yes
		}
	}

	timeout = 365

	on_timeout = {
		custom_tooltip = {
			text = negotiations_failure_tt

		}
		if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_durand_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = scope:rival_afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:rival_afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = scope:rival_gp_scope
						}
					}
					state_region = {
						add_claim = scope:rival_gp_scope
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_indus_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
						NOT = {
							has_claim_by = scope:rival_afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:rival_afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
						NOT = {
							has_claim_by = scope:rival_gp_scope
						}
					}
					state_region = {
						add_claim = scope:rival_gp_scope
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_status_quo
				}
			}
			custom_tooltip = status_quo_southeast_tt
		}

		if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_torkestan_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
						NOT = {
							has_claim_by = scope:rival_afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:rival_afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
						NOT = {
							has_claim_by = scope:rival_gp_scope
						}
					}
					state_region = {
						add_claim = scope:rival_gp_scope
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_amu_darya_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
						NOT = {
							has_claim_by = scope:rival_afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:rival_afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
						NOT = {
							has_claim_by = scope:rival_gp_scope
						}
					}
					state_region = {
						add_claim = scope:rival_gp_scope
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_status_quo_north
				}
			}
			custom_tooltip = status_quo_north_tt
		}
		if = {
			limit = {
				ROOT = {
					has_variable = proposed_durand_line
				}
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = scope:afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = ROOT
						}
					}
					state_region = {
						add_claim = ROOT
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_indus_line
				}
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
						NOT = {
							has_claim_by = scope:afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
						NOT = {
							has_claim_by = ROOT
						}
					}
					state_region = {
						add_claim = ROOT
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_status_quo
				}
			}
			custom_tooltip = status_quo_southeast_tt
		}

		if = {
			limit = {
				has_variable = proposed_torkestan_line
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
						NOT = {
							has_claim_by = scope:afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
						NOT = {
							has_claim_by = ROOT
						}
					}
					state_region = {
						add_claim = ROOT
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_amu_darya_line
				}
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
						NOT = {
							has_claim_by = scope:afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
						NOT = {
							has_claim_by = ROOT
						}
					}
					state_region = {
						add_claim = ROOT
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		
		hidden_effect = {
			clear_afghanistan_variables = yes
		}
	}

	weight = 1001
}

je_unify_afghanistan = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

	scripted_button = je_afghan_unification_appeal_to_russia_button
	scripted_button = je_afghan_unification_appeal_to_britain_button

	possible = {
		capital ?= {
			region = sr:region_persia
		}
		OR = {
			country_has_primary_culture = cu:pashtun
			country_has_primary_culture = cu:tajik
		}
	}

	complete = {
		custom_tooltip = {
			text = has_formed_afghanistan_tt
			c:AFG ?= this
		}
	}
	
	on_complete = {

	}
		
	weight = 1000
}

﻿je_donghak_movement = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_historical_content

	modifiers_while_active = {
		modifier_donghak_movement
	}

	is_shown_when_inactive = {
		country_has_primary_culture = cu:korean
		has_technology_researched = egalitarianism
		has_dlc_feature = ep1_content
	}

	possible = {
		has_technology_researched = human_rights
		NOT = {
			has_law = law_type:law_isolationism
		}
		any_power_bloc = {
			power_bloc_leader = {
				country_is_in_europe = yes
			}
			leverage_advantage = { target = ROOT value > 0 }
		}
		radical_fraction = {
			value >= 0.1
		}
	}

	immediate = {
		ig:ig_rural_folk = {
			save_scope_as = donghak_ig
		}
		trigger_event = { id = gg_korea.1 popup = yes }
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = gg_korea.4
		}
	}

	complete = {
		OR = {
			radical_fraction = {
				value <= 0.05
			}
			custom_tooltip = {
				text = donghak_petition_complete_tt
				has_variable = donghak_petition_complete
			}
		}
	}

	on_complete = {
		show_as_tooltip = {
			remove_modifier = modifier_donghak_movement
		}
	}

	fail = {
		any_political_movement = {
			is_revolutionary_movement = yes
			any_supporting_interest_group = {
				is_interest_group_type = ig_rural_folk
			}
		}
	}

	on_fail = {
		trigger_event = { id = gg_korea.2 popup = yes }
	}

	weight = 1000
}

je_gyojo_shinwon = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_crises

	# Added by event

	timeout = 3650

	modifiers_while_active = {
		modifier_donghak_petition_accepted
	}

	immediate = {
		ig:ig_rural_folk = {
			save_scope_as = donghak_ig
		}
		ig:ig_landowners = {
			save_scope_as = yangban_ig
		}
		random_law = {
			limit = {
				type = law_type:law_isolationism
			}
			save_scope_as = donghak_desired_law_1
		}
		random_law = {
			limit = {
				type = law_type:law_freedom_of_conscience
			}
			save_scope_as = donghak_desired_law_2
		}
		random_law = {
			limit = {
				type = law_type:law_total_separation
			}
			save_scope_as = donghak_desired_law_3
		}
	}

	complete = {
		has_law = law_type:law_isolationism
		NOT = {
			has_law = law_type:law_state_religion
		}
		ig:ig_landowners = {
			is_powerful = no
			is_in_government = no
		}
	}

	on_complete = {
		trigger_event = { id = gg_korea.5 popup = yes }
        hidden_effect = {
            set_variable = hermit_kingdom_achievement
        }
	}

	fail = {
		any_political_movement = {
			is_revolutionary_movement = yes
			any_supporting_interest_group = {
				is_interest_group_type = ig_rural_folk
			}
		}
	}

	on_timeout = {
		trigger_event = { id = gg_korea.6 popup = yes }
	}

	weight = 1000
}

je_korean_rebellion = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	group = je_group_crises

	# Added by event

	immediate = {
		c:KOR = {
			save_scope_as = korea_scope
			ruler = {
				save_scope_as = korea_ruler_scope
			}
		}
		random_country = {
			limit = {
				civil_war_origin_country = scope:korea_scope
			}
			save_scope_as = korea_rebellion_scope
		}
	}

	complete = {
		trigger_if = {
			limit = {
				has_variable = sided_with_korean_gov
			}
			scope:korea_scope = {
				has_revolution = no
				custom_tooltip = {
					text = korean_ruler_retained_tt
					scope:korea_ruler_scope = {
						is_ruler = yes
					}
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = sided_with_korean_rebels
			}
			scope:korea_scope = {
				has_revolution = no
				custom_tooltip = {
					text = korean_ruler_deposed_tt
					NOT = {
						scope:korea_ruler_scope ?= {
							is_ruler = yes
						}
					}
				}
			}
		}
	}

	on_complete = {
		if = {
			limit = {
				c:JAP ?= this
				c:KOR ?= {
					is_subject = yes
					overlord ?= {
						OR = {
							country_has_primary_culture = cu:han
							country_has_primary_culture = cu:manchu
						}
					}
				}
			}
			custom_tooltip = {
				text = japan_demands_korea_tt
				trigger_event = { id = gg_korea.8 days = 7 popup = yes}
			}
		}
		add_modifier = {
			name = modifier_victory_in_korean_intervention
			months = long_modifier_time
		}
	}

	fail = {
		trigger_if = {
			limit = {
				has_variable = sided_with_korean_gov
				scope:korea_scope = {
					has_revolution = yes
				}
			}
			scope:korea_rebellion_scope = {
				custom_tooltip = {
					text = korea_fail_condition_war_tt
					has_war_with = scope:korea_scope
				}
				custom_tooltip = {
					text = korea_fail_condition_gov_tt
					NOT = {
						is_diplomatic_play_enemy_of = ROOT
					}
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = sided_with_korean_rebels
				scope:korea_scope = {
					has_revolution = yes
				}
			}
			scope:korea_scope = {
				custom_tooltip = {
					text = korea_fail_condition_war_tt
					has_war_with = scope:korea_rebellion_scope
				}
				custom_tooltip = {
					text = korea_fail_condition_rebels_tt
					NOT = {
						is_diplomatic_play_enemy_of = ROOT
					}
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = sided_with_korean_gov
				scope:korea_scope = {
					has_revolution = no
				}
			}
			scope:korea_scope = {
				has_revolution = no
				custom_tooltip = {
					text = korean_ruler_deposed_tt
					NOT = {
						scope:korea_ruler_scope ?= {
							is_ruler = yes
						}
					}
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = sided_with_korean_rebels
				scope:korea_scope = {
					has_revolution = no
				}
			}
			scope:korea_scope = {
				has_revolution = no
				custom_tooltip = {
					text = korean_ruler_retained_tt
					scope:korea_ruler_scope ?= {
						is_ruler = yes
					}
				}
			}
		}
	}

	on_fail = {
		add_modifier = {
			name = modifier_failed_korean_intervention
			months = normal_modifier_time
		}
	}

	weight = 1000
}

﻿je_pro_lobby_opportunity = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/relations_icons/friendly.dds"

	group = je_group_crises

	timeout = 1825

	immediate = {
		random_political_lobby = {
			limit = {
				target = scope:target
				is_political_lobby_type = lobby_pro_country
			}
			save_scope_as = relevant_lobby
			target = {
				save_scope_as = relevant_country
			}
		}
		ROOT = {
			set_variable = { name = pro_lobby_opportunity_target value = scope:target }
		}
	}

	complete = {
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_defensive_pact
			}
			has_diplomatic_pact = {
				who = scope:target
				type = defensive_pact
			}
		}
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_alliance
			}
			has_diplomatic_pact = {
				who = scope:target
				type = alliance
			}
		}
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_trade_agreement
			}
			has_diplomatic_pact = {
				who = scope:target
				type = trade_agreement
			}
		}
		trigger_if = {
			limit = {
				OR = {
					has_variable = pro_lobby_proposal_power_bloc
				}
			}
			scope:target = {
				is_power_bloc_leader = yes
			}
			is_in_same_power_bloc = scope:target
		}
		trigger_if = {
			limit = {
				OR = {
					has_variable = pro_lobby_proposal_power_bloc_invite
				}
			}
			is_power_bloc_leader = yes
			is_in_same_power_bloc = scope:target
		}
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_investment_agreement
			}
			OR = {
				has_diplomatic_pact = {
					who = scope:target
					type = foreign_investment_agreement
				}
				has_diplomatic_pact = {
					who = scope:target
					type = foreign_investment_rights
				}
			}
		}
	}

	invalid = {
		NOT = {
			exists = scope:target
		}
	}

	on_complete = {
		clear_pro_lobby_vars = yes
	}

	on_timeout = {
		clear_pro_lobby_vars = yes
	}

	weight = 1000
}

je_anti_lobby_opportunity = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/relations_icons/friendly.dds"

	group = je_group_crises

	timeout = 1825

	immediate = {
		random_political_lobby = {
			limit = {
				target = scope:target
				is_political_lobby_type = lobby_anti_country
			}
			save_scope_as = relevant_lobby
			target = {
				save_scope_as = relevant_country
			}
		}
		var:anti_lobby_third_party_var = {
			save_scope_as = third_party_country
		}
		ROOT = {
			set_variable = { name = anti_lobby_opportunity_target value = scope:third_party_country }
		}
	}

	complete = {
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_defensive_pact
			}
			has_diplomatic_pact = {
				who = scope:third_party_country
				type = defensive_pact
			}
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_alliance
			}
			has_diplomatic_pact = {
				who = scope:third_party_country
				type = alliance
			}
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_trade_agreement
			}
			has_diplomatic_pact = {
				who = scope:third_party_country
				type = trade_agreement
			}
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_power_bloc
			}
			scope:third_party_country = {
				is_power_bloc_leader = yes
			}
			is_in_same_power_bloc = scope:third_party_country
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_power_bloc_invite
			}
			is_power_bloc_leader = yes
			is_in_same_power_bloc = scope:third_party_country
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_investment_agreement
			}
			OR = {
				has_diplomatic_pact = {
					who = scope:target
					type = foreign_investment_agreement
				}
				has_diplomatic_pact = {
					who = scope:target
					type = foreign_investment_rights
				}
			}
		}
	}
	
	invalid = {
		NOT = {
			exists = scope:third_party_country
		}
	}

	on_complete = {
		clear_anti_lobby_vars = yes
	}

	on_timeout = {
		clear_anti_lobby_vars = yes
	}

	weight = 1000
}

je_pro_lobby_demand = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/relations_icons/hostile.dds"

	group = je_group_crises

	timeout = 1825

	immediate = {
		random_political_lobby = {
			limit = {
				target = scope:target
				is_political_lobby_type = lobby_pro_country
			}
			save_scope_as = relevant_lobby
			target = {
				save_scope_as = relevant_country
			}
		}
		var:pro_lobby_third_party_var = {
			save_scope_as = third_party_country
		}
		ROOT = {
			set_variable = { name = pro_lobby_demand_target value = scope:third_party_country }
		}
	}

	complete = {
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_break_alliance
			}
			NOT = {
				has_diplomatic_pact = {
					who = scope:third_party_country
					type = alliance
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_break_defensive_pact
			}
			NOT = {
				has_diplomatic_pact = {
					who = scope:third_party_country
					type = defensive_pact
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_break_trade_agreement
			}
			NOT = {
				has_diplomatic_pact = {
					who = scope:third_party_country
					type = trade_agreement
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_embargo
			}
			has_diplomatic_pact = {
				who = scope:third_party_country
				type = embargo
				is_initiator = yes
			}
		}
		trigger_else_if = {
			limit = {
				has_variable = pro_lobby_proposal_rivalry
			}
			has_diplomatic_pact = {
				who = scope:third_party_country
				type = rivalry
				is_initiator = yes
			}
		}
		trigger_else_if = {
			limit = {
				has_variable = pro_lobby_proposal_war
			}
			OR = {
				has_war_with = scope:third_party_country
				custom_tooltip = {
					text = enforced_wargoal_on_rival_2_tt
					has_variable = enforced_wargoal_on_enemy
				}
			}
		}
		trigger_else_if = {
			limit = {
				has_variable = pro_lobby_proposal_leave_power_bloc
			}
			NOT = {
				is_in_same_power_bloc = scope:third_party_country
			}
		}
	}

	invalid = {
		NOT = {
			exists = scope:third_party_country
		}
	}

	on_complete = {
		scope:relevant_lobby = {
			change_appeasement = {
				amount = 3
				factor = appeasement_lobby_request_accepted
			}
		}
		clear_pro_lobby_vars = yes
	}

	on_timeout = {
		scope:relevant_lobby = {
			change_appeasement = {
				amount = -5
				factor = appeasement_lobby_request_ignored
			}
		}
		clear_pro_lobby_vars = yes
	}

	weight = 1000
}

je_anti_lobby_demand = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/relations_icons/hostile.dds"

	group = je_group_crises

	timeout = 1825

	immediate = {
		random_political_lobby = {
			limit = {
				target = scope:target
				is_political_lobby_type = lobby_anti_country
			}
			save_scope_as = relevant_lobby
			target = {
				save_scope_as = relevant_country
			}
		}
		ROOT = {
			set_variable = { name = anti_lobby_demand_target value = scope:target }
		}
	}

	complete = {
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_break_alliance
			}
			NOT = {
				has_diplomatic_pact = {
					who = scope:target
					type = alliance
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_break_defensive_pact
			}
			NOT = {
				has_diplomatic_pact = {
					who = scope:target
					type = defensive_pact
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_break_trade_agreement
			}
			NOT = {
				has_diplomatic_pact = {
					who = scope:target
					type = trade_agreement
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_embargo
			}
			has_diplomatic_pact = {
				who = scope:target
				type = embargo
				is_initiator = yes
			}
		}
		trigger_else_if = {
			limit = {
				has_variable = anti_lobby_proposal_rivalry
			}
			has_diplomatic_pact = {
				who = scope:target
				type = rivalry
				is_initiator = yes
			}
		}
		trigger_else_if = {
			limit = {
				has_variable = anti_lobby_proposal_war
			}
			OR = {
				has_war_with = scope:target
				custom_tooltip = {
					text = enforced_wargoal_on_rival_tt
					has_variable = enforced_wargoal_on_enemy
				}
			}
		}
		trigger_else_if = {
			limit = {
				has_variable = anti_lobby_proposal_leave_power_bloc
			}
			NOT = {
				is_in_same_power_bloc = scope:target
			}
		}
	}
	
	invalid = {
		NOT = {
			exists = scope:target
		}
	}

	on_complete = {
		scope:relevant_lobby = {
			change_appeasement = {
				amount = 3
				factor = appeasement_lobby_request_accepted
			}
		}
		clear_anti_lobby_vars = yes
	}

	on_timeout = {
		scope:relevant_lobby = {
			change_appeasement = {
				amount = -5
				factor = appeasement_lobby_request_ignored
			}
		}
		clear_anti_lobby_vars = yes
	}

	weight = 1000
}
﻿je_earn_recognition = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		is_country_type = unrecognized
	}

	possible = {
		is_country_type = unrecognized
		has_technology_researched = colonization
		OR = {
			country_rank >= rank_value:unrecognized_major_power
			any_overlord_or_above = {
				country_rank >= rank_value:great_power
			}
		}
	}

	immediate = {
		set_variable = {
			name = recognition_progress_var
			value = 0
		}
	}

	complete = {
		any_country = {
			country_rank >= rank_value:great_power
			relations:root >= relations_threshold:amicable
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_earn_recognition_tt
			trigger_event = { id = earn_recognition_events.1 days = 0 popup = yes }
		}
		show_as_tooltip = {
			set_country_type = recognized
		}
	}

	fail = {
	}

	on_fail = {
	}

	on_monthly_pulse = {
		effect = {
			# Wargoal enforced scores are handled in the on_wargoal_enforced on_action
			# Advance Conditions
			if = {
				limit = {
					# Your GDP per Capita is relatively high
					gdp_per_capita_ranking <= 20
				}
				change_variable = {
					name = recognition_progress_var
					add = 1
				}
			}
			if = {
				limit = {
					# Your Standard of Living is relatively high
					sol_ranking <= 20
				}
				change_variable = {
					name = recognition_progress_var
					add = 1
				}
			}			
			if = {
				limit = {
					# Country has voting rights
					country_has_voting_franchise = yes
				}
				change_variable = {
					name = recognition_progress_var
					add = 1
				}
			}
			if = {
				limit = {
					# Literacy rating is high-isch
					literacy_rate >= 0.4
				}
				change_variable = {
					name = recognition_progress_var
					add = 1
				}
			}
			# Deplete Conditions
			if = {
				limit = {
					# Slavery is legal
					NOT = {
						has_law = law_type:law_slavery_banned
					}
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			if = {
				limit = {
					# Serfdom is legal
					has_law = law_type:law_serfdom
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			if = {
				limit = {
					# Traditional economic system
					has_law = law_type:law_traditionalism
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			if = {
				limit = {
					# 'Draconic' law
					has_law = law_type:law_outlawed_dissent
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			if = {
				limit = {
					# Literacy rating is low
					literacy_rate <= 0.2
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			if = {
				limit = {
					# Your GDP per Capita is relatively low
					gdp_per_capita_ranking >= 50
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			if = {
				limit = {
					# Your Standard of Living is relatively low
					sol_ranking >= 50
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			clamp_variable = { name = recognition_progress_var max = 200 min = 0 }
		}
	}

	current_value = {
		value = root.var:recognition_progress_var
	}

	goal_add_value = {
		value = 200
	}

	progressbar = yes

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_reunify_china = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/invention_icons/wargaming.dds"

	group = je_group_foreign_affairs

	modifiers_while_active = {
		modifier_chinese_warlord_era
	}

	is_shown_when_inactive = {
		has_global_variable = china_shatters
	}

	possible = {
		custom_tooltip = {
			text = china_shattered_tt
			has_global_variable = china_shatters
		}
		OR = {
			country_has_primary_culture = cu:han
			country_has_primary_culture = cu:manchu
		}
	}

	complete = {
		trigger_if = {
			limit = {
				global_var:chinese_central_government ?= this
			}
			custom_tooltip = {
				text = no_independent_chinese_countries_tt
				any_country = {
					filter = {
						OR = {
							any_primary_culture = {
								has_discrimination_trait = han_chinese
							}
							country_has_primary_culture = cu:yi
							country_has_primary_culture = cu:manchu
						}
						OR = {
							capital.region = sr:region_north_china
							capital.region = sr:region_south_china
							capital.region = sr:region_manchuria
							capital.region = sr:region_central_asia
							capital.region = sr:region_himalayas
						}
					}
					OR = {
						THIS = ROOT
						is_subject_of = ROOT
					}
					percent = 1
				}
			}
		}
		trigger_else = {
			trigger_if = {
				limit = {
					global_var:chinese_central_government ?= {
						is_country_alive = yes
					}
				}
				custom_tooltip = {
					text = central_government_defeated_tt
					OR = {
						NOT = {
							exists = global_var:chinese_central_government
						}
						global_var:chinese_central_government ?= {
							is_country_alive = no
						}
					}
				}
			}
			custom_tooltip = {
				text = no_independent_chinese_countries_tt
				any_country = {
					filter = {
						OR = {
							any_primary_culture = {
								has_discrimination_trait = han_chinese
							}
							country_has_primary_culture = cu:yi
							country_has_primary_culture = cu:manchu
						}
						OR = {
							capital.region = sr:region_north_china
							capital.region = sr:region_south_china
							capital.region = sr:region_manchuria
							capital.region = sr:region_central_asia
							capital.region = sr:region_himalayas
						}
					}
					OR = {
						THIS = ROOT
						is_subject_of = ROOT
					}
					percent = 1
				}
			}
		}
		OR = {
			owns_entire_state_region = STATE_NANJING
			owns_entire_state_region = STATE_BEIJING
		}
		custom_tooltip = {
			text = has_formed_china_tt
			c:CHI ?= this
		}
		NOT = {
			has_law = law_type:law_peasant_levies
		}
	}
	
	on_complete = {
		remove_global_variable = chinese_central_government
		trigger_event = { id = warlord_china_events.101 popup = yes }
	}
		
	weight = 1000
}
﻿je_unite_the_nations = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_foreign_affairs

	scripted_button = je_unite_the_nations_proclaim_turtle_island_button
    scripted_button = je_unite_the_nations_organize_the_tribes_button
    scripted_button = je_unite_the_nations_offer_confederation_button

	is_shown_when_inactive = {
		NOT = { is_country_type = decentralized }
		country_is_in_north_america = yes
		any_primary_culture = {
			has_discrimination_trait = indigenous_american_heritage
		}
		OR = {
			NOT = {
				exists = c:TIS
			}
			AND = {
				exists = c:TIS
				c:TIS = this
			}
		}
	}

	possible = {
		is_subject = no
	}

	complete = {
		custom_tooltip = {
			text = je_unite_the_nations_complete_tt
			NOT = { 
				any_country = { 
					country_is_in_north_america = yes 
					is_country_type = decentralized 
					any_primary_culture = {
						shares_heritage_trait_with_any_primary_culture = ROOT
					}
				} 
			}
		}
        any_scope_state = {
            owner = root
            is_homeland_of_country_cultures = ROOT
            count >= 5
        }
	}

	on_complete = {
		if = {
			limit = { is_country_type = unrecognized }
			set_country_type = recognized
		}
		add_modifier = {
			name = turtle_island_state_of_nations
			months = -1 # FOREVER
		}
	}

	fail = {
	}

	on_fail = {
	}

	on_monthly_pulse = {
	}
	on_yearly_pulse = {
	}

	#current_value = {
	#}

	#goal_add_value = {
	#	value = 120
	#}

	#progressbar = yes

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_seminole_wars = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	complete = {
		owns_entire_state_region = STATE_FLORIDA
		NOT = { exists = c:SML }
	}

	on_complete = {
		show_as_tooltip = {
			if = {
				limit = {
					c:SEQ ?= { is_subject_of = c:USA }
					exists = s:STATE_OKLAHOMA.region_state:SEQ
				}
				custom_tooltip = {
					text = je_seminole_wars_removal
					s:STATE_FLORIDA.region_state:USA ?= {
						every_scope_pop = {
							limit = {
								culture = cu:muskogean
							}
							move_pop = s:STATE_OKLAHOMA.region_state:SEQ
						}
					}
				}
			}
			else = {
				s:STATE_FLORIDA.region_state:USA ?= {
					add_modifier = {
						name = florida_resettlement
						months = long_modifier_time
					}
				}
			}
		}
		trigger_event = { id = native_resettlement.7 }
	}

	immediate = {
		c:SML = {
			save_scope_as = seminoles
		}
		cu:muskogean = {
			save_scope_as = seminole_peoples
		}
		s:STATE_OKLAHOMA = {
			save_scope_as = oklahoma_region
		}
		c:SEQ = {
			save_scope_as = indian_territory
		}
		s:STATE_FLORIDA.region_state:USA = {
			save_scope_as = flarda
		}
	}

	fail = {
		OR = {
			c:SML ?= {
				owns_entire_state_region = STATE_FLORIDA
			}
			c:MSC ?= {
				owns_entire_state_region = STATE_FLORIDA
			}
		}
	}

	on_fail = {
		s:STATE_FLORIDA = {
			remove_claim = c:USA
		}
	}

	on_monthly_pulse = {
	}
	on_yearly_pulse = {
	}

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_tibet_expedition = {
	
	group = je_group_objectives

	progressbar = yes

	on_monthly_pulse = {
		random_events = {
			chance_of_no_event = 66
			
			# Phase I: Preparations
			10 = tibet_expedition_events.4
			10 = tibet_expedition_events.5
			10 = tibet_expedition_events.6
			10 = tibet_expedition_events.7
			10 = tibet_expedition_events.29

			# Triggers Phase II
			10 = tibet_expedition_events.8
			# 9 and 10 are triggered by 8
			# 11 is also triggered by 8
			# 12 and 13 are triggered by 11

			# Phase II: Incursion
			10 = tibet_expedition_events.14
			10 = tibet_expedition_events.18
			10 = tibet_expedition_events.19

			# Phase III: "Negotiation"
			10 = tibet_expedition_events.20
		}
	}
	
	immediate = {
		c:TIB = {
			save_scope_as = tibet_scope
			if = {
				limit = {
					is_subject = yes
				}
				top_overlord = {
					save_scope_as = tibetan_overlord
				}
			}
			random_scope_state = {
				limit = { is_capital = yes }
				save_scope_as = current_expedition_location # needs to be saved as this to be compatible with generic events
			}
		}
		save_scope_as = expedition_country # redundant, but redundancy saves lives. and errors.
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			save_scope_as = expedition_leader
		}

		set_variable = { name = tibet_expedition_progress_var value = 0 }
		set_variable = on_expedition
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = tibet_expedition_surveying
				trigger = {
					exists = var:tibet_expedition_progress_var
					var:tibet_expedition_progress_var < 3	
				}
			}
			triggered_desc = {
				desc = tibet_expedition_incursion
				trigger = {
					exists = var:tibet_expedition_progress_var
					var:tibet_expedition_progress_var <= 4		
					NOT = { has_variable = ultimatum_sent }
				}
			}
			triggered_desc = {
				desc = tibet_expedition_negotiation
				trigger = {
					has_variable = ultimatum_sent
				}
			}
		}
	}
	
    complete = {
		custom_tooltip = {
			text = je_tibet_expedition_success_tt
			OR = {
				AND = {
					has_variable = tibet_has_concluded
					scope:journal_entry = {
						is_goal_complete = yes
					}
				}
				c:TIB ?= {
					is_direct_subject_of = ROOT
				}
			}
		}
    }
	
	on_complete = {
		custom_tooltip = {
			text = je_tibet_expedition_success_event_tt
		}
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
		remove_variable = on_expedition
		remove_variable = tibet_expedition_var
		remove_variable = tibet_has_started
		remove_variable = lhasa_approached
		remove_variable = entered_into_tibet
		remove_variable = tibet_has_concluded
		remove_modifier = modifier_large_expedition_cost
		set_global_variable = tibet_expedition_completed
		remove_variable = tibet_expedition_progress_var

		if = {
			limit = {
				has_journal_entry = je_great_game_control
				c:GBR ?= this
			}
			great_game_britain_progress_10 = yes
		}
		if = {
			limit = {
				has_journal_entry = je_great_game_control
				c:RUS ?= this
			}
			great_game_russia_progress_10 = yes
		}
	}

	timeout = 1825 # five years

	on_timeout = {
		remove_variable = tibet_expedition_progress_var
		remove_variable = on_expedition
		remove_variable = tibet_expedition_var
		remove_variable = tibet_has_started
		remove_variable = lhasa_approached
		remove_variable = entered_into_tibet
		remove_variable = tibet_has_concluded # strange if this happened but just in case
		remove_modifier = modifier_large_expedition_cost
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
		if = {
			limit = {
				has_variable = received_subjugation_refusal_var
			}
			remove_variable = received_subjugation_refusal_var
		}
		add_modifier = {
			name = tibetan_fiasco
			months = normal_modifier_time
		}
	}
    
    fail = {
		custom_tooltip = {
			text = je_tibet_expedition_failure_tt
			OR = {
				has_global_variable = tibet_expedition_completed
				NOT = { exists = c:TIB }
				NOT = {
					any_scope_character = {
						has_variable = expedition_leader_var
					}
				}
				trigger_if = {
					limit = {
						exists = c:TIB
					}
					has_war_with = c:TIB
				}
				has_variable = received_subjugation_refusal_var
			}
		}
    }
	
	on_fail = {
		remove_variable = tibet_expedition_progress_var
		remove_variable = on_expedition
		remove_variable = tibet_expedition_var
		remove_variable = tibet_has_started
		remove_variable = lhasa_approached
		remove_variable = entered_into_tibet
		remove_variable = tibet_has_concluded # strange if this happened but just in case
		remove_modifier = modifier_large_expedition_cost
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
		if = {
			limit = {
				has_variable = received_subjugation_refusal_var
			}
			remove_variable = received_subjugation_refusal_var
		}
		add_modifier = {
			name = tibetan_fiasco
			months = normal_modifier_time
		}
	}
	
	current_value = {
		if = {
			limit = {
				has_variable = tibet_expedition_progress_var
			}
			value = var:tibet_expedition_progress_var
		}	
	}

	goal_add_value = {
		add = 6
	}
	
	progressbar = yes
	
    weight = 200
    transferable = no
    should_be_pinned_by_default = yes
}

﻿je_law_imposition = {
    icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_foreign_affairs
    
    immediate = {
		save_scope_as = country_imposed_upon
		imposed_law = {
			save_scope_as = foreign_imposition_law
		}
		imposer_of_law = {
			save_scope_as = foreign_imposition_country
		}
		remove_modifier = impose_law_cooldown 			# the cooldown variable is replicated in this journal entry
		scope:journal_entry = {
			add_modifier = foreign_legislative_interference
		}
	}
	
	modifiers_while_active = { 
		impose_law_cooldown
	}
	
	scripted_button = button_implement_law_imposition
	scripted_button = button_refuse_law_imposition
	
    status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_law_imposition_status_enacting
				trigger = { currently_enacting_law = scope:foreign_imposition_law }
			}
			triggered_desc = {
				desc = je_law_imposition_status_not_yet_enacting
			}
		}
	}

	on_weekly_pulse = {
		effect = {
			if = {
				limit = { 
					scope:journal_entry = { NOT = { has_variable = notification_sent_var } } 
					currently_enacting_law = scope:foreign_imposition_law
				}
				imposer_of_law = { post_notification = imposition_started }
				scope:journal_entry = { set_variable = notification_sent_var }
			}
		}
	}

    complete = {
        has_law = scope:foreign_imposition_law.type
    }

    on_complete = {
		change_relations = {
			country = scope:foreign_imposition_country
			value = 20
		}
		
		every_political_lobby = {
			limit = { pro_foreign_imposition_country = yes }
			change_appeasement = { amount = 1 factor = appeasement_imposed_law_enacted }
		}
		every_political_lobby = {
			limit = { anti_foreign_imposition_country = yes }
			change_appeasement = { amount = -1 factor = appeasement_imposed_law_enacted }
		}
        add_modifier = {
            name = successfully_met_foreign_imposition_legitimacy
            months = normal_modifier_time
            is_decaying = yes
        }
    }

    invalid = {
		OR = {
			scope:journal_entry = {
				has_variable = has_been_abandoned
			}
			scope:foreign_imposition_country ?= {
				NOT = {
					has_law_imposition_rights = {
						target_country = root
						law_type = scope:foreign_imposition_law.type
					}
				}
			}
		}
    }
	
	on_invalid = {
		if = { 
			limit = { currently_enacting_law = scope:foreign_imposition_law }
			cancel_enactment = yes
		}
	}

    weight = 1000

    should_be_pinned_by_default = yes
}
﻿﻿# triggered by on_law_enactment_started
je_abolish_monarchy = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_internal_affairs

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					NOT = { has_law = law_type:law_monarchy }
					NOT = {
						any_civil_war = {
							civil_war_progress > 0.5
							is_civil_war_type = revolution
						}
					}
					NOT = {
						any_interest_group = {
							law_stance = {
								law = law_type:law_monarchy
								value > neutral
							}
							is_powerful = yes
						}
					}
				}
				change_variable = {
					name = abolishing_monarchy_var
					add = 1
				}
			}
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		NOT = { has_law = law_type:law_monarchy }
		NOT = {
			any_civil_war = {
				civil_war_progress > 0.5
				is_civil_war_type = revolution
			}
		}
		NOT = {
			any_interest_group = {
				law_stance = {
					law = law_type:law_monarchy
					value > neutral
				}
				is_powerful = yes
			}
		}
	}

	on_complete = {
		set_variable = stamped_out_monarchy_var
		trigger_event = {
			id = 1848.2
		}
		if = {
			limit = { has_journal_entry = je_warlord_china }
			chi_add_1_fragile_unity = yes
			set_variable = china_warlord_abolished_monarchy
		}
	}

	invalid = {
		NOR = {
			is_enacting_law = law_type:law_presidential_republic
			is_enacting_law = law_type:law_parliamentary_republic
			is_enacting_law = law_type:law_council_republic
			has_law = law_type:law_presidential_republic
			has_law = law_type:law_parliamentary_republic
			has_law = law_type:law_council_republic
		}
	}

	current_value = {
		value = root.var:abolishing_monarchy_var
	}

	goal_add_value = {
		add = 60
	}

	progressbar = yes

	weight = 100
}
﻿je_antarctica = {

	group = je_group_expeditions

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = expedition_events.20 #posts a notification
			65 = cold.5 #the pole
			50 = cold.2 #discovery hut
			20 = cold.1 #mountains
			10 = cold.3 #lost
			10 = cold.6 #eating the dogs
			30 = cold.8 #pack ice
			50 = cold.11 #great ice barrier
			20 = cold.12 #glacier
			5 = cold.13 #strange rock
		}
	}
	
	immediate = {
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			save_scope_as = expedition_leader
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = expedition_low_peril_loc
				trigger = {
					var:expedition_peril < 4
				}
			}
			triggered_desc = {
				desc = expedition_medium_peril_loc
				trigger = {
					var:expedition_peril <= 5
				}
			}
			triggered_desc = {
				desc = expedition_high_peril_loc
				trigger = {
					var:expedition_peril >= 6
				}
			}
		}
	}
	
    fail = {
		custom_tooltip = {
			text = je_expedition_fail
			var:expedition_peril >= 8
		}
    }
	
	on_fail = {
		trigger_event = { id = cold.4 }
		remove_variable = on_expedition
		remove_modifier = modifier_large_expedition_cost
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	current_value = {
		value = var:expedition_progress
	}

	goal_add_value = {
		add = 8
	}
	
	complete = {
		custom_tooltip = {
			text = je_expedition_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
			has_variable = south_pole_event_var
		}
	}
	
	on_complete = {
		trigger_event = { id = cold.7 }
		remove_variable = on_expedition
		remove_modifier = modifier_large_expedition_cost
		set_variable = antarctica_expedition_success_var #great exhibition check
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	progressbar = yes
	
    weight = 200
    transferable = no
    should_be_pinned_by_default = yes
}
﻿je_autocracy = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		OR = {
			has_law = law_type:law_monarchy
			has_law = law_type:law_theocracy
		}
		has_law = law_type:law_state_religion
		has_law = law_type:law_autocracy
	}

	possible = {
		has_technology_researched = nationalism
		OR = {
			ig:ig_landowners = {
				is_powerful = yes
			}
			ig:ig_devout = {
				is_powerful = yes
			}
		}
	}

	immediate = {
		set_variable = {
			name = autocracy_var
			value = 1
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					OR = {
						has_law = law_type:law_monarchy
						has_law = law_type:law_theocracy
					}
					has_law = law_type:law_state_religion
					has_law = law_type:law_autocracy
					NOT = {
						any_civil_war = {
							civil_war_progress > 0.5
						}
					}
				}
				change_variable = {
					name = autocracy_var
					add = 1
				}
			}
		}
		random_events = {
			10 = 0
			1 = autocracy.2
			1 = autocracy.3
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		OR = {
			has_law = law_type:law_monarchy
			has_law = law_type:law_theocracy
		}
		has_law = law_type:law_state_religion
		has_law = law_type:law_autocracy
		NOT = {
			any_civil_war = {
				civil_war_progress > 0.5
			}
		}
	}

	on_complete = {
		trigger_event = {
			id = autocracy.1
		}
	}

	fail = {
		OR = {
			NOT = { has_law = law_type:law_state_religion }
			NOT = { has_law = law_type:law_autocracy }
		}
	}

	current_value = {
		value = root.var:autocracy_var
	}

	goal_add_value = {
		add = 360
	}

	progressbar = yes

	weight = 100
}
﻿je_belle_epoque = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises

	is_shown_when_inactive = {
		has_technology_researched = shift_work
		has_technology_researched = camera
		has_technology_researched = electrical_generation
		country_rank >= rank_value:major_power
	}

	possible = {
		is_at_war = no
		custom_tooltip = {
			text = belle_epoque_sol_trigger
			any_scope_state = {
				filter = {
					is_incorporated = yes
				}
				average_sol >= 15
				percent > 0.5
			}
		}
		capital = {
			average_sol >= 15
		}
		capital = {
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 40
				has_active_production_method = pm_electric_streetlights				
			}
			devastation = 0
			turmoil < 0.1
		}
		
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_arts_academy
				level >= 3
				has_active_production_method = pm_photographic_art
			}
		}
		
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_university
				level >= 10
				has_active_production_method = pm_philosophy_department
			}
		}
	}

	immediate = {
		set_variable = {
			name = belle_epoque_var
			value = 0
		}
		if = {
			limit = {
				c:USA ?= this
				owns_entire_state_region = STATE_NEW_YORK
				s:STATE_NEW_YORK = {
					any_scope_state = { average_sol >= 15 }
				}
			}
			s:STATE_NEW_YORK = {
				save_scope_as = belle_epoque_state
			}
		}
		else_if = {
			limit = {
				c:USA ?= this
				owns_entire_state_region = STATE_CALIFORNIA
				s:CALIFORNIA = {
					any_scope_state = { average_sol >= 15 }
				}
			}
			s:STATE_CALIFORNIA = {
				save_scope_as = belle_epoque_state
			}
		}
		else_if = {
			limit = {
				c:USA ?= this
				owns_entire_state_region = STATE_PENNSYLVANIA
				s:STATE_PENNSLYVANIA = {
					any_scope_state = { average_sol >= 15 }
				}
			}
			s:STATE_PENNSLYVANIA = {
				save_scope_as = belle_epoque_state
			}
		}

		if = {
			limit = {
				OR = {
					c:TPG ?= this
					c:CHI ?= this
				}
				owns_entire_state_region = STATE_GUANGDONG
				s:STATE_GUANGDONG = {
					any_scope_state = { average_sol >= 15 }
				}
			}
			s:STATE_GUANGDONG = {
				save_scope_as = belle_epoque_state
			}
		}
		else_if = {
			limit = {
				OR = {
					c:TPG ?= this
					c:CHI ?= this
				}
				owns_entire_state_region = STATE_SUZHOU
				s:STATE_SUZHOU = {
					any_scope_state = { average_sol >= 15 }
				}
			}
			s:STATE_SUZHOU = {
				save_scope_as = belle_epoque_state
			}
		}
		else_if = {
			limit = {
				OR = {
					c:TPG ?= this
					c:CHI ?= this
				}
				owns_entire_state_region = STATE_NANJING
				s:STATE_NANJING = {
					any_scope_state = { average_sol >= 15 }
				}
			}
			s:STATE_NANJING = {
				save_scope_as = belle_epoque_state
			}
		}

		else = {
			capital = {
				save_scope_as = belle_epoque_state
			}
		}
	}
	
	goal_add_value = {
		add = 120 #10 years timeout
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
	}

	fail = {
		OR = {
			trigger_if = {
				limit = {
					has_variable = belle_epoque_var
				}
				custom_tooltip = {
					text = belle_epoque_fail_tt
					any_scope_war = {
						any_scope_front = {
							any_scope_state = {
								this = scope:belle_epoque_state
							}
						}
					}
				}
			}
			trigger_if = {
				limit = {
					has_variable = belle_epoque_var
				}
				custom_tooltip = {
					text = belle_epoque_invalid_tt
					scope:belle_epoque_state = {
						NOT = {
							owner = root
						}
					}
				}
			}
		}
	}

	on_weekly_pulse = {
		events = {
			belle_epoque_events.1 # eiffel tower complete
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			40 = belle_epoque_events.2 #Art Noveau
			10 = belle_epoque_events.3 #Leader Joins Symbolists
			10 = belle_epoque_events.4 #Cabaret
			30 = belle_epoque_events.5 #Rabies Vaccine 
			10 = belle_epoque_events.6 #Film 
			10 = belle_epoque_events.7 #Cinéorama
			10 = belle_epoque_events.8 #Steam Car 
			10 = belle_epoque_events.9 #Paris-Rouen 
			10 = belle_epoque_events.10 #Noveaux Riches 
			10 = belle_epoque_events.11 #Roller-Skating 
			10 = belle_epoque_events.12 #Metro 
			10 = belle_epoque_events.13 #Colonial Exhibitions
			5000 = belle_epoque_events.16 #Grande Roue de Paris 
			10 = belle_epoque_events.17 #Fin de Siècle 
			10 = belle_epoque_events.18 #Decadent Movement 
			10 = belle_epoque_events.19 #Symbolist Manifesto 
			10 = belle_epoque_events.20 #Botanical Gardens 
		}
		effect = {
			change_variable = {
				name = belle_epoque_var
				add = 1
			}
			random_list = {
				80 = {

				}
				20 = {
					random_country = {
						limit = {
							any_scope_state = {
								any_neighbouring_state = {
									owner = {
										has_journal_entry = je_belle_epoque
										any_scope_building = {
											has_active_production_method = pm_craftsman_sewing
										}
									}
								}
								has_building = building_railway
							}	
						}
						trigger_event = { id = belle_epoque_events.14 weeks = 1 }
					}
				}
			}
		}
	}

	current_value = {
		value = var:belle_epoque_var
	}

	invalid = {
		trigger_if = {
			limit = {
				has_variable = belle_epoque_var
			}
			NOT = { exists = scope:belle_epoque_state }
		}
	}
	
	progressbar = yes

	weight = 10
}

﻿je_boxer_rebellion = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_historical_content

    is_shown_when_inactive = {
        exists = c:CHI
        THIS = c:CHI
        has_technology_researched = pan-nationalism
        country_has_primary_culture = cu:manchu
    }
    possible = {
        has_technology_researched = political_agitation
        any_state = {
        	state_region = { is_homeland = cu:han }
	        NOT = { owner = ROOT }
        }
    }
    immediate = {
        trigger_event = { id = boxer_rebellion_events.1 } # The Yihetuan Movement
    }
    complete = {
        custom_tooltip = {
            text = qing_owns_all_han_states_tt
            NOT = {
                any_state = {
                    state_region = { is_homeland = cu:han }
                    NOT = { owner = ROOT }
                }
            }
        }
    }
    on_complete = {
        trigger_event = { id = boxer_rebellion_events.2 } # The Mandate of Heaven
    }
    timeout = 1825
    on_timeout = {
        trigger_event = { id = boxer_rebellion_events.3 } # The Qing and the Han
    }
    weight = 1000
    should_be_pinned_by_default = yes
}
﻿je_brazil_navy = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		c:BRZ ?= THIS
		has_dlc_feature = rp1_content
	}

	possible = {
		country_rank >= rank_value:minor_power
		any_scope_character = {
			has_role = admiral
		}
		OR = {
			has_technology_researched = power_of_the_purse
			has_technology_researched = screw_frigate
		}
	}

	immediate = {
		set_variable = {
			name = brazil_navy_var
			value = 0
		}
		# startup event
		trigger_event = {
			id = brazil_navy.1
			popup = yes
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			5 = brazil_navy.2 # Navy complains that it's not as powerful as it should be
			5 = brazil_navy.3 # navy is strong
		}
		effect = {
			if = {
				limit = {
					NOT = {
						any_country = {
							naval_power_projection > root.naval_power_projection
							count > 10
						}
					}
					NOT = {
						any_country = {
							naval_power_projection > root.naval_power_projection
							country_is_in_south_america = yes
						}
					}
				}
				change_variable = {
					name = brazil_navy_var
					add = 1
				}
			}
		}
	}

	is_progressing = {
		NOT = {
			any_country = {
				naval_power_projection > root.naval_power_projection
				count > 10
			}
		}
		NOT = {
			any_country = {
				naval_power_projection > root.naval_power_projection
				country_is_in_south_america = yes
			}
		}
	}

	complete = {
		any_scope_character = {
			has_role = admiral
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
		NOT = {
			any_country = {
				naval_power_projection > root.naval_power_projection
				count > 10
			}
		}
		custom_tooltip = {
			text = best_south_american_navy
			NOT = {
				any_country = {
					naval_power_projection > root.naval_power_projection
					country_is_in_south_america = yes
				}
			}
		}
	}

	on_complete = {
		trigger_event = {
			id = brazil_navy.4
			popup = yes
		}
		if = {
			limit = {
				has_journal_entry = je_pedro_brazil
			}
			show_as_tooltip = {
				add_pedropoint_effect = yes
			}
		}
	}

	fail = {
		country_rank < rank_value:minor_power
	}

	timeout = 25550

	current_value = {
		value = root.var:brazil_navy_var
	}

	goal_add_value = {
		add = 480
	}

	progressbar = yes

	weight = 100

	can_revolution_inherit = no
	transferable = no
	should_be_pinned_by_default = yes
}
﻿je_canada_can = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		OR = {
			country_has_primary_culture = cu:anglo_canadian
			country_has_primary_culture = cu:franco_canadian
		}
		is_subject = yes
	}

	possible = {
		has_technology_researched = nationalism
	}

	complete = {
		calc_true_if = {
			amount >= 9
			owns_entire_state_region = STATE_ONTARIO
			owns_entire_state_region = STATE_NEW_BRUNSWICK
			owns_entire_state_region = STATE_QUEBEC
			owns_entire_state_region = STATE_NEWFOUNDLAND
			owns_entire_state_region = STATE_ALBERTA
			owns_entire_state_region = STATE_BRITISH_COLUMBIA
			owns_entire_state_region = STATE_SASKATCHEWAN
			owns_entire_state_region = STATE_MANITOBA
			owns_entire_state_region = STATE_YUKON_TERRITORY
			owns_entire_state_region = STATE_NORTHWEST_TERRITORIES
			owns_entire_state_region = STATE_NUNAVUT
		}
	}

	on_complete = {
		trigger_event = { id = can_aus.5 }
	}

	invalid = {
		is_subject = no
	}

	weight = 100

	should_be_pinned_by_default = yes
}

je_canada_gbr = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		any_subject_or_below = {
			OR = {
				country_has_primary_culture = cu:anglo_canadian
				country_has_primary_culture = cu:franco_canadian
			}
			count >= 2
		}
		NOT = {
			OR = {
				country_has_primary_culture = cu:anglo_canadian
				country_has_primary_culture = cu:franco_canadian
			}
		}
	}

	possible = {
		has_technology_researched = nationalism
	}

	complete = {
		any_subject_or_below = {
			calc_true_if = {
				amount >= 9
				owns_entire_state_region = STATE_ONTARIO
				owns_entire_state_region = STATE_NEW_BRUNSWICK
				owns_entire_state_region = STATE_QUEBEC
				owns_entire_state_region = STATE_NEWFOUNDLAND
				owns_entire_state_region = STATE_ALBERTA
				owns_entire_state_region = STATE_BRITISH_COLUMBIA
				owns_entire_state_region = STATE_SASKATCHEWAN
				owns_entire_state_region = STATE_MANITOBA
				owns_entire_state_region = STATE_YUKON_TERRITORY
				owns_entire_state_region = STATE_NORTHWEST_TERRITORIES
				owns_entire_state_region = STATE_NUNAVUT
			}
		}
	}

	on_complete = {
		trigger_event = { id = can_aus.6 }
	}

	weight = 100

	should_be_pinned_by_default = yes
}

je_australia_aus = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		OR = {
			country_has_primary_culture = cu:australian
			country_has_primary_culture = cu:maori
		}
		is_subject = yes
	}

	possible = {
		has_technology_researched = nationalism
	}

	complete = {
		calc_true_if = {
			amount >= 7
			owns_entire_state_region = STATE_NEW_SOUTH_WALES
			owns_entire_state_region = STATE_VICTORIA
			owns_entire_state_region = STATE_TASMANIA
			owns_entire_state_region = STATE_QUEENSLAND
			owns_entire_state_region = STATE_SOUTH_AUSTRALIA
			owns_entire_state_region = STATE_WESTERN_AUSTRALIA
			owns_entire_state_region = STATE_NORTHERN_TERRITORY
			owns_entire_state_region = STATE_NORTH_ISLAND
			owns_entire_state_region = STATE_SOUTH_ISLAND
		}
	}

	on_complete = {
		trigger_event = { id = can_aus.7 }
	}

	invalid = {
		is_subject = no
	}

	should_be_pinned_by_default = yes
}

je_australia_gbr = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		any_subject_or_below = {
			OR = {
				country_has_primary_culture = cu:australian
				country_has_primary_culture = cu:maori
			}
			count >= 2
		}
		NOT = {
			OR = {
				country_has_primary_culture = cu:australian
				country_has_primary_culture = cu:maori
			}
		}
	}

	possible = {
		has_technology_researched = nationalism
	}

	complete = {
		any_subject_or_below = {
			calc_true_if = {
				amount >= 7
				owns_entire_state_region = STATE_NEW_SOUTH_WALES
				owns_entire_state_region = STATE_VICTORIA
				owns_entire_state_region = STATE_TASMANIA
				owns_entire_state_region = STATE_QUEENSLAND
				owns_entire_state_region = STATE_SOUTH_AUSTRALIA
				owns_entire_state_region = STATE_WESTERN_AUSTRALIA
				owns_entire_state_region = STATE_NORTHERN_TERRITORY
				owns_entire_state_region = STATE_NORTH_ISLAND
				owns_entire_state_region = STATE_SOUTH_ISLAND
			}
		}
	}

	on_complete = {
		trigger_event = { id = can_aus.8 }
	}

	weight = 100

	should_be_pinned_by_default = yes
}
﻿je_suez_survey = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = survey_suez_taken
				add = 1
			}
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	on_complete = {
		remove_modifier = modifier_surveying_suez
		trigger_event = { id = canal_events.100 }
	}

	current_value = {
		value = root.var:survey_suez_taken
	}

	goal_add_value = {
		value = 18
	}

	invalid = {
		OR = {
			NOT = { has_variable = survey_suez_taken }
			any_state = {
				state_region = s:STATE_SINAI
				NOT = { owner = ROOT }
				any_scope_building = {
					is_building_type = building_suez_canal
				}
			}
		}
	}

	on_invalid = {
		remove_variable = survey_suez_taken
		remove_modifier = modifier_surveying_suez
	}

	progressbar = yes

	weight = 10
	should_be_pinned_by_default = yes
}

je_suez_canal = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	complete = {
		any_scope_state = {
			state_region = s:STATE_SINAI
			any_scope_building = {
				is_building_type = building_suez_canal
				occupancy >= 0.9
			}
		}
	}

	on_complete = {
		set_global_variable = suez_canal_complete
	}
	should_be_pinned_by_default = yes
}

je_panama_survey = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = survey_panama_taken
				add = 1
			}
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	on_complete = {
		remove_modifier = modifier_surveying_panama
		trigger_event = { id = canal_events.101 }
	}

	current_value = {
		value = root.var:survey_panama_taken
	}

	goal_add_value = {
		value = 12
	}

	invalid = { # If the Panama Canal is being built and you're not the one building it, you've blown it, chief.
		OR = {
			NOT = { has_variable = survey_panama_taken }
			any_state = {
				state_region = s:STATE_PANAMA
				NOT = { owner = ROOT }
				any_scope_building = {
					is_building_type = building_panama_canal
				}
			}
		}
	}

	on_invalid = {
		remove_variable = survey_suez_taken
		remove_modifier = modifier_surveying_suez
	}

	progressbar = yes

	weight = 10
	should_be_pinned_by_default = yes
}

je_panama_canal = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	complete = {
		any_scope_state = {
			state_region = s:STATE_PANAMA
			any_scope_building = {
				is_building_type = building_panama_canal
				occupancy >= 0.9
			}
		}
	}

	on_complete = {
		set_global_variable = panama_canal_complete
	}
	should_be_pinned_by_default = yes
}
﻿je_caudillo = {
	icon = "gfx/interface/icons/ig_icons/armed_forces.dds"

	group = je_group_internal_affairs

	# see also: exiling an armed forces character depletes the progress bar

	scripted_button = caudillo_decree_button

	immediate = {
		save_scope_as = caudillo_country_scope
	}

	complete = {
		ig:ig_armed_forces = {
			is_in_government = no
		}
		custom_tooltip = {
			text = caudillo_complete
			root.var:caudillo_var <= 0
		}
	}

	on_complete = {
		trigger_event = { id = caudillo.2 popup = yes }
		show_as_tooltip = {
			ig:ig_armed_forces = {
				remove_ideology = ideology_caudillismo
			}
			remove_modifier = age_of_caudillos_modifier
		}
	}

	fail = {
		ig:ig_armed_forces = {
			is_in_government = yes
		}
		custom_tooltip = {
			text = je_caudillo_goal_tt
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_fail = {
		trigger_event = { id = caudillo.3 popup = yes }
		show_as_tooltip = {
			add_modifier = {
				name = age_of_caudillos_modifier
				multiplier = 2
			}
		}
	}

	on_weekly_pulse = {
		effect = {
            calculate_caudillo_progress = yes
        }
	}

	on_monthly_pulse = {
		effect = {
			change_variable = { name = caudillo_var add = var:caudillo_next }
		}
		random_events = {
			# Pulse events affect the progress bar
			120 = 0 
			10 = caudillo.4
			25 = caudillo.6
		}
	}

	current_value = {
		value = root.var:caudillo_var
	}

	goal_add_value = {
		add = 1200
	}

	progressbar = yes

	weight = 100

	can_revolution_inherit = yes
	transferable = yes
	should_be_pinned_by_default = yes
}
﻿je_central_africa_expedition = { #Nile River

	group = je_group_expeditions

	on_monthly_pulse = {
		random_events = {
			70 = 0
			
			30 = expedition_events.20 #posts a notification
			15 = expedition_events.41 #malaria
			2 = expedition_events.110 #new leader (should normally occur organically if your leader dies)
			15 = expedition_events.70 #dysentery
			20 = expedition_events.30 #local guides
			20 = expedition_events.540 #rhino hunt
			10 = expedition_events.520 #pay more taxes
			20 = expedition_events.530 #lost mules
			10 = expedition_events.550 #beetle in ear
			10 = expedition_events.560 #commander vice
			15 = expedition_events.570 #study geography
			
			15 = expedition_events.130 #kidnapped ambassador
			5 = expedition_events.140 #leader's breakdown
			20 = expedition_events.150 #expedition thief
			10 = expedition_events.160 #cancelled expedition
			20 = expedition_events.90 #previous explorers
			20 = expedition_events.695 #lost foreign expedition
		}
	}
	
	immediate = {
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			save_scope_as = expedition_leader
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = expedition_low_peril_loc
				trigger = {
					var:expedition_peril < 4
				}
			}
			triggered_desc = {
				desc = expedition_medium_peril_loc
				trigger = {
					var:expedition_peril <= 5
				}
			}
			triggered_desc = {
				desc = expedition_high_peril_loc
				trigger = {
					var:expedition_peril >= 6
				}
			}
		}
	}
	
    fail = {
		OR = {
			custom_tooltip = {
				text = je_expedition_fail
				OR = {
					NOT = {
						has_variable = on_expedition
					}
					var:expedition_peril >= 8
				}
			}
			custom_tooltip = {
				text = expedition_cancelled_tt
				has_variable = no_extra_expenses_var
			}
		}
    }
	
	on_fail = {
		trigger_event = { id = expedition_events.512 }
		remove_variable = on_expedition
		remove_variable = central_africa_expedition_var
		set_variable = failed_central_africa_expedition_var
		remove_modifier = modifier_large_expedition_cost
		remove_modifier = expedition_extra_expenses_modifier
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	complete = {
		custom_tooltip = {
			text = je_expedition_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}
	
	on_complete = {
		trigger_event = { id = expedition_events.511 }
		remove_variable = on_expedition
		remove_variable = central_africa_expedition_var
		remove_modifier = modifier_large_expedition_cost
		remove_modifier = expedition_extra_expenses_modifier
		set_variable = central_africa_expedition_success_var #grand exhibition check
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	current_value = {
		value = var:expedition_progress
	}

	goal_add_value = {
		add = 8
	}
	
	progressbar = yes
	
    weight = 200
    transferable = no
    should_be_pinned_by_default = yes
}
﻿je_communism_1 = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		NOT = { has_variable = communism_1_done }
		OR = {
			has_technology_researched = socialism
			has_technology_researched = anarchism
		}
	}

	scripted_progress_bar = communism_1_progress_bar

	possible = {
		any_interest_group = {
			is_marginal = no
			OR = {
				law_stance = {
					law = law_type:law_council_republic
					value > neutral
				}
				any_scope_character = {
					OR = {
						has_role = politician
						has_role = agitator
					}
					OR = {
						has_ideology = ideology:ideology_communist
						has_ideology = ideology:ideology_vanguardist
						has_ideology = ideology:ideology_anarchist
					}
				}
			}
		}
	}

	immediate = {
		root = {
			save_scope_as = root_country
		}
		set_communism_vars = yes
		trigger_event = { id = communism.10 days = 1 popup = yes }
	}

	on_weekly_pulse = {
		effect = {
			calculate_communism_progress = yes
		}
	}

	on_monthly_pulse = {
		random_events = {
			200 = 0
			5 = communism.7
		}
		effect = {
			calculate_communism_progress = yes
		}
	}

	fail = {
		custom_tooltip = {
			text = communism_progress_bar_at_full_tt
			scope:journal_entry = {
				"scripted_bar_progress(communism_1_progress_bar)" >= 100
			}
		}
	}

	on_fail = {
		set_variable = communism_1_done
		trigger_event = { id = communism.1 popup = yes }
		custom_tooltip = communism_je_1_fail_tt
	}

	timeout = 1095

	on_timeout = {
		trigger_event = { id = communism.11 popup = yes }
		custom_tooltip = communism_je_1_complete_tt
	}

	should_be_pinned_by_default = yes
}

je_communism_2 = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_law = law_type:law_council_republic
				}
				change_variable = {
					name = je_communism_2_var
					add = 1
				}
			}
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		has_law = law_type:law_council_republic
		has_revolution = no
		has_any_secessionists_broken_out = no 
	}

	on_complete = {
		trigger_event = { id = communism.2 popup = yes }
	}

	current_value = {
		value = root.var:je_communism_2_var
	}

	goal_add_value = {
		add = 60
	}

	progressbar = yes
}

je_anarchy = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	complete = {
		has_law = law_type:law_anarchy
		average_sol >= 15 # if you change this, also change event option in communism.2
	}

	on_complete = {
		trigger_event = {
			id = communism.4
			popup = yes
		}
	}

	fail = {
		NOT = { has_law = law_type:law_council_republic }
	}
}

je_vanguard = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	complete = {
		# id you change this, also change options in communism.2
		any_interest_group = {
			leader = {
				OR = {
					has_ideology = ideology:ideology_vanguardist
					has_ideology = ideology:ideology_communist
					has_ideology = ideology:ideology_anarchist
				}
			}
			count >= 3
		}
		custom_tooltip = {
			text = vanguard_custom_tooltip
			NOT = {
				any_interest_group = {
					is_powerful = yes
					leader = {
						NOR = {
							has_ideology = ideology:ideology_vanguardist
							has_ideology = ideology:ideology_communist
							has_ideology = ideology:ideology_anarchist
						}
					}
				}
			}
		}
		has_law = law_type:law_single_party_state
	}

	on_complete = {
		trigger_event = { id = communism.5 popup = yes }
	}

	fail = {
		NOT = { has_law = law_type:law_council_republic }
	}

	on_weekly_pulse = {
		events = {
			communism.3
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = vanguard_instruction_status
				trigger = {
					always = yes
				}
			}
		}
	}
}

je_communist_welfare = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	complete = {
		# if you change this, also change event option in communism.2
		approaching_bureaucracy_shortage = no
		has_law = law_type:law_public_schools
		institution_investment_level = {
			institution = institution_schools
			value = 5
		}
		has_law = law_type:law_public_health_insurance
		institution_investment_level = {
			institution = institution_health_system
			value = 5
		}
		has_law = law_type:law_old_age_pension
		institution_investment_level = {
			institution = institution_social_security
			value = 5
		}
		has_law = law_type:law_worker_protections
		institution_investment_level = {
			institution = institution_workplace_safety
			value = 5
		}
	}

	on_complete = {
		trigger_event = {
			id = communism.6
			popup = yes
		}
	}

	fail = {
		NOT = { has_law = law_type:law_council_republic }
	}
}

je_5_year_plan = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_internal_affairs

	immediate = {
		root = {
			save_scope_as = five_year_plan_country
		}
	}

	complete = {
		OR = {
			has_law = law_type:law_command_economy
			has_law = law_type:law_cooperative_ownership
		}
		custom_tooltip = {
			text = custom_loc_five_year_plan_goal
				scope:journal_entry = {
				is_goal_complete = yes
			}
		}
		in_default = no
	}

	on_complete = {
		add_modifier = {
			name = five_year_plan_welfare_mod
			months = long_modifier_time
		}
	}

	current_value = {
		value = root.gdp
	}

	goal_add_value = {
		value = root.gdp
		multiply = 0.25
	}

	fail = {
		NOT = { has_law = law_type:law_council_republic }
	}

	progressbar = yes
}
﻿je_congo_expedition = {	

	group = je_group_expeditions

	on_monthly_pulse = {
		random_events = {
			70 = 0
			30 = expedition_events.20 #posts a notification
			30 = expedition_events.620 #boat repair
			40 = expedition_events.630 #white fog 
			30 = expedition_events.640 #crocodile attack
			40 = expedition_events.650 #rear column
			30 = expedition_events.660 #trading enclave
			40 = expedition_events.670 #lost in the forest 
			80 = expedition_events.680 #naming the falls
			30 = expedition_events.690 #trading gifts
			
			#Events shared with the Nile and Niger expeditions
			20 = expedition_events.30 #find local guides
			20 = expedition_events.40 #crewmember drowns
			10 = expedition_events.41 #malaria
			10 = expedition_events.70 #dysentery
			20 = expedition_events.50 #river attack
			20 = expedition_events.90 #previous expedition
			50 = expedition_events.120 #dr livingstone I presume
			15 = expedition_events.130 #kidnapped ambassador
			10 = expedition_events.140 #leader's breakdown
			15 = expedition_events.150 #expedition thief
			20 = expedition_events.160 #cancelled expedition
			10 = expedition_events.560 #commander vice
			30 = expedition_events.695 #lost foreign expedition
		}
	}
	
	immediate = {
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			save_scope_as = expedition_leader
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = expedition_low_peril_loc
				trigger = {
					var:expedition_peril < 4
				}
			}
			triggered_desc = {
				desc = expedition_medium_peril_loc
				trigger = {
					var:expedition_peril <= 5
				}
			}
			triggered_desc = {
				desc = expedition_high_peril_loc
				trigger = {
					var:expedition_peril >= 6
				}
			}
		}
	}
	
    fail = {
		OR = {
			custom_tooltip = {
				text = je_expedition_fail
				var:expedition_peril >= 8
			}
			custom_tooltip = {
				text = expedition_cancelled_tt
				has_variable = no_extra_expenses_var
			}
		}
    }
	
	on_fail = {
		trigger_event = { id = expedition_events.612 }
		remove_variable = on_expedition
		remove_variable = congo_river_expedition_var
		set_variable = failed_congo_river_var
		remove_modifier = modifier_large_expedition_cost
		remove_modifier = expedition_extra_expenses_modifier
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	complete = {
		custom_tooltip = {
			text = je_expedition_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}
	
	on_complete = {
		trigger_event = { id = expedition_events.611 }
		remove_variable = on_expedition
		remove_variable = congo_river_expedition_var
		remove_modifier = modifier_large_expedition_cost
		remove_modifier = expedition_extra_expenses_modifier
		set_variable = congo_river_expedition_success_var #grand exhibition check
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	current_value = {
		value = var:expedition_progress
	}

	goal_add_value = {
		add = 8
	}
	
	progressbar = yes
	
    weight = 200
    transferable = no
    should_be_pinned_by_default = yes
}
﻿je_free_state = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		has_variable = scramble_for_africa_complete
		has_law = law_type:law_monarchy #Check there is a Monarch
		NOT = { has_global_variable = free_state_created }
	}

	possible = {
		ruler ?= {
			OR = {
				has_trait = cruel
				has_trait = ambitious
			}
		}
		any_scope_state = {
			is_incorporated = no
			custom_tooltip = {
				text = in_africa_tt
				state_in_africa = yes
			}
			any_neighbouring_state = {
				is_incorporated = no
				custom_tooltip = {
					text = in_africa_tt
					state_in_africa = yes
				}
			}
		}
		has_law = law_type:law_colonial_exploitation
	}

	immediate = {
		custom_tooltip = { 
			text = free_state_immediate_tooltip
			trigger_event = { id = congo_free_state_events.1 popup = yes }
		}
		set_variable = {
			name = free_state_international_opinion
			value = 0
		}
		ruler = {
			set_variable = free_state_monarch
		}
		random_scope_state = {
			limit = {
				is_incorporated = no
				state_in_africa = yes
				any_neighbouring_state = {
					is_incorporated = no
					state_in_africa = yes
				}
			}
			save_scope_as = colonial_state
		}
	}

	complete = {
		OR = {
			scope:journal_entry = {
				is_goal_complete = yes
			}
			NOT = { has_law = law_type:law_monarchy }
			custom_tooltip = {
				text = free_state_monarch_dead_tooltip
				ruler = {
					NOT = {
						has_variable = free_state_monarch
					}
				}
			}	
		}
	}

	on_complete = {
		if = {
			limit = {
				exists = c:AFS
			}
			c:AFS = {
				remove_modifier = free_state_mort
			}
		}
		trigger_event = { id = congo_free_state_events.5 popup = yes }
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = { #check if the possible conditions are still true
					has_law = law_type:law_monarchy
					has_law = law_type:law_colonial_exploitation
					exists = c:AFS
					c:AFS = {
						is_subject_of = ROOT
					}
				}
				change_variable = {
					name = free_state_international_opinion
					add = 1
				}
			}
		}
		random_events = {
			100 = 0
			20 = congo_free_state_events.2 #rumours
			10 = congo_free_state_events.3 #people dying
			10 = congo_free_state_events.4 #newspaper article
			30 = congo_free_state_events.6 #report
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = free_state_status_known
				trigger = {
					var:free_state_international_opinion >= 90
				}
			}
			triggered_desc = {
				desc = free_state_status_suspected
				trigger = {
					var:free_state_international_opinion >= 45
				}
			}
			triggered_desc = {
				desc = free_state_status_new
				trigger = {
					var:free_state_international_opinion < 45
				}
			}
		}
	}
	
	invalid = {
		custom_tooltip = {
			text = free_state_journal_complete_tt
			OR = {
				AND = {
					NOT = {
						exists = c:AFS
					}
					has_variable = free_state_made
				}
				AND = {
					exists = c:AFS
					c:AFS = {
						NOT = { is_subject_of = ROOT }
					}
				}
			}
		}
		NOT = { has_law = law_type:law_colonial_exploitation }
	}

	weight = 200
	should_be_pinned_by_default = yes
	
	current_value = {
		value = root.var:free_state_international_opinion
	}

	goal_add_value = {
		add = 120 #10 years of monthly ticks
	}
	
	progressbar = yes

	transferable = no
}

﻿je_corn_laws = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		NOT = { has_variable = corn_laws_abolished }
		ig:ig_landowners = {
			is_marginal = no
		}
		OR = {
			has_export_priority_tariffs = g:grain
			has_law = law_type:law_isolationism
			has_law = law_type:law_mercantilism
		}
	}

	possible = {
		market_capital.market = {
			mg:grain = { 
				market_goods_pricier > 0.25 
			}
		}
		OR = {
			has_law = law_type:law_isolationism
			AND = {
				has_law = law_type:law_mercantilism
				has_export_priority_tariffs = g:grain
			}
		}
		ig:ig_landowners = {
			is_powerful = yes
			is_in_government = yes
		}
	}

	complete = {
		has_law = law_type:law_free_trade
	}

	on_complete = {
		set_variable = corn_laws_abolished
		trigger_event = { id = corn_laws.1 }
		show_as_tooltip = {
			if = {
				limit = {
					ig:ig_landowners = {
						is_in_government = yes
						leader = {
							NOT = { has_ideology = ideology:ideology_market_liberal }
						}
					}
				}
				ig:ig_landowners = {
					add_modifier = {
						name = repealed_corn_laws
						months = long_modifier_time
					}
				}
			}
			add_loyalists = {
				value = 0.1
				pop_type = laborers
			}
		}
	}

	invalid = {
		ig:ig_landowners = {
			is_marginal = yes
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = corn_laws.2
			10 = corn_laws.3
			10 = corn_laws.4
		}
	}

	weight = 100
	should_be_pinned_by_default = yes
}
﻿je_dual_monarchy = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content

	complete = {
		cu:hungarian = {
			NOT = { culture_is_discriminated_in = ROOT }
		}
	}

	on_complete = {
		trigger_event = {
			id = dual_monarchy.1
		}
	}

	fail = {
		cu:hungarian = {
			culture_secession_progress = {
				target = ROOT
				value > 0.5
			}
		}
	}

	on_fail = {
		set_variable = dual_monarchy_fail
		trigger_event = {
			id = dual_monarchy.1
		}
	}

	invalid = {
		OR = {
			custom_tooltip = {
				text = austria_hunary_invalid
				NOT = {
					any_scope_state = {
						state_region = {
							is_homeland = cu:hungarian
						}
					}
				}
			}
			NOT = {
				this = c:AUS
			}
		}
	}

	weight = 100
	should_be_pinned_by_default = yes
}
﻿je_consolidate_colonial_rule = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		calc_true_if = {
			amount >= 7
			country_or_subject_owns_entire_state_region = STATE_BURMA
			country_or_subject_owns_entire_state_region = STATE_KACHIN
			country_or_subject_owns_entire_state_region = STATE_SHAN_STATES
			country_or_subject_owns_entire_state_region = STATE_PEGU
			country_or_subject_owns_entire_state_region = STATE_SINDH
			country_or_subject_owns_entire_state_region = STATE_PUNJAB
			country_or_subject_owns_entire_state_region = STATE_KASHMIR
			country_or_subject_owns_entire_state_region = STATE_PASHTUNISTAN
			country_or_subject_owns_entire_state_region = STATE_BALUCHISTAN
			country_or_subject_owns_entire_state_region = STATE_HIMALAYAS
		}
	}

	on_complete = {
		trigger_event = { id = east_indies.1 }
		set_variable = consolidated_colonial_rule
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					NOT = {
						any_civil_war = {
							is_civil_war_type = secession
							civil_war_progress > 0.3
						}
					}
				}
				change_variable = {
					name = east_indies_revolt_var
					add = 1
				}
			}
		}
	}

	invalid = {
		has_variable = bic_collapse_var
	}

	current_value = {
		value = root.var:east_indies_revolt_var
	}

	goal_add_value = {
		add = 120
	}

	progressbar = yes

	timeout = 7300

	weight = 100
}

je_reform_indies = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_internal_affairs

	is_shown_when_inactive = {
		OR = {
			AND = {
				exists = c:BIC
				c:BIC = THIS
			}
			AND = {
				exists = c:DEI
				c:DEI = THIS
			}
		}
	}

	possible = {
		OR = {
			has_law = law_type:law_free_trade
			has_law = law_type:law_mercantilism
			NOT = { has_law = law_type:law_land_based_taxation }
			NOT = { has_law = law_type:law_serfdom }
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		OR = {
			has_law = law_type:law_free_trade
			has_law = law_type:law_mercantilism
		}
		NOT = { has_law = law_type:law_land_based_taxation }
		NOT = { has_law = law_type:law_serfdom }
		has_law = law_type:law_slavery_banned
	}

	on_complete = {
		trigger_event = { id = east_indies.2 }
		show_as_tooltip = {
			add_journal_entry = {
				type = je_ethical_policy
			}
		}
		set_variable = reformed_indies
	}

	invalid = {
		has_variable = bic_collapse_var
	}


	current_value = {
		value = root.gdp
	}

	goal_add_value = {
		value = root.gdp
		multiply = 0.5
	}

	progressbar = yes

	weight = 100
}

je_ethical_policy = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	group = je_group_internal_affairs

	complete = {
		literacy_rate > 0.5
		root.average_sol > 15
	}

	on_complete = {
		trigger_event = { id = east_indies.3 }
	}

	invalid = {
		has_variable = bic_collapse_var
	}

	weight = 100
}
﻿je_colonial_administration = {
	icon = "gfx/interface/icons/invention_icons/colonization.dds"
	
	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		country_is_in_africa = no
		OR = {
			has_interest_marker_in_region = sr:region_senegal
			has_interest_marker_in_region = sr:region_niger
			has_interest_marker_in_region = sr:region_ethiopia
			has_interest_marker_in_region = sr:region_zanj
			has_interest_marker_in_region = sr:region_southern_africa
			has_interest_marker_in_region = sr:region_congo
		}
	}

	possible = {
		any_scope_state = {
			state_is_in_africa = yes
		}
		has_technology_researched = civilizing_mission
	}

	immediate = {
		random_state_region = {
			limit = {
				region = sr:region_senegal
			}
			save_scope_as = senegal_region_scope
		}
		random_state_region = {
			limit = {
				region = sr:region_niger
			}
			save_scope_as = niger_region_scope
		}
		random_state_region = {
			limit = {
				region = sr:region_ethiopia
			}
			save_scope_as = ethiopia_region_scope
		}
		random_state_region = {
			limit = {
				region = sr:region_zanj
			}
			save_scope_as = zanj_region_scope
		}
		random_state_region = {
			limit = {
				region = sr:region_southern_africa
			}
			save_scope_as = southern_africa_region_scope
		}
		random_state_region = {
			limit = {
				region = sr:region_congo
			}
			save_scope_as = congo_region_scope
		}
	}
	
	# Establish Colonial Administration
	scripted_button = je_colonial_administration_button_senegal
	scripted_button = je_colonial_administration_button_niger
	scripted_button = je_colonial_administration_button_ethiopia
	scripted_button = je_colonial_administration_button_zanj
	scripted_button = je_colonial_administration_button_southern_africa
	scripted_button = je_colonial_administration_button_congo

	# Expand Colonial Administration
	scripted_button = je_colonial_administration_button_expand_senegal
	scripted_button = je_colonial_administration_button_expand_niger
	scripted_button = je_colonial_administration_button_expand_ethiopia
	scripted_button = je_colonial_administration_button_expand_zanj
	scripted_button = je_colonial_administration_button_expand_southern_africa
	scripted_button = je_colonial_administration_button_expand_congo

	weight = 100

	should_be_pinned_by_default = yes
}
﻿je_age_of_princes = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		can_form_nation = ETH
	}

	possible = {
		hidden_trigger = { always = yes }
	}

	complete = {
		c:ETH ?= THIS
	}

	on_complete = {
		trigger_event = { id = formation.4 popup = yes }
	}

	on_monthly_pulse = {
		random_events = {
			11 = 0
			1 = ethiopia.1
		}
	}

	weight = 100
	should_be_pinned_by_default = yes
}
﻿je_fascism_1 = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_internal_affairs

	is_shown_when_inactive = {
		NOT = { has_variable = completed_fascism_1_var }
		has_technology_researched = mass_propaganda
		NOT = { is_country_type = decentralized }
	}

	possible = {
		any_interest_group = {
			OR = {
				is_being_bolstered = yes
				is_in_government = yes
			}
			any_scope_character = {
				OR = {
					has_role = politician
					has_role = agitator
				}
				OR = {
					has_ideology = ideology:ideology_fascist
					has_ideology = ideology:ideology_integralist
				}
			}
		}
	}

	immediate = {
		random_interest_group = {
			limit = {
				OR = {
					is_being_bolstered = yes
					is_in_government = yes
				}
				any_scope_character = {
					OR = {
						has_role = politician
						has_role = agitator
					}
					OR = {
						has_ideology = ideology:ideology_fascist
						has_ideology = ideology:ideology_integralist
					}
				}
			}
			save_scope_as = fascist_ig
			set_variable = og_fascist_ig
		}
	}

	complete = {
		any_interest_group = {
            is_in_government = yes
            leader = {
				OR = {
					has_ideology = ideology:ideology_fascist
					has_ideology = ideology:ideology_integralist
				}
            }
        }
		is_at_war = no
        institution_investment_level = {
            institution = institution_police
            value >= 3
        }
        OR = {
            has_law = law_type:law_dedicated_police
            has_law = law_type:law_militarized_police
        }
        any_scope_character = {
            has_role = general
            is_busy = no
            is_ruler = no
            count >= 2
        }
    }

	on_complete = {
		set_variable = {
			name = completed_fascism_1_var
		}
		trigger_event = { id = fascism_events.1 }
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = fascism_events.2
		}
	}

	invalid = {
		# pelly_says = no
		NOT = {
			any_interest_group = {
				custom_tooltip = {
					text = fascism_1_tt
					any_scope_character = {
						OR = {
							has_role = politician
							has_role = agitator
						}
						OR = {
							has_ideology = ideology:ideology_fascist
							has_ideology = ideology:ideology_integralist
						}
					}
				}
				OR = {
					is_being_bolstered = yes
					is_in_government = yes
				}
			}
		}
	}

	weight = 10000
	can_deactivate = no
}

je_fascism_2 = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_internal_affairs

	immediate = {
		random_interest_group = {
			limit = {
				OR = {
					is_being_bolstered = yes
					is_in_government = yes
				}
				leader = {
					OR = {
						has_ideology = ideology:ideology_fascist
						has_ideology = ideology:ideology_integralist
					}
				}
			}
			save_scope_as = fascist_ig
			set_variable = og_fascist_ig
		}
	}

	complete = {
		OR = {
			has_law = law_type:law_dedicated_police
			has_law = law_type:law_militarized_police
		}
		institution_investment_level = {
			institution = institution_police
			value >= 3
		}
		OR = {
			has_law = law_type:law_national_guard
			has_law = law_type:law_secret_police
		}
		OR = {
			has_law = law_type:law_autocracy
			has_law = law_type:law_oligarchy
			has_law = law_type:law_single_party_state
		}
		custom_tooltip = {
			text = fascism_2_tt
			trigger_if = {
				limit = {
					any_interest_group = {
						leader = {
							OR = {
								has_ideology = ideology:ideology_vanguardist
								has_ideology = ideology:ideology_communist
								has_ideology = ideology:ideology_anarchist
								has_ideology = ideology:ideology_radical
							}
						}
					}
				}
				any_interest_group = {
					filter = {
						leader = {
							OR = {
								has_ideology = ideology:ideology_vanguardist
								has_ideology = ideology:ideology_communist
								has_ideology = ideology:ideology_anarchist
								has_ideology = ideology:ideology_radical
							}
						}
					}
					OR = {
						is_marginal = yes
						is_being_suppressed = yes
					}
					count = all
				}
			}
		}
	}
	on_complete = {
		trigger_event = { id = fascism_events.3 }
	}

	on_monthly_pulse = {
		random_events = {
			200 = 0
			10 = fascism_events.4
		}
	}

	invalid = {
		NOT = {
			any_interest_group = {
				custom_tooltip = {
					text = fascism_1_tt
					leader = {
						OR = {
							has_ideology = ideology:ideology_fascist
							has_ideology = ideology:ideology_integralist
						}
					}
				}
				OR = {
					is_being_bolstered = yes
					is_in_government = yes
				}
			}
		}
	}

	weight = 10000
	can_deactivate = no
}

je_modernization_program = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	group = je_group_internal_affairs

	immediate = {
		random_interest_group = {
			limit = {
				has_variable = og_fascist_ig
			}
			save_scope_as = fascist_ig
			leader = {
				save_scope_as = fascist_leader
			}
		}
	}

	complete = {
		NOT = { has_law = law_type:law_free_trade }
		custom_tooltip = {
			text = je_modernization_program_tt
			capital = {
				infrastructure >= 150
			}
		}
		any_scope_state = { 
			filter = {
				is_incorporated = yes
			}
			any_scope_building = {
				is_building_type = building_railway
				level >= 2
			}
			percent = 1
		}
		any_scope_state = {
			is_incorporated = yes
			has_building = building_port
			count >= 2
		}
	}

	on_complete = {
		trigger_event = { id = fascism_events.5 }
	}

	on_monthly_pulse = {
	}

	invalid = {
		NOT = {
			any_interest_group = {
				custom_tooltip = {
					text = fascism_1_tt
					leader = {
						OR = {
							has_ideology = ideology:ideology_fascist
							has_ideology = ideology:ideology_integralist
						}
					}
				}
				OR = {
					is_being_bolstered = yes
					is_in_government = yes
				}
			}
		}
	}

	weight = 10000
	can_deactivate = no
}

je_ethno_nationalist = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_internal_affairs

	is_shown_when_inactive = {
		NOT = { has_variable = completed_ethno_nationalism_var }
		any_interest_group = {
			any_scope_character = {
				OR = {
					has_role = politician
					has_role = agitator
				}
				OR = {
					has_ideology = ideology:ideology_fascist
					has_ideology = ideology:ideology_ethno_nationalist
				}
			}
		}
		NOT = { is_country_type = unrecognized }
		NOT = { is_country_type = decentralized }
	}

	possible = {
		any_interest_group = {
			OR = {
				is_being_bolstered = yes
				is_in_government = yes
			}	
			any_scope_character = {
				OR = {
					has_role = politician
					has_role = agitator
				}
				OR = {
					has_ideology = ideology:ideology_fascist
					has_ideology = ideology:ideology_ethno_nationalist
				}
			}
		}
	}

	complete = {
		has_law = law_type:law_ethnostate
		OR = {
			has_law = law_type:law_migration_controls
			has_law = law_type:law_closed_borders
		}
		custom_tooltip = {
			text = je_ethno_nationalist_tt
			NOT = {
				any_state = {
					is_homeland_of_country_cultures = ROOT
					NOT = { owner = ROOT }
				}
			}
		}
	}

	on_complete = {
		set_variable = {
			name = completed_ethno_nationalism_var
		}
		trigger_event = { id = fascism_events.6 }
	}

	invalid = {
		NOT = {
			any_interest_group = {
				custom_tooltip = {
					text = ethnonationalist_tt
					leader = {
						has_ideology = ideology:ideology_ethno_nationalist
					}
				}
				OR = {
					is_being_bolstered = yes
					is_in_government = yes
				}
			}
		}
	}

	weight = 10000
	can_deactivate = no
}

﻿je_schleswig_holstein_question = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		hidden_trigger = { NOT = { has_global_variable = schleswig_holstein_question_solved } }		
		OR = {
			country_has_primary_culture = cu:north_german
			country_has_primary_culture = cu:south_german
		}
	}

	possible = {
		hidden_trigger = { NOT = { has_global_variable = schleswig_holstein_question_solved } }			
		OR = {
			country_has_primary_culture = cu:north_german
			country_has_primary_culture = cu:south_german
		}			
	}

	complete = {
		trigger_if = {
			limit = {
				OR = {
					c:HOL ?= this
					c:SCH ?= this
				}
			}
			is_subject = no
		}
		trigger_if = {
			limit = {
				NOT = { c:HOL ?= this }
				NOT = { c:SCH ?= this }
				exists = c:DEN
			}
			custom_tooltip = {
				text = je_schleswig_holstein_question_state_ownership_desc
				any_scope_state = { state_region = s:STATE_SCHLESWIG_HOLSTEIN }
				s:STATE_SCHLESWIG_HOLSTEIN = {
					NOT = {
						any_scope_state = {
							OR = {
								NOT = {
									owner = {
										OR = {
											country_has_primary_culture = cu:north_german
											country_has_primary_culture = cu:south_german
										}
									}
								}
								owner = {
									is_subject_of = c:DEN
								}
							}
						}
					}
				}
			}
		}
		trigger_if = {
			limit = {
				c:LUB ?= this
			}
			country_or_subject_owns_entire_state_region = STATE_SCHLESWIG_HOLSTEIN
		}
	}
	
	fail = {
		custom_tooltip = {
			has_global_variable = schleswig_holstein_question_solved
			text = je_schleswig_holstein_question_solved_fail_trigger_desc
		}
		NOT = { has_modifier = schleswig_holstein_question_solver }
	}	

	on_complete = {
		add_modifier = {
			name = schleswig_holstein_question_solver
			months = long_modifier_time
		}	
		hidden_effect = { set_global_variable = schleswig_holstein_question_solved }		
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = { 
				desc = je_schleswig_holstein_question_status
			}
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes
}

je_german_unification_idea = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		OR = {
			country_has_primary_culture = cu:north_german
			country_has_primary_culture = cu:south_german
		}
	}

	possible = {
		OR = {
			country_has_primary_culture = cu:north_german
			country_has_primary_culture = cu:south_german
		}	
	}
 
	complete = {		
		any_country = {
			filter = {
				OR = {
					country_has_primary_culture = cu:north_german
					country_has_primary_culture = cu:south_german				
				}
			}
			has_technology_researched = nationalism	
			percent >= 0.75
		}
	}

	on_complete = {
		hidden_effect = {
			if = {
				limit = {
					any_country = { 
						country_rank >= rank_value:great_power 
						OR = {
							AND = {
								country_has_primary_culture = cu:north_german
								root = { country_has_primary_culture = cu:north_german }
							}						
							AND = {
								country_has_primary_culture = cu:south_german
								root = { country_has_primary_culture = cu:south_german }
							}						
						}
					}			
				}			
				random_country = {
					limit = { 
						country_rank >= rank_value:great_power 
						OR = {
							AND = {
								country_has_primary_culture = cu:north_german
								root = { country_has_primary_culture = cu:north_german }
							}						
							AND = {
								country_has_primary_culture = cu:south_german
								root = { country_has_primary_culture = cu:south_german }
							}						
						}					
					}
					save_scope_as = german_unifier_candidate
				}				
			}
			else_if = {
				limit = {
					any_country = { 
						country_rank >= rank_value:great_power 
						OR = {
							country_has_primary_culture = cu:north_german
							country_has_primary_culture = cu:south_german					
						}
					}			
				}			
				random_country = {
					limit = { 
						country_rank >= rank_value:great_power 
						OR = {
							country_has_primary_culture = cu:north_german					
							country_has_primary_culture = cu:south_german						
						}					
					}
					save_scope_as = german_unifier_candidate
				}				
			}
			else_if = {
				limit = {
					any_country = { 
						country_rank >= rank_value:major_power 
						OR = {
							AND = {
								country_has_primary_culture = cu:north_german
								root = { country_has_primary_culture = cu:north_german }
							}						
							AND = {
								country_has_primary_culture = cu:south_german
								root = { country_has_primary_culture = cu:south_german }
							}						
						}
					}			
				}			
				random_country = {
					limit = { 
						country_rank >= rank_value:major_power 
						OR = {
							AND = {
								country_has_primary_culture = cu:north_german
								root = { country_has_primary_culture = cu:north_german }
							}						
							AND = {
								country_has_primary_culture = cu:south_german
								root = { country_has_primary_culture = cu:south_german }
							}						
						}					
					}
					save_scope_as = german_unifier_candidate
				}				
			}	
			else_if = {
				limit = {
					any_country = { 
						country_rank >= rank_value:major_power 
						OR = {
							country_has_primary_culture = cu:north_german
							country_has_primary_culture = cu:south_german					
						}
					}			
				}			
				random_country = {
					limit = { 
						country_rank >= rank_value:major_power 
						OR = {
							country_has_primary_culture = cu:north_german					
							country_has_primary_culture = cu:south_german						
						}					
					}
					save_scope_as = german_unifier_candidate
				}				
			}			
		}	
		
		hidden_effect = { set_variable = je_german_unification_idea }
		trigger_event = { id = german_unification.5 } # German National Identity
	}

	status_desc = {
		first_valid = {
			triggered_desc = { 
				desc = je_german_unification_idea_status
			}
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes
}

je_north_german_unification = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_historical_content
	
	complete = {
		custom_tooltip = {
			has_global_variable = schleswig_holstein_question_solved
			text = je_schleswig_holstein_question_solved_trigger_desc
		}
		hidden_trigger = {
			has_variable = je_unification_progress
		}	
		has_technology_researched = nationalism
		is_unification_candidate = GER
		custom_tooltip = {
			text = je_german_unification_sole_candidate_trigger_desc
			NOT = {
				any_country = {
					NOT = { this = root }				
					is_unification_candidate = GER
				}
			}	
		}				
	}

	on_monthly_pulse = {
		events = {
			german_unification.3 # Bismarck
		}
	
		effect = {
			if = { 
				limit = { NOT = { has_variable = je_unification_progress } } 
				set_variable = je_unification_progress
			}
		}	
	}

	on_complete = {
		trigger_event = { id = german_unification.1 } # North German Confederation
		remove_variable = je_unification_progress
	}

	status_desc = {
		first_valid = {
			triggered_desc = { 
				desc = je_north_german_status
			}
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes
}

je_south_german_unification = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			has_global_variable = schleswig_holstein_question_solved
			text = je_schleswig_holstein_question_solved_trigger_desc
		}	
		hidden_trigger = {
			has_variable = je_unification_progress
		}	
		has_technology_researched = nationalism
		is_unification_candidate = GER
		custom_tooltip = {
			text = je_german_unification_sole_candidate_trigger_desc
			NOT = {
				any_country = {
					NOT = { this = root }				
					is_unification_candidate = GER
				}
			}	
		}	
	}

	on_monthly_pulse = {
		effect = {
			if = { 
				limit = { NOT = { has_variable = je_unification_progress } } 
				set_variable = je_unification_progress
			}
		}
	}

	on_complete = {
		trigger_event = { id = german_unification.1 } # South German Confederation
		remove_variable = je_unification_progress
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_south_german_status
				trigger = {
					always = yes
				}
			}
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes
}

je_german_unification = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		has_variable = je_german_confederate_unifier
	}

	possible = {
		hidden_trigger = { has_variable = je_german_confederate_unifier }
		country_rank >= rank_value:major_power
		has_technology_researched = pan-nationalism
		is_subject = no
	}

	complete = {
		custom_tooltip = {
			c:GER ?= this
			text = je_german_unification_complete_trigger_desc
		}	
	}

	on_complete = {
		show_as_tooltip = {
			trigger_event = { id = german_unification.4 popup = yes } # German Unification
		}
		remove_variable = je_unification_progress
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_german_status
			}
		}
	}

	invalid = {
		OR = {
			country_has_primary_culture = cu:hungarian
			c:HRE ?= THIS
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes
}

﻿je_greek_nationalism = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		country_has_primary_culture = cu:greek
	}

	possible = {
		has_technology_researched = nationalism
		custom_tooltip = {
			text = greek_state_possible_tt
			any_scope_state = {
				state_region = {
					is_homeland = cu:greek
				}
				count >= 3
			}
		}
		is_subject = no
	}

	immediate = {
		trigger_event = { id = greece.1 }
	}

	complete = {
		custom_tooltip = {
			text = greek_state_complete_tt
			any_scope_state = {
				state_region = {
					is_homeland = cu:greek
				}
				count >= 7
			}
		}
	}

	on_complete = {
		trigger_event = { id = greece.2 }
	}

	weight = 20
}
﻿je_risorgimento = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		OR = {
			country_has_primary_culture = cu:north_italian
			country_has_primary_culture = cu:south_italian
		}
		NOR = {
			is_revolutionary = yes
			is_secessionist = yes
		}
	}	
	
	scripted_button = je_risorgimento_austrian_radicals_button
	scripted_button = je_risorgimento_italian_radicals_button

	immediate = {
		set_variable = { name = italian_states_radicals_total_bar value = 0 }
		cu:north_italian = {
			save_scope_as = north_italian_scope
		}
		cu:south_italian = {
			save_scope_as = south_italian_scope
		}
		trigger_event = { id = italian_unification.10 popup = yes }
	}
		
	possible = {
		has_technology_researched = nationalism
		NOR = {
			country_tier = hegemony
			country_tier = empire
		}
	}

	complete = {
		hidden_trigger = {
			has_variable = je_unification_progress
		}
		custom_tooltip = {
			text = is_italy_tt
			c:ITA ?= this
		}
		
	}

	on_weekly_pulse = {
		events = {
			italian_unification.4
		}
		effect = {
			do_risorgimento_math = yes
		}
	}

	on_monthly_pulse = {
		random_events = {
			180 = 0
			20 = italian_unification.2
		}
		effect = {
			do_risorgimento_math = yes
			if = { 
				limit = { NOT = { has_variable = je_unification_progress } } 
				set_variable = je_unification_progress
			}
		}
	}

	on_complete = {
		show_as_tooltip = {
			trigger_event = { id = italian_unification.1 popup = yes }
		}
	}

	current_value = {
		value = root.var:italian_states_radicals_total_bar
	}

	goal_add_value = {
		add = 25
	}

	progressbar = yes

	weight = 100

	should_be_pinned_by_default = yes
}
﻿je_land_reclamation = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"
	
	group = je_group_internal_affairs

	on_yearly_pulse = {
		random_events = {
			4 = 0
			1 = land_reclamation.1
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		remove_modifier = modifier_reclaiming_land
		show_as_tooltip = {
			add_modifier = { # prestige
				name = land_reclamation_complete
				months = long_modifier_time
			}
		}
	}

	fail = {
		OR = {
			NOT = { owns_entire_state_region = STATE_FRIESLAND }
			NOT = { owns_entire_state_region = STATE_HOLLAND }
		}
	}

	on_fail = {
		remove_modifier = modifier_reclaiming_land
		remove_variable = dutch_land_reclaimer
	}

	current_value = {
		value = global_var:land_reclamation_global
	}

	goal_add_value = { # if you change this, update the thresholds in the event
		add = 10
	}

	progressbar = yes

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = land_reclamation_no_tech
				trigger = {
					NOT = { has_technology_researched = concrete_dockyards }
				}
			}
			triggered_desc = {
				desc = land_reclamation_tech
				trigger = {
					has_technology_researched = concrete_dockyards
				}
			}
		}
	}

	weight = 10
	should_be_pinned_by_default = yes
}
﻿ je_dreadnoughts = {
 	icon = "gfx/interface/icons/event_icons/event_military.dds"

   group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = ironclad_tech
 		navy_size >= 10
 	}

 	possible = {
 		has_technology_researched = dreadnought
 		navy_size >= 30
 	}

 	complete = {
 		is_at_war = yes
        country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_dreadnought  
            value >= 0.2  
        }
 		# for these JE's we would want this to be true for X months, but excluding that for the sake of readability
        any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
               commander_military_formation = {
                   formation_navy_unit_type_fraction = {  
                       target = unit_type:combat_unit_type_dreadnought  
                       value >= 0.2  
                   }
               }
            }
			percent >= 0.25
        }
 	}

 	on_complete = {
 		trigger_event = { id = naval_tech_events.1 }
 	}

 	timeout = 3650
 }

 je_destroyers = {
 	icon = "gfx/interface/icons/event_icons/event_military.dds"

   group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = monitor_tech
 		has_technology_researched = ironclad_tech
 		navy_size >= 10
 	}

 	possible = {
 		has_technology_researched = destroyer
 		navy_size >= 30
 	}

 	complete = {
 		is_at_war = yes
 		country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_destroyer
            value >= 0.2  
        }
 		# for these JE's we would want this to be true for X months, but excluding that for the sake of readability
 		any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
               commander_military_formation = {
                   formation_navy_unit_type_fraction = {  
                       target = unit_type:combat_unit_type_destroyer  
                       value >= 0.2  
                   }
               }
            }
			percent >= 0.25
        }
 	}

 	on_complete = {
 		trigger_event = { id = naval_tech_events.2 }
 	}

 	timeout = 3650
 }

 je_battleships = {
 	icon = "gfx/interface/icons/event_icons/event_military.dds"

   group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = dreadnought
 		navy_size >= 10
 	}

 	possible = {
 		has_technology_researched = battleship_tech
 		navy_size >= 30
 	}

 	complete = {
 		is_at_war = yes
 		country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_battleship
            value >= 0.2  
        }
 		# for these JE's we would want this to be true for X months, but excluding that for the sake of readability
 		any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
               commander_military_formation = {
                   formation_navy_unit_type_fraction = {  
                       target = unit_type:combat_unit_type_battleship  
                       value >= 0.2  
                   }
               }
            }
			percent >= 0.25
        }
 	}

 	on_complete = {
 		trigger_event = { id = naval_tech_events.3 }
 	}

 	timeout = 3650
 }

﻿# Path to Liberalism
je_liberalism_1 = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
   group = je_group_internal_affairs

	is_shown_when_inactive = {
		NOT = { has_variable = liberalism_1_done }
		has_technology_researched = democracy
		has_technology_researched = international_trade
	}

	possible = {
		any_interest_group = {
			OR = {
				is_being_bolstered = yes
				is_in_government = yes
			}
			OR = {
				trigger_if = {
					limit = {
						owner = {
							has_technology_researched = feminism
						}
					}
					has_ideology = ideology:ideology_liberal_modern
				}
				trigger_else = {
					has_ideology = ideology:ideology_liberal
				}
				any_scope_character = {
					OR = {
						has_role = politician
						has_role = agitator
					}
					OR = {
						has_ideology = ideology:ideology_radical
						has_ideology = ideology:ideology_market_liberal
						has_ideology = ideology:ideology_humanitarian
						has_ideology = ideology:ideology_humanitarian_royalist
						has_ideology = ideology:ideology_feminist
					}
				}
			}
		}
	}

	complete = {
		OR = {
			has_law = law_type:law_census_voting
			has_law = law_type:law_universal_suffrage
		}

		government_legitimacy >= 50
		any_interest_group = {
			is_in_government = yes
			OR = {
				has_ideology = ideology:ideology_liberal
				has_ideology = ideology:ideology_liberal_modern
				leader = { has_ideology = ideology:ideology_radical }
				leader = { has_ideology = ideology:ideology_market_liberal }
			}
		}
		is_at_war = no
		NOT = {
			any_interest_group = {
				is_insurrectionary = yes
			}
		}
	}
	
	on_complete = {
		set_variable = liberalism_1_done
		trigger_event = { id = liberalism.1 }
	}
	
	weight = 10000
}

# Freedom of Trade
je_liberalism_2 = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"
	
	group = je_group_internal_affairs

	complete = {
		has_law = law_type:law_free_trade
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	current_value = {
		value = root.num_trade_routes
	}

	goal_add_value = {
		value = root.num_trade_routes
		multiply = 0.25
	}
	
	on_complete = {
		trigger_event = { id = liberalism.2 }
	}

	progressbar = yes
	
	weight = 5000
}

# Freedom of Thought
je_liberalism_3 = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	
	group = je_group_internal_affairs

	complete = {
		OR = {
			has_law = law_type:law_right_of_assembly
			has_law = law_type:law_protected_speech
		}
		OR = {
			has_law = law_type:law_freedom_of_conscience
			has_law = law_type:law_total_separation
		}
		any_scope_building = {
			is_building_type = building_university
			level >= 3
			occupancy > 0.9
		}
		any_scope_building = {
			is_building_type = building_arts_academy
			level >= 3
			occupancy > 0.9
		}
	}
	
	on_complete = {
		trigger_event = { id = liberalism.3 }
	}
	
	weight = 5000
}

# The New Colossus
je_liberalism_4 = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	
	group = je_group_internal_affairs

	complete = {
		OR = {
			has_law = law_type:law_freedom_of_conscience
			has_law = law_type:law_total_separation
		}
		has_law = law_type:law_slavery_banned
		has_law = law_type:law_multicultural
		has_law = law_type:law_no_migration_controls
		average_sol >= 12
	}
	
	on_complete = {
		trigger_event = { id = liberalism.4 }
	}
	
	weight = 5000
}
﻿je_trans_siberian_railway = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_global_variable = trans_siberian_done }
		owns_entire_state_region = STATE_MOSCOW
		any_state = {
			filter = {
				OR = {
					region = sr:region_east_siberia
					region = sr:region_west_siberia
				}
			}
			percent > 0.8
			owner = ROOT
		}
	}

	possible = {
		has_technology_researched = railways
	}

	complete = {
		any_scope_state = {
			filter = {
				OR = {
					state_region = s:STATE_MOSCOW
					state_region = s:STATE_YAROSLAVL
					state_region = s:STATE_NIZHNY_NOVGOROD
					state_region = s:STATE_CHUVASHIA
					state_region = s:STATE_KAZAN
					state_region = s:STATE_UFA
					state_region = s:STATE_CHELYABINSK
					state_region = s:STATE_URAL
					state_region = s:STATE_TOBOLSK
					state_region = s:STATE_TOMSK
					state_region = s:STATE_KRASNOYARSK
					state_region = s:STATE_IRKUTSK
					state_region = s:STATE_BURYATIA
					state_region = s:STATE_TRANS_BAIKAL
				}
			}
			has_building = building_railway
			percent = 1
		}
		OR = {
			AND = {
				any_scope_state = {
					state_region = s:STATE_YAKUTSK
					has_building = building_railway
				}
				any_scope_state = {
					state_region = s:STATE_OKHOTSK
					has_building = building_railway
				}
			}
			AND = {
				any_scope_state = {
					state_region = s:STATE_AMUR
					has_building = building_railway
				}
				any_scope_state = {
					state_region = s:STATE_OUTER_MANCHURIA
					has_building = building_railway
				}
			}
		}
	}

	on_complete = {
		set_global_variable = trans_siberian_done
		trigger_event = { id = major_railways.1 }
	}

	weight = 50
}

je_trans_continental_railway = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_global_variable = trans_continental_done }
		owns_entire_state_region = STATE_NEW_YORK
		any_scope_state = {
			state_region = s:STATE_NEBRASKA
		}
	}

	possible = {
		has_technology_researched = railways
		owns_entire_state_region = STATE_NEBRASKA
		owns_entire_state_region = STATE_CALIFORNIA
	}

	complete = {
		any_scope_state = {
			state_region = s:STATE_NEBRASKA
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_WYOMING
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_UTAH
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_NEVADA
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_CALIFORNIA
			has_building = building_railway
		}
	}

	on_complete = {
		set_global_variable = trans_continental_done
		trigger_event = { id = major_railways.2 }
	}

	weight = 50
}

je_canada_pacific_railway = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_global_variable = canada_pacific_done }
		OR = {
			any_scope_state = {
				state_region = s:STATE_QUEBEC
			}
			any_scope_state = {
				state_region = s:STATE_BRITISH_COLUMBIA
			}
			any_scope_state = {
				state_region = s:STATE_ONTARIO
			}
			any_scope_state = {
				state_region = s:STATE_ALBERTA
			}
			any_scope_state = {
				state_region = s:STATE_SASKATCHEWAN
			}
			any_scope_state = {
				state_region = s:STATE_MANITOBA
			}
		}
	}

	possible = {
		has_technology_researched = railways
		any_scope_state = {
			state_region = s:STATE_QUEBEC
		}
		any_scope_state = {
			state_region = s:STATE_BRITISH_COLUMBIA
		}
		any_scope_state = {
			state_region = s:STATE_ONTARIO
		}
		any_scope_state = {
			state_region = s:STATE_ALBERTA
		}
		any_scope_state = {
			state_region = s:STATE_SASKATCHEWAN
		}
		any_scope_state = {
			state_region = s:STATE_MANITOBA
		}
	}

	complete = {
		any_scope_state = {
			state_region = s:STATE_QUEBEC
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_BRITISH_COLUMBIA
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_ONTARIO
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_ALBERTA
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_SASKATCHEWAN
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_MANITOBA
			has_building = building_railway
		}
	}
	
	on_complete = {
		set_global_variable = canada_pacific_done
		trigger_event = { id = major_railways.3 }
	}
	
	weight = 50
}
﻿je_manifest_destiny_mexico = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_historical_content
	
	# note that if you change this, also update the decision
	complete = {
		owns_entire_state_region = STATE_CALIFORNIA
		owns_entire_state_region = STATE_NEVADA
		owns_entire_state_region = STATE_UTAH
		owns_entire_state_region = STATE_ARIZONA
		owns_entire_state_region = STATE_NEW_MEXICO
		owns_entire_state_region = STATE_TEXAS
	}

	on_complete = {
		trigger_event = { id = manifest_destiny.1 }
	}

	weight = 100
	should_be_pinned_by_default = yes
}

je_manifest_destiny_frontier_wars = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"
	
	group = je_group_historical_content
	
	# note that if you change this, also update the decision
	complete = {
		owns_entire_state_region = STATE_MONTANA
		owns_entire_state_region = STATE_WYOMING
		owns_entire_state_region = STATE_COLORADO
		owns_entire_state_region = STATE_NORTH_DAKOTA
		owns_entire_state_region = STATE_SOUTH_DAKOTA
		owns_entire_state_region = STATE_NEBRASKA
		owns_entire_state_region = STATE_KANSAS
	}
	
	on_complete = {
		trigger_event = { id = manifest_destiny.2 }
	}

	on_monthly_pulse = {
		random_events = {
			10 = 0
			1 = manifest_destiny.3
		}
	}
	
	weight = 100
	
	transferable = no
	should_be_pinned_by_default = yes
}
﻿je_terakoya = {
	icon = "gfx/interface/icons/institution_icons/schools.dds"
	
	group = je_group_historical_content

	modifiers_while_active = {
		modifier_jap_terakoya
	}

	complete = {
		institution_investment_level = {
			institution = institution_schools
			value >= 3
		}
	}

	on_complete = {
		add_modifier = {
			name = modifier_legacy_of_terakoya
			months = long_modifier_time
			is_decaying = yes
		}
	}

	weight = 100
	should_be_pinned_by_default = yes
}

je_meiji_restoration = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		exists = c:JAP
		c:JAP = ROOT
		NOT = { has_variable = meiji_restoration_complete }
		has_law = law_type:law_monarchy
	}

	possible = {
		has_law = law_type:law_monarchy
		ig:ig_landowners = {
			is_in_government = no
		}
		OR = {
			government_legitimacy >= 50
			ig:ig_landowners = { is_marginal = yes }
			has_revolution = yes						
		}
	}

	immediate = {
		set_variable = {
			name = shogunate_var
			value = 0
		}
	}

	is_progressing = {
		meiji_completion_trigger = yes
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					meiji_completion_trigger = yes
				}
				change_variable = {
					name = shogunate_var
					add = 1
				}
			}
		}
	}

	complete = {
		# If-else clause to avoid errors because of missing variable before JE activates
		trigger_if = {
			limit = { exists = var:shogunate_var }
			OR = {
				custom_tooltip = {
					text = defeat_shogunate_civil_war_tt
					scope:journal_entry = { is_goal_complete = yes }
				}
				AND = {
					scope:journal_entry = { is_goal_complete = yes }
					meiji_completion_trigger = yes
				}	
			}
		}
		trigger_else = {
			custom_tooltip = je_meiji_restoration_goal
			OR = {
				custom_tooltip = defeat_shogunate_civil_war_tt
				meiji_completion_trigger = yes	
			}
		}
	}

	on_complete = {
		set_variable = meiji_restoration_complete
		if = {
			limit = { has_modifier = shogun_ig_forced_to_open_market }
			remove_modifier = shogun_ig_forced_to_open_market
		}			
		trigger_event = {
			id = meiji.1
		}
	}
	
	on_fail = {
		if = {
			limit = { has_modifier = shogun_ig_forced_to_open_market }
			remove_modifier = shogun_ig_forced_to_open_market
		}
		if = {
			limit = { has_law = law_type:law_monarchy }		
			add_modifier = {
				name = honorable_restoration_failed
				months = very_long_modifier_time
				is_decaying = yes
			}
		}
	}

	fail = {
		OR = {
			ig:ig_landowners = {
				is_in_government = yes
			}
			NOT = { has_law = law_type:law_monarchy }			
		}
	}

	current_value = {
		value = root.var:shogunate_var
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 10000
	should_be_pinned_by_default = yes
}


je_meiji_main = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	
	group = je_group_historical_content

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		set_variable = meiji_reforms_complete_var
		trigger_event = {
			id = meiji.2
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = meiji.4
			10 = meiji.5
			10 = meiji.6
		}
	}

	current_value = {
		value = var:meiji_var
	}

	goal_add_value = {
		add = 3
	}

	progressbar = yes

	weight = 10000
	should_be_pinned_by_default = yes
}

je_meiji_economy = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_historical_content

	complete = {
		in_default = no
		any_scope_state = {
			filter = {
				is_incorporated = yes
			}
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 5
			}
			has_building = building_railway
			percent > 0.7
		}
	}

	on_complete = {
		change_variable = {
			name = meiji_var
			add = 1
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = meiji.7
			10 = meiji.8
		}
	}

	transferable = no

	weight = 5000
}

je_meiji_army = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_historical_content

	complete = {
		NOT = { has_law = law_type:law_serfdom }
		ig:ig_armed_forces = {
			is_in_government = no
		}
		has_technology_researched = napoleonic_warfare
		NOR = {
			any_scope_building = {
				is_building_type = building_barracks
				has_active_production_method = pm_no_organization
			}
			any_military_formation = {
				filter = {
					is_army = yes
				}
				any_combat_unit = {
					has_unit_type = unit_type:combat_unit_type_irregular_infantry
				}
				percent >= 0.25
			}
		}
	}

	on_complete = {
		change_variable = {
			name = meiji_var
			add = 1
		}
		trigger_event = {
			id = meiji.3
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = meiji.9
			10 = meiji.10
		}
	}

	transferable = no

	weight = 5000
}

je_meiji_diplomacy = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"
	
	group = je_group_historical_content

	complete = {
		NOT = { has_law = law_type:law_isolationism }
		NOT = { has_law = law_type:law_traditionalism }
		NOT = { has_law = law_type:law_closed_borders }
		is_subject = no
	}

	on_complete = {
		change_variable = {
			name = meiji_var
			add = 1
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = meiji.11
			10 = meiji.12
		}
	}

	weight = 10000
}

﻿je_rifling = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_technology

    is_shown_when_inactive = {
        has_technology_researched = percussion_cap
    }
    possible = {
        has_technology_researched = rifling
        army_size >= 20
    }
    complete = {
        any_scope_building = { 
            is_building_type = building_arms_industry
            OR = {
                has_active_production_method = pm_rifles
                has_active_production_method = pm_repeaters
                has_active_production_method = pm_bolt_action_rifles
            }
            level >= 3
            occupancy >= 0.75
        }
		can_research = repeaters
    }
    on_complete = {
        trigger_event = { 
            id = military_tech_events.401 
        }
    }
	
	fail = {
		has_technology_researched = repeaters
	}
	
    timeout = 3650
}

je_machine_guns = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_technology
    is_shown_when_inactive = {
        is_player = yes
        has_technology_researched = handcranked_machine_gun
    }
    possible = {
        has_technology_researched = automatic_machine_guns
        army_size >= 20
    }
    complete = {
        army_mobilization_option_fraction = {  
			target = mobilization_option:mobilization_option_machinegunners  
			value >= 0.2  
		} 
		any_scope_war = {
			any_scope_front = {
				any_scope_general = {
					owner = ROOT
					this.commander_military_formation = {
						has_mobilization_option = mobilization_option:mobilization_option_machinegunners
					}
				}
			}
		}
    }
    on_complete = {
        trigger_event = { 
            id = military_tech_events.402
        }
    }
    timeout = 3650
}

je_ironclads = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_technology
    is_shown_when_inactive = {
        is_player = yes
        has_technology_researched = screw_frigate
    }
    possible = {
        has_technology_researched = ironclad_tech
        navy_size >= 30
    }
    complete = {
        country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_ironclad
            value >= 0.2  
        }
        any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
                commander_military_formation = {
                    formation_navy_unit_type_fraction = {  
                        target = unit_type:combat_unit_type_ironclad
                        value >= 0.2  
                    }
                }
            }
            percent >= 0.25
        }
    }
    on_complete = {
        trigger_event = { 
            id = military_tech_events.403
        }
    }
    timeout = 3650
}

je_monitors = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_technology
    is_shown_when_inactive = {
        is_player = yes
        has_technology_researched = screw_frigate
    }
    possible = {
        has_technology_researched = monitor_tech
        navy_size >= 20
    }
    complete = {
        country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_monitor
            value >= 0.2  
        }
        any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
                commander_military_formation = {
                    formation_navy_unit_type_fraction = {  
                        target = unit_type:combat_unit_type_monitor
                        value >= 0.2  
                    }
                }
            }
            percent >= 0.25
        }
    }
    on_complete = {
        trigger_event = { 
            id = military_tech_events.404
        }
    }
    timeout = 3650
}
﻿je_military_aviation = {
 	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_technology
 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = defense_in_depth
 		army_size >= 25
 	}

 	possible = {
 		has_technology_researched = military_aviation
 		army_size >= 40
 	}

 	complete = {
		army_mobilization_option_fraction = {  
			target = mobilization_option:mobilization_option_aerial_recon  
			value >= 0.2  
		}
 		any_scope_war = {
 			any_scope_front = {
				any_scope_general = {
					owner = ROOT
					this.commander_military_formation = {
						has_mobilization_option = mobilization_option:mobilization_option_aerial_recon
					}
				}
 			}
 		}
 	}

 	on_complete = {
 		trigger_event = { id = aviation.1 }
 	}

 	timeout = 3650
}

je_trench_warfare = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		OR = {
			has_technology_researched = general_staff
			has_technology_researched = electric_telegraph
		}
	}

	possible = {
		has_technology_researched = trench_works
	}

	complete = {
		any_scope_war = {
			any_scope_front = {
				any_military_formation = {
					owner = ROOT
					formation_army_unit_type_fraction = {
						target = unit_type:combat_unit_type_trench_infantry
						value >= 0.25
					}
				}
			}
		}
	}

	on_complete = {
		trigger_event = { id = trench_warfare.1 }
	}

	timeout = 3650
}

﻿je_niger_river_expedition = {
	
	group = je_group_expeditions

	on_monthly_pulse = {
		random_events = {
			70 = 0
			30 = expedition_events.20 #posts a notification
			20 = expedition_events.30 #local guides
			20 = expedition_events.40 #crew member drowns
			10 = expedition_events.41 #malaria
			10 = expedition_events.70 #dysentery
			20 = expedition_events.50 #river attack
			15 = expedition_events.60 #expedition film
			20 = expedition_events.80 #hippo
			20 = expedition_events.90 #previous expedition
			15 = expedition_events.100 #kidnap
			2 = expedition_events.110 #new leader(should normally occur organically if your leader dies)
			40 = expedition_events.120 #dr livingstone
			20 = expedition_events.130 #kidnapped ambassador
			10 = expedition_events.140 #leader's breakdown
			15 = expedition_events.150 #expedition thief
			20 = expedition_events.160 #cancelled expedition
			10 = expedition_events.560 #commander vice
			20 = expedition_events.695 #lost foreign expedition
		}
	}
	
	immediate = {
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			save_scope_as = expedition_leader
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = expedition_low_peril_loc
				trigger = {
					var:expedition_peril < 4
				}
			}
			triggered_desc = {
				desc = expedition_medium_peril_loc
				trigger = {
					var:expedition_peril <= 5
				}
			}
			triggered_desc = {
				desc = expedition_high_peril_loc
				trigger = {
					var:expedition_peril >= 6
				}
			}
		}
	}
	
    complete = {
		custom_tooltip = {
			text = je_expedition_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
    }
	
	on_complete = {
		trigger_event = { id = expedition_events.11 }
		remove_variable = on_expedition
		remove_variable = niger_river_expedition_var
		remove_modifier = modifier_large_expedition_cost 
		remove_modifier = expedition_extra_expenses_modifier
		set_variable = niger_river_expedition_success_var #grand exhibition check
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
    
    fail = {
		OR = {
			custom_tooltip = {
				text = je_expedition_fail
				OR = {
					NOT = {
						has_variable = on_expedition
					}
					var:expedition_peril >= 8
				}
			}
			custom_tooltip = {
				text = expedition_cancelled_tt
				has_variable = no_extra_expenses_var
			}
		}
    }
	
	on_fail = {
		trigger_event = { id = expedition_events.12 }
		remove_variable = on_expedition
		remove_variable = niger_river_expedition_var
		set_variable = failed_niger_river_var
		remove_modifier = modifier_large_expedition_cost
		remove_modifier = expedition_extra_expenses_modifier
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	current_value = {
		value = var:expedition_progress
	}

	goal_add_value = {
		add = 8
	}
	
	progressbar = yes
	
    weight = 200
    transferable = no
    should_be_pinned_by_default = yes
}
﻿je_submarines = {
 	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = self_propelled_torpedoes
        navy_size >= 10
 	}

 	possible = {
 		has_technology_researched = submarine
        navy_size >= 30
 	}
 	complete = {
        country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_submarine
            value >= 0.2  
        }
        any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
               commander_military_formation = {
                   formation_navy_unit_type_fraction = {  
                       target = unit_type:combat_unit_type_submarine
                       value >= 0.2  
                   }
               }
            }
			percent >= 0.25
        }
 	}

 	on_complete = {
 		trigger_event = { id = naval_tech_events.4 }
 	}

 	invalid = {
 	}

 	weight = 10000
 	can_deactivate = no
 }

 je_carriers = {
 	icon = "gfx/interface/icons/event_icons/event_military.dds"
	
	group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
        navy_size >= 10
 		has_technology_researched = dreadnought
 	}

 	possible = {
 		has_technology_researched = carrier_tech
        navy_size >= 30
 	}
 	complete = {
        country_navy_unit_type_fraction = {  
            target = unit_type:combat_unit_type_carrier
            value >= 0.2  
        }
        any_military_formation = {
            filter = {
                is_fleet = yes
            }
            any_scope_character = {
                has_role = admiral
                commander_military_formation = {
                   formation_navy_unit_type_fraction = {  
                       target = unit_type:combat_unit_type_carrier
                       value >= 0.2  
                   }
                }
            }
			percent >= 0.25
        }
 	}

 	on_complete = {
 		trigger_event = { id = naval_tech_events.5 }
 	}

 	invalid = {
 	}

 	weight = 10000
 	can_deactivate = no
 }

﻿je_opium = {	
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		is_player = yes
		any_market = {
			owner = root
		}
		NOT = { has_variable = opium_je_done }
		any_scope_state = {
			has_potential_resource = bg_opium_plantations
		}
	}

	possible = {
		any_scope_building = {
			is_building_type = building_opium_plantation
		}
		NOT = {
			any_primary_culture = {
				has_cultural_obsession = opium
			}
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_opium_plantation
			cash_reserves_ratio > 0.5
			weekly_profit > 0
			occupancy >= 0.75
			level >= 10
		}
		any_market = {
			NOT = { owner = root }
			any_trade_route = {
				exporter.owner = root
				goods = g:opium
			}
			owner = {
				any_primary_culture = {
					NOT = {
						has_cultural_obsession = opium
					}
				}
			}
		}
	}

	on_complete = {
		trigger_event = { id = opium_events.1 }
		set_variable = {
			name = opium_je_done
		}
	}

	transferable = no
	weight = 100
}

﻿je_opium_obsession = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_internal_affairs

	scripted_button = ban_opium_button
	scripted_button = unban_opium_button

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = opium_wars.6
			5 = opium_wars.7
			5 = opium_wars.8
		}
		effect = {
			if = {
				limit = {
					is_banning_goods = opium
					is_at_war = no
				}
				change_variable = {
					name = opium_wars_completion_tracker
					add = 1
				}
			}
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
		custom_tooltip = {
			text = opium_ban_tt
			is_banning_goods = opium
		}
		is_at_war = no
	}

	on_complete = {
		remove_variable = opium_wars_target
		trigger_event = {
			id = opium_wars.3
		}
	}

	fail = {
		OR = {
			has_law = law_type:law_free_trade
			any_country = {
				custom_tooltip = {
					text = opiumwars_fail_tt
					has_variable = opium_wars_aggressor
				}
				any_scope_state = {
					is_treaty_port = yes
					state_region = {
						any_scope_state = {
							owner = ROOT
						}
					}
				}
			}
		}
	}

	on_fail = {
		trigger_event = {
			id = opium_wars.4
		}
	}

	current_value = {
		value = root.var:opium_wars_completion_tracker
	}

	goal_add_value = {
		add = 60
	}
	
    timeout = 3650
    on_timeout = {
		hidden_effect = { remove_modifier = opium_wars_addiction_modifier }
		add_modifier = {
			name = opium_wars_addiction_modifier
			months = long_modifier_time
		}
		add_radicals = {
			value = large_radicals
		}		
		if = {
			limit = { has_journal_entry = je_warlord_china }
			chi_remove_1_fragile_unity = yes
		}	
    }	

	progressbar = yes

	weight = 10000
	should_be_pinned_by_default = yes
}

je_opium_wars = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_foreign_affairs
	
	complete = {
		any_scope_state = {
			is_treaty_port = yes
			state_region = {
				any_scope_state = {
					owner = scope:target
				}
			}
		}
	}

	on_complete = {
		trigger_event = {
			id = opium_wars.5
			days = 5
		}
	}

	fail = {
		custom_tooltip = {
			text = opium_wars_fail_tt
			scope:target = {
				NOT = {
					any_primary_culture = {
						has_cultural_obsession = opium
					}
				}
			}
		}
	}

	invalid = {
		NOT = {
			exists = scope:target
		}
	}

	on_invalid = {
		remove_variable = opium_wars_aggressor
	}

	on_fail = {
		custom_tooltip = {
			text = opium_wars_fail_invalid_tt
			remove_variable = opium_wars_aggressor
		}
	}

	on_timeout = {
		custom_tooltip = {
			text = opium_wars_fail_invalid_tt
			remove_variable = opium_wars_aggressor
		}
	}

	weight = 10000
	should_be_pinned_by_default = yes

	timeout = 1825
}

﻿je_patagonia = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		exists = c:PAT
		any_neighbouring_state = {
			owner = c:PAT
		}
		OR = {
			country_has_primary_culture = cu:south_andean
			country_has_primary_culture = cu:platinean
		}
	}

	scripted_button = patagonia_button

	possible = {
		NOT = { has_law = law_type:law_no_colonial_affairs }
	}

	complete = {
		OR = {
			owns_entire_state_region = STATE_ARAUCANIA
			AND = {
				owns_entire_state_region = STATE_PATAGONIA
				owns_entire_state_region = STATE_RIO_NEGRO
			}
		}
	}

	on_complete = {
		trigger_event = { id = patagonia.1 }
	}

	on_monthly_pulse = {
		random_events = {
			85 = 0
			10 = patagonia.2
			5 = bp1_patagonia.1
		}
	}

	weight = 20
}
﻿je_pedro_brazil = {
	icon = "gfx/interface/icons/law_icons/monarchy.dds"

	group = je_group_historical_content

	on_monthly_pulse = {
		events = {
			# Landowners become republicans
			pedro.2
			# Pedro comes of age
			pedro.3
			# AF/LA are marginalized
			pedro.5
			# AF/LA are powerful and not in government
			pedro.6
			# Republicans ask Pedro to be President
			pedro.9
			# Pedro signs the constitution
			pedro.11
		}
		random_events = {
			100 = 0
			10 = pedro.4 # Pedro becomes ill
			10 = pedro.12 # Death of Pedro's heirs
			10 = pedro.14 # To the Highest Standards
		}
		effect = {
			if = {
				limit = {
					any_civil_war = {
						civil_war_progress > 0.5
					}
					NOT = { has_variable = je_pedro_civilwar_point }
				}
				change_variable = { name = pedropoints subtract = 1 }
				set_variable = { name = je_pedro_civilwar_point years = 3 }
			}
			if = {
				limit = {
					OR = {
						in_default = yes
						has_modifier = declared_bankruptcy
					}
					NOT = { has_variable = je_pedro_default_point }
				}
				change_variable = { name = pedropoints subtract = 1 }
				set_variable = { name = je_pedro_default_point }
			}
			if = {
				limit = {
					country_rank >= rank_value:great_power
					NOT = { has_variable = je_pedro_gp_point }
				}
				change_variable = { name = pedropoints add = 1 }
				set_variable = { name = je_pedro_gp_point }
			}
		}
	}

	on_weekly_pulse = {
		events = {
			# startup event
			pedro.1
		}
	}

	immediate = {
		set_variable = {
			name = pedropoints
			value = 0
		}
		root = {
			save_scope_as = brazil_scope
		}
		ig:ig_intelligentsia = {
			save_scope_as = intelligentsia_ig
		}
	}

	complete = {
		has_law = law_type:law_monarchy
		AND = {
			custom_tooltip = {
				text = je_pedro_success
				var:pedropoints > 5
			}
			custom_tooltip = {
				text = pedro_dead
				ruler = {
					NOT = {
						has_variable = is_pedro
					}
				}
			}
		}
	}

	on_complete = {
		hidden_effect = {
			ruler ?= { set_character_immortal = no }
			if = {
				limit = {
					exists = heir
				}
				heir = { set_character_immortal = no }
			}
		}
		custom_tooltip = {
			text = pedro_heir_empowered_tt
		}
		custom_tooltip = {
			text = pedro_je_royalists_more_common_tt
			set_variable = brz_enduring_empire
		}
		# Monarchy survives
		trigger_event = {
			id = pedro.7
			popup = yes
		}
	}

	fail = {
		OR = {
			AND = {
				custom_tooltip = {
					text = je_pedro_fail
					var:pedropoints <= 0
				}
				ig:ig_landowners = {
					is_marginal = no
				}
				ig:ig_armed_forces = {
					is_marginal = no
				}
			}
			AND = {
				custom_tooltip = {
					text = je_pedro_fail_2
					var:pedropoints <= 5
				}
				custom_tooltip = {
					text = pedro_dead
					ruler = {
						NOT = {
							has_variable = is_pedro
						}
					}
				}
			}
		}
	}

	on_fail = {
		hidden_effect = {
			ruler ?= { set_character_immortal = no }
			if = {
				limit = {
					exists = heir
				}
				heir = { set_character_immortal = no }
			}
		}
		# Monarchy ended by coup
		trigger_event = {
			id = pedro.8
			popup = yes
		}
		show_as_tooltip = {
			if = {
				limit = {
					NOT = { has_law = law_type:law_landed_voting }
				}
				activate_law = law_type:law_landed_voting
			}
			activate_law = law_type:law_presidential_republic
			if = {
				limit = {
					ig:ig_landowners = {
						is_in_government = no
						is_marginal = no
					}
				}
				ig:ig_landowners = {
					add_ruling_interest_group = yes
				}
			}
			if = {
				limit = {
					ig:ig_armed_forces = {
						is_in_government = no
						is_marginal = no
					}
				}
				ig:ig_armed_forces = {
					add_ruling_interest_group = yes
				}
			}
		}
	}

	invalid = {
		NOT = { has_law = law_type:law_monarchy }
	}

	on_invalid = {
		hidden_effect = {
			ruler ?= { set_character_immortal = no }
			if = {
				limit = {
					exists = heir
				}
				heir = { set_character_immortal = no }
			}
		}
	}

	current_value = {
		value = root.var:pedropoints
	}

	goal_add_value = {
		add = 10
	}

	progressbar = yes

	weight = 100

	can_revolution_inherit = no
	transferable = no
	should_be_pinned_by_default = yes
}

# added by pedro.9
je_pedro_republic = {
	icon = "gfx/interface/icons/law_icons/presidential_republic.dds"

	group = je_group_historical_content

	complete = {
		has_law = law_type:law_presidential_republic
	}

	timeout = 3600

	on_complete = {
		# the actual ending event needs to be triggered from on_law_enactment_pass
		show_as_tooltip = {
			ruler = {
				set_character_as_ruler = yes
				set_as_interest_group_leader = yes
			}
		}
	}

	fail = {
		OR = {
			NOT = { has_journal_entry = je_pedro_brazil }
			custom_tooltip = {
				text = pedro_dead
				ruler = {
					NOT = {
						has_variable = is_pedro
					}
				}
			}
		}
	}

	on_timeout = {
		remove_pedropoint_effect = yes
	}

	invalid = {
		NOR = {
			has_law = law_type:law_monarchy
			has_law = law_type:law_presidential_republic
		}
	}

	weight = 100
	can_revolution_inherit = no
	transferable = no
	should_be_pinned_by_default = yes
}

# Added by pedro.13
je_isabel = {
	icon = "gfx/interface/icons/law_icons/monarchy.dds"

	group = je_group_historical_content

	immediate = {
		heir = {
			save_scope_as = isabel_scope
		}
	}	

	complete = {
		NOT = {
			has_law = law_type:law_no_womens_rights
		}
		scope:journal_entry = { is_goal_complete = yes }
	}

	on_complete = {
		trigger_event = {
			id = pedro.13
			popup = yes
		}
		custom_tooltip = {
			text = isabel_je_tt
		}
		show_as_tooltip = {
			ruler = { remove_modifier = isabel_heir_popularity }
			heir = { remove_modifier = isabel_heir_popularity }
		}
	}

	fail = {
		OR = {
			NOT = { has_journal_entry = je_pedro_brazil }
			heir ?= {
				custom_tooltip = {
					text = is_isabella_tt
					NOT = {
						has_variable = isabel_var
					}
				}
			}
			NOT = {
				exists = heir
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					NOT = {
						has_law = law_type:law_no_womens_rights
					}
				}
			}
			change_variable = {
				name = isabel_points
				add = 1
			}
		}
	}

	is_progressing = {
		has_journal_entry = je_pedro_brazil
		scope:target ?= {
			is_heir = yes
		}
		NOT = {
			has_law = law_type:law_no_womens_rights
		}
	}

	current_value = {
		value = root.var:isabel_points
	}

	goal_add_value = {
		add = 120
	}

	progressbar = yes

	weight = 100
	can_revolution_inherit = no
	transferable = no
	should_be_pinned_by_default = yes
}
﻿je_peru_bolivia = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	immediate = {
		cu:quechua = {
			save_scope_as = quechua_culture
		}
		cu:south_andean = {
			save_scope_as = south_andean_culture
		}
		c:BOL = {
			save_scope_as = bolivia_scope
		}
		set_variable = pbc_member
	}
	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					c:BOL ?= this
					government_legitimacy >= 50
				}
				change_global_variable = {
					name = peru_bolivia_var
					add = 1
				}
			}
		}
	}

	complete = {
		hidden_trigger = {
			c:BOL = this
		}
		scope:journal_entry = { is_goal_complete = yes }
		OR = {
			c:SPU ?= {
				is_subject_of = c:BOL
			}
			c:NPU ?= {
				is_subject_of = c:BOL
			}
			c:IQU ?= {
				is_subject_of = c:BOL
			}
			c:PEU ?= {
				is_subject_of = c:BOL
			}
		}
		custom_tooltip = {
			text = bol_no_revolutions_tt
			NOT = {
				any_country = {
					is_subject_of = c:BOL
					OR = {
						country_has_primary_culture = cu:south_andean
						country_has_primary_culture = cu:quechua
						country_has_primary_culture = cu:peruvian
					}
					has_revolution = yes
				}
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = peru_bolivia_completion_nonbolivia_tt
			if = {
				limit = {
					c:BOL ?= this
				}
				trigger_event = {
					id = peru_bolivia_events.1
				}
			}
		}
	}

	is_progressing = {
		c:BOL ?= {
			government_legitimacy >= 50
		}
		OR = {
			c:SPU ?= {
				is_subject_of = c:BOL
			}
			c:NPU ?= {
				is_subject_of = c:BOL
			}
			c:IQU ?= {
				is_subject_of = c:BOL
			}
			c:PEU ?= {
				is_subject_of = c:BOL
			}
		}
		NOT = {
			any_country = {
				is_subject_of = c:BOL
				has_revolution = yes
			}
		}
	}

	fail = {
		OR = {
			NOT = {
				exists = c:BOL
			}
			AND = {
				OR = {
					NOT = {
						exists = c:SPU
					}
					c:SPU ?= {
						NOT = { is_subject_of = c:BOL }
					}
				}
				OR = {
					NOT = {
						exists = c:NPU
					}
					c:NPU ?= {
						NOT = { is_subject_of = c:BOL }
					}
				}
				OR = {
					NOT = {
						exists = c:IQU
					}
					c:IQU ?= {
						NOT = { is_subject_of = c:BOL }
					}
				}
				OR = {
					NOT = {
						exists = c:PEU
					}
					c:PEU ?= {
						NOT = { is_subject_of = c:BOL }
					}
				}
			}
			NOT = {
				country_has_primary_culture = cu:south_andean
			}
			c:BOL ?= {
				is_subject = yes
			}
		}
	}

	on_fail = {
		if = { #Why? So that [somehow] this doesn't cause four fail events to fire at once. That should be impossible, but you never know.
			limit = {
				c:BOL ?= this
			} 
			if = {
				limit = {
					any_country = {
						has_variable = pbc_member
						is_player = yes
					}
				}
				random_country = {
					limit = {
						has_variable = pbc_member
						is_player = yes
					}
					trigger_event = { id = peru_bolivia_events.3 popup = yes }
				}
			}
			else = {
				ordered_country = {
					limit = {
						has_variable = pbc_member
					}
					order_by = gdp
					trigger_event = { id = peru_bolivia_events.3 popup = yes }
				}
			}
		}
		else_if = {
			limit = {
				NOT = {
					exists = c:BOL
				}
			}
			if = {
				limit = {
					any_country = {
						has_variable = pbc_member
						is_player = yes
					}
				}
				random_country = {
					limit = {
						has_variable = pbc_member
						is_player = yes
					}
					trigger_event = { id = peru_bolivia_events.3 popup = yes }
				}
			}
			else = {
				ordered_country = {
					limit = {
						has_variable = pbc_member
					}
					order_by = gdp
					trigger_event = { id = peru_bolivia_events.3 popup = yes }
				}
			}
		}
	}

	invalid = {
		OR = {
			AND = {
				OR = {
					c:IQU ?= this
					c:SPU ?= this
					c:NPU ?= this
					c:PEU ?= this
				}
				NOT = {
					is_subject_of = c:BOL
				}
			}
			NOT = {
				exists = c:BOL
			}
			AND = {
				exists = c:BOL 
				c:BOL = {
					NOT = {
						has_journal_entry = je_peru_bolivia
					}
				}
			}
		}
	}

	current_value = {
		value = global_var:peru_bolivia_var #This variable is initialised in Argentina's country file, because of load orders.
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 10000

	should_be_pinned_by_default = yes
}

je_war_of_the_confederation = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	immediate = {
		cu:quechua = {
			save_scope_as = quechua_culture
		}
		cu:south_andean = {
			save_scope_as = south_andean_culture
		}
		c:BOL = {
			save_scope_as = bolivia_scope
		}
		root = {
			save_scope_as = home_country_scope
		}
	}

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					exists = global_var:peru_bolivia_var
				}
				set_variable = { name = peru_bolivia_opposition_var value = global_var:peru_bolivia_var }
			}
		}
	}

	complete = {
		OR = {
			custom_tooltip = {
				text = peru_bolivia_dead_tt
				NOT = {
					exists = c:PBC
				}
				OR = {
					NOT = {
						exists = c:BOL
					}
					AND = {
						OR = {
							NOT = {
								exists = c:SPU
							}
							c:SPU ?= {
								NOT = { is_subject_of = c:BOL }
							}
						}
						OR = {
							NOT = {
								exists = c:NPU
							}
							c:NPU ?= {
								NOT = { is_subject_of = c:BOL }
							}
						}
						OR = {
							NOT = {
								exists = c:IQU
							}
							c:IQU ?= {
								NOT = { is_subject_of = c:BOL }
							}
						}
						OR = {
							NOT = {
								exists = c:PEU
							}
							c:PEU ?= {
								NOT = { is_subject_of = c:BOL }
							}
						}
					}
					c:BOL ?= {
						is_subject = yes
					}
				}
			}
			AND = {
				c:BOL ?= {
					relations:root >= relations_threshold:amicable
				}
				c:BOL ?= {
					OR = {
						is_in_customs_union_with = root
						has_diplomatic_pact = {
							who = root
							type = alliance
						}
						has_diplomatic_pact = {
							who = root
							type = defensive_pact
						}								
					}
				}
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = peru_bolivia_complete_tt
			if = {
				limit = {
					AND = {
						c:BOL ?= {
							relations:root >= relations_threshold:amicable
						}
						c:BOL ?= {
							OR = {
								is_in_customs_union_with = root
								has_diplomatic_pact = {
									who = root
									type = alliance
								}
								has_diplomatic_pact = {
									who = root
									type = defensive_pact
								}								
							}
						}
					}
				}
				trigger_event = { id = peru_bolivia_events.6 popup = yes }
			}
			else = {
				trigger_event = { id = peru_bolivia_events.5 popup = yes }
			}
		}
	}

	fail = {
		custom_tooltip = {
			text = peru_bolivia_success_tt
			exists = c:PBC
		}
	}

	on_fail = {
		trigger_event = { id = peru_bolivia_events.7 popup = yes }
	}

	invalid = {
		OR = {
			AND = {
				OR = {
					c:IQU ?= this
					c:SPU ?= this
					c:NPU ?= this
					c:PEU ?= this
				}
				NOT = {
					is_subject_of = c:BOL
				}
			}
			NOR = {
				exists = c:BOL
				exists = c:PBC
			}
			AND = {
				NOT = {
					exists = c:PBC
				}
				c:BOL = {
					NOT = {
						has_journal_entry = je_peru_bolivia
					}
				}
			}
		}
	}

	current_value = {
		value = var:peru_bolivia_opposition_var
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 10000

	should_be_pinned_by_default = yes
}
﻿# triggered by on_law_enactment_started
je_spanish_flu = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_crises

	immediate = {
		if = {
			limit = {
				has_variable = spanish_flu_over
			}
			remove_variable = spanish_flu_over
		}
	}

	on_monthly_pulse = {
		effect = {
			random_list = {
				1 = {
					modifier = {
						if = {
							limit = {
								NOT = {
									has_variable = plague_lockdown
									has_variable = plague_measures
								}
							}
						}
					add = -1
					}
					#nothing happens
				}
				3 = {
					modifier = {
						if = {
							limit = {
								has_variable = plague_lockdown
							}
							add = -2
						}
						else_if = {
							limit = {
								has_variable = plague_measures
								}
							add = -1
						}
					}
					trigger_event = { id = plague.2 }
				}			
				3 = {
					modifier = {
						if = {
							limit = {
								has_variable = plague_lockdown
							}
							add = -2
						}
						else_if = {
							limit = {
								has_variable = plague_measures
								}
							add = -1
						}
					}
					trigger_event = { id = plague.200 }
				}
			}
		}
		
		random_events = {
			10 = 0
			1 = plague.7
			1 = plague.8
			1 = plague.9
		}
	}
	
	on_weekly_pulse = {
		effect = {
			every_scope_state = {
				limit = {
					has_variable = plague_restrictions_tracker
					has_modifier = plague_modifier
				}
				if = {
					limit = {
						owner = {
							has_variable = plague_lockdown
						}
					}
					change_variable = {
						name = plague_restrictions_tracker
						add = 2
					}
				}
				else_if = {
					limit = {
						owner = {
							has_variable = plague_measures
						}
					}
					change_variable = {
						name = plague_restrictions_tracker
						add = 1
					}
				}
			}
		}
	}

	complete = {
		NOT = {
			any_scope_state = {
				has_modifier = plague_modifier
			}
		}
	}

	on_complete = {
		# This is just here to generate a list of plague states
		# For obvious reasons this doesn't do anything in practice
		every_scope_state = {
			limit = {
				has_modifier = plague_modifier
			}
			remove_modifier = plague_modifier
		}
		set_variable = spanish_flu_over
	}

	weight = 100
	should_be_pinned_by_default = yes
}
﻿je_objective_expand_goods_production = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
		scope:target = {
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
			is_subsidized = no
		}
	}		
	
	current_value = {
		value = scope:target.level
	}
	
	goal_add_value = {
		value = 1
	}
	
	is_progressing = {
		exists = scope:target
		scope:target = { is_under_construction = yes }
	}
	
	invalid = {
		custom_tooltip = {
			text = je_objective_expand_goods_production_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}
		}
	}
	
	
	on_complete = {
		hidden_effect = {
			owner = {
				start_tutorial_lesson = { 
					tutorial_lesson = expand_goods_production_complete
					journal_entry = je:je_objective_expand_goods_production
				}
			}
		}
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_expand_goods_production
	}
		
	weight = 1000
	transferable = yes
}

je_refining_goods = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {	
	}
	
	complete = {
		any_scope_building = {
			is_building_type = building_steel_mills
			level >= 4
			occupancy >= 0.9
			is_subsidized = no
		}
	}

	is_progressing = {
		any_scope_building = {
			is_building_type = building_steel_mills
			is_under_construction = yes 
		}
	}
	
	weight = 1002
	transferable = yes
}

je_specialized_goods = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {	
	}
	
	complete = {
		any_scope_building = {
			is_building_type = building_motor_industry
			level >= 2
			occupancy >= 0.9
			is_subsidized = no
		}
	}

	is_progressing = {
		any_scope_building = {
			is_building_type = building_motor_industry
			is_under_construction = yes 
		}
	}
	
	weight = 1003
	transferable = yes
}

je_expanding_the_market = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {	
	}
	
	complete = {
		market = {
		   owner = ROOT
		   participants >= 8
		}
	}

	weight = 1005
	transferable = yes
}

je_strong_market = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives
	active_update_frequency = 1

	immediate = {	
	}
	
	complete = {
		gdp > {
			value = global_gdp
			multiply = 0.25
		}
	}

	on_complete = {
		hidden_effect = {
			owner = {
				start_tutorial_lesson = { 
					tutorial_lesson = economic_dominance_complete
					journal_entry = je:je_strong_market
				}
			}
		}
	}

	weight = 1012
	transferable = yes
}

je_specialized_inputs = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {	
	}
	
	complete = {
		OR = {
			any_scope_building = {
				filter = {
					OR = {
						is_building_type = building_rye_farm
						is_building_type = building_wheat_farm
						is_building_type = building_maize_farm
						is_building_type = building_millet_farm
					}
				}
				percent >= 0.75
				OR = {
					has_active_production_method = pm_tractors
					has_active_production_method = pm_compression_ignition_tractors
				}
				weekly_profit > 0
				occupancy >= 0.5
				is_subsidized = no
			}
			any_scope_building = {
				filter = {
					OR = {
						is_building_type = building_coal_mine
						is_building_type = building_iron_mine
						is_building_type = building_lead_mine
						is_building_type = building_sulfur_mine
					}
				}
				percent >= 0.75
				OR = {
					has_active_production_method = pm_steam_donkey_building_coal_mine
					has_active_production_method = pm_steam_donkey_mine
				}
				weekly_profit > 0
				occupancy >= 0.5
				is_subsidized = no
			}
			any_scope_building = {
				is_building_type = building_railway
				or = {
					level >= 5
				}
			}
		}
	}

	on_complete = {
		set_variable = player_obj_home_focus
	}
	
	invalid = {
		has_variable = player_obj_export_focus
	}

	weight = 1002
	transferable = yes
}

je_utilizing_our_strength = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {
	}
	
	complete = {
		custom_tooltip = {
			text = tt_utilizing_our_strength_sub_obj
			market_capital.market = {
				mg:engines = {
					market_goods_cheaper < 0.25
				}
			}
		}
	}
	
	weight = 1010
	transferable = yes
}

je_exporting_profits = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {
	}
	
	complete = {
		market_capital.market = {
			mg:engines = {
				market_goods_exports > 50
			}
		}
	}

	invalid = {
		has_variable = player_obj_home_focus
	}
	
	on_complete = {
		set_variable = player_obj_export_focus
	}

	weight = 1010
	transferable = yes
}

je_raise_exports_value = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {
	}
	
	complete = {
		custom_tooltip = {
			text = tt_raise_exports_value_sub_obj
			market_capital.market = {
				mg:engines = {
					market_goods_pricier > 0.5
				}
			}
		}
	}
	
	weight = 1010
	transferable = yes
}

je_lower_production_costs = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/economic_dominance.dds"

	group = je_group_objectives

	immediate = {
	}
	
	complete = {
		custom_tooltip = {
			text = tt_lower_production_costs_sub_obj
			market_capital.market = {
				mg:coal = {
					market_goods_cheaper > 0.2
				}
			}
			market_capital.market = {
				mg:iron = {
					market_goods_cheaper > 0.2
				}
			}
			market_capital.market = {
				mg:steel = {
					market_goods_cheaper > 0.2
				}
			}
		}
	}
	
	weight = 1010
	transferable = yes
}
﻿je_objective_encourage_liberal_ideas = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/egalitarian_society.dds"

	group = je_group_objectives

	complete = {
		ig:ig_intelligentsia = {
			is_powerful = yes
			is_being_bolstered = yes
			is_in_government = yes
		}
	}
	
	on_complete = {
		hidden_effect = {
			owner = {
				start_tutorial_lesson = { 
					tutorial_lesson = liberalizing_the_government_complete
					journal_entry = je:je_objective_encourage_liberal_ideas
				}
			}
		}
	}
		
	weight = 1000
	transferable = yes
}

je_liberate_the_slaves = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/egalitarian_society.dds"

	group = je_group_objectives
	
	complete = {
		has_law = law_type:law_slavery_banned
	}

	weight = 1003
	transferable = yes
}

je_pass_laws = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/egalitarian_society.dds"

	group = je_group_objectives
	
	complete = {
		NOT = { has_law = law_type:law_state_religion }
		has_law = law_type:law_multicultural
		has_law = law_type:law_public_schools
		has_law = law_type:law_protected_speech
	}

	is_progressing = {
		OR = {
			is_enacting_law = law_type:law_freedom_of_conscience
			is_enacting_law = law_type:law_total_separation
			is_enacting_law = law_type:law_multicultural
			is_enacting_law = law_type:law_public_schools
			is_enacting_law = law_type:law_protected_speech
		}
	}

	weight = 1001
	transferable = yes
}

je_public_services = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/egalitarian_society.dds"

	group = je_group_objectives
	
	complete = {
		institution_investment_level = {
			institution = institution_schools
			value >= 3
		}
		institution_investment_level = {
			institution = institution_health_system
			value >= 3
		}
		institution_investment_level = {
			institution = institution_social_security
			value >= 3
		}
		institution_investment_level = {
			institution = institution_workplace_safety
			value >= 3
		}
	}

	is_progressing = {
		OR = {
			expanding_institution = institution_schools
			expanding_institution = institution_health_system
			expanding_institution = institution_social_security
			expanding_institution = institution_workplace_safety
		}
	}

	invalid = {
		OR = {
			NOT = { has_law = law_type:law_multicultural }
			NOT = { has_law = law_type:law_public_schools }
			NOT = { has_law = law_type:law_protected_speech }
			has_law = law_type:law_state_religion
		}
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_public_services
	}
	
	weight = 1002
	transferable = yes
}

je_women_and_children = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/egalitarian_society.dds"

	group = je_group_objectives
	
	complete = {
		has_law = law_type:law_compulsory_primary_school
		has_law = law_type:law_womens_suffrage
	}

	is_progressing = {
		or = {
			is_enacting_law = law_type:law_compulsory_primary_school
			is_enacting_law = law_type:law_womens_suffrage
		}
	}

	invalid = {
		OR = {
			NOT = { has_law = law_type:law_multicultural }
			NOT = { has_law = law_type:law_public_schools }
			NOT = { has_law = law_type:law_protected_speech }
			has_law = law_type:law_state_religion
		}
	}
	
	on_invalid = {
		remove_active_objective_subgoal = sg_women_and_children
	}
	
	weight = 1004
	transferable = yes
}

je_egalitarian_society = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/egalitarian_society.dds"

	group = je_group_objectives
	active_update_frequency = 1
	
	complete = {
		pop_type_percent_country = {
			pop_type = peasants
			percent < 0.1
		}
		root.average_sol >= 20
		literacy_rate >= 0.9
	}

	is_progressing = {
		OR = {
			expanding_institution = institution_schools
			expanding_institution = institution_health_system
			expanding_institution = institution_social_security
			expanding_institution = institution_workplace_safety
		}
	}

	invalid = {
		OR = {
			NOT = { has_law = law_type:law_multicultural }
			NOT = { has_law = law_type:law_public_schools }
			NOT = { has_law = law_type:law_protected_speech }
			NOT = { has_law = law_type:law_compulsory_primary_school }
			NOT = { has_law = law_type:law_womens_suffrage }
			has_law = law_type:law_state_religion
		}
	}
	
	on_invalid = {
		remove_active_objective_subgoal = sg_egalitarian_society
	}

	on_complete = {
		hidden_effect = {
			owner = {
				start_tutorial_lesson = { 
					tutorial_lesson = egalitarian_society_complete
					journal_entry = je:je_egalitarian_society
				}
			}
		}
	}

	weight = 1005
	transferable = yes
}
﻿### Great Game Journal Entries
je_great_game_control = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	scripted_progress_bar = great_game_core_progress_bar

    immediate = {
		set_global_variable = { name = great_game_gbr_progress value = 100 }
		set_global_variable = { name = great_game_rus_progress value = 100 }
		if = {
			limit = {
				OR = {
					c:GBR ?= this
					c:RUS ?= this
				}
			}
			set_variable = { name = great_game_no_longer_power_bloc_leader_var value = 0 }
		}
		else = {
			set_variable = { name = great_game_subjected_var value = 0 }
		}
		
		if = {
			limit = {
				is_player = yes
			}
			calculate_great_game_passive_progress = yes

			scope:journal_entry = {
				set_global_variable = { name = great_game_gbr_progress value = "scripted_bar_progress(great_game_core_progress_bar)" }
				set_global_variable = { name = great_game_rus_progress value = 200 }
				change_global_variable = { name = great_game_rus_progress subtract = global_var:great_game_gbr_progress }
			}

			every_country = {
				limit = {
					OR = {
						c:RUS ?= this
						c:GBR ?= this
						c:PER ?= this
						has_journal_entry = je_unify_afghanistan
					}
					is_player = no
					NOT = {
						has_journal_entry = je_great_game_control
					}
				}
				add_journal_entry = { type = je_great_game_control }
			}
		}
		sr:region_central_asia = {
			save_scope_as = central_asia_region
		}
		sr:region_persia = {
			save_scope_as = persia_region
		}
		sr:region_caucasus = {
			save_scope_as = caucasus_region
		}
    }

	complete = {
		trigger_if = {
			limit = {
				OR = {
					c:GBR ?= this
					c:RUS ?= this
				}
			}
			OR = {
				custom_tooltip = {
					text = great_game_complete_tt
					sr:region_caucasus = {
						NOT = {
							any_scope_state = {
								is_capital = yes
								owner = {
									NOR = {
										AND = {
											exists = c:GBR
											is_subject_of = c:GBR
										}
										AND = {
											exists = c:RUS
											is_subject_of = c:RUS
										}
										this.power_bloc ?= {
											c:GBR ?= this.power_bloc_leader
										}
										this.power_bloc ?= {
											c:RUS ?= this.power_bloc_leader
										}
									}
								}
							}
						}
					}
					sr:region_central_asia = {
						NOT = {
							any_scope_state = {
								is_capital = yes
								owner = {
									NOR = {
										AND = {
											exists = c:GBR
											is_subject_of = c:GBR
										}
										AND = {
											exists = c:RUS
											is_subject_of = c:RUS
										}
										this.power_bloc ?= {
											c:GBR ?= this.power_bloc_leader
										}
										this.power_bloc ?= {
											c:RUS ?= this.power_bloc_leader
										}
									}
								}
							}
						}
					}
					sr:region_persia = {
						NOT = {
							any_scope_state = {
								is_capital = yes
								owner = {
									NOR = {
										AND = {
											exists = c:GBR
											is_subject_of = c:GBR
										}
										AND = {
											exists = c:RUS
											is_subject_of = c:RUS
										}
										this.power_bloc ?= {
											c:GBR ?= this.power_bloc_leader
										}
										this.power_bloc ?= {
											c:RUS ?= this.power_bloc_leader
										}
									}
								}
							}
						}
					}
				}
				trigger_if = {
					limit = {
						c:RUS ?= this
					}
					c:GBR ?= {
						country_rank < rank_value:great_power
					}
				}
				trigger_if = {
					limit = {
						c:GBR ?= this
					}
					c:RUS ?= {
						country_rank < rank_value:great_power
					}
				}
			}
		}
		trigger_if = {
			limit = {
				OR = {
					c:PER ?= this
					is_afghan_nation = yes
				}
			}
			is_country_type = recognized
			country_rank >= rank_value:major_power
			custom_tooltip = {
				text = not_in_european_power_bloc_tt
				NOT = {
					power_bloc ?= {
						power_bloc_leader = {
							OR = {
								country_is_in_europe = yes
								any_primary_culture = {
									has_discrimination_trait = european_heritage
								}
							}
						}
					}
				}
			}
			custom_tooltip = {
				text = europeans_expelled_from_casia_tt
				NOT = {
					c:GBR ?= {
						OR = {
							any_subject_or_below = {
								any_scope_state = {
									OR = {
										region = sr:region_persia
										region = sr:region_central_asia
									}
								}
							}
							any_scope_state = {
								OR = {
									region = sr:region_persia
									region = sr:region_central_asia
								}
							}
						}
					}
				}
				NOT = {
					c:RUS ?= {
						OR = {
							any_subject_or_below = {
								any_scope_state = {
									OR = {
										region = sr:region_persia
										region = sr:region_central_asia
									}
								}
							}
							any_scope_state = {
								OR = {
									region = sr:region_persia
									region = sr:region_central_asia
								}
							}
						}
					}
				}
			}
		}
	}

	invalid = {
		OR = {
			NOT = {
				exists = c:GBR
			}
			NOT = {
				exists = c:RUS
			}
		}
	}

	on_invalid = {
		set_global_variable = great_game_failed
	}

	fail = {
		OR = {
			trigger_if = {
				limit = {
					OR = {
						c:RUS ?= this
						c:GBR ?= this
					}
				}
				OR = {
					is_in_power_bloc = no
				}
				custom_tooltip = {
					text = not_leader_of_power_bloc_tt
					is_in_power_bloc = yes
					is_power_bloc_leader = no
					var:great_game_no_longer_power_bloc_leader_var >= 60
				}
				AND = {
					custom_tooltip = {
						text = any_casia_country_recognised_tt
						any_country = {
							capital = {
								OR = {
									region = sr:region_persia
									region = sr:region_central_asia
								}
							}
							is_country_type = recognized
							country_rank >= rank_value:major_power
						}
					}
					custom_tooltip = {
						text = europeans_expelled_from_casia_tt
						NOT = {
							c:GBR ?= {
								OR = {
									any_subject_or_below = {
										any_scope_state = {
											OR = {
												region = sr:region_persia
												region = sr:region_central_asia
											}
										}
									}
									any_scope_state = {
										OR = {
											region = sr:region_persia
											region = sr:region_central_asia
										}
									}
								}
							}
						}
						NOT = {
							c:RUS ?= {
								OR = {
									any_subject_or_below = {
										any_scope_state = {
											OR = {
												region = sr:region_persia
												region = sr:region_central_asia
											}
										}
									}
									any_scope_state = {
										OR = {
											region = sr:region_persia
											region = sr:region_central_asia
										}
									}
								}
							}
						}
					}
				}
			}
			trigger_if = {
				limit = {
					c:RUS ?= this
				}
				c:RUS ?= {
					country_rank < rank_value:great_power
				}
			}
			trigger_if = {
				limit = {
					c:GBR ?= this
				}
				c:GBR ?= {
					country_rank < rank_value:great_power
				}
			}
			trigger_if = {
				limit = {
					OR = {
						c:PER ?= this
						is_afghan_nation = yes
					}
				}
				custom_tooltip = {
					text = puppeted_for_too_long_tt
					is_subject = yes
					var:great_game_subjected_var >= 60
				}
			}
		}
	}
	
	on_fail = {
		set_global_variable = great_game_failed
	}

    on_weekly_pulse = {
        effect = {
            if = {
                limit = {
					is_player = yes
                    NOT = { has_global_variable = gg_started }
                }
                set_global_variable = gg_started
            }
			update_gg_progressbar_tooltips = yes
        }
    }

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					is_player = yes
				}
				calculate_great_game_passive_progress = yes
			}
			if = {
				limit = {
					OR = {
						c:GBR ?= this
						c:RUS ?= this
					}
				}
				if = {
					limit = {
						is_in_power_bloc = yes
						is_power_bloc_leader = no
					}
					change_variable = {
						name = great_game_no_longer_power_bloc_leader_var
						add = 1
					}
				}
				if = {
					limit = {
						is_in_power_bloc = yes
						is_power_bloc_leader = yes
					}
					set_variable = {
						name = great_game_no_longer_power_bloc_leader_var
						value = 0
					}
				}
			}
			else = {
				if = {
					limit = {
						is_subject = yes
					}
					change_variable = {
						name = great_game_subjected_var
						add = 1
					}
				}
				if = {
					limit = {
						is_subject = no
					}
					set_variable = {
						name = great_game_subjected_var
						value = 0
					}
				}
			}
		}
	}

	on_complete = {
		if = {
			limit = {
				OR = {
					c:GBR ?= this
					c:RUS ?= this
				}
			}
			custom_tooltip = outcome_depends_on_score_tt
			if = {
				limit = {
					OR = {
						scope:journal_entry = { scripted_bar_progress = { name = great_game_core_progress_bar value >= 120 } }
						AND = {
							c:GBR ?= { country_rank < rank_value:great_power }
							c:RUS ?= { country_rank >= rank_value:great_power }
						}
					}
				}
				if = {
					limit = {
						exists = c:RUS
					}
					c:RUS = {
						trigger_event = { id = gg_core.1 popup = yes }
					}
				}
				if = {
					limit = {
						exists = c:GBR
					}
					c:GBR = {
						trigger_event = { id = gg_core.2 popup = yes }
					}
				}
			}
			else_if = {
				limit = {
					scope:journal_entry = { scripted_bar_progress = { name = great_game_core_progress_bar value > 80 } }
					scope:journal_entry = { scripted_bar_progress = { name = great_game_core_progress_bar value < 120 } }
					AND = {
						c:GBR ?= { country_rank >= rank_value:great_power }
						c:RUS ?= { country_rank >= rank_value:great_power }
					}
				}
				if = {
					limit = {
						exists = c:RUS
					}
					c:RUS = {
						trigger_event = { id = gg_core.3 popup = yes }
					}
				}
				if = {
					limit = {
						exists = c:GBR
					}
					c:GBR = {
						trigger_event = { id = gg_core.3 popup = yes }
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						scope:journal_entry = { scripted_bar_progress = { name = great_game_core_progress_bar value <= 80 } }
						AND = {
							c:RUS ?= { country_rank < rank_value:great_power }
							c:GBR ?= { country_rank >= rank_value:great_power }
						}
					}
				}
				if = {
					limit = {
						exists = c:RUS
					}
					c:RUS = {
						trigger_event = { id = gg_core.2 popup = yes }
					}
				}
				if = {
					limit = {
						exists = c:GBR
					}
					c:GBR = {
						trigger_event = { id = gg_core.1 popup = yes }
					}
				}
			}
		}
		else = {
			custom_tooltip = europeans_forced_to_end_great_game_tt
			trigger_event = { id = gg_core.4 popup = yes }
			c:GBR ?= {
				if = {
					limit = {
						has_journal_entry = je_great_game_control
					}
					post_notification = great_game_loss_to_natives
				}
			}
			c:RUS ?= {
				if = {
					limit = {
						has_journal_entry = je_great_game_control
					}
					post_notification = great_game_loss_to_natives
				}
			}
		}
		hidden_effect = {
			set_variable = achievement_great_game_no_re
		}
	}

	weight = 1000
	transferable = yes
}

### Russia

je_secure_persian_border = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
        custom_tooltip = {
            text = je_secure_persian_border_complete_tt
            has_global_variable = caucasus_consolidated_var
        }
	}

	on_complete = {
		great_game_russia_progress_15 = yes
	}

    fail = {
        custom_tooltip = {
            text = je_secure_persian_border_fail_tt
            has_global_variable = caucasus_failure_var
        }
    }

	on_fail = {
		great_game_britain_progress_15 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_pacify_kazakh_steppes = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
        custom_tooltip = {
            text = je_pacify_kazakh_steppes_success_tt
            has_global_variable = kazakhstan_victory_var
        }
	}

	on_complete = {
		great_game_russia_progress_10 = yes
	}

    fail = {
        custom_tooltip = {
            text = je_pacify_kazakh_steppes_fail_tt
            has_global_variable = kazakhstan_defeat_var
        }
    }

	on_fail = {
		great_game_britain_progress_25 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_codify_chinese_border = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

    immediate = {
        s:STATE_AMUR = {
            save_scope_as = amur_scope
        }
        s:STATE_OUTER_MANCHURIA = {
            save_scope_as = primorye_scope
        }
        s:STATE_JETISY = {
            save_scope_as = jetisy_scope
        }
        s:STATE_ALTAI = {
            save_scope_as = altai_scope
        }
    }

	complete = {
        owns_entire_state_region = STATE_AMUR
        owns_entire_state_region = STATE_OUTER_MANCHURIA
        owns_entire_state_region = STATE_JETISY
        owns_entire_state_region = STATE_ALTAI
        NOT = {
            custom_tooltip = {
                text = china_doesnt_have_claim_tt
                any_country = {
                    NOT = {
                        this = ROOT
                    }
                    OR = {
                        has_claim = s:STATE_AMUR
                        has_claim = s:STATE_OUTER_MANCHURIA
                        has_claim = s:STATE_JETISY
                        has_claim = s:STATE_ALTAI
                    }
                }
            }
        }
	}

	on_complete = {
        set_global_variable = china_border_codified_variable
		great_game_russia_progress_15 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_consolidate_central_asia = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
        any_state = {
            filter = {
                OR = {
                    state_region = s:STATE_AKMOLINSK
                    state_region = s:STATE_URALSK
                    state_region = s:STATE_AKTOBE
                    state_region = s:STATE_SEMIRECHE
                    state_region = s:STATE_FERGANA
                    state_region = s:STATE_UZBEKIA
                    state_region = s:STATE_KHIVA
                    state_region = s:STATE_TAJIKISTAN
                    state_region = s:STATE_KIRGHIZIA
                    state_region = s:STATE_TURKMENIA
                    state_region = s:STATE_MERZ
                }
            }
			custom_tooltip = {
				text = completely_owned_by_this_country_or_subjects_tt
				OR = {
					owner = ROOT
					owner = {
						is_subject_of = ROOT
					}
				}
				NOT = {
					this.state_region = {
						any_scope_state = {
							owner = {
								NOR = {
									this = ROOT
									is_subject_of = ROOT
								}
							}
						}
					}
				}
			}
            percent = 1
        }
	}

	on_complete = {
		great_game_russia_progress_15 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_chinese_concessions = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		OR = {
			any_scope_state = {
				region = sr:region_manchuria
				is_treaty_port = yes
			}
			AND = {
				country_or_subject_owns_entire_state_region = STATE_SHENGJING
				country_or_subject_owns_entire_state_region = STATE_SOUTHERN_MANCHURIA
				country_or_subject_owns_entire_state_region = STATE_NORTHERN_MANCHURIA
			}
		}
        any_state = {
            filter = {
                region = sr:region_manchuria
				custom_tooltip = {
					text = owned_by_russia_or_chinese_country
					OR = {
						owner = c:RUS
						owner = {
							OR = {
								country_has_primary_culture = cu:manchu
								country_has_primary_culture = cu:han
							}
						}
					}
				}
            }
			any_scope_building = {
				is_building_type = building_railway
				levels_owned_by_country = {  
					target = c:RUS  
					value  >= 1
				}
			}
            percent >= 1
        }
	}

	on_complete = {
		set_global_variable = manchurian_railway_variable
		great_game_russia_progress_15 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_acquire_korean_protectorate = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
        exists = c:KOR
        c:KOR ?= {
            is_subject_of = ROOT
        }
	}

	on_complete = {
		set_global_variable = korean_protectorate_success
		great_game_russia_progress_25 = yes
	}

    fail = {
        c:KOR ?= {
            is_country_type = recognized
        }
    }

    on_fail = {
		set_global_variable = korean_protectorate_failure
		great_game_britain_progress_10 = yes
    }

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

### Britain

je_disrupt_russian_caucasus = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		c:CIR ?= {
            owns_entire_state_region = STATE_KUBAN
        }
	}
	
	on_complete = {
		great_game_britain_progress_15 = yes
	}

	fail = {
		custom_tooltip = {
			text = circassia_dead_tt
			OR = {	
				c:CIR ?= {
					is_country_alive = no
				}
				NOT = {
					exists = c:CIR
				}	
			}
		}
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_counter_russian_pacific_influence = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		any_diplomatically_relevant_country = {
			country_rank >= rank_value:unrecognized_major_power
			OR = {
				capital.region = sr:region_japan
				capital.region = sr:region_manchuria
				capital.region = sr:region_north_china
				capital.region = sr:region_south_china
				capital.region = sr:region_indonesia
			}
			OR = {
				has_diplomatic_pact = {
					who = ROOT
					type = alliance
				}
				has_diplomatic_pact = {
					who = ROOT
					type = defensive_pact
				}
				is_in_same_power_bloc = ROOT
			}
		}
	}

	on_complete = {
		great_game_britain_progress_10 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_consolidate_british_india = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	immediate = {
		c:BIC = {
			save_scope_as = india_scope
		}
		c:GBR = {
			save_scope_as = britain_scope
		}
		sr:region_north_india = {
			save_scope_as = north_india_region
		}
		sr:region_south_india = {
			save_scope_as = south_india_region
		}
		s:STATE_BURMA = {
			save_scope_as = burma_state_scope
		}
		s:STATE_KACHIN = {
			save_scope_as = kachin_state_scope
		}
		s:STATE_PEGU = {
			save_scope_as = pegu_state_scope
		}
	}

	complete = {
		OR = {
			any_scope_state = {
				state_region = s:STATE_DELHI
			}
			any_subject_or_below = {
				any_scope_state = {
					state_region = s:STATE_DELHI
				}
			}
		}
		custom_tooltip = {
			text = raj_expanded_westward_tt
			NOT = {
				any_country = {
					capital = {
						OR = {
							region = sr:region_north_india
							region = sr:region_south_india
						}
					}
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}
		custom_tooltip = {
			text = raj_expanded_eastwards_tt
			NOT = {
				any_state = {
					state_region = s:STATE_BURMA
					NOR = {
						owner = ROOT
						owner = {
							is_subject_of = ROOT
						}
					}
				}
			}
			NOT = {
				any_state = {
					state_region = s:STATE_PEGU
					NOR = {
						owner = ROOT
						owner = {
							is_subject_of = ROOT
						}
					}
				}
			}
			NOT = {
				any_state = {
					state_region = s:STATE_KACHIN
					NOR = {
						owner = ROOT
						owner = {
							is_subject_of = ROOT
						}
					}
				}
			}
		}
	}

	on_complete = {
		great_game_britain_progress_10 = yes
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_pamir_expedition_objective = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	scripted_button = je_pamir_expedition_dismiss_button

	complete = {
		c:RUS ?= {
			NOR = {
				custom_tooltip = {
					text = does_not_own_tajikistan_tt
					any_scope_state = {
						state_region = s:STATE_TAJIKISTAN
					}
				}
				any_subject_or_below = {
					custom_tooltip = {
						text = does_not_own_tajikistan_subject_tt
						any_scope_state = {
							state_region = s:STATE_TAJIKISTAN
						}
					}
				}
			}
		}
		OR = {
			custom_tooltip = {
				text = britain_owns_tajikistan_tt
				any_scope_state = {
					state_region = s:STATE_TAJIKISTAN
				}
			}
			trigger_if = {
				limit = {
					exists = this.power_bloc
					is_power_bloc_leader = yes
				}
				this.power_bloc = {
					any_power_bloc_member = {
						custom_tooltip = {
							text = britain_owns_tajikistan_subject_tt
							any_scope_state = {
								state_region = s:STATE_TAJIKISTAN
							}
						}
					}
				}
			}
		}
	}

	on_complete = {
		great_game_britain_progress_50 = yes
	}

	fail = {
		custom_tooltip = {
			text = has_cancelled_pamir_expedition_tt
			has_variable = dismissed_pamir_expedition
		}
	}

	invalid = {
		OR = {
			NOT = {
				has_journal_entry = je_great_game_control
			}
		}
	}

	weight = 1000
	transferable = yes
}

### Generic GP objectives

je_maintain_afghan_protectorate = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	immediate = {
		set_variable = {
			name = afghanistan_variable
			value = 0
		}
		set_global_variable = afghanistan_conflict_started
		cu:pashtun = {
			save_scope_as = pashtun_scope
		}
		cu:tajik = {
			save_scope_as = tajik_scope
		}
		sr:region_persia = {
			save_scope_as = persia_region
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					custom_tooltip = {
						text = all_pashtun_or_tajik_countries_puppeted_tt
						any_country = {
							filter = {
								capital = {
									region = sr:region_persia
								}
								OR = {
									country_has_primary_culture = cu:tajik
									country_has_primary_culture = cu:pashtun
								}
							}
							is_subject_of = root
							count = all
						}
					}
				}
				change_variable = { name = afghanistan_variable add = 1 }
			}
			else_if = {
				limit = {
					NOT = {
						any_country = {
							capital = {
								region = sr:region_persia
							}
							OR = {
								country_has_primary_culture = cu:tajik
								country_has_primary_culture = cu:pashtun
							}
						}
					}
					any_state = {
						filter = {
							region = sr:region_persia
							state_region = {
								is_homeland = cu:pashtun
							}
						}
						OR = {
							owner = ROOT
							owner = {
								is_subject_of = ROOT
							}
						}
						percent >= 0.6
					}
				}
				change_variable = { name = afghanistan_variable add = 1 }
			}
			else = {
				change_variable = { name = afghanistan_variable subtract = 1 }
			}
			clamp_variable = { name = afghanistan_variable max = 120 min = 0 }
		}
	}
	
	complete = {
		trigger_if = {
			limit = {
				any_country = {
					capital = {
						region = sr:region_persia
					}
					OR = {
						country_has_primary_culture = cu:tajik
						country_has_primary_culture = cu:pashtun
					}
				}
			}
			custom_tooltip = {
				text = all_pashtun_or_tajik_countries_puppeted_tt
				any_country = {
					filter = {
						capital = {
							region = sr:region_persia
						}
						OR = {
							country_has_primary_culture = cu:tajik
							country_has_primary_culture = cu:pashtun
						}
					}
					is_subject_of = root
					percent = 1
				}
			}
		}
		trigger_else = {
			any_state = {
				filter = {
					region = sr:region_persia
					state_region = {
						is_homeland = cu:pashtun
					}
				}
				custom_tooltip = {
					text = owned_by_this_country_or_subjects_tt
					OR = {
						owner = ROOT
						owner = {
							is_subject_of = ROOT
						}
					}
				}
				percent >= 0.6
			}
		}
		country_or_subject_owns_entire_state_region = STATE_KABUL
		country_or_subject_owns_entire_state_region = STATE_HERAT
		country_or_subject_owns_entire_state_region = STATE_KANDAHAR
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		set_global_variable = gg_afghanistan_protectorate_done
		if = {
			limit = {
				c:RUS ?= this
			}
			set_global_variable = afghanistan_russia_victory_var
			great_game_russia_progress_25 = yes
		}
		else_if = {
			limit = {
				c:GBR ?= this
			}
			set_global_variable = afghanistan_britain_victory_var
			great_game_britain_progress_25 = yes
		}
	}

	fail = {
		any_country = {
			filter = {
				capital = {
					region = sr:region_persia
				}
				OR = {
					country_has_primary_culture = cu:tajik
					country_has_primary_culture = cu:pashtun
				}
			}
			is_country_type = recognized
			percent = 1
		}
	}

	on_fail = {
		set_global_variable = gg_afghanistan_protectorate_done
		set_global_variable = afghanistan_afghan_victory_var
	}

	invalid = {
		OR = {
			NOT = {
				has_journal_entry = je_great_game_control
			}
			has_global_variable = gg_afghanistan_protectorate_done
		}
	}

	current_value = {
		value = root.var:afghanistan_variable
	}
	
	goal_add_value = {
		add = 120
	}
	
	progressbar = yes
	
	is_progressing = {
		trigger_if = {
			limit = {
				any_country = {
					capital = {
						region = sr:region_persia
					}
					OR = {
						country_has_primary_culture = cu:tajik
						country_has_primary_culture = cu:pashtun
					}
				}
			}
			any_country = {
				filter = {
					capital = {
						region = sr:region_persia
					}
					OR = {
						country_has_primary_culture = cu:tajik
						country_has_primary_culture = cu:pashtun
					}
				}
				is_subject_of = root
				count = all
			}
		}
		trigger_else = {
			any_state = {
				filter = {
					region = sr:region_persia
					state_region = {
						is_homeland = cu:pashtun
					}
				}
				OR = {
					owner = ROOT
					owner = {
						is_subject_of = ROOT
					}
				}
				percent >= 0.6
			}
		}
	}


	weight = 1000
	transferable = yes
}

je_consolidate_afghanistan_objective = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		custom_tooltip = {
			text = afghanistan_exists_tt
			exists = c:AFG
		}
		custom_tooltip = {
			text = afghanistan_borders_tt
			has_global_variable = afghan_borders_solidified
		}
	}

	on_complete = {
		if = {
			limit = {
				c:RUS ?= this
			}
			set_global_variable = afghanistan_russia_victory_var
			great_game_russia_progress_10 = yes
		}
		else_if = {
			limit = {
				c:GBR ?= this
			}
			set_global_variable = afghanistan_britain_victory_var
			great_game_britain_progress_10 = yes
		}
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1001
	transferable = yes
}

je_secure_influence_over_persia = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	immediate = {
		set_variable = {
			name = persia_variable
			value = 0
		}
		set_global_variable = persia_conflict_started
	}

	complete = {
		trigger_if = {
			limit = {
				exists = c:PER
			}
			custom_tooltip = {
				text = persia_puppeted_tt
				c:PER ?= {
					is_subject_of = ROOT
				}
			}
		}
		trigger_else = {
			any_state = {
				filter = {
					region = sr:region_persia
					state_region = {
						is_homeland = cu:persian
					}
				}
				custom_tooltip = {
					text = owned_by_this_country_or_subjects_tt
					OR = {
						owner = ROOT
						owner = {
							is_subject_of = ROOT
						}
					}
				}
				percent >= 0.6
			}
		}
		country_or_subject_owns_entire_state_region = STATE_IRAKAJEMI
		country_or_subject_owns_entire_state_region = STATE_TABRIZ
		country_or_subject_owns_entire_state_region = STATE_LARISTAN
		OR = {
			any_scope_state = {
				state_region = s:STATE_KHUZESTAN
			}
			any_subject_or_below = {
				any_scope_state = {
					state_region = s:STATE_KHUZESTAN
				}
			}
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	current_value = {
		value = root.var:persia_variable
	}
	
	goal_add_value = {
		add = 120
	}
	
	progressbar = yes

	is_progressing = {
		trigger_if = {
			limit = {
				exists = c:PER
			}
			c:PER ?= {
				is_subject_of = root
			}
		}
		trigger_else = {
			any_state = {
				filter = {
					region = sr:region_persia
					state_region = {
						is_homeland = cu:persian
					}
				}
				custom_tooltip = {
					text = owned_by_this_country_or_subjects_tt
					OR = {
						owner = ROOT
						owner = {
							is_subject_of = ROOT
						}
					}
				}
				percent >= 0.6
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					exists = c:PER
					c:PER ?= {
						is_subject_of = root
					}
				}
				change_variable = { name = persia_variable add = 1 }
			}
			else_if = {
				limit = {
					NOT ={
						exists = c:PER
					}
					any_state = {
						filter = {
							region = sr:region_persia
							state_region = {
								is_homeland = cu:persian
							}
						}
						custom_tooltip = {
							text = owned_by_this_country_or_subjects_tt
							OR = {
								owner = ROOT
								owner = {
									is_subject_of = ROOT
								}
							}
						}
						percent >= 0.6
					}
				}
				change_variable = { name = persia_variable add = 1 }
			}
			else = {
				change_variable = { name = persia_variable subtract = 1 }
			}
			clamp_variable = { name = persia_variable max = 120 min = 0 }
		}
	}
	
	on_complete = {
		set_global_variable = gg_afghanistan_protectorate_done
		if = {
			limit = {
				c:RUS ?= this
			}
			set_global_variable = persia_russia_victory_var
			great_game_russia_progress_25 = yes
		}
		else_if = {
			limit = {
				c:GBR ?= this
			}
			set_global_variable = persia_britain_victory_var
			great_game_britain_progress_25 = yes
		}
	}
	
	on_fail = {
		set_global_variable = persia_persian_victory_var
	}

    fail = {
        c:PER ?= {
            is_country_type = recognized
        }
    }

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

### Minor objectives

je_unify_afghanistan_objective = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		custom_tooltip = {
			text = has_formed_afghanistan_tt
			c:AFG ?= this
		}
	}
	
	on_complete = {

	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1002
	transferable = yes
}

je_consolidate_persia = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		any_scope_state = {
			state_region = s:STATE_KHUZESTAN
			is_split_state = no
			is_incorporated = yes
		}
		any_scope_state = {
			state_region = s:STATE_SISTAN
			is_split_state = no
			is_incorporated = yes
		}
		any_scope_state = {
			state_region = s:STATE_LARISTAN
			is_split_state = no
			is_incorporated = yes
		}
	}
	
	on_complete = {
		
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

je_achieve_sovereignty = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/great_game.dds"

	group = je_group_objectives

	complete = {
		custom_tooltip = {
			text = je_achieve_sovereignty_tt_3
			is_country_type = recognized
		}		
	}
	
	on_complete = {
		custom_tooltip = je_achieve_sovereignty_tt_2
	}

	immediate = {
		set_variable = {
			name = achieve_sovereignty_var
			value = 0
		}
	}

	fail = {
		custom_tooltip = {
			text = je_achieve_sovereignty_tt
			var:achieve_sovereignty_var >= 120
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					is_subject = yes
				}
				change_variable = {
					name = achieve_sovereignty_var
					add = 1
				}
			}
		}
	}

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					is_subject = no
				}
				set_variable = {
					name = achieve_sovereignty_var
					value = 0
				}
			}
		}
	}

	invalid = {
		NOT = {
			has_journal_entry = je_great_game_control
		}
	}

	weight = 1000
	transferable = yes
}

﻿je_colonization_laws = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		NOT = { has_law = law_type:law_no_colonial_affairs }
	}
	
	on_complete = {
		hidden_effect = {
			owner = {
				start_tutorial_lesson = { 
					tutorial_lesson = colonization_law_passed_complete
					journal_entry = je:je_colonization_laws
				}
			}
		}
	}

	weight = 1000
	transferable = yes
}

je_african_colonies = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		any_scope_state = {
			custom_tooltip = {
				text = "je_african_colonies_own_a_colony"
				state_in_africa = yes
				is_incorporated = no
			}
			custom_tooltip = {
				text = "je_african_colonies_own_whole_state_region"
				is_split_state = no
			}
		}
	}

	on_complete = {
	}

	weight = 1001
	transferable = yes
}

je_expand_navy_and_army = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		ROOT = {
			army_size >= 150
			navy_size >= 75
		}
	}
	
	on_complete = {
	}
		
	weight = 1002
	transferable = yes
}

je_form_alliance = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		any_country = {
			hidden_trigger = { NOT = { THIS = ROOT } }
			country_rank >= rank_value:major_power
			has_diplomatic_pact = {
				who = root
				type = alliance
			}
			count >= 2
		}
	}
	
	on_complete = {
	}
		
	weight = 1003
	transferable = yes
}

je_take_subject = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		any_country = {
			hidden_trigger = { NOT = { THIS = ROOT } }
			or = {
				has_diplomatic_pact = {
					who = root
					type = puppet
				}
				has_diplomatic_pact = {
					who = root
					type = dominion
				}
				has_diplomatic_pact = {
					who = root
					type = protectorate
				}
				has_diplomatic_pact = {
					who = root
					type = personal_union
				}
				has_diplomatic_pact = {
					who = root
					type = vassal
				}
				has_diplomatic_pact = {
					who = root
					type = tributary
				}
			}
			count >= 5
		}
	}
	
	on_complete = {
	}

	weight = 1004
	transferable = yes
}

je_increase_technology = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		has_technology_researched = bolt_action_rifles
		has_technology_researched = dreadnought
		has_technology_researched = malaria_prevention
	}
	
	on_complete = {
	}
		
	weight = 1005
	transferable = yes
}

je_greatest_power = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		global_country_ranking = 1
	}
	
	on_complete = {
	}
		
	weight = 1006
	transferable = yes
}

je_greater_power = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		country_rank = rank_value:great_power
	}
	
	on_complete = {
	}
		
	weight = 1007
	transferable = yes
}

je_great_power = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		country_rank >= rank_value:major_power
	}
	
	on_complete = {
	}
		
	weight = 1008
	transferable = yes
}

je_unrecognized_power = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives

	complete = {
		NOT = { is_country_type = unrecognized }
	}
	
	on_complete = {
		hidden_effect = {
			add_journal_entry = {
				type = je_the_hegemon
				objective_subgoal = sg_the_hegemon
			}
		}
	}
		
	weight = 1009
	transferable = yes
}

je_the_hegemon = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/objectives/hegemon.dds"

	group = je_group_objectives
	active_update_frequency = 1

	complete = {
		total_population_including_subjects_share >= 0.4
	}

	on_complete = {
		hidden_effect = {
			owner = {
				start_tutorial_lesson = { 
					tutorial_lesson = hegemon_complete
					journal_entry = je:je_the_hegemon
				}
			}
		}
	}

	weight = 1009
	transferable = yes
}
﻿je_scotland_yard = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		has_law = law_type:law_dedicated_police
	}

	possible = {
		institution_investment_level = {
			institution = institution_police
			value >= 2
		}
	}

	on_monthly_pulse = {
		random_events = {
			# events involving the police are much more likely
			20 = 0
			1 = prostitution.1
			1 = prostitution.2
			1 = prostitution.3
			1 = prostitution.4
			1 = cable_street.1
			1 = crime_events.1
			1 = crime_events.2
			1 = crime_events.10
		}
	}

	complete = {
		institution_investment_level = {
			institution = institution_police
			value = 5
		}
		capital = {
			turmoil < 0.2
		}
	}

	on_complete = {
		trigger_event = { id = scotland_yard.1 }
		set_variable = has_scotland_yard_var
	}

	invalid = {
		NOT = { has_law = law_type:law_dedicated_police }
	}

	weight = 100

	timeout = 7300
}

je_serial_killer = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_crises

	on_yearly_pulse = {
		effect = {
			if = {
				limit = {
					institution_investment_level = {
						institution = institution_police
						value >= 4
					}
					has_modifier = serial_killer_active_investigation
				}
				random_list = {
					60 = { trigger_event = { id = crime_events.11 } } # killer caught
					20 = { trigger_event = { id = crime_events.12 } } # letter
					5 = { trigger_event = { id = crime_events.13 } } # another murder
					15 = { } # nothing happens this year
				}
			}
			else_if = {
				limit = {
					OR = {
						institution_investment_level = {
							institution = institution_police
							value >= 4
						}
						AND = {
							institution_investment_level = {
								institution = institution_police
								value >= 2
							}
							has_modifier = serial_killer_active_investigation
						}
					}
				}
				random_list = {
					40 = { trigger_event = { id = crime_events.11 } } # killer caught
					20 = { trigger_event = { id = crime_events.12 } } # letter
					10 =  { trigger_event = { id = crime_events.13 } } # another murder
					50 = { } # nothing happens this year
				}
			}
			else_if = {
				limit = {
					OR = {
						institution_investment_level = {
							institution = institution_police
							value >= 2
						}
						has_modifier = serial_killer_active_investigation
					}
				}
				random_list = {
					20 = { trigger_event = { id = crime_events.11 } } # killer caught
					20 = { trigger_event = { id = crime_events.12 } } # letter
					20 = { trigger_event = { id = crime_events.13 } } # another murder
					40 = { } # nothing happens this year
				}
			}
			else = {
				random_list = {
					5 = { trigger_event = { id = crime_events.11 } } # killer caught 
					20 = { trigger_event = { id = crime_events.12 } } # letter
					25 = { trigger_event = { id = crime_events.13 } } # another murder
					50 = { } # nothing happens this year
				}
			}
		}
	}

	complete = {
		custom_tooltip = {
			text = serial_killer_je_tt
			has_variable = serial_killer_caught
		}
	}

	on_complete = {
		scope:target = {
			remove_modifier = serial_killer_state_mod
			if = {
				limit = {
					has_modifier = modifier_public_worried
				}
				remove_modifier = modifier_public_worried
			}
		}
		remove_modifier = serial_killer_active_investigation
		remove_variable = ongoing_serial_killer_je
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = serial_killer_highest_chance
				trigger = {
					institution_investment_level = {
						institution = institution_police
						value >= 4
					}
					has_modifier = serial_killer_active_investigation
				}
			}
			triggered_desc = {
				desc = serial_killer_high_chance
				trigger = {
					OR = {
						institution_investment_level = {
							institution = institution_police
							value >= 4
						}
						AND = {
							institution_investment_level = {
								institution = institution_police
								value >= 2
							}
							has_modifier = serial_killer_active_investigation
						}
					}
				}
			}
			triggered_desc = {
				desc = serial_killer_medium_chance
				trigger = {
					OR = {
						institution_investment_level = {
							institution = institution_police
							value >= 2
						}
						has_modifier = serial_killer_active_investigation
					}
				}
			}
			triggered_desc = {
				desc = serial_killer_low_chance
				trigger = { }
			}
		}
	}
	invalid = {
		OR = {
			NOT = { exists = scope:target }
			scope:target = {
				OR = {
					NOT = { owner = ROOT }
					NOT = { has_modifier = serial_killer_state_mod }
				}
			}
		}
	}

	on_invalid = {
		scope:target = {
			remove_modifier = serial_killer_state_mod
			if = {
				limit = {
					has_modifier = modifier_public_worried
				}
				remove_modifier = modifier_public_worried
			}
		}
		remove_modifier = serial_killer_active_investigation
	}
}
﻿# triggered by 1848.5
je_secret_police = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_internal_affairs

	complete = {
		OR = {
			has_law = law_type:law_national_guard
			has_law = law_type:law_secret_police
		}
		institution_investment_level = {
			institution = institution_home_affairs
			value >= 3
		}
	}

	on_complete = {
		trigger_event = {
			id = 1848.6
		}
	}

	timeout = 3650

	weight = 50
}
﻿je_sick_man_main = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_historical_content

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		remove_modifier = sick_man_of_europe
		trigger_event = {
			id = sick_man.2
		}
	}

	timeout = 10950

	on_timeout = {
		remove_modifier = sick_man_of_europe
		trigger_event = {
			id = sick_man.3
		}
		if = {
			limit = {
	       		is_in_power_bloc = yes
	        	is_power_bloc_leader = yes				
			}
			custom_tooltip = sick_man_of_europe_lose_power_bloc
		}
	}

	current_value = {
		value = var:sick_man_var
	}

	goal_add_value = {
		add = 4
	}

	progressbar = yes

	weight = 10000
	
	should_be_pinned_by_default = yes
}

je_sick_man_syria = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		owns_entire_state_region = STATE_ALEPPO
		owns_entire_state_region = STATE_SYRIA
		owns_entire_state_region = STATE_LEBANON
		owns_entire_state_region = STATE_PALESTINE
		owns_entire_state_region = STATE_TRANSJORDAN
		owns_entire_state_region = STATE_ADANA
	}

	on_complete = {
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		set_variable = completed_syria_je
		s:STATE_SINAI = {
			add_claim = ROOT
		}
		s:STATE_UPPER_EGYPT = {
			add_claim = ROOT
		}
		s:STATE_MIDDLE_EGYPT = {
			add_claim = ROOT
		}
		s:STATE_LOWER_EGYPT = {
			add_claim = ROOT
		}
		if = {
			limit = {
				OR = {
					AND = {
						exists = c:EGY
						c:EGY = {
							is_subject_of = ROOT
						}
					}
					AND = {
						owns_entire_state_region = STATE_SINAI
						owns_entire_state_region = STATE_UPPER_EGYPT
						owns_entire_state_region = STATE_MIDDLE_EGYPT
						owns_entire_state_region = STATE_LOWER_EGYPT
					}
				}
			}
			custom_tooltip = je_sick_man_advance
			change_variable = {
				name = sick_man_var
				add = 1
			}
		}
		else = {
			add_journal_entry = {
				type = je_sick_man_egypt
			}
		}
		custom_tooltip = sickman_syria_egypt
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	on_weekly_pulse = {
		events = {
			egyptian_crisis_events.1
		}
	}

	transferable = no

	weight = 5000
	
	should_be_pinned_by_default = yes
}

je_sick_man_egypt = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		OR = {
			AND = {
				exists = c:EGY
				c:EGY = {
					is_subject_of = ROOT
				}
			}
			AND = {
				owns_entire_state_region = STATE_SINAI
				owns_entire_state_region = STATE_UPPER_EGYPT
				owns_entire_state_region = STATE_MIDDLE_EGYPT
				owns_entire_state_region = STATE_LOWER_EGYPT
			}
		}
	}

	on_complete = {
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	transferable = no

	weight = 5000
	
	should_be_pinned_by_default = yes
}

je_sick_man_economy = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_historical_content

	complete = {
		in_default = no
		any_scope_state = {
			is_incorporated = yes
			has_building = building_urban_center
			percent >= 0.75
		}
	}

	on_complete = {
		set_variable = completed_sick_man_economy_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	transferable = no

	weight = 5000
	should_be_pinned_by_default = yes
}

# Literacy and Universities
je_sick_man_education = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	complete = {
		any_scope_building = {
			is_building_type = building_university
			occupancy > 0.9
			level >= 5
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
		literacy_rate >= 0.2
	}

	on_complete = {
		set_variable = completed_sick_man_education_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
	}

	current_value = {
		value = root.literacy_rate
	}

	goal_add_value = {
		value = root.literacy_rate
		add = 0.2
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	transferable = no

	weight = 5000

	should_be_pinned_by_default = yes

	progressbar = yes
}

# Nationalism
je_sick_man_separatism = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	group = je_group_historical_content

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		highest_secession_progress < 0.5
	}

	on_complete = {
		set_variable = completed_separatism_sick_man_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					highest_secession_progress < 0.5
				}
				change_variable = {
					name = sick_man_separatist_var
					add = 1
				}
			}
		}
		random_events = {
			100 = 0
			10 = tanzimat_events.5 # Paranoia Event
		}
	}

	fail = {
		highest_secession_progress > 0.5
	}

	current_value = {
		value = var:sick_man_separatist_var
	}

	goal_add_value = {
		add = 180
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	transferable = no

	weight = 5000

	should_be_pinned_by_default = yes

	progressbar = yes
}

# Army Reform
je_sick_man_army = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		army_size >= 100
		has_technology_researched = napoleonic_warfare
		NOR = {
			any_scope_building = {
				is_building_type = building_barracks				
				OR = {
					building_has_goods_shortage = yes
					has_active_production_method = pm_no_organization
				}
			}
			any_military_formation = {
				filter = {
					is_army = yes
				}
				any_combat_unit = {
					has_unit_type = unit_type:combat_unit_type_irregular_infantry
				}
				percent >= 0.25
			}
		}
	}

	on_complete = {
		set_variable = completed_sick_man_army_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
	}

	on_monthly_pulse = {
		events = {
			tanzimat_events.10 # Tanzimat Draft Question
		}
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	transferable = no

	should_be_pinned_by_default = yes

	weight = 5000
}


# Bureaucractic Reform
je_sick_man_bureaucracy = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_historical_content

	complete = {
		NOR = { 
			has_law = law_type:law_hereditary_bureaucrats 
			has_law = law_type:law_land_based_taxation
			has_law = law_type:law_consumption_based_taxation
		}
		bureaucracy >= 0 
		approaching_bureaucracy_shortage = no
	}

	on_complete = {
		set_variable = completed_sick_man_bureaucracy_je
		custom_tooltip = je_sick_man_advance
		change_variable = {
			name = sick_man_var
			add = 1
		}
		remove_modifier = outmoded_bureaucracy
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = tanzimat_events.9 # Land registration resisted
		}
	}

	invalid = {
		custom_tooltip = {
			text = finished_sick_man_tt
			has_variable = sick_man_complete
		}
	}

	transferable = no

	weight = 5000

	should_be_pinned_by_default = yes
}


﻿je_skyscraper_site = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_technology

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = skyscraper_var
				add = 1
			}
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
		any_scope_state = {
			is_split_state = no
			is_incorporated = yes
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 20
			}
		}
	}

	on_complete = {
		remove_modifier = skyscraper_survey
		trigger_event = { id = skyscraper.1 } # site found
	}

	invalid = {
		NOT = {
			any_scope_state = {
				is_split_state = no
				is_incorporated = yes
				any_scope_building = {
					is_building_type = building_urban_center
					level >= 20
				}
			}
		}
	}

	on_invalid = {
		remove_modifier = skyscraper_survey
		remove_variable = skyscraper_var
	}

	current_value = {
		value = root.var:skyscraper_var
	}

	goal_add_value = {
		value = 24
	}

	progressbar = yes

	weight = 10

	should_be_pinned_by_default = yes
}

je_skyscraper_construction = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_technology

	complete = {
		scope:target = {
			any_scope_building = {
				is_building_type = building_skyscraper
				is_under_construction = no
			}
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				has_modifier = skyscraper_site
			}
		}
	}
	
	on_fail = {
		remove_variable = skyscraper_var
	}

	on_complete = {
		trigger_event = { id = skyscraper.2 }
		remove_variable = skyscraper_var
		scope:target = {
			remove_modifier = skyscraper_site
		}
	}

	should_be_pinned_by_default = yes
}
﻿je_south_america_migration = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		country_is_in_south_america = yes
		any_primary_culture = {
			has_discrimination_trait = european_heritage
		}
	}

	possible = {
		has_technology_researched = civilizing_mission
		country_rank >= rank_value:minor_power
		average_sol >= 10
		is_at_war = no
		is_subject = no
		OR = {
			has_law = law_type:law_racial_segregation
			has_law = law_type:law_cultural_exclusion
			has_law = law_type:law_multicultural
		}
		NOR = {
			has_law = law_type:law_closed_borders
			has_law = law_type:law_isolationism
		}
	}

	immediate = {
		set_variable = {
			name = south_america_incorporated_population
			value = 0
		}
		set_variable = {
			name = south_america_incorporated_states
			value = 0
		}
		every_scope_state = {
			limit = {
				is_incorporated = yes
				state_is_in_south_america = yes
			}
			ROOT = {
				change_variable = {
					name = south_america_incorporated_population
					add = PREV.state_population
				}
				change_variable = {
					name = south_america_incorporated_states
					add = 1
				}
			}
		}
		set_variable = {
			name = south_america_migration_goal
			value = var:south_america_incorporated_states
		}
		change_variable = {
			name = south_america_migration_goal
			multiply = 1500000
		}
		trigger_event = { id = sa_migration.2 popup = yes }
	}

	on_weekly_pulse = {
		effect = {
			set_variable = {
				name = south_america_incorporated_population
				value = 0
			}
			every_scope_state = {
				limit = {
					is_incorporated = yes
					state_is_in_south_america = yes
				}
				ROOT = {
					change_variable = {
						name = south_america_incorporated_population
						add = PREV.state_population
					}
				}
			}
			set_variable = {
				name = south_america_incorporated_states
				value = 0
			}
			every_scope_state = {
				limit = {
					is_incorporated = yes
					state_is_in_south_america = yes
				}
				ROOT = {
					change_variable = {
						name = south_america_incorporated_states
						add = 1
					}
				}
			}
			set_variable = {
				name = south_america_migration_goal
				value = var:south_america_incorporated_states
			}
			change_variable = {
				name = south_america_migration_goal
				multiply = 1500000
			}
		}
	}

	complete = {
		custom_tooltip = {
			text = sa_migration_completion_tt
			trigger_if = {
				limit = { exists = var:south_america_incorporated_population }
				var:south_america_incorporated_population >= var:south_america_migration_goal 
				var:south_america_incorporated_population > 0
				var:south_america_migration_goal > 0
			}
			trigger_else = {
				always = no
			}
		}
	}

	on_complete = {
		trigger_event = { id = sa_migration.3 popup = yes }
		show_as_tooltip = {
			add_modifier = {
				name = populated_southamerica
			}
		}
	}

	invalid = {
		has_variable = cancel_sa_migration_var
	}

	scripted_button = southamerica_migration_button

	weight = 100

	should_be_pinned_by_default = yes
}

je_central_america_migration = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		capital = {
			OR = {
				region = sr:region_mexico
				region = sr:region_central_america
			}
		}
		any_primary_culture = {
			has_discrimination_trait = european_heritage
		}
	}

	possible = {
		has_technology_researched = civilizing_mission
		country_rank >= rank_value:minor_power
		average_sol >= 10
		is_at_war = no
		is_subject = no
		OR = {
			has_law = law_type:law_racial_segregation
			has_law = law_type:law_cultural_exclusion
			has_law = law_type:law_multicultural
		}
		NOR = {
			has_law = law_type:law_closed_borders
			has_law = law_type:law_isolationism
		}
	}

	immediate = {
		set_variable = {
			name = central_america_incorporated_population
			value = 0
		}
		set_variable = {
			name = central_america_incorporated_states
			value = 0
		}
		every_scope_state = {
			limit = {
				is_incorporated = yes
				OR = {
					region = sr:region_mexico
					region = sr:region_central_america
				}
			}
			ROOT = {
				change_variable = {
					name = central_america_incorporated_population
					add = PREV.state_population
				}
				change_variable = {
					name = central_america_incorporated_states
					add = 1
				}
			}
		}
		set_variable = {
			name = central_america_migration_goal
			value = var:central_america_incorporated_states
		}
		change_variable = {
			name = central_america_migration_goal
			multiply = 1500000
		}
		trigger_event = { id = sa_migration.2 popup = yes }
	}

	on_weekly_pulse = {
		effect = {
			set_variable = {
				name = central_america_incorporated_population
				value = 0
			}
			every_scope_state = {
				limit = {
					is_incorporated = yes
					OR = {
						region = sr:region_mexico
						region = sr:region_central_america
					}
				}
				ROOT = {
					change_variable = {
						name = central_america_incorporated_population
						add = PREV.state_population
					}
				}
			}
			set_variable = {
				name = central_america_incorporated_states
				value = 0
			}
			every_scope_state = {
				limit = {
					is_incorporated = yes
					OR = {
						region = sr:region_mexico
						region = sr:region_central_america
					}
				}
				ROOT = {
					change_variable = {
						name = central_america_incorporated_states
						add = 1
					}
				}
			}
			set_variable = {
				name = central_america_migration_goal
				value = var:central_america_incorporated_states
			}
			change_variable = {
				name = central_america_migration_goal
				multiply = 1000000
			}
		}
	}

	complete = {
		custom_tooltip = {
			text = ca_migration_completion_tt
			var:central_america_incorporated_population >= var:central_america_migration_goal
			var:central_america_incorporated_population > 0
			var:central_america_migration_goal > 0
		}
	}

	on_complete = {
		trigger_event = { id = sa_migration.3 popup = yes }
		show_as_tooltip = {
			add_modifier = {
				name = populated_southamerica
			}
		}
	}

	invalid = {
		has_variable = cancel_sa_migration_var
	}

	scripted_button = southamerica_migration_button

	weight = 100

	should_be_pinned_by_default = yes
}

je_american_west_migration = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		OR = {
			country_is_in_north_america = yes
			country_is_in_central_america = yes
		}
		any_primary_culture = {
			has_discrimination_trait = european_heritage
		}
		any_scope_state = {
			OR = {
				region = sr:region_pacific_coast
				region = sr:region_great_plains
			}
		}
	}

	possible = {
		has_technology_researched = civilizing_mission
		country_rank >= rank_value:minor_power
		any_scope_state = {
			is_incorporated = yes
			OR = {
				region = sr:region_pacific_coast
				region = sr:region_great_plains
			}
			count >= 3
		}
		average_sol >= 10
		is_at_war = no
		is_subject = no
		OR = {
			has_law = law_type:law_racial_segregation
			has_law = law_type:law_cultural_exclusion
			has_law = law_type:law_multicultural
		}
		NOR = {
			has_law = law_type:law_closed_borders
			has_law = law_type:law_isolationism
		}
	}

	immediate = {
		set_variable = {
			name = american_west_incorporated_population
			value = 0
		}
		set_variable = {
			name = american_west_incorporated_states
			value = 0
		}
		every_scope_state = {
			limit = {
				is_incorporated = yes
				OR = {
					region = sr:region_pacific_coast
					region = sr:region_great_plains
				}
			}
			ROOT = {
				change_variable = {
					name = american_west_incorporated_population
					add = PREV.state_population
				}
				change_variable = {
					name = american_west_incorporated_states
					add = 1
				}
			}
		}
		set_variable = {
			name = american_west_migration_goal
			value = var:american_west_incorporated_states
		}
		change_variable = {
			name = american_west_migration_goal
			multiply = 1500000
		}
		trigger_event = { id = sa_migration.2 popup = yes }
	}

	on_weekly_pulse = {
		effect = {
			set_variable = {
				name = american_west_incorporated_population
				value = 0
			}
			every_scope_state = {
				limit = {
					is_incorporated = yes
					OR = {
						region = sr:region_pacific_coast
						region = sr:region_great_plains
					}
				}
				ROOT = {
					change_variable = {
						name = american_west_incorporated_population
						add = PREV.state_population
					}
				}
			}
			set_variable = {
				name = american_west_incorporated_states
				value = 0
			}
			every_scope_state = {
				limit = {
					is_incorporated = yes
					OR = {
						region = sr:region_pacific_coast
						region = sr:region_great_plains
					}
				}
				ROOT = {
					change_variable = {
						name = american_west_incorporated_states
						add = 1
					}
				}
			}
			set_variable = {
				name = american_west_migration_goal
				value = var:american_west_incorporated_states
			}
			change_variable = {
				name = american_west_migration_goal
				multiply = 1000000
			}
		}
	}

	complete = {
		custom_tooltip = {
			text = wa_migration_completion_tt
			var:american_west_incorporated_population >= var:american_west_migration_goal
			var:american_west_incorporated_population > 0
			var:american_west_migration_goal > 0
		}
	}

	on_complete = {
		trigger_event = { id = sa_migration.3 popup = yes }
		show_as_tooltip = {
			add_modifier = {
				name = populated_southamerica
			}
		}
	}

	invalid = {
		OR = { 
			has_variable = cancel_sa_migration_var
			NOT = {
				any_scope_state = {
					OR = {
						region = sr:region_pacific_coast
						region = sr:region_great_plains
					}
				}
			}
		}
	}

	scripted_button = southamerica_migration_button

	weight = 100

	should_be_pinned_by_default = yes
}
﻿je_strike = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_crises

	is_shown_when_inactive = {
		has_technology_researched = political_agitation
		has_technology_researched = human_rights
		NOT = { has_law = law_type:law_council_republic }
		ig:ig_trade_unions = {
			is_marginal = no
			ig_clout >= 0.1
		}
		ig:ig_industrialists = {
			is_marginal = no
		}
	}

	possible = {
		ig:ig_trade_unions = {
			is_in_government = no
			ig_approval < 0
		}
		OR = {
			institution_investment_level = {
				institution = institution_workplace_safety
				value < 3
			}
			institution_investment_level = {
				institution = institution_social_security
				value < 3
			}
		}
		# we should probably simplfy this
		any_scope_state = {
			is_incorporated = yes
			OR = {
				radical_fraction = {
					value >= 0.2
					pop_type = laborers
				}
				radical_fraction = {
					value >= 0.2
					pop_type = machinists
				}
			}
			any_scope_pop = {
				OR = {
					is_pop_type = laborers
					is_pop_type = machinists
				}
				standard_of_living < 15
				pop_is_discriminated = no
				OR = {
					pop_employment_building_group = bg_manufacturing
					pop_employment_building_group = bg_mining
					pop_employment_building_group = bg_private_infrastructure
				}
			}
		}
	}

	immediate = {
		trigger_event = { id = strike.1 }
		set_variable = {
			name = strike_timer_var
			value = 0
		}
	}

	complete = {
		strike_goal_complete_trigger = yes
	}

	on_complete = {
		custom_tooltip = je_end_strike_tt
		if = {
			limit = {
				has_variable = strike_negotiator
			}
			trigger_event = {
				id = strike.8 # strikers appeased
			}
		}
		else_if = {
			limit = {
				has_variable = strike_breaker
			}
			trigger_event = {
				id = strike.9 # strikers crushed
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = strike_timer_var
				add = 1
			}
		}
		events = {
			strike.3
		}
		random_events = {
			10 = 0
			1 = strike.5
			1 = strike.6
			1 = strike.7
		}
	}

	current_value = {
		value = root.var:strike_timer_var
	}

	goal_add_value = {
		value = 60
	}

	progressbar = yes

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_general_strike_warning
				trigger = {
					scope:journal_entry = {
						is_goal_complete = no
					}
				}
			}
			triggered_desc = {
				desc = je_general_strike_active
				trigger = {
					scope:journal_entry = {
						is_goal_complete = yes
					}
				}
			}
		}
	}

	invalid = {
		has_law = law_type:law_council_republic
	}

	on_invalid = {
		custom_tooltip = {
			text = end_strike_tt
			strike_end_effect = yes
		}
	}

	weight = 100
	should_be_pinned_by_default = yes
}

﻿je_suffragists = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		has_technology_researched = human_rights
		OR = {
			has_law = law_type:law_landed_voting
			has_law = law_type:law_wealth_voting
			has_law = law_type:law_census_voting
			has_law = law_type:law_universal_suffrage
		}
	}

	possible = {
		has_technology_researched = feminism
		has_technology_researched = political_agitation
		OR = {
			has_law = law_type:law_women_own_property
			has_law = law_type:law_women_in_the_workplace
		}
		empty_agitator_slots >= 1
	}

	immediate = {
		trigger_event = { id = suffragist_events.9 popup = yes }
	}

	on_monthly_pulse = {
		random_events = {
			200 = 0
			20 = suffragist_events.1
			20 = suffragist_events.2
			20 = suffragist_events.3
			20 = suffragist_events.4
			20 = suffragist_events.5
			20 = suffragist_events.7
			20 = suffragist_events.8
		}
	}

	complete = {
		has_law = law_type:law_womens_suffrage
		in_election_campaign = yes
	}

	on_complete = {
		trigger_event = { id = suffragist_events.10 popup = yes }
	}

	invalid = {
		NOR = {
			has_law = law_type:law_landed_voting
			has_law = law_type:law_wealth_voting
			has_law = law_type:law_census_voting
			has_law = law_type:law_universal_suffrage
		}
	}

	timeout = 7300
	should_be_pinned_by_default = yes
}

﻿je_rubber = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = rubber_je_done }
		any_scope_state = {
			has_potential_resource = bg_rubber
		}
	}

	possible = {
		has_technology_researched = rubber_mastication
		any_scope_building = {
			is_building_type = building_rubber_plantation
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_rubber_plantation
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy >= 0.5
			level >= 5
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.1 }
		set_variable = {
			name = rubber_je_done
		}
	}

	timeout = 3650
}

je_mechanized_farming = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = mechanized_farming_je_done }
		has_technology_researched = threshing_machine
	}

	possible = {
		has_technology_researched = mechanized_farming
	}

	complete = {
		any_scope_building = {
			filter = {
				OR = {
					is_building_type = building_rye_farm
					is_building_type = building_wheat_farm
					is_building_type = building_maize_farm
					is_building_type = building_millet_farm
				}
			}
			percent >= 0.75
			trigger_if = {
				limit = {
					owner = {
						has_technology_researched = compression_ignition
					}
				}
				OR = {
					has_active_production_method = pm_tractors
					has_active_production_method = pm_compression_ignition_tractors
				}
			}
			trigger_else = {
				OR = {
					has_active_production_method = pm_tractors
                }
			}
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
		}
	}

	on_complete = {
		set_variable = mechanized_farming_je_done
		trigger_event = { id = production_tech_events.600 }
	}

	timeout = 3650
}

je_atmospheric_engine = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = atmospheric_engine_je_done }
		has_technology_researched = shaft_mining
		NOT = { has_technology_researched = watertube_boiler }
	}

	possible = {
		has_technology_researched = atmospheric_engine
		any_scope_building = {
			OR = {
				is_building_type = building_coal_mine
				is_building_type = building_iron_mine
				is_building_type = building_sulfur_mine
				is_building_type = building_lead_mine
			}
			level >= 3
		}
	}

	complete = {
		any_scope_building = {
			filter = {
				OR = {
					is_building_type = building_coal_mine
					is_building_type = building_iron_mine
					is_building_type = building_sulfur_mine
					is_building_type = building_lead_mine
				}
			}
			percent > 0.75
			OR = {
			    has_active_production_method = pm_atmospheric_engine_pump_building_coal_mine
			    has_active_production_method = pm_atmospheric_engine_pump_building_iron_mine
			    has_active_production_method = pm_atmospheric_engine_pump_building_lead_mine
			    has_active_production_method = pm_atmospheric_engine_pump_building_sulfur_mine
            }
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
		}
		OR = {
			can_research = railways
			can_research = watertube_boiler
		}
	}

	on_complete = {
		set_variable = atmospheric_engine_je_done
		trigger_event = { id = production_tech_events.601 }
	}

	fail = {
		has_technology_researched = watertube_boiler
	}

	timeout = 3650
}

je_plastics = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = plastics_je_done }
		has_technology_researched = reinforced_concrete
	}

	possible = {
		has_technology_researched = plastics
		any_scope_building = {
			is_building_type = building_glassworks
		}
	}

	complete = {
		any_scope_building = {
			filter = {
				is_building_type = building_glassworks
			}

			percent >= 0.5

			occupancy > 0.75
			weekly_profit > 10
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			level >= 5
			has_active_production_method = pm_houseware_plastics
		}
	}



	on_complete = {
		trigger_event = { id = production_tech_events.200 }
		set_variable = {
			name = plastics_je_done
		}
	}
}

je_radio = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = radio_je_done }
		has_technology_researched = telephone
	}

	possible = {
		has_technology_researched = radio
		any_scope_building = {
			is_building_type = building_electrics_industry
		}
	}

	complete = {
		any_scope_building = {
			filter = {
				is_building_type = building_electrics_industry
			}

			percent >= 0.5
			occupancy > 0.75
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			level >= 5
			has_active_production_method = pm_radios
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.210 }
		set_variable = {
			name = radio_je_done
		}
	}
}

je_dynamite = { 
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = dynamite_je_done }
		has_technology_researched = nitroglycerin
	}

	possible = {
		has_technology_researched = dynamite
		any_scope_building = {
			OR = {
				is_building_type = building_munition_plants
				is_building_type = building_iron_mine
				is_building_type = building_coal_mine
				is_building_type = building_lead_mine
				is_building_type = building_sulfur_mine
			}
		}
		any_scope_building = {
			is_building_type = building_explosives_factory
		}
	}

	complete = {
		OR = {
			any_scope_building = {
				custom_tooltip = je_shortform_building_munition_plants_tooltip
				filter = {
					is_building_type = building_munition_plants
				}
				percent > 0.75
				cash_reserves_ratio >= 0.25
				weekly_profit > 0
				occupancy >= 0.75
			}
			any_scope_building = {
				custom_tooltip = je_shortform_building_mine_tooltip
				filter = {
					OR = {
						is_building_type = building_iron_mine
						is_building_type = building_coal_mine
						is_building_type = building_lead_mine
						is_building_type = building_sulfur_mine
					}
				}
				percent > 0.75
				hidden_trigger = {
					OR = {
	                    has_active_production_method = pm_dynamite_building_coal_mine
	                    has_active_production_method = pm_dynamite_building_iron_mine
	                    has_active_production_method = pm_dynamite_building_lead_mine
	                    has_active_production_method = pm_dynamite_building_sulfur_mine
	                }
                }
                custom_tooltip = has_activated_dynamite
				cash_reserves_ratio >= 0.25
				weekly_profit > 0
				occupancy >= 0.75
			}
		}
		any_scope_building = {
			custom_tooltip = je_shortform_building_chemical_plants_tooltip
			filter = {
				is_building_type = building_explosives_factory
			}
			percent > 0.75
			OR = {
				has_active_production_method = pm_leblanc_process
				has_active_production_method = pm_ammonia-soda_process
				has_active_production_method = pm_vacuum_evaporation
				has_active_production_method = pm_brine_electrolysis
			}
			cash_reserves_ratio >= 0.25
			weekly_profit > 0
			occupancy >= 0.75
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.102 }
		set_variable = {
			name = dynamite_je_done
		}
	}

	timeout = 3650
}

je_combustion_engines = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = combustion_engines_je_done }
		has_technology_researched = rotary_valve_engine
	}

	possible = {
		has_technology_researched = combustion_engine
		any_scope_building = {
			OR = {
				is_building_type = building_urban_center
				is_building_type = building_motor_industry
			}
		}
	}

	complete = {
		OR = {
			any_scope_building = {
				filter = {
					is_building_type = building_urban_center
				}
				percent > 0.75
				has_active_production_method = pm_public_motor_carriages
				cash_reserves_ratio >= 0.25
				weekly_profit > 0
				occupancy >= 0.75
			}
			any_scope_building = {
				filter = {
					is_building_type = building_motor_industry
				}
				percent > 0.75
				has_active_production_method = pm_automobile_production
				cash_reserves_ratio >= 0.25
				weekly_profit > 0
				occupancy >= 0.75
			}
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.103 }
		set_variable = {
			name = combustion_engines_je_done
		}
	}

	timeout = 3650
}

# Branching Out
je_railroads = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = railroad_je_done }
		any_scope_building = {
			OR = {
				is_building_type = building_coal_mine
				is_building_type = building_iron_mine
				is_building_type = building_lead_mine
				is_building_type = building_sulfur_mine
				is_building_type = building_logging_camp
				is_building_type = building_oil_rig
				is_building_type = building_coffee_plantation
				is_building_type = building_cotton_plantation
				is_building_type = building_dye_plantation
				is_building_type = building_opium_plantation
				is_building_type = building_tea_plantation
				is_building_type = building_tobacco_plantation
				is_building_type = building_sugar_plantation
				is_building_type = building_rubber_plantation
				is_building_type = building_banana_plantation
			}
		}
	}

	possible = {
		has_technology_researched = railways
		any_scope_building = {
			is_building_type = building_railway
		}
	}

	complete = {
		trigger_if = {
			limit = {
				any_scope_building = {
					OR = {
						is_building_type = building_coal_mine
						is_building_type = building_iron_mine
						is_building_type = building_lead_mine
						is_building_type = building_sulfur_mine
						is_building_type = building_logging_camp
						is_building_type = building_oil_rig
					}
				}
			}
			any_scope_building = {
				filter = {
					OR = {
						is_building_type = building_coal_mine
						is_building_type = building_iron_mine
						is_building_type = building_lead_mine
						is_building_type = building_sulfur_mine
						is_building_type = building_logging_camp
						is_building_type = building_oil_rig
					}
				}
				percent > 0.2
				OR = {
				    has_active_production_method = pm_rail_transport_mine
				    has_active_production_method = pm_rail_transport_building_logging_camp
				    has_active_production_method = pm_rail_transport_building_oil_rig
                }
				occupancy >= 0.75
			}
		}
		trigger_if = {
			limit = {
				any_scope_building = {
					OR = {
						is_building_type = building_coffee_plantation
						is_building_type = building_cotton_plantation
						is_building_type = building_dye_plantation
						is_building_type = building_opium_plantation
						is_building_type = building_tea_plantation
						is_building_type = building_tobacco_plantation
						is_building_type = building_sugar_plantation
						is_building_type = building_rubber_plantation
						is_building_type = building_banana_plantation
					}
				}
			}
			any_scope_building = {
				filter = {
					OR = {
						is_building_type = building_coffee_plantation
						is_building_type = building_cotton_plantation
						is_building_type = building_dye_plantation
						is_building_type = building_opium_plantation
						is_building_type = building_tea_plantation
						is_building_type = building_tobacco_plantation
						is_building_type = building_sugar_plantation
						is_building_type = building_rubber_plantation
						is_building_type = building_banana_plantation
					}
				}
				percent > 0.2
				has_active_production_method = pm_steam_rail_transport
				occupancy >= 0.75
			}
		}
		any_scope_state = {
			has_building = building_motor_industry
		}
		any_scope_state = {
			has_building = building_railway
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.501 }
		set_variable = {
			name = railroad_je_done
		}
	}

	timeout = 3650
}

je_telephone = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = telephone_je_done }
		has_technology_researched = shift_work
	}

	possible = {
		has_technology_researched = telephone
		NOT = { has_technology_researched = radio }
	}

	complete = {
		any_scope_building = {
			is_building_type = building_electrics_industry
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
			level >= 5
		}
		NOT = { has_technology_researched = radio }
		can_research = radio
	}

	on_complete = {
		trigger_event = { id = production_tech_events.300 }
		set_variable = {
			name = telephone_je_done
		}
	}

	fail = {
		has_technology_researched = radio
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = technology_events.10
		}
	}

	timeout = 3650
}

je_whaling = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = whaling_je_done }
		any_scope_state = {
			has_building = building_whaling_station
		}
		NOT = { has_technology_researched = pumpjacks }
	}

	possible = {
		any_scope_state = {
			has_building = building_whaling_station
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_whaling_station
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
			level >= 3
		}
		any_scope_character = {
			has_role = admiral
			is_busy = no
			is_ruler = no
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.301 }
		set_variable = {
			name = whaling_je_done
		}
	}
	
	invalid = {
		has_technology_researched = pumpjacks
	}

	timeout = 3650
}

je_pumpjacks = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = pumpjacks_je_done }
		has_technology_researched = steam_donkey
		has_technology_researched = dynamite
		any_scope_state = {
			has_potential_resource = bg_oil_extraction
		}
	}

	possible = {
		has_technology_researched = pumpjacks
		any_scope_building = {
			is_building_type = building_oil_rig
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_oil_rig
			occupancy > 0.75
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			level >= 5
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.401 }
		set_variable = {
			name = pumpjacks_je_done
		}
	}

	timeout = 3650
}

je_electrical_generation = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = electrical_generation_je_done }
		has_technology_researched = mechanized_workshops
	}

	possible = {
		has_technology_researched = electrical_generation
		any_scope_building = {
			is_building_type = building_power_plant
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_power_plant
			occupancy > 0.75
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			level >= 5
		}
		OR = {
			can_research = electric_railway
			can_research = steam_turbine
			can_research = shift_work
		}
	}

	on_complete = {
		trigger_event = { id = production_tech_events.402 }
		set_variable = {
			name = electrical_generation_je_done
		}
	}

	timeout = 3650
}

je_steam_engines = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		has_technology_researched = railways
		NOT = { has_technology_researched = electric_railway }
		any_scope_state = {
			any_neighbouring_state = {
				owner = ROOT
			}
		}
	}

	possible = {
		any_scope_building = {
			is_building_type = building_motor_industry
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_motor_industry
			occupancy > 0.75
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			level >= 3
		}
		any_scope_state = {
			any_scope_building = {
				is_building_type = building_railway
				occupancy > 0.75
			}
			custom_tooltip = {
				text = has_adjacent_railway_tt
				any_neighbouring_state = {
					owner = ROOT
					any_scope_building = {
						is_building_type = building_railway
						occupancy > 0.75
					}
				}
			}
		}
		
	}

	on_complete = {
		trigger_event = { id = production_tech_events.700 }
	}

	timeout = 3650
}
﻿je_elevator = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = elevators_je_done }
		has_technology_researched = steel_frame_buildings
	}

	possible = {
		has_technology_researched = elevator
		any_scope_building = {
			is_building_type = building_steel_mills
		}
		any_scope_building = {
			is_building_type = building_glassworks
		}
		any_scope_building = {
			is_building_type = building_urban_center
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_steel_mills
		}
		any_scope_building = {
			is_building_type = building_glassworks
		}
		any_scope_building = {
			filter = {
				is_building_type = building_urban_center
			}
			is_building_type = building_urban_center
			percent > 0.75
			has_active_production_method = pm_arcades
			cash_reserves_ratio >= 0.25
			weekly_profit > 0
			occupancy >= 0.75
		}
	}

	on_complete = {
		trigger_event = { id = society_tech_events.104 }
		set_variable = {
			name = elevators_je_done
		}
	}

	timeout = 3650
}

je_mutual_funds = {
 	icon = "gfx/interface/icons/event_icons/event_industry.dds"

 	group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		NOT = { has_variable = mutual_funds_je_done }
 		has_technology_researched = central_banking
 	}

 	possible = {
 		has_technology_researched = mutual_funds
 	}

 	complete = {
 		any_scope_building = {
 			filter = {
 				is_building_type = building_financial_district
 			}
 			percent >= 0.5
 			has_active_production_method = pm_financial_district_publicly_traded
 			cash_reserves_ratio >= 0.5
 			weekly_profit > 0
 			occupancy >= 0.75
 		}
 	}

 	on_complete = {
 		trigger_event = { id = society_tech_events.105 }
 		set_variable = {
 			name = mutual_funds_je_done
 		}
 	}

 	timeout = 3650
 }

﻿je_camera = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = camera_je_done }
		has_technology_researched = realism
		NOT = { has_technology_researched = film }
		NOT = { is_country_type = unrecognized }
	}

	possible = {
		has_technology_researched = camera
		any_scope_building = {
			is_building_type = building_arts_academy
			level >= 3
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_arts_academy
			level >= 5
			has_active_production_method = pm_photographic_art
		}
		any_scope_building = {
			filter = {
				is_building_type = building_arts_academy
			}
			percent > 0.75
			has_active_production_method = pm_photographic_art
			occupancy > 0.75
		}
	}

	on_complete = {
		set_variable = camera_je_done
		trigger_event = { id = camera_film_pm_events.1 }
	}

	invalid = {
		has_technology_researched = film
	}

	timeout = 3650
}

je_film = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = film_je_done }
		has_technology_researched = camera
		NOT = { is_country_type = unrecognized }
	}

	possible = {
		has_technology_researched = film
		any_scope_building = {
			is_building_type = building_arts_academy
			level >= 3
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_arts_academy
			level >= 5
			has_active_production_method = pm_film_art
		}
		any_scope_building = {
			filter = {
				is_building_type = building_arts_academy
			}
			percent > 0.75
			has_active_production_method = pm_film_art
			occupancy > 0.75
		}
	}

	on_complete = {
		set_variable = film_je_done
		trigger_event = { id = camera_film_pm_events.2 }
	}

	timeout = 3650
}

﻿je_build_local_arms_industry = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_internal_affairs

	complete = {
		any_scope_state = {
			has_active_building = building_arms_industry
		}
	}

	on_complete = {
		ig:ig_armed_forces = {
			add_modifier = {
				name = ig_domestic_weapons_manufacturing
				months = short_modifier_time
			}
		}
	}


	on_timeout = {
		ig:ig_armed_forces = {
			add_modifier = {
				name = ig_unreliable_weapon_imports
				months = short_modifier_time
			}
		}
	}

	timeout = 600

	weight = 200

	transferable = no
}

je_set_up_grain_import = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_foreign_affairs

	complete = {
		capital.market = {
			any_trade_route = {
				importer.owner = root
				goods = g:grain
			}
		}
	}

	on_complete = {
		scope:target = {
			add_modifier = {
				name = ig_secured_desired_imports
				months = normal_modifier_time
			}
		}
	}


	on_timeout = {
		scope:target = {
			add_modifier = {
				name = ig_refused_desired_imports
				months = normal_modifier_time
			}
		}
	}

	timeout = 600

	weight = 200

	transferable = no
}


je_set_up_steel_import = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_foreign_affairs

	complete = {
		capital.market = {
			any_trade_route = {
				importer.owner = root
				goods = g:steel
			}
		}
	}

	on_complete = {
		ig:ig_industrialists = {
			add_modifier = {
				name = ig_secured_desired_imports
				months = normal_modifier_time
			}
		}
	}


	on_timeout = {
		ig:ig_industrialists = {
			add_modifier = {
				name = ig_refused_desired_imports
				months = normal_modifier_time
			}
		}
	}

	timeout = 600

	weight = 200

	transferable = no
}


je_set_up_paper_import = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_foreign_affairs

	complete = {
		capital.market = {
			any_trade_route = {
				importer.owner = root
				goods = g:paper
			}
		}
	}

	on_complete = {
		ig:ig_intelligentsia = {
			add_modifier = {
				name = ig_secured_desired_imports
				months = normal_modifier_time
			}
		}
	}


	on_timeout = {
		ig:ig_intelligentsia = {
			add_modifier = {
				name = ig_refused_desired_imports
				months = normal_modifier_time
			}
		}
	}

	timeout = 600

	weight = 200

	transferable = no
}

﻿je_tutorial_expand_basic_building = {
	should_be_pinned_by_default = yes
	how_tutorial = lesson_expand_building_how
	why_tutorial = lesson_expand_building_why

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	immediate = {
		scope:target.state = {
			unset_available_for_autonomous_investment = scope:target.type
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }	
	}
	
	current_value = {
		value = scope:target.level
	}
	
	goal_add_value = {
		value = 1
	}
	
	is_progressing = {
		exists = scope:target
		scope:target = { is_under_construction = yes }
	}
	
	invalid = {
		custom_tooltip = {
			text = je_tutorial_expand_basic_building_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}
		}
	}
	
	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_expand_basic_building_complete
				journal_entry = je:je_tutorial_expand_basic_building
			}
		}
		scope:target.state = {
			set_available_for_autonomous_investment = scope:target.type
		}
	}
	
	on_invalid = {
		remove_active_objective_subgoal = sg_expand_basic_building
		scope:target.state = {
			set_available_for_autonomous_investment = scope:target.type
		}
	}

	on_fail = {
		scope:target.state = {
			set_available_for_autonomous_investment = scope:target.type
		}
	}
	
	weight = 1000
	transferable = yes
}

je_tutorial_establish_trade_route = {
	how_tutorial = lesson_establish_trade_route_how
	why_tutorial = lesson_establish_trade_route_why	

	group = je_group_tutorial
	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_establish_trade_route_status_not_progressing
				trigger = {
					scope:journal_entry = {
						is_progressing = no
					}
				}
			}
			desc = je_tutorial_establish_trade_route_status_progressing
		}
	}
	
	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress
				value = 0
			}
			set_variable = {
				name = original_num_import_routes
				value = target.num_import_trade_routes
			}
		}
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress
	}
	
	goal_add_value = {
		value = 4
	}
	
	is_progressing = {
		scope:target = {
			market_goods_has_goods_shortage = no
		}
	}
	
	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress
						add = 1
					}
				}
			}
		}
	}
	
	invalid = {
		NOT = { exists = scope:target }
	}
		
	weight = 1010
	transferable = yes
}

je_tutorial_fix_budget_deficit = {
	how_tutorial = lesson_budget_balance_how
	why_tutorial = lesson_budget_balance_why	

	group = je_group_tutorial
	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	immediate = {
		set_variable = {
			name = original_tax_level
			value = tax_level_value
		}
		set_variable = {
			name = original_num_taxed_goods
			value = num_taxed_goods
		}		
	}
	
	complete = {
		gold_reserves > 0
	}

	is_progressing = {
		weekly_net_fixed_income > 0
	}

	fail = {
		in_default = yes
	}
	
	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_budget_balance_complete
				journal_entry = je:je_tutorial_fix_budget_deficit
			}
		}
	}

	on_fail = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_budget_balance_fail
				journal_entry = je:je_tutorial_fix_budget_deficit
			}
		}
	}
	
	weight = 1010
	transferable = yes
}

je_tutorial_change_production_method = {
	how_tutorial = lesson_production_methods_how
	why_tutorial = lesson_production_methods_why

	group = je_group_tutorial
	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	
	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress
				value = 0
			}
		}
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress
	}
	
	goal_add_value = {
		value = 4
	}
	
	is_progressing = {
		has_variable = has_changed_production_method
	}
	
	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress
						add = 1
					}
				}
			}
		}
	}
	
	invalid = {
		custom_tooltip = {
			text = je_tutorial_change_production_method_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}	
		} 			
	}
	
	weight = 1010
	transferable = yes
}

je_tutorial_expand_productive_building = {
	how_tutorial = lesson_expand_productive_building_how
	why_tutorial = lesson_expand_productive_building_why

	group = je_group_tutorial
	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	immediate = {
		scope:target.state = {
			unset_available_for_autonomous_investment = scope:target.type
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	is_progressing = {
		exists = scope:target
		scope:target = { is_under_construction = yes }
	}
	
	current_value = {
		value = scope:target.level
	}
	
	goal_add_value = {
		value = 1
	}
	
	invalid = {
		custom_tooltip = {
			text = je_tutorial_expand_productive_building_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}	
		} 			
	}
	
	on_complete = {
		scope:target.state = {
			set_available_for_autonomous_investment = scope:target.type
		}
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_expand_productive_building
		scope:target.state = {
			set_available_for_autonomous_investment = scope:target.type
		}
	}

	on_fail = {
		scope:target.state = {
			set_available_for_autonomous_investment = scope:target.type
		}
	}
	
	weight = 1001
	transferable = yes
}

je_tutorial_fix_unproductive_building = {
	how_tutorial = lesson_fix_unproductive_building_how
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress_improve_market
				value = 0
			}
		}
	}

	is_progressing = {
		exists = scope:target
		scope:target = { 
			OR = {
				earnings >= 5.0
				is_subsidized = yes
			}
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress_improve_market
	}
	
	goal_add_value = {
		value = 4
	}

	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress_improve_market
						add = 1
					}
				}
			}
		}
	}
	
	invalid = {
		custom_tooltip = {
			text = je_tutorial_fix_unproductive_building_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}	
		} 			
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_fix_unproductive_building_complete
				journal_entry = je:je_tutorial_fix_unproductive_building
			}
		}
	}
	
	weight = 1010
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_grow_gdp = {
	how_tutorial = lesson_grow_gdp_how
	why_tutorial = lesson_grow_gdp_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = gdp
	}
	goal_add_value = {
		value = gdp
		multiply = 0.25
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_grow_gdp_complete
				journal_entry = je:je_tutorial_grow_gdp
			}
		}
	}
	
	weight = 1002
	transferable = yes
}

je_tutorial_promote_ig = {
	
	how_tutorial = lesson_promote_ig_how
	why_tutorial = lesson_promote_ig_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	is_progressing = {
		any_interest_group = {
			is_being_bolstered = yes
		}
	}
	
	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress
				value = 0
			}
		}
	}
	
	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress
						add = 1
					}
				}
			}
		}
	}
	
	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress
	}
	
	goal_add_value = {
		value = 26
	}
	
	weight = 1002
	transferable = yes
}

je_tutorial_increase_market_access_by_decree = {
	how_tutorial = lesson_market_access_by_decree_how
	why_tutorial = lesson_market_access_by_decree_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress_improve_market
				value = 0
			}
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_increase_market_access_by_decree_status_first
				trigger = {
					scope:journal_entry = {
						is_progressing = no
					}
				}
			}
			desc = je_tutorial_increase_market_access_by_decree_status_second
		}
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress_improve_market
	}
	
	goal_add_value = {
		value = 12
	}

	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress_improve_market
						add = 1
					}
				}
			}
		}
	}
	
	is_progressing = {
		exists = scope:target
		scope:target = { 
			has_decree = decree_road_maintenance
		}
	}

	invalid = {
		custom_tooltip = {
			text = je_tutorial_increase_market_access_by_decree_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}
		}
	}
	
	on_complete = {
	}
	
	on_invalid = {
		remove_active_objective_subgoal = sg_increase_market_access_by_decree
	}
	
	weight = 1006
	transferable = yes
}

je_tutorial_improve_market_access_with_railways = {
	how_tutorial = lesson_market_access_with_railways_how
	why_tutorial = lesson_market_access_with_railways_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	immediate = {
	}

	complete = {
		scope:target = {
			custom_tooltip = {
				text = je_tutorial_improve_market_access_with_railways_tooltip
				state_infrastructure_balance > 0
			}
		}
	}

	is_progressing = {
		scope:target = {
			any_scope_building = {
				is_building_type = building_railway
				is_under_construction = yes
			}
		}
	}
	
	invalid = {
		custom_tooltip = {
			text = je_tutorial_improve_market_access_with_railways_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}
		}
	}
	
	on_complete = {
	}
	
	on_invalid = {
		remove_active_objective_subgoal = sg_improve_market_access_with_railways
	}
	
	weight = 1008
	transferable = yes
}

je_tutorial_increase_immigration = {
	how_tutorial = lesson_increase_immigration_how
	why_tutorial = lesson_increase_immigration_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial
	
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = scope:target.state_population
	}

	goal_add_value = {
		add = 10000
	}

	invalid = {
		custom_tooltip = {
			text = je_tutorial_increase_immigration_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
			}
		}
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_increase_immigration
	}
	
	weight = 1012
	transferable = yes
}

je_tutorial_improve_supply_network = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	current_value = {
		value = num_convoys_available
	}

	goal_add_value = {
		value = {
			add = 400
		}
	}
	
	weight = 1018
	transferable = yes
}

je_tutorial_improve_consumer_goods_access = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial
		
	complete = {
		exists = scope:target
		scope:target = { state_goods_pricier < 0.2 }
	}
	
	weight = 1021
	transferable = yes
}

je_tutorial_make_interest_group_happy = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial
		
	complete = {
		scope:target = { ig_approval >= 2 }
	}
	
	weight = 1021
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_enact_institution_law = {
	how_tutorial = lesson_enact_institution_law_how
	why_tutorial = lesson_enact_institution_law_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
		
	complete = {
		NOT = { has_law = scope:target }
	}
	
	is_progressing = {
		scope:target = {
			exists = root.currently_enacting_law
			is_same_law_group_as = root.currently_enacting_law.type
		}
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_enact_institution_law_complete
				journal_entry = je:je_tutorial_enact_institution_law
			}
		}
	}
	
	weight = 1022
	transferable = yes
}

je_tutorial_invest_into_an_institution = {
	# how_tutorial = lesson_invest_into_an_institution_how
	# why_tutorial = lesson_invest_into_an_institution_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	
	current_value = scope:target.investment
	
	is_progressing = {
		expanding_institution = scope:target.type
	}
	
	goal_add_value = 1
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	invalid = {
		NOT = { has_institution = scope:journal_entry.target.type }
	}

	on_complete = {
		# owner = {
		# 	start_tutorial_lesson = { 
		# 		tutorial_lesson = lesson_invest_into_an_institution_complete
		# 		journal_entry = je:je_tutorial_invest_into_an_institution
		# 	}
		# }
	}
	
	weight = 1023
	transferable = yes
}

je_tutorial_reform_government = {
	how_tutorial = lesson_reform_government_how
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
		
	complete = {
		government_legitimacy >= 60 
	}

	current_value = legitimacy

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_reform_government_complete
				journal_entry = je:je_tutorial_reform_government
			}
		}
	}
	
	weight = 1024
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_increase_relations = {
	how_tutorial = lesson_increase_relations_how
	why_tutorial = lesson_increase_relations_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
		
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	current_value = {
		value = scope:target.relations:root
	}

	goal_add_value = {
		value = 0
		scope:target = {
			if = {
				limit = {
					relations:root < relations_threshold:hostile
				}
				add = define:NDiplomacy|RELATIONS_THRESHOLD_HOSTILE
			}
			else_if = {
				limit = {
					relations:root < relations_threshold:cold
				}
				add = define:NDiplomacy|RELATIONS_THRESHOLD_COLD
			}
			else_if = {
				limit = {
					relations:root < relations_threshold:poor
				}
				add = define:NDiplomacy|RELATIONS_THRESHOLD_POOR
			}
			else_if = {
				limit = {
					relations:root < relations_threshold:cordial
				}
				add = define:NDiplomacy|RELATIONS_THRESHOLD_CORDIAL
			}
			else_if = {
				limit = {
					relations:root < relations_threshold:amicable
				}
				add = define:NDiplomacy|RELATIONS_THRESHOLD_AMICABLE
			}
			else = {
				add = define:NDiplomacy|RELATIONS_THRESHOLD_FRIENDLY
			}
			subtract = relations:root
		}
	}

	is_progressing = {
		has_diplomatic_pact = {
			who = scope:target
			type = increase_relations 
	 	}
	}

	invalid = {
		NOT = { exists = scope:target }
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_increase_relations
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_increase_relations_complete
				journal_entry = je:je_tutorial_increase_relations
			}
		}
	}
	
	weight = 1026
	transferable = yes
}

je_tutorial_improve_rank = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial
	
	immediate = {
		if = { 
			limit = {
				country_rank = rank_value:great_power
			}
			set_variable = tut_great_power
		}
	
		else_if = { 
			limit = {
				country_rank = rank_value:major_power
			}
			set_variable = tut_major_power
		}
	
		else_if = { 
			limit = {
				country_rank = rank_value:minor_power
			}
			set_variable = tut_minor_power
		}
	
		else_if = { 
			limit = {
				country_rank = rank_value:insignificant_power
			}
			set_variable = tut_insignificant_power
		}

		else_if= {
			limit = {
				country_rank = rank_value:unrecognized_major_power
			}
			set_variable = tut_unrecognized_major_power
		}
		
		else_if= {
			limit = {
				country_rank = rank_value:unrecognized_regional_power
			}
			set_variable = tut_unrecognized_regional_power
		}
	
		else_if= {
			limit = {
				country_rank = rank_value:unrecognized_power
			}
			set_variable = tut_unrecognized_power
		}
	}
	
	complete = {
		OR = {
			scope:journal_entry = { is_goal_complete = yes }
			trigger_if = { 
				limit = {
					has_variable = tut_great_power
				}
				global_country_ranking = 1
			} 
			trigger_else_if = {
				limit = {
					has_variable = tut_major_power		
				}
				country_rank = rank_value:great_power
			}
			trigger_else_if = {
				limit = {
					has_variable = tut_minor_power
				}
				country_rank = rank_value:major_power
			}
			trigger_else_if = {
				limit = {
					has_variable = tut_insignificant_power
				}
				country_rank = rank_value:minor_power
			}
			trigger_else_if = {
				limit = {
					has_variable = tut_unrecognized_major_power
				}
				country_rank > rank_value:unrecognized_major_power
			}
			trigger_else_if = {
				limit = {
					has_variable = tut_unrecognized_regional_power
				}
				country_rank >= rank_value:unrecognized_major_power
			}
			trigger_else_if = {
				limit = {
					has_variable = tut_unrecognized_power
				}
				country_rank >= rank_value:unrecognized_regional_power
			}
		}
	}
	
	current_value = {
		value = prestige
	}

	goal_add_value = {
		value = prestige
		multiply = 1
		min = 100
	}

	on_complete = {
		set_variable = tutorial_form_pb_end
	}
	
	weight = 1028
	transferable = yes
}

je_tutorial_prevent_revolution = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial
		
	complete = {
		any_civil_war = {
			is_civil_war_type = revolution
			count = 0
		}
	}
	
	weight = 1030
	transferable = yes
}

je_tutorial_earn_obligation = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	current_value = {
		value = num_obligations_earned
	}

	goal_add_value = {
		value = 2
	}
	
	weight = 1040
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_expand_military = {
	how_tutorial = lesson_expand_military_how
	why_tutorial = lesson_expand_military_why
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		has_healthy_economy = yes
	}

	current_value = {
		value = root.army_size
		add = root.navy_size
	}

	goal_add_value = {
		value = root.army_size
		add = root.navy_size
		multiply = 0.2
		min = 2
		max = 20
		round = yes
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_expand_military_complete
				journal_entry = je:je_tutorial_expand_military
			}
		}
	}
	
	weight = 1044
	transferable = yes
}

je_tutorial_recruit_promote_commander = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	how_tutorial = lesson_recruit_promote_commander_how
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_recruit_promote_commander_first
				trigger = {
					NOT = { exists = scope:journal_entry.var:tut_commander_target }
				}
			}
			desc = je_tutorial_recruit_promote_commander_second
		}
	}
	
	complete = {
		custom_tooltip = {
			text = "je_tutorial_recruit_promote_commander_complete_trigger"
			exists = scope:journal_entry.var:tut_commander_target
			scope:journal_entry = {
				var:tut_commander_target = {
					prev.var:tut_commander_target_initial_rank < commander_rank
				}
			}
		}
	}

	weight = 1046
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_mobilize_army = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = {
		any_military_formation = {
			is_army = yes
			is_fully_mobilized = yes
		}
	}

	weight = 1048
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_send_general_to_front = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = {
		scope:target = {
			is_on_front = yes
		}
	}

	weight = 1050
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_convoy_raiding = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = {
		scope:target = {
			has_commander_order = defend
		}
	}

	invalid = {
		custom_tooltip = {
			text = je_tutorial_convoy_raiding_invalid_tooltip
			OR = {
				NOT = { exists = scope:target }
				NOT = { scope:target.owner = root }
				NOT = { 
					scope:target = {
						has_role = general
					}
				}
			}
		}
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_convoy_raiding
	}

	weight = 1052
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_recover_from_default = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress
				value = 0
			}
		}
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress
	}
	
	goal_add_value = {
		value = 4
	}
	
	is_progressing = {
		taking_loans = no
	}
	
	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						root = { in_default = no }
					}
					change_variable = {
						name = num_weeks_in_progress
						add = 1
					}
				}
			}
		}
	}
	
	weight = 1054
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_start_diplomatic_play = {
	how_tutorial = lesson_start_diplomatic_play_how

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = {
		is_diplomatic_play_initiator = yes
	}
	
	weight = 1056
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_is_play_target = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	complete = { #needs triggers
		should_set_wargoal = no
	}
	
	weight = 1058
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_capacity_deficit = {
	how_tutorial = lesson_fix_capacity_deficit_how
	
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial


	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress
						add = 1
					}
				}
			}
		}
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress
	}
	
	goal_add_value = {
		value = 4
	}

	is_progressing = {
		trigger_if = {
			limit = {
				has_variable = tut_bureaucracy_deficit
			}
			bureaucracy > 0
		}
		trigger_else_if = {
			limit = {
				has_variable = tut_authority_deficit
			}
			authority > 0
		}
		trigger_else_if = {
			limit = {
				has_variable = tut_influence_deficit
			}
			influence > 0
		}
	}
	
	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress
				value = 0
			}
		}
		if = {
			limit = {
				bureaucracy < -10
			}
			set_variable = tut_bureaucracy_deficit
		}
		else_if = {
			limit = {
				authority < -10
			}
			set_variable = tut_authority_deficit
		}
		else_if = {
			limit = {
				influence < -10
			}
			set_variable = tut_influence_deficit
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_capacity_deficit_status_bureaucracy
				trigger = {
					has_variable = tut_bureaucracy_deficit
				}
			}
			triggered_desc = {
				desc = je_tutorial_capacity_deficit_status_authority
				trigger = {
					has_variable = tut_authority_deficit
				}
			}
			triggered_desc = {
				desc = je_tutorial_capacity_deficit_status_influence
				trigger = {
					has_variable = tut_influence_deficit
				}
			}
		}
	}
	
	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_fix_capacity_deficit_complete
				journal_entry = je:je_tutorial_capacity_deficit
			}
		}
	}
	
	weight = 1056
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_incorporate_state = {
	how_tutorial = lesson_incorporate_state_how

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
	should_be_pinned_by_default = yes

	group = je_group_tutorial

	current_value = num_incorporated_states
	
	goal_add_value = 1
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_incorporate_state_status
				trigger = {
					NOT = {
						any_scope_state = {
							is_being_incorporated = yes
						}
					}
				}
			}
			desc = je_tutorial_incorporate_state_status_progressing
		}
	}

	is_progressing = {
		any_scope_state = {
			is_being_incorporated = yes
		}
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_incorporate_state_complete
				journal_entry = je:je_tutorial_incorporate_state
			}
		}
	}
	
	weight = 1064
	transferable = yes
}

je_tutorial_declare_an_interest = {
	how_tutorial = lesson_declare_interest_how
	why_tutorial = lesson_declare_interest_why

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	immediate = {
		scope:journal_entry = {
			set_variable = {
				name = num_weeks_in_progress
				value = 0
			}
		}
	}

	on_weekly_pulse = {
		effect = {
			scope:journal_entry = { 
				if = {
					limit = {
						is_progressing = yes 
					}
					change_variable = {
						name = num_weeks_in_progress
						add = 1
					}
				}
			}
		}
	}

	is_progressing = {
		has_interest_marker_in_region = scope:target.capital.region
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}
	
	current_value = {
		value = scope:journal_entry.var:num_weeks_in_progress
	}
	
	goal_add_value = {
		value = 12
	}

	on_complete = {
		owner = {
			start_tutorial_lesson = { 
				tutorial_lesson = lesson_declare_interest_complete
				journal_entry = je:je_tutorial_declare_an_interest
			}
		}
	}

	weight = 1066
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_colonize_state = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_colonize_state_status_first
				trigger = {
					scope:journal_entry = {
						is_progressing = no
					}
				}
			}
			desc = je_tutorial_colonize_state_status_second
		}
	}

	is_progressing = { 
		any_scope_state = {
			has_variable = tut_colony_target
			is_under_colonization = yes 
		}
	}
	
	complete = {
		custom_tooltip = {
			text = "je_tutorial_colonize_state_grow_a_colony"
			any_scope_state = {
				is_split_state = no
				has_variable = tut_colony_target
			}
		}
	}
	
	weight = 1068
	transferable = yes
	should_update_on_player_command = no
	should_be_pinned_by_default = yes
}

je_tutorial_make_peace = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial
		
	complete = {
		is_at_war = no
	}
	
	weight = 1068
	transferable = yes
	should_update_on_player_command = yes
	should_be_pinned_by_default = yes
}

je_tutorial_research_technology = {
	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	complete = {
		custom_tooltip = {
			text = je_tutorial_research_technology_complete_trigger
			has_variable = tut_began_new_research
			NOT = { exists = technology_being_researched }
		}
	}

	is_progressing = {
		exists = technology_being_researched
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_tutorial_research_technology_status_progressing
				trigger = {
					scope:journal_entry = {
						is_progressing = yes
					}
				}
			}
			desc = je_tutorial_research_technology_status_not_progressing
		}
	}
	
	weight = 1070
	transferable = yes
	should_be_pinned_by_default = yes
}

je_tutorial_create_formation = {
	how_tutorial = lesson_create_formation_how

	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	complete = {
		custom_tooltip = {
			text = je_tutorial_create_formation_complete_trigger
			NOT = {
				has_variable = formation_tutorial_ongoing
			}
		}
	}
	
	current_value = {
	}

	goal_add_value = {
	}

	on_complete = {
	}
	
	weight = 1002
	transferable = yes
}

je_subject_liberty = {
	how_tutorial = lesson_subject_liberty_how
	why_tutorial = lesson_subject_liberty_why

	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	complete = {
		scope:target = {
			liberty_desire < 50
		}
	}
	
	weight = 1002
	transferable = yes
}

je_tutorial_foreign_investment = {
	why_tutorial = lesson_foreign_investmen_why

	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	complete = {
		scope:target = {
			gdp_ownership_ratio = {
				target = ROOT
				value >= 0.2
			}
		}
	}

	invalid = {
		NOT = { exists = scope:target }
	}

	on_invalid = {
		remove_active_objective_subgoal = sg_foreign_investment
	}

	
	weight = 1002
	transferable = yes
}

je_tutorial_establish_company = {
	how_tutorial = lesson_establish_company_how

	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	complete = {
		NOT = { can_establish_company = YES }
	}
	
	current_value = {
	}

	goal_add_value = {
	}

	on_complete = {
	}
	
	weight = 1002
	transferable = yes
}

je_tutorial_form_power_bloc = {
	how_tutorial = lesson_form_power_bloc_how
	why_tutorial = lesson_form_power_bloc_why

	should_be_pinned_by_default = yes

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	group = je_group_tutorial

	complete = {
		is_power_bloc_leader = yes
	}
	
	current_value = {
	}

	goal_add_value = {
	}

	on_complete = {
	}
	
	weight = 1002
	transferable = yes
}

je_tutorial_lobbies = {
	how_tutorial = lesson_lobbies_how

	should_be_pinned_by_default = yes

	group = je_group_tutorial

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"
		
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
	}

	current_value = scope:target.appeasement

	goal_add_value = 3

	invalid = { NOT = { exists = scope:target } }

	on_invalid = { remove_active_objective_subgoal = sg_foreign_investment }
}
﻿je_electric_underground_railway = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		has_technology_researched = electrical_generation
	}

	possible = {
		has_technology_researched = electric_railway
	}

	complete = {
		trigger_if = {
			limit = {
				ROOT.market_capital = {
					owner = ROOT
				}
			}
			market_capital = {
				any_scope_building = {
					is_building_type = building_urban_center
					level >= 20
				}
				any_scope_building = {
					is_building_type = building_railway
					has_active_production_method = pm_electric_trains
					has_active_production_method = pm_steel_passenger_carriages
					level >= 5
				}
			}
		}
		trigger_else = {
			any_scope_state = {
				has_building = building_trade_center
				any_scope_building = {
					is_building_type = building_urban_center
					level >= 20
				}
				any_scope_building = {
					is_building_type = building_railway
					has_active_production_method = pm_electric_trains
					has_active_production_method = pm_steel_passenger_carriages
					level >= 5
				}
			}
		}
	}

	on_complete = {
		trigger_event = { id = metro.1 }
	}

	weight = 1
}
﻿je_veiled_protectorate = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		trigger_if = {
			limit = {
				exists = c:EGY
			}
			c:EGY = {
				is_subject = no
				is_country_type = unrecognized
			}
		}
		trigger_else = {
			always = no
		}
		country_rank >= rank_value:major_power
		any_scope_state = {
			OR = {
				state_region = s:STATE_LOWER_EGYPT
				state_region = s:STATE_UPPER_EGYPT
				state_region = s:STATE_MIDDLE_EGYPT
				state_region = s:STATE_SINAI
			}
		}
		any_neighbouring_state = {
			owner = c:EGY
		}
	}

	possible = {
		exists = c:EGY
		c:EGY = {
			OR = {
				owes_obligation_to = ROOT
				relations:root <= relations_threshold:poor
			}
			country_rank < rank_value:unrecognized_major_power
		}
		NOT = { THIS = c:TUR }
	}

	complete = {
		c:EGY = {
			is_subject_of = ROOT
		}
	}

	on_complete = {
		trigger_event = {
			id = veiled_protectorate.1
		}
	}

	fail = {
		OR = {
			NOT = { exists = c:EGY }
			c:EGY = {
				is_subject = yes
				NOT = { is_subject_of = ROOT }
			}
			c:EGY = {
				NOT = { is_country_type = unrecognized }
			}
		}
	}

	timeout = 3650

	weight = 10000
	should_be_pinned_by_default = yes
}
﻿je_victoria = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = billy_died
			ruler = {
				NOT = { has_variable = is_billy }
			}
		}
	}

	on_complete = {
		custom_tooltip = hanover_union_ends
		if = {
			limit = {
				exists = c:GBR
				c:GBR = ROOT
			}
			trigger_event = { id = victoria.1 }
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					exists = c:GBR
					c:GBR = ROOT
					ruler = { has_variable = is_billy }
				}
				random_list = {
					11 = { }
					1 = {
						ruler = { kill_character = yes }
					}
				}
			}
		}
	}

	invalid = {
		OR = {
			NOT = {
				exists = c:GBR
			}
			NOT = {
				exists = c:HAN
			}
			c:HAN = {
				NOT = {
					is_subject_of = c:GBR
				}
			}
			c:GBR = {
				custom_tooltip = {
					text = "DEBUG_NO_CHARACTER_IN_GBR_IS_VICTORIA"
					NOT = {
						any_scope_character = {
							has_variable = is_victoria
						}
					}
				}
			}
		}
	}

	weight = 10

	should_be_pinned_by_default = yes
}
﻿je_warlord_china = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	group = je_group_historical_content

	immediate = {
		random_law = {
			limit = { type = law_type:law_monarchy }
			save_scope_as = monarchy_scope
		}
	}

	complete = {
		custom_tooltip = {
			text = won_boxer_tt
			has_variable = won_boxer_rebellion
		}
		custom_tooltip = {
			text = china_recognized_tt
			has_variable = china_warlord_explosion_recognized
		}
		custom_tooltip = {
			text = china_abolished_monarchy_tt
			has_variable = china_warlord_abolished_monarchy
		}
	}

	fail = {
		custom_tooltip = {
			text = je_china_failure_tt
			var:china_warlord_explosion <= 0
		}
	}

	on_fail = {
		trigger_event = { id = warlord_china_events.100 }
	}

	on_complete = {
		trigger_event = { id = warlord_china_events.200 }
	}

	current_value = {
		value = var:china_warlord_explosion
	}

	goal_add_value = {
		add = 5
	}
	
	progressbar = yes

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_subject }
					is_subject = yes
				}
				chi_remove_1_fragile_unity = yes
				set_variable = china_warlord_explosion_subject
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_loans }
					taking_loans = yes
				}
				chi_remove_1_fragile_unity = yes
				set_variable = china_warlord_explosion_loans
			}
			if = {
				limit = {
					NOT = { has_variable = china_warlord_explosion_recognized }
					country_rank != rank_value:unrecognized_power
					country_rank != rank_value:unrecognized_major_power
					country_rank != rank_value:unrecognized_regional_power
				}
				set_variable = china_warlord_explosion_recognized
				chi_add_1_fragile_unity = yes
			}
			if = {
				limit = {
					NOT = { has_variable = china_abolished_monarchy }
					NOT = { has_law = law_type:law_monarchy }
				}
				set_variable = china_abolished_monarchy
				chi_remove_1_fragile_unity = yes
				if = {
					limit = {
						NOT = { has_variable = china_han_empire }
					}
					trigger_event = { id = boxer_rebellion_events.4 days = 0 popup = yes }
				}
			}
		}
	}

	weight = 10000
	should_be_pinned_by_default = yes
}

﻿je_war_crimes = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		has_technology_researched = automatic_machine_guns
		army_size >= 25
	}

	possible = {
		has_technology_researched = chemical_warfare
		army_size >= 40
	}

	complete = {
		army_mobilization_option_fraction = {  
			target = mobilization_option:mobilization_option_chemical_weapons  
			value >= 0.2  
		} 
		any_scope_war = {
			any_scope_front = {
				any_scope_general = {
					owner = ROOT
					this.commander_military_formation = {
						has_mobilization_option = mobilization_option:mobilization_option_chemical_weapons
					}
				}
				any_scope_state = {
					NOT = { owner = ROOT }
				}
			}
		}
	}

	on_complete = {
		trigger_event = { id = war_crimes.1 }
	}

	timeout = 3650
}

je_munitions_factories = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		has_technology_researched = gunsmithing
	}

	possible = {
		has_technology_researched = percussion_cap
		any_scope_building = {
			is_building_type = building_munition_plants
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_munition_plants
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy >= 0.5
			level >= 5
		}
		can_research = rifling
	}

	on_complete = {
		trigger_event = { id = war_crimes.2 }
	}

	fail = {
		has_technology_researched = rifling
	}

	timeout = 3650
}
﻿je_west_america_expedition = {

	group = je_group_expeditions

	on_monthly_pulse = {
		random_events = {
			80 = 0
			
			#Standard event
			20 = expedition_events.20 #posts a notification
			
			20 = expedition_events.220 #river crossing
			20 = expedition_events.230 #bear sighting
			10 = expedition_events.240 #expedition photographs
			20 = expedition_events.250 #mountain spotted
			20 = expedition_events.260 #snow
			20 = expedition_events.270 #plants
			20 = expedition_events.280 #lost
			
			#New events
			30 = expedition_events.290 #build a fort
			15 = expedition_events.291 #pregnant woman
			30 = expedition_events.292 #crew disobeys
			20 = expedition_events.293 #give the crew a quest
			20 = expedition_events.296 #listen to your guide
			30 = expedition_events.297 #cabin fever
			
			#Events shared with the Africa expeditions
			5 = expedition_events.140 #leader's breakdown
			5 = expedition_events.560 #commander vice
		}
	}
	
	immediate = { 
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			save_scope_as = expedition_leader
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = expedition_low_peril_loc
				trigger = {
					var:expedition_peril < 4
				}
			}
			triggered_desc = {
				desc = expedition_medium_peril_loc
				trigger = {
					var:expedition_peril <= 5
				}
			}
			triggered_desc = {
				desc = expedition_high_peril_loc
				trigger = {
					var:expedition_peril >= 6
				}
			}
		}
	}
	
    complete = {
		custom_tooltip = {
			text = je_expedition_success
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}
	
	on_complete = {
		random_list = {
			33 = {
				trigger = { NOT = { has_global_variable = buenaventura_river_disproven } }
				trigger_event = { id = expedition_events.300 }
			}
			33 = {
				trigger = { NOT = { has_global_variable = oregon_trail_mapped } }
				trigger_event = { id = expedition_events.301 }
			}
			33 = {
				trigger = { NOT = { has_global_variable = great_salt_lake_mapped } }
				trigger_event = { id = expedition_events.302 }
			}
		}
		remove_variable = on_expedition
		remove_variable = congo_river_expedition_var
		remove_modifier = modifier_large_expedition_cost
		set_variable = west_america_expedition_success_var #grand exhibition check
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
    
   fail = {
		custom_tooltip = {
			text = je_expedition_fail
			var:expedition_peril >= 8
		}
    }
	
	on_fail = {
		trigger_event = { id = expedition_events.205 }
		remove_variable = on_expedition
		remove_variable = west_america_expedition_var
		remove_modifier = modifier_large_expedition_cost
		random_scope_character = {
			limit = {
				has_variable = expedition_leader_var
			}
			remove_variable = expedition_leader_var
		}
	}
	
	current_value = {
		value = var:expedition_progress
	}

	goal_add_value = {
		add = 8
	}
	
	progressbar = yes
	
    weight = 200
    transferable = no
    should_be_pinned_by_default = yes
}
﻿je_dialectics = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = dialectics_je_done }
		has_technology_researched = academia
		any_scope_building = {
			is_building_type = building_university
		}
		NOT = { has_technology_researched = philosophical_pragmatism }
	}

	possible = {
		has_technology_researched = dialectics
		any_scope_building = {
			is_building_type = building_university
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_university
			occupancy > 0.9
			level >= 5
			has_active_production_method = pm_philosophy_department
		}
		any_scope_building = {
			filter = {
				is_building_type = building_university
			}
			percent > 0.9
			occupancy > 0.9
			has_active_production_method = pm_philosophy_department
		}
	}

	on_complete = {
		trigger_event = { id = dt_society_events.1 }
		set_variable = {
			name = dialectics_je_done
		}
	}

	invalid = {
		has_technology_researched = philosophical_pragmatism
	}

	timeout = 3650
}

je_realism = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = realism_je_done }
		has_technology_researched = romanticism
		NOT = { has_technology_researched = camera }
		NOT = { is_country_type = unrecognized } # prestige is useless to them
	}

	possible = {
		has_technology_researched = realism
		any_scope_building = {
			is_building_type = building_arts_academy
		}
	}

	complete = {
		any_scope_building = {
			filter = {
				is_building_type = building_arts_academy
			}
			occupancy >= 0.9
			has_active_production_method = pm_realist_art
			percent = 1
		}
	}

	on_complete = {
		trigger_event = { id = dt_society_events.2 }
		set_variable = {
			name = realism_je_done
		}
	}

	timeout = 3650
}

je_academia = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = academia_je_done }
		has_technology_researched = rationalism
		has_technology_researched = urbanization
		NOT = { has_technology_researched = empiricism }
	}

	possible = {
		has_technology_researched = academia
		any_scope_building = {
			is_building_type = building_university
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_university
			occupancy >= 0.9
			level >= 2
		}
	}

	on_complete = {
		trigger_event = { id = dt_society_events.3 }
		set_variable = {
			name = academia_je_done
		}
	}

	timeout = 3650
}
﻿je_splitting_oman = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = said_bin_sultan_al_said_dies
			ruler = {
				NOT = { has_variable = is_said_bin_sultan }
			}
			has_law = law_type:law_monarchy
		}
	}

	on_complete = {
		custom_tooltip = omani_realm_splits
		if = {
			limit = {
				exists = c:OMA
				c:OMA = ROOT
			}
			trigger_event = { id = zanzibar.1 }
		}
	}
	
	# no monthly pulse to kill the sultan.

	invalid = {
		OR = {
			NOT = { exists = c:OMA }
			NOT = { has_law = law_type:law_monarchy }
			exists = c:ZAN
		}
	}

	weight = 10

	should_be_pinned_by_default = yes
}

﻿je_acw_countdown = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	immediate = {
		set_variable = {
			name = acw_progress_var
			value = 0
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		has_law = law_type:law_slavery_banned
	}

	on_complete = {
		set_variable = je_acw_countdown_complete
		remove_modifier = missouri_compromise
		trigger_event = { id = slavery_law_events.7 days = 0 popup = yes }
	}

	fail = {
		OR = {
			has_revolution_over_law_type = law_type:law_slavery_banned
			has_revolution_over_law_type = law_type:law_slave_trade
			has_revolution_over_law_type = law_type:law_legacy_slavery
			has_revolution_over_law_type = law_type:law_debt_slavery
		}		
	
		OR = {
			# CSA
			custom_tooltip = {
				text = acw_landowner_revolt
				any_country = {
					is_revolutionary = yes
					country_definition = root.country_definition
					ig:ig_landowners = {
						is_in_government = yes
					}					
				}
			}
			# FSA
			custom_tooltip = {
				text = acw_antislaver_revolt
				ig:ig_landowners = {
					is_in_government = yes
				}
				NOT = { has_law = law_type:law_slavery_banned }
				NOT = { is_enacting_law = law_type:law_slavery_banned }
				any_country = {
					is_revolutionary = yes
					country_definition = root.country_definition
				}
			}
		}
	}

	on_fail = {
		if = {
			limit = {
				any_country = {
					is_revolutionary = yes
					country_definition = root.country_definition
					ig:ig_landowners = {
						is_in_government = yes
					}				
				}
			}
			set_variable = csa_will_spawn_var
		}
		custom_tooltip = {
			text = acw_will_happen_tt
			trigger_event = { id = acw_je_events.1 }
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_law = law_type:law_slavery_banned
				}
				change_variable = {
					name = acw_progress_var
					add = 1
				}
			}
		}
		random_events = {
			# American Civil War buildup
			200 = 0
			10 = acw_events.1 # The Abolitionist's Martyrdom
			10 = acw_events.3 # The Wilmot Proviso
		}
	}
	on_yearly_pulse = {
		random_events = {
			40 = 0
			20 = acw_events.2 # The Fugitive Slave
			20 = acw_events.5 # Bleeding Kansas
			20 = acw_events.6 # The Caning of Charles Sumner
		}
	}

	current_value = {
		value = root.var:acw_progress_var
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 100

	should_be_pinned_by_default = yes
}

je_acw_war = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = acw_war_tt_complete
			scope:target = { is_country_alive = no }
		}
	}

	on_complete = {
		trigger_event = { id = acw_je_events.2 }
		if = {
			limit = { 
				has_variable = csa_will_spawn_var
			}
			ruler = {
				set_variable = abraham_lincoln
			}
		}
	}

	on_monthly_pulse = {
		events = {
			acw_je_events.4
		}
	}

	should_be_pinned_by_default = yes
	
	can_revolution_inherit = no

	# acw_events.7 fires for the FSA or CSA, but requires the je_acw_war journal to be active
	# acw_events.8 fires for the USA, FSA or CSA, but requires the je_acw_war journal to be active
}

je_acw_reconstruction = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		trigger_event = { id = acw_je_events.3 }
		hidden_effect = { # sanity check just in case something somehow falls through the cracks
			every_scope_state = {
				limit = { has_modifier = unreconstructed_state }
				remove_modifier = unreconstructed_state
			}
		}
	}

	current_value = {
		value = var:reconstruction_var
	}

	goal_add_value = {
		add = 3
	}

	timeout = 4380

	should_be_pinned_by_default = yes

	on_timeout = {
		trigger_event = { id = acw_je_events.3 }
	}
}

je_acw_reincorporate = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	complete = {
		NOT = {
			any_scope_state = {
				has_modifier = unreconstructed_state
				is_incorporated = no
			}
		}
		NOT = {
			any_scope_state = {
				state_region = {
					is_homeland = cu:dixie
				}
				loyalist_fraction = {
					value < 0.2
					culture = cu:dixie
				}
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = dont_lose_dixie_culture
			set_variable = acw_keep_dixie
		}
		custom_tooltip = {
			text = reconstruction_progress
			change_variable = {
				name = reconstruction_var
				add = 1
			}
		}
	}

	on_monthly_pulse = {
		random_events = {
			180 = 0
			20 = acw_followup_events.6
			20 = acw_followup_events.7
			20 = acw_followup_events.8
		}
	}

	invalid = {
		NOT = {
			any_scope_state = {
				state_region = {
					is_homeland = cu:dixie
				}
			}
		}
	}

	timeout = 4380
}

je_acw_equality = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = acw_african_american_culture_complete_tt
			cu:afro_american = {
				NOT = { culture_is_discriminated_in = ROOT }
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = acw_african_american_culture
			set_variable = acw_gain_african_american
		}
		custom_tooltip = {
			text = reconstruction_progress
			change_variable = {
				name = reconstruction_var
				add = 1
			}
		}
	}

	on_monthly_pulse = {
		random_events = {
			180 = 0
			20 = acw_followup_events.4 # Forty Acres and a Mule
			20 = acw_followup_events.5 # Supremacist Violence
			20 = acw_followup_events.6 # Redeemers
		}
	}

	timeout = 4380

	invalid = {
		NOT = {
			any_scope_state = {
				state_region = {
					is_homeland = cu:afro_american
				}
			}
		}
	}
}

je_acw_wild_wild_west = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_historical_content

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		NOT = {
			any_scope_state = {
				state_region = {
					OR = {
						is_homeland = cu:dixie
						is_homeland = cu:yankee
					}
				}
				devastation > 0.1
				turmoil > 0.1
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = acw_no_outlaw_crisis
		}
		custom_tooltip = {
			text = reconstruction_progress
			change_variable = {
				name = reconstruction_var
				add = 1
			}
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = crime_events.1 # train robbery
			10 = wild_west.1 # bank robberies
			10 = wild_west.2 # Raids on the Iron Horse
			10 = wild_west.3 # Gunfight at the Corral
		}
		effect = {
			if = {
				limit = {
					NOT = {
						any_scope_state = {
							state_region = {
								OR = {
									is_homeland = cu:dixie
									is_homeland = cu:yankee
								}
							}
							devastation > 0.1
							turmoil > 0.1
						}
					}
				}
				change_variable = {
					name = je_acw_wild_west_var
					add = 1
				}
			}
		}
	}

	invalid = {
		NOT = {
			any_scope_state = {
				state_region = {
					OR = {
						is_homeland = cu:dixie
						is_homeland = cu:yankee
					}
				}
			}
		}
	}

	current_value = {
		value = var:je_acw_wild_west_var
	}
	
	goal_add_value = {
		add = 60
	}

	progressbar = yes

	timeout = 4380
}
﻿je_sale_of_alaska = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		OR = {
			country_is_in_east_asia = yes
			country_is_in_europe = yes
		}
		has_state_in_state_region = STATE_ALASKA
	}
	
	scripted_button = je_sell_alaska_button

	possible = {
		is_subject = no
		any_scope_state = {
			state_region = s:STATE_ALASKA
		}
		custom_tooltip = {
			text = unfriendly_nation_with_interest_in_alaska_tt
			any_country = {
				country_rank >= root.country_rank
				has_interest_marker_in_region = sr:region_pacific_coast
				relations:root < 0
			}
		}
		custom_tooltip = {
			text = friendly_nation_with_interest_in_alaska_tt
			any_country = {
				NOT = {
					is_subject = yes
				}
				country_is_in_north_america = yes
				relations:root >= 0
				country_rank >= rank_value:great_power
				any_scope_state = {
					region = sr:region_pacific_coast
					is_incorporated = yes
				}
			}
		}
	}

	immediate = {
		random_scope_state = {
			limit = {
				state_region = s:STATE_ALASKA
			}
			save_scope_as = alaska_scope
			owner = {
				save_scope_as = alaska_owner_scope
			}
		}
		ruler = {
			save_scope_as = ruler_scope
		}
	}

	complete = {
		custom_tooltip = {
			text = sold_alaska_tt
			has_variable = successful_sale_of_alaska
		}
	}

	fail = {
		NOT = {
			has_state_in_state_region = STATE_ALASKA
			custom_tooltip = {
				text = not_sold_alaska_tt
				has_variable = successful_sale_of_alaska
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = selling_alaska_tt
		}
	}

	weight = 200

	transferable = no

	should_be_pinned_by_default = yes
}

je_alaska = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		has_interest_marker_in_region = region_pacific_coast
		has_technology_researched = nationalism
	}

	scripted_button = je_buy_alaska_button

	possible = {
		is_subject = no
		any_scope_state = {
			is_incorporated = yes
			region = sr:region_pacific_coast
			is_homeland_of_country_cultures = ROOT
		}
		NOT = {
			owns_entire_state_region = STATE_ALASKA
		}
		country_rank >= rank_value:great_power
	}

	immediate = {
		random_state = {
			limit = {
				state_region = s:STATE_ALASKA
				owner = {
					NOT = {
						is_country_type = decentralized
					}
				}
			}
			save_scope_as = alaska_state
		}
	}

	complete = {
		s:STATE_ALASKA = {
			any_scope_state = {
				owner = root
			}
			any_scope_state = {
				OR = {
					owner = root
					owner = {
						is_country_type = decentralized
					}
				}
				count = all
			}
		}
	}

	on_complete = {
		add_modifier = {
			name = conquest_of_alaska
			months = normal_modifier_time
		}
	}

	timeout = 7300

	weight = 200

	transferable = no

	should_be_pinned_by_default = yes
}

﻿je_assassination = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_crises
	
	immediate = {
		random_interest_group = {
			limit = {
				is_powerful = yes
				ig_approval <= -10
			}
			save_scope_as = enemy_ig
			set_variable = enemy_ig_var
		}
		ruler = {
			save_scope_as = assassination_ruler_scope
			set_variable = assassination_ruler_var
		}
		set_variable = {
			name = je_assassination_var #their progress
			value = 0
		}
		set_variable = {
			name = je_assassination_progress #your progress
			value = 0
		}
		set_variable = ongoing_assassination_je #so you don't get the serial killer JE at the same time
	}		
	
	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_variable = killing_own_ruler
				}
				change_variable = {
					name = je_assassination_var
					add = 1
				}
			}
			if = {
				limit = {
					has_variable = has_scotland_yard_var
				}
				70 = { #you stall the plot
				}
				30 = {
					change_variable = {
						name = je_assassination_var
						add = 1
					}
				}
			}
			else_if = {
				limit = {
					institution_investment_level = {
						institution = institution_police
						value >= 4
					}
				}
				random_list = {
					60 = { #you stall the plot
					}
					40 = {
						change_variable = {
							name = je_assassination_var
							add = 1
						}
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_law = law_type:law_dedicated_police
						has_law = law_type:law_secret_police
					}
				}
				random_list = {
					40 = { #you stall the plot
					}
					60 = {
						change_variable = {
							name = je_assassination_var
							add = 1
						}
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_technology_researched = identification_documents
						has_technology_researched = mass_surveillance
					}
				}
				random_list = {
					25 = { #you stall the plot
					}
					75 = {
						change_variable = {
							name = je_assassination_var
							add = 1
						}
					}
				}
			}
			else = {
				change_variable = {
					name = je_assassination_var
					add = 1
				}
			}
		}
		random_events = {
			12 = 0
			1 = assassination_events.2
			1 = assassination_events.3
			1 = assassination_events.4
		}		
	}

	complete = {
		custom_tooltip = {
			text = je_assassination_caught_em_tt
			var:je_assassination_progress >= 4
		}
	}

	on_complete = {
		custom_tooltip = {
			text = assassination_completion_tt
			trigger_event = { id = assassination_events.7 }
		}
		remove_variable = ongoing_assassination_je
	}

	fail = {
		custom_tooltip = {
			text = je_assassination_timeout_tt
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_fail = {
		trigger_event = { id = assassination_events.5 }
		remove_variable = ongoing_assassination_je
	}

	invalid = {
		custom_tooltip = {
			text = je_assassination_tt
			OR = {
				any_scope_character = {
					has_variable = assassination_ruler_var
					is_ruler = no 
				}
				NOT = {
					any_scope_character = {
						has_variable = assassination_ruler_var
					}
				}
			}
		}
	}

	on_invalid = {
		if = { #they're not the ruler anymore (small event to account for all cases)
			limit = {
				scope:assassination_ruler_scope = {
					is_ruler = no
					is_character_alive = yes
				}
			}
			trigger_event = { id = assassination_events.6 }
		}
		else_if = { #they died of other causes / another small event
			limit = {
				NOT = {
					any_scope_character = {
						has_variable = assassination_ruler_var
					}
				}
			}
			trigger_event = { id = assassination_events.8 }
		}
		remove_variable = ongoing_assassination_je
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_assassination_low
				trigger = {
					var:je_assassination_progress < 2
				}
			}
			triggered_desc = {
				desc = je_assassination_middle
				trigger = {
					var:je_assassination_progress = 2
				}
			}
			triggered_desc = {
				desc = je_assassination_high
				trigger = {
					var:je_assassination_progress > 2
				}
			}
		}
	}
	
	current_value = {
		value = root.var:je_assassination_var
	}

	goal_add_value = {
		add = 24
	}

	progressbar = yes

	weight = 100
}
﻿central_america_falls_apart = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	should_be_pinned_by_default = yes

	on_monthly_pulse = {
		random_events = {
			10 = 0
			1 = central_america.3
		}
	}

	complete = {
		any_scope_state = {	
			state_region = s:STATE_GUATEMALA
			turmoil < 0.2
		}
		any_scope_state = {	
			state_region = s:STATE_GUATEMALA
			turmoil < 0.2
		}
		any_scope_state = {	
			state_region = s:STATE_COSTA_RICA
			turmoil < 0.2
		}
		any_scope_state = {	
			state_region = s:STATE_SAN_SALVADOR
			turmoil < 0.2
		}
		any_scope_state = {	
			state_region = s:STATE_NICARAGUA
			turmoil < 0.2
		}
	}

	fail = {
		custom_tooltip = {
			text = central_america_fail_tt
			any_scope_state = {
				OR = {
					state_region = s:STATE_GUATEMALA
					state_region = s:STATE_HONDURAS
					state_region = s:STATE_COSTA_RICA
					state_region = s:STATE_SAN_SALVADOR
					state_region = s:STATE_NICARAGUA
				}
				count < 3
			}
		}
	}

	on_fail = {
		trigger_event = { id = central_america.2 popup = yes }
		custom_tooltip = central_america_capital_tt
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = central_america_breakup_status
			}
		}
	}
}



ragamuffin_war = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	complete = {
		is_at_war = no
		OR = {
			NOT = { exists = c:PNI }
			c:PNI ?= {
				is_country_alive = no
			}
		}
		OR = {
			NOT = { exists = c:PRA }
			c:PRA ?= {
				is_country_alive = no
			}
		}
	}

	on_complete = {
		hidden_effect = { set_variable = ragamuffin_war_completed }
	}

	fail = {
		is_at_war = no
		OR = {
			c:PNI ?= {
				is_country_alive = yes
			}
			c:PRA ?= {
				is_country_alive = yes
			}
		}
	}

	on_fail = {
		trigger_event = { id = south_america.5 }
		hidden_effect = { set_variable = ragamuffin_war_completed }
		remove_pedropoint_effect = yes
	}

	should_be_pinned_by_default = yes

}

ragamuffin_war_minors = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	immediate = {
		c:BRZ = {
			save_scope_as = brz_scope
		}
	}

	complete = {
		is_at_war = no
		is_country_alive = yes
	}

	on_complete = {
		if = {
			limit = {
				c:PNI ?= THIS
			}
			custom_tooltip = {
				text = ragamuffin_war_minors_tt
			}
		}
		else = {
			trigger_event = { id = brazilian_minors.4 popup = yes }
		}
	}

	fail = {
		is_country_alive = no
	}

	should_be_pinned_by_default = yes

}


je_reunify_central_america = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

	should_be_pinned_by_default = yes

	complete = {
		any_scope_state = {
			state_region = s:STATE_SAN_SALVADOR
		}
		any_scope_state = {
			state_region = s:STATE_GUATEMALA
		}
		any_scope_state = {
			state_region = s:STATE_HONDURAS
		}
		any_scope_state = {
			state_region = s:STATE_NICARAGUA
		}
		any_scope_state = {
			state_region = s:STATE_COSTA_RICA
		}
	}
	
	on_complete = {
		if = {
			limit = {
				NOT = { exists = c:UCA }
			}
			change_tag = UCA
		}
		trigger_event = { id = central_america.1 popup = yes }
	}
}
﻿je_coup = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_crises

	immediate = {
		random_interest_group = {
			limit = {
				has_variable = coup_ig_var
			}
			save_scope_as = coup_ig
			remove_variable = coup_ig_var
		}
		if = {
			limit = {
				var:coup_for_law = 1
			}
			random_law = {
				limit = {
					type = law_type:law_monarchy
				}
				save_scope_as = coup_desired_law
			}
		}
		else_if = {
			limit = {
				var:coup_for_law = 2
			}
			random_law = {
				limit = {
					type = law_type:law_presidential_republic
				}
				save_scope_as = coup_desired_law
			}
		}
		else_if = {
			limit = {
				var:coup_for_law = 3
			}
			random_law = {
				limit = {
					type = law_type:law_council_republic
				}
				save_scope_as = coup_desired_law
			}
		}
		else_if = {
			limit = {
				var:coup_for_law = 4
			}
			random_law = {
				limit = {
					type = law_type:law_parliamentary_republic
				}
				save_scope_as = coup_desired_law
			}
		}
		else_if = {
			limit = {
				var:coup_for_law = 5
			}
			random_law = {
				limit = {
					type = law_type:law_theocracy
				}
				save_scope_as = coup_desired_law
			}
		}
		else_if = {
			limit = {
				var:coup_for_law = 6
			}
			random_law = {
				limit = {
					type = law_type:law_autocracy
				}
				save_scope_as = coup_desired_law
			}
		}
		remove_variable = coup_for_law
	}

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					scope:coup_ig = {
						OR = {
							is_powerful = no
							ig_approval >= 0
						}
					}
				}
				change_variable = {
					name = coup_var
					add = -1
				}
			}
			if = {
				limit = {
					scope:coup_ig = {
						is_powerful = yes
						ig_approval < 0
					}
				}
				change_variable = {
					name = coup_var
					add = 1
				}
			}
		}
	}

	on_monthly_pulse = {
		random_events = {
			150 = 0
			10 = coup_pulse_events.1
			10 = coup_pulse_events.2
			10 = coup_pulse_events.3 
			10 = coup_pulse_events.4
			10 = coup_pulse_events.5
			10 = coup_pulse_events.6
			10 = coup_pulse_events.7
			10 = coup_pulse_events.8
			10 = coup_pulse_events.9
			10 = coup_pulse_events.10
			25 = coup_pulse_events.11
			25 = coup_pulse_events.12
			25 = coup_pulse_events.13
			25 = coup_pulse_events.14
			25 = coup_pulse_events.15
			25 = coup_pulse_events.16
			25 = coup_pulse_events.17
			25 = coup_pulse_events.18
		}
	}

	complete = {
		scope:coup_ig = {
			is_powerful = yes
			ig_approval < 0
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		if = {
			limit = {
				scope:coup_ig = {
					is_interest_group_type = ig_armed_forces
				}
			}
			set_variable = achievement_military_junta_var
		}
		remove_variable = coup_var
		
		custom_tooltip = coup_success_tt
		
		if = {
			limit = {
				exists = currently_enacting_law
			}
			currently_enacting_law = {
				type = {
					save_scope_as = law_being_enacted
				}
				currently_active_law_in_group = {
					type = {
						save_scope_as = law_being_replaced
					}
				}
			}
			if = {
				limit = {
					scope:coup_ig = {
						prefers_law = { # If we prefer the current law to the enacting law
							law = scope:law_being_replaced
							comparison_law = scope:law_being_enacted
						}
					}
				}
				cancel_enactment = yes
			}	
		}
		
		trigger_event = { id = coup.2 popup = yes }
		hidden_effect = {
			random_list = {
				25 = {
					trigger_event = { id = coup_aftermath_events.1 days = 30 }
				}
				25 = {
					trigger_event = { id = coup_aftermath_events.2 days = 30 }
				}
				25 = {
					trigger_event = { id = coup_aftermath_events.3 days = 30 }
				}
				25 = {
					trigger_event = { id = coup_aftermath_events.4 days = 30 }
				}
			}
		}
	}

	fail = {
		OR = {
			# fail if the coup has run out of steam
			custom_tooltip = {
				text = coup_no_progress
				root.var:coup_var <= 0
			}
			# fail if the IG is kicked out of government
			scope:coup_ig = {
				is_in_government = no
			}
			# fail if IG changes law stances
			scope:coup_ig = {
				law_stance = {
					law = scope:coup_desired_law.type
					value < approve
				}
			}
		}
	}

	on_fail = {
		custom_tooltip = coup_remove_ig
		# IG is angry that they were removed from government
		if = {
			limit = {
				scope:coup_ig = {
					is_in_government = no
					NOT = {
						has_variable = resigned_from_gov_coup
					}
				}
			}
			trigger_event = { id = coup.3 popup = yes }
		}
		else_if = {
			limit = {
				scope:coup_ig = {
					is_in_government = no
					has_variable = resigned_from_gov_coup
				}
			}
			trigger_event = { id = coup.5 popup = yes }
			remove_variable = resigned_from_gov_coup
		}
		# coup runs out of steam or IG changes law stances
		else_if = {
			limit = {
				OR = {
					root.var:coup_var <= 0
					scope:coup_ig = {
						law_stance = {
							law = scope:coup_desired_law.type
							value < approve
						}
					}
				}
			}
			trigger_event = { id = coup.4 popup = yes }
		}
		remove_variable = coup_var
	}

	invalid = {
		OR = {
			NOT = {
				exists = scope:coup_desired_law
			}
			NOT = {
				exists = scope:coup_ig
			}
			has_law = scope:coup_desired_law.type
		}
	}

	on_invalid = {
		remove_variable = coup_var
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = coup_advancing
				trigger = {
					scope:coup_ig = {
						is_powerful = yes
						ig_approval < 0
					}
				}
			}
			triggered_desc = {
				desc = coup_declining
				trigger = {
					scope:coup_ig = {
						OR = {
							is_powerful = no
							ig_approval >= 0
						}
					}
				}
			}
		}
	}

	current_value = {
		value = root.var:coup_var
	}

	goal_add_value = {
		add = 100
	}

	progressbar = yes

	should_be_pinned_by_default = yes

	transferable = no
	can_revolution_inherit = no

	weight = 100
}
﻿je_eastern_frontier = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_objectives

    scripted_button = greater_khorasan_button
    scripted_button = persian_baluchistan_button
    scripted_button = persia_british_aid_button
    scripted_button = persia_russian_aid_button
    scripted_button = persia_resettle_merv_button

    immediate = {
        s:STATE_HERAT = {
            save_scope_as = herat_scope
        }
        s:STATE_MERZ = {
            save_scope_as = merv_scope
        }
        s:STATE_KABUL = {
            save_scope_as = kabul_scope
        }
        s:STATE_UZBEKIA = {
            save_scope_as = uzbekia_scope
        }
        s:STATE_KHIVA = {
            save_scope_as = khiva_scope
        }
        c:PER ?= {
            save_scope_as = persia_scope
        }
        c:GBR ?= {
            save_scope_as = britain_scope
        }
        c:RUS ?= {
            save_scope_as = russia_scope
        }
        c:TRM ?= {
            save_scope_as = turkmenia_scope
        }
        cu:persian = {
            save_scope_as = persian_culture
        }
        cu:turkmen = {
            save_scope_as = turkmen_culture
        }
    }

	complete = {
        custom_tooltip = {
            text = je_eastern_frontier_tt_1 # Todo PRCAL-14501 Needs state highlighting
            country_or_subject_owns_entire_state_region = STATE_HERAT
            country_or_subject_owns_entire_state_region = STATE_KABUL
            country_or_subject_owns_entire_state_region = STATE_KANDAHAR
            country_or_subject_owns_entire_state_region = STATE_BALKH
            country_or_subject_owns_entire_state_region = STATE_CENTRAL_HIGHLANDS
            country_or_subject_owns_entire_state_region = STATE_MERZ
            country_or_subject_owns_entire_state_region = STATE_NORTHERN_BALUCHISTAN
        }
        custom_tooltip = {
            text = je_eastern_frontier_tt_2 # Todo PRCAL-14501 Needs state highlighting
            country_or_subject_owns_entire_state_region = STATE_TURKMENIA
            country_or_subject_owns_entire_state_region = STATE_KHIVA
        }
        custom_tooltip = {
            text = je_eastern_frontier_tt_3 # Todo PRCAL-14501 Needs state highlighting
            country_or_subject_owns_entire_state_region = STATE_FERGANA
            country_or_subject_owns_entire_state_region = STATE_TAJIKISTAN
            country_or_subject_owns_entire_state_region = STATE_UZBEKIA
        }
        custom_tooltip = {
            text = je_eastern_frontier_tt_4
            has_variable = restoration_of_merv_var
        }
	}

	on_complete = {
        trigger_event = { id = persia_events.1 popup = yes }
        hidden_effect = {
            set_variable = iranzamin_achievement
        }
	}

	weight = 1000
	transferable = yes
}

﻿je_flamethrowers = {
 	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = trench_works
 		has_technology_researched = automatic_machine_guns
 		army_size >= 25
 	}

 	possible = {
 		has_technology_researched = flamethrowers
 		army_size >= 40
 	}

 	complete = {
 		is_at_war = yes
 		army_mobilization_option_fraction = {  
			target = mobilization_option:mobilization_option_flamethrowers  
			value >= 0.2  
		}
 		# for these JE's we would want this to be true for X months, but excluding that for the sake of readability
 		# If this trigger is changed, also change the trigger in the event
 		any_scope_war = {
            any_scope_front = {
               any_scope_general = {
                   owner = ROOT
                   this.commander_military_formation = {
                       has_mobilization_option = mobilization_option:mobilization_option_flamethrowers
                   }
               }
            }
        }
 	}

 	on_complete = {
 		trigger_event = { id = flamethrowers_event.1 }
 	}

 	timeout = 3650
}

﻿je_grand_exhibition = {
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_crises

	immediate = {
		capital = {
			save_scope_as = grand_exhibition_state
			if = {
				limit = {
					any_scope_building = {
						is_building_type = building_eiffel_tower #they held a huge exhibition there
					}
				}
				random_scope_building = {
					limit = {
						is_building_type = building_eiffel_tower
					}
					save_scope_as = grand_exhibition_building
				}
			}
			else = {
				random_scope_building = {
					limit = {
						is_building_type = building_urban_center
					}
					save_scope_as = grand_exhibition_building
				}
			}
		}
		set_variable = {
			name = grand_exhibition_points_var
			value = 0
		}
		set_variable = {
			name = grand_exhibition_points_change
			value = 0
		}
	}
	
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_grand_exhibition_bad_points
				trigger = {
					root.var:grand_exhibition_points_var <= 20
				}
			}
			triggered_desc = {
				desc = je_grand_exhibition_medium_points
				trigger = {
					root.var:grand_exhibition_points_var > 20
					root.var:grand_exhibition_points_var < 50
				}
			}
			triggered_desc = {
				desc = je_grand_exhibition_good_points
				trigger = {
					root.var:grand_exhibition_points_var >= 50
					root.var:grand_exhibition_points_var < 100
				}
			}
			triggered_desc = {
				desc = je_grand_exhibition_great_points
				trigger = {
					root.var:grand_exhibition_points_var >= 100
				}
			}
		}
	}
	
	on_weekly_pulse = {
		effect = {
			set_variable = {
				name = grand_exhibition_points_var
				value = grand_exhibition_points
			}
			change_variable = {
				name = grand_exhibition_points_var
				add = var:grand_exhibition_points_change
			}
		}
	}
	
	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = exhibition_events.4
			10 = exhibition_events.5
			10 = exhibition_events.6
			10 = exhibition_events.7
			30 = exhibition_events.8
		}
	}

	complete = {
		custom_tooltip = {
			text = grand_exhibition_complete_tt
			always = no
		}
	}

	current_value = {
		value = root.var:grand_exhibition_points_var
	}

	goal_add_value = {
		value = 100
	}
	
	progressbar = yes
	
	invalid = {
		scope:grand_exhibition_state = {
			devastation >= 0.1
			NOT = {
				owner = root
			}
		}
	}
	
	on_invalid = {
		custom_tooltip = {
			text = invalid_grand_exhibition_tt
			remove_variable = grand_exhibition_decision_taken
		}
	}
	
	timeout = 1825 # 5 years
	
	on_timeout = {
		if = {
			limit = {
				root.var:grand_exhibition_points_var >= 100 
			}
			trigger_event = { id = exhibition_events.3 }
		} 
		else_if = {
			limit = {
				root.var:grand_exhibition_points_var >= 50
			}
			trigger_event = { id = exhibition_events.2 }
		} 
		else = {
			trigger_event = { id = exhibition_events.1 }
		}
	}

	weight = 20

	should_be_pinned_by_default = yes
	
	transferable = no
}
﻿je_hawaii = { #JE for hawaii to stave off annxation
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_internal_affairs

	complete = {
		GDP >= 250000
	}

	on_complete = {
		trigger_event = {
			id = hawaii_events.2
		}
	}

	on_timeout = {
		if = {
			limit = {
				any_country = {
					has_variable = hawaii_interest
				}
			}
			trigger_event = {
				id = hawaii_events.3
			}
		}
	}

	timeout = 3650

	should_be_pinned_by_default = yes
}

je_hawaiian_interest = { #JE for GPs so that they can see the situation is ongoing
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		has_global_variable = gp_hawaii_interest
		country_rank = rank_value:great_power
	}

	possible = {
		hidden_trigger = {
			has_variable = hawaii_interest
		}
		custom_tooltip = influence_hawaii_tt
		country_rank = rank_value:great_power
	}
	
	complete = {
		custom_tooltip = {
			text = je_hawaiian_interest_tt
			OR = {
				NOT = {
					exists = c:HAW
				}
				c:HAW ?= {
					is_subject_of = ROOT
				}
			}
		}
	}
	
	invalid = {
		hidden_trigger = {
			NOT = { has_global_variable = gp_hawaii_interest }
		}
		custom_tooltip = invalid_influence_hawaii_tt
	}
	should_be_pinned_by_default = yes
	
	timeout = 3650
	
	progressbar = yes
}

﻿je_ig_suppression_1 = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_internal_affairs

	complete = {
		scope:target = {
			ig_clout <= 0.2
			is_in_government = no
		}
	}

	on_complete = {
		set_variable = {
			name = completed_ig_suppression_je_var
			months = normal_modifier_time
		}
		remove_variable = ig_leader_exposed_var
		remove_variable = ig_leader_steps_down_var
		remove_variable = ig_leader_in_jail_var
		trigger_event = { id = ig_suppression_events.7 }
	}

	fail = {
		scope:target = {
			is_being_suppressed = no
		}
	}

	status_desc = { #schemes
		first_valid = {
			triggered_desc = {
				desc = je_ig_suppression_status_1
				trigger = {
					has_variable = ig_leader_exposed_var
				}
			}
			triggered_desc = {
				desc = je_ig_suppression_status_2
				trigger = {
					has_variable = ig_leader_steps_down_var
				}
			}
			triggered_desc = {
				desc = je_ig_suppression_status_3
				trigger = {
					has_variable = ig_leader_in_jail_var
				}
			}
		}
	}

	on_monthly_pulse = {
		random_events = {
			200 = 0
			10 = ig_suppression_events.2
			10 = ig_suppression_events.5
			10 = ig_suppression_events.6
			10 = ig_suppression_events.1000
			10 = ig_suppression_events.1001
			10 = ig_suppression_events.1003
		}
	}

	on_yearly_pulse = {
	}

	weight = 200

	transferable = no

	progressbar = no
}

﻿je_indian_removal = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_historical_content
	
	on_monthly_pulse = {
		random_events = {
			10 = 0 
			1 = native_resettlement.2 # john ross
			1 = native_resettlement.3 # Preparing for resettlement
			1 = native_resettlement.4 # Trail of Tears
		}
	}

	complete = {
		OR = {
			has_law = law_type:law_no_colonial_affairs
			cu:cherokee = {
				NOT = { culture_is_discriminated_in = ROOT }
			}
			custom_tooltip = {
				text = indian_removal_fail_tt
				NOT = {
					any_scope_state = {
						any_scope_pop = {
							culture = cu:cherokee
						}
					}
				}
			}
		}
	}
	
	on_complete = {
		custom_tooltip = {
			text = indian_removal_end
			if = {
				limit = {
					NOT = {
						any_scope_pop = {
							culture = cu:cherokee
						}
					}
				}
				trigger_event = { id = native_resettlement.5 }
			}
			else = {
				trigger_event = { id = native_resettlement.6 }
			}
		}
	}
	
	invalid = {
		OR = {
			NOT = { owns_entire_state_region = STATE_GEORGIA }
			NOT = {
				AND = {
					exists = c:SEQ
					exists = c:USA
					c:SEQ = { is_subject_of = c:USA }
				}
			}
		}
	}
	
	weight = 200
	
	should_be_pinned_by_default = yes
	
	transferable = no
}

﻿je_krakatoa = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_crises

	on_monthly_pulse = {
		random_events = {
			10 = 0
			2 = krakatoa.4 #art boom
			5 = krakatoa.3 #crop failure
		}
	}
	
	timeout = 730
	
	weight = 100

	should_be_pinned_by_default = yes
	
	transferable = yes
}
﻿je_famine = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_crises

	is_shown_when_inactive = {
		game_date >= 1937
		NOT = { has_variable = completed_major_famine_var }
		NOT = { is_country_type = decentralized }
		any_scope_state = {
			average_sol <= 10
		}
	}

	possible = {
		institution_investment_level = {
			institution = institution_social_security
			value < 4
		}
		OR = {
			any_scope_state = {
				OR = {
				   custom_tooltip = {
				      text = natural_disaster_variable
					  has_variable = natural_disaster_variable
				   }
		           custom_tooltip = {
				      text = grain_more_than_35_percent_more_expensive_tt
				      sg:grain = {
		                 state_goods_pricier >= 0.7
					  }
		          }
		        }
		        OR = {
				   AND = {
				      is_incorporated = yes
		              average_sol <= 10
		           }
		           AND = {
				      is_incorporated = no
		              average_sol <= 5
		           }
		        }
			}
		}
	}

	immediate = {
		if = {
			limit = {
				any_scope_state = {
					average_sol <= 10
					is_incorporated = yes
					custom_tooltip = {
						text = natural_disaster_variable
						has_variable = natural_disaster_variable
					}
				}
			}
			random_scope_state = {
				limit = {
					average_sol <= 10
					is_incorporated = yes
					custom_tooltip = {
						text = natural_disaster_variable
						has_variable = natural_disaster_variable
					}
				}
				save_scope_as = famine_state
				set_variable = famine_var
			}
			trigger_event = { id = famine_events.1 }
		}
		else_if = {
			limit = {
				any_scope_state = {
					average_sol <= 5
					sg:grain = {
						state_goods_pricier > 0.35 
					}
				}
			}
			random_scope_state = {
				limit = {
					average_sol <= 5
					sg:grain = {
						state_goods_pricier > 0.35 
					}
				}
				save_scope_as = famine_state
				set_variable = famine_var
			}
			trigger_event = { id = famine_events.1 }
		}
	}

	current_value = {
		value =	root.average_sol
	}

	goal_add_value = 3

	complete = {
		scope:journal_entry = {
			custom_tooltip = {
				text = je_major_famines_success
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = completed_major_famine_var
			months = normal_modifier_time
		}
		every_scope_state = {
			limit = {
			  has_modifier = great_famine_modifier
			}
			remove_modifier = great_famine_modifier
		}
		every_scope_state = {
			limit = {
			  has_modifier = emergency_famine_modifier
			}
			remove_modifier = emergency_famine_modifier
		}
		remove_variable = neighbor_country_1_var
		remove_variable = famine_donations_var
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = famine_events.2
			10 = famine_events.3
			10 = famine_events.4
			10 = famine_political.1
			10 = famine_political.2
			10 = famine_political.3
			10 = famine_political.4
			10 = famine_political.5
		}
	}

	timeout = 1825

	weight = 200

	should_be_pinned_by_default = yes

	transferable = no

	progressbar = yes
}

﻿je_french_natural_borders = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		exists = c:FRA
		this = c:FRA
		has_dlc_feature = voice_of_the_people_content
	}

	possible = {
		has_technology_researched = nationalism
		any_interest_group = {
			is_powerful = yes
			is_in_government = yes
			leader = {
				OR = {
					has_ideology = ideology:ideology_jingoist_leader
					has_ideology = ideology:ideology_ethno_nationalist
					has_ideology = ideology:ideology_fascist
					has_ideology = ideology:ideology_integralist
					has_ideology = ideology:ideology_bonapartist
				}
			}
		}
	}

	immediate = {
		trigger_event = { id = natural_borders.1 popup = yes }
	}

	complete = {
		is_at_war = no
		custom_tooltip = {
			text = own_all_french_homelands
			NOT = {
				any_state = {
					state_region = {
						is_homeland = cu:french
					}
					NOT = { owner = ROOT }
				}
			}
		}
		any_scope_state = {
			state_region = s:STATE_WALLONIA
			is_incorporated = yes
			is_split_state = no
		}
		any_scope_state = {
			state_region = s:STATE_FLANDERS
			is_incorporated = yes
			is_split_state = no
		}
		any_scope_state = {
			state_region = s:STATE_RHINELAND
			is_incorporated = yes
			is_split_state = no
		}
		any_scope_state = {
			state_region = s:STATE_NORTH_RHINE
			is_incorporated = yes
			is_split_state = no
		}
	}

	on_complete = {
		set_variable = completed_natural_borders_je
		trigger_event = { id = natural_borders.2 popup = yes }
	}

	invalid = {
		has_variable = reject_natural_borders
	}

	should_be_pinned_by_default = yes

	weight = 100
}

je_confederation_of_the_rhine = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		OR = {
			any_subject_or_below = {
				capital = {
					OR = {
						region = sr:region_rhine
						region = sr:region_north_germany
						region = sr:region_south_germany
					}
				}
			}
			any_scope_state = {
				state_region = {
					OR = {
						is_homeland = cu:south_german
						is_homeland = cu:north_german
					}
				}
				OR = {
					region = sr:region_rhine
					region = sr:region_north_germany
					region = sr:region_south_germany
				}
				is_incorporated = no
				NOT = {
					ROOT = {
						has_claim = prev.state_region
					}
				}
			}
		}
		NOR = {
			country_has_primary_culture = cu:north_german
			country_has_primary_culture = cu:south_german
		}
	}

	possible = {
		country_rank >= rank_value:great_power
		any_state = {
			OR = {
				region = sr:region_rhine
				region = sr:region_north_germany
				region = sr:region_south_germany
			}
			state_region = {
				OR = {
					is_homeland = cu:south_german
					is_homeland = cu:north_german
				}
			}
			OR = {
				owner = {
					is_subject_of = ROOT
					NOT = {
						has_diplomatic_pact = {
							who = ROOT
							type = personal_union
							is_initiator = no
						}
					}
					capital = {
						OR = {
							region = sr:region_rhine
							region = sr:region_north_germany
							region = sr:region_south_germany
						}
					}
					OR = {
						country_has_primary_culture = cu:north_german
						country_has_primary_culture = cu:south_german
					}
				}
				owner = ROOT
			}
			count >= 4
		}
	}

	immediate = {
		save_scope_as = rhine_overlord
		cu:north_german = {
			save_scope_as = north_german_scope
		}
		cu:south_german = {
			save_scope_as = south_german_scope
		}
	}

	scripted_button = je_confederation_of_the_rhine_confederate_button
	scripted_button = je_confederation_of_the_rhine_expand_button

	invalid = {
		NOR = {
			any_country = {
				is_subject_of = ROOT
				capital = {
					OR = {
						region = sr:region_rhine
						region = sr:region_north_germany
						region = sr:region_south_germany
					}
				}
			}
			any_scope_state = {
				state_region = {
					OR = {
						is_homeland = cu:south_german
						is_homeland = cu:north_german
					}
				}
				OR = {
					region = sr:region_rhine
					region = sr:region_north_germany
					region = sr:region_south_germany
				}
				is_incorporated = no
			}
		}
	}

	complete = {
		custom_tooltip = {
			text = no_german_great_powers_tt
			NOT = {
				any_country = {
					OR = {
						country_has_primary_culture = cu:north_german
						country_has_primary_culture = cu:south_german
					}
					country_rank = rank_value:great_power
				}
			}
		}
	}

	fail = {
		exists = c:RHN
		c:RHN ?= {
			NOT = {
				is_subject_of = ROOT
			}
		}
	}

	on_fail = {
		add_modifier = {
			name = modifier_fall_of_germany
			months = normal_modifier_time
			is_decaying = yes
		}
	}

	should_be_pinned_by_default = yes

	weight = 100
}

﻿je_war_nursing = {
 	icon = "gfx/interface/icons/event_icons/event_skull.dds"

   group = je_group_technology

 	is_shown_when_inactive = {
 		is_player = yes
 		has_technology_researched = triage
 		is_at_war = yes
 		army_size >= 25
 	}

 	possible = {
 		has_technology_researched = modern_nursing
 		is_at_war = yes
 		army_size >= 40
 	}

 	immediate = {
 		trigger_event = { id = nursing_events.1 }
 		random_scope_war = {
 			save_scope_as = ongoing_journal_war
 		}
 	}

 	complete = {
        army_mobilization_option_fraction = {  
			target = mobilization_option:mobilization_option_field_hospitals  
			value >= 0.2  
		}
 		# for these JE's we would want this to be true for X months, but excluding that for the sake of readability
 		any_scope_war = {
            any_scope_front = {
               any_scope_general = {
                   owner = ROOT
                   this.commander_military_formation = {
                       has_mobilization_option = mobilization_option:mobilization_option_field_hospitals
                   }
               }
            }
        }
 	}

 	on_complete = {
 		trigger_event = { id = nursing_events.4 }
 	}

 	invalid = {
 		is_at_war = no
 	}

 	on_monthly_pulse = {
 		random_events = {
 			100 = 0
 			10 = nursing_events.2
 			10 = nursing_events.3
 		}
 	}
}
﻿je_oregon = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		exists = c:USA
		exists = c:GBR
		c:USA = ROOT
		s:STATE_WASHINGTON = {
			any_scope_state = {
				owner = {
					OR = {
						c:GBR = THIS
						is_subject_of = c:GBR
					}
				}
			}
		}
		s:STATE_OREGON = {
			any_scope_state = {
				owner = {
					OR = {
						c:GBR = THIS
						is_subject_of = c:GBR
					}
				}
			}
		}
		s:STATE_IDAHO = {
			any_scope_state = {
				owner = {
					OR = {
						c:GBR = THIS
						is_subject_of = c:GBR
					}
				}
			}
		}
	}

	possible = { 
		OR = {
			has_interest_marker_in_region = region_pacific_coast
			custom_tooltip = {
				text = oregon_tt
				has_global_variable = oregon_trail_mapped
			}
			owns_entire_state_region = STATE_MONTANA
			owns_entire_state_region = STATE_WYOMING
		}
	}

	complete = {
		OR = {
			AND = {
				has_interest_marker_in_region = region_pacific_coast
				custom_tooltip = {
					text = oregon_tt
					has_global_variable = oregon_trail_mapped
				}
				owns_entire_state_region = STATE_MONTANA
				owns_entire_state_region = STATE_WYOMING
				c:GBR = {
					relations:ROOT >= relations_threshold:cordial
				}
			}
			AND = {
				owns_entire_state_region = STATE_WASHINGTON
				owns_entire_state_region = STATE_IDAHO
				owns_entire_state_region = STATE_OREGON
			}
		}
	}

	on_complete = {
		if = {
			limit = {
				s:STATE_WASHINGTON = {
					any_scope_state = {
						owner = {
							OR = {
								c:GBR = THIS
								is_subject_of = c:GBR
							}
						}
					}
				}
				s:STATE_OREGON = {
					any_scope_state = {
						owner = {
							OR = {
								c:GBR = THIS
								is_subject_of = c:GBR
							}
						}
					}
				}
				s:STATE_IDAHO = {
					any_scope_state = {
						owner = {
							OR = {
								c:GBR = THIS
								is_subject_of = c:GBR
							}
						}
					}
				}
			}
			c:GBR = { trigger_event = { id = oregon.2 } }
		}
		else = {
			s:STATE_IDAHO = {
				add_homeland = cu:yankee
			}
			s:STATE_WASHINGTON = {
				add_homeland = cu:yankee
			}
			s:STATE_OREGON = {
				add_homeland = cu:yankee
			}
			add_modifier = {
				name = oregon_resolved
				months = normal_modifier_time
			}
		}
	}

	weight = 100
}

je_conquer_oregon = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		c:USA = {
			owns_entire_state_region = STATE_WASHINGTON
			owns_entire_state_region = STATE_IDAHO
			owns_entire_state_region = STATE_OREGON
		}
	}

	weight = 100

	transferable = no
}

﻿je_springtime_of_the_peoples = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_crises

	is_shown_when_inactive = {
		has_global_variable = peoples_springtime_happening
		has_technology_researched = egalitarianism
		capital = {
			OR = {
				region = sr:region_england
				region = sr:region_north_sea_coast
				region = sr:region_iberia
				region = sr:region_france
				region = sr:region_occitania
				region = sr:region_rhine
				region = sr:region_italy
				region = sr:region_balkans
				region = sr:region_north_germany
				region = sr:region_south_germany
				region = sr:region_baltic
				region = sr:region_danubia
				region = sr:region_poland
				#region = sr:region_russia
				#region = sr:region_dnieper
			}
		}
	}

	possible = {
		any_interest_group = {
			OR = {
				is_powerful = yes
				is_insurrectionary = yes
			}
			leader = { has_ideology = ideology:ideology_radical }
		}
	}

	immediate = {
		trigger_event = { id = 1848.4 }
	}

	complete = {
		is_at_war = no
		has_revolution = no
		is_revolutionary = no
		has_insurrectionary_interest_groups = no
		OR = {
			custom_tooltip = {
				text = je_springtime_of_the_peoples_tt_1
				always = no
			}
			AND = {
				any_interest_group = {
					is_in_government = yes
					leader = { has_ideology = ideology:ideology_radical }
				}
				NOT = { has_law = law_type:law_monarchy }
				OR = {
					has_law = law_type:law_census_voting
					has_law = law_type:law_universal_suffrage
				}
			}
			custom_tooltip = {
				text = je_springtime_of_the_peoples_tt_2
				always = no
			}
			NOT = {
				any_interest_group = {
					leader = { has_ideology = ideology:ideology_radical }
					is_marginal = no
				}
			}
		}		
	}

	on_complete = {
		set_variable = {
			name = completed_peoples_stringtime
		}
		set_variable = {
			name = completed_peoples_stringtime_recent
			months = short_modifier_time
		}
		custom_tooltip = je_springtime_of_the_peoples_tt_3
		hidden_effect = {
			if = {
				limit = {
					any_interest_group = {
						is_in_government = yes
						leader = { has_ideology = ideology:ideology_radical }
					}
					NOT = { has_law = law_type:law_monarchy }
					OR = {
						has_law = law_type:law_wealth_voting
						has_law = law_type:law_census_voting
						has_law = law_type:law_universal_suffrage
					}
				}
				trigger_event = { id = peoples_springtime.7 }
			}
		}
		custom_tooltip = je_springtime_of_the_peoples_tt_4
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						any_interest_group = {
							leader = { has_ideology = ideology:ideology_radical }
							is_marginal = no
						}
					}
				}
				trigger_event = { id = peoples_springtime.8 }
			}
		}
	}

	on_monthly_pulse = {
		events = {
			1848.5
		}
		random_events = {
			100 = 0
			10 = peoples_springtime.3
			10 = peoples_springtime.4
			10 = peoples_springtime.5
		}
	}

	invalid = {
		has_global_variable = peoples_springtime_happened
	}

	weight = 10000
	should_be_pinned_by_default = yes

	transferable = no
	can_revolution_inherit = no

	timeout = 3650
}

﻿je_prohibition = {	
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		is_player = yes
		OR = {
			has_technology_researched = anarchism
			has_technology_researched = socialism
			has_technology_researched = corporatism
		}
		has_distillery = yes
		market = { exists = yes }
		is_junior_in_customs_union = no
	}

	possible = {
		has_technology_researched = political_agitation
		any_primary_culture = {
			has_cultural_obsession = liquor
		}
		OR = {
			ig:ig_devout = {
				is_powerful = yes 
			}
			ig:ig_intelligentsia = {
				is_powerful = yes
			}
		}
		any_scope_building = {
			is_building_type = building_food_industry
			is_distillery = yes
			level >= 5
		}
	}
	
	immediate = {
		trigger_event = { id = prohibition.1 }
		ig:ig_devout = {
			save_scope_as = devout_ig
		}
		ig:ig_intelligentsia = {
			save_scope_as = intelligentsia_ig
		}
		set_variable = {
			name = prohibition_laws_var
			value = 0
		}
	}
	
	on_monthly_pulse = {
		random_events = {
			200 = 0
			10 = crime_events.2
			10 = pm_events.3
			10 = prohibition.2
			10 = prohibition.3
			10 = prohibition.4
			10 = prohibition.5
			5 = prohibition.6
			2 = prohibition.7
			5 = election_contextual_events.8
		}
		effect = {
			if = {
				limit = {
					is_banning_goods = liquor
				}
				change_variable = {
					name = prohibition_laws_var
					add = 1
				}
			}
		}
	}

	invalid = { # event prohibition.1.b ends the JE and applies these modifiers
		OR = {
			ig:ig_devout = {
				has_modifier = rejected_prohibition_modifier
			}
			ig:ig_intelligentsia = {
				has_modifier = rejected_prohibition_modifier
			}
		}
	}
	
	complete = {
		scope:journal_entry = { is_goal_complete = yes }
		custom_tooltip = {
			text = liquor_ban_tt
			is_banning_goods = liquor
		}
	}
	

	on_complete = {
		custom_tooltip = prohibition_success.tt
		trigger_event = { id = prohibition.8 }
	}
	
	timeout = 5475
	
	current_value = {
		value = root.var:prohibition_laws_var
	}

	goal_add_value = {
		add = 120 #10 years
	}

	progressbar = yes

	transferable = no
	weight = 100
	should_be_pinned_by_default = yes
}
﻿je_scramble_for_africa = {

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		has_technology_researched = quinine
		any_scope_state = {
			is_incorporated = no
			state_in_africa = yes
		}
	}

	possible = {
		has_technology_researched = malaria_prevention
		any_scope_state = {
			is_incorporated = no
			state_in_africa = yes
			has_state_trait = state_trait_malaria
		}
		OR = {
			has_law = law_type:law_colonial_resettlement
			has_law = law_type:law_colonial_exploitation
		}
	}

	immediate = {
		trigger_event = {
			id = africa_colonial_events.1
			days = 0
			popup = yes
		}
		save_scope_as = scramble_for_africa_self
	}

	complete = {
		custom_tooltip = {
			text = scramble_for_africa_complete_tt
			any_scope_state = {
				is_incorporated = no
				state_in_africa = yes
				count >= 7
			}
		}
		custom_tooltip = {
			text = scramble_for_africa_complete_2_tt
			any_state_region = {
				filter = {
					OR = {
						region = sr:region_nile_basin
						region = sr:region_ethiopia
						region = sr:region_north_africa
						region = sr:region_senegal
						region = sr:region_niger
						region = sr:region_congo
						region = sr:region_southern_africa
						region = sr:region_zanj		
					}
				}
				NOT = {
					any_scope_state = {
						owner = {
							country_is_in_africa = yes
							OR = {
								is_country_type = decentralized
								is_country_type = unrecognized
							}
							is_subject = no
						}
					}
				}
				percent >= 0.95
			}
		}
	}

	on_complete = {
		trigger_event = {
			id = africa_colonial_events.2
			days = 0
			popup = yes
		}
	}

	fail = {
		custom_tooltip = {
			text = scramble_for_africa_fail_tt
			NOT = {
				any_scope_state = {
					is_incorporated = no
					state_in_africa = yes
				}
			}
		}
	}

	#on_fail = {
	#	trigger_event = {
	#		id = africa_colonial_events.3
	#		days = 0
	#		popup = yes
	#	}
	#}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = scramble_for_africa_6_states
				trigger = {
					any_scope_state = {
						count >= 6
						is_incorporated = no
						state_in_africa = yes
					}
				}
			}
			triggered_desc = {
				desc = scramble_for_africa_4_states
				trigger = {
					any_scope_state = {
						count >= 4
						is_incorporated = no
						state_in_africa = yes
					}
				}
			}
			triggered_desc = {
				desc = scramble_for_africa_3_states
				trigger = {
					any_scope_state = {
						count >= 1
						is_incorporated = no
						state_in_africa = yes
					}
				}
			}
			triggered_desc = {
				desc = scramble_for_africa_0_states
			}
		}
	}

	# No timeout. Imperialism never ends.
	# timeout = 7300

	on_timeout = {

	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = africa_colonial_events.4
			10 = africa_colonial_events.5
			10 = africa_colonial_events.6
			5 = africa_colonial_events.7
			10 = patagonia.2
			10 = amazon.2

			10 = africa_colonial_events.40
			10 = africa_colonial_events.41
			10 = africa_colonial_events.51
			10 = africa_colonial_events.53
			10 = africa_colonial_events.54
		}
	}

	weight = 200
	should_be_pinned_by_default = yes
}

﻿je_avert_sepoy_mutiny = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = je_avert_sepoy_mutiny_tt_1
			has_variable = consolidated_colonial_rule
		}
		custom_tooltip = {
			text = je_avert_sepoy_mutiny_tt_2
			has_variable = reformed_indies
		}
	}

	fail = {
		has_any_secessionists_broken_out = yes
	}

	invalid = {
		NOT = {
			owns_entire_state_region = STATE_DELHI
		}
	}

	on_fail = {
		trigger_event = { id = raj.6 popup = yes }
	}

	on_timeout = {
		trigger_event = { id = raj.6 popup = yes }
	}

	on_monthly_pulse = {
		random_events = {
			11 = 0
			1 = raj.3
			1 = raj.4
			1 = raj.5
		}
	}

	timeout = 7300

	weight = 100
	should_be_pinned_by_default = yes
}

je_sepoy_mutiny = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		trigger_if = {
			limit = { exists = c:MUG }
			c:MUG = { is_country_alive = no }
		}
		highest_secession_progress < 0.3
		has_any_secessionists_broken_out = no
		is_at_war = no
	}

	on_complete = {
		if = {
			limit = {
				exists = c:GBR
				is_subject_of = c:GBR
				c:GBR = {
					is_country_alive = yes
					NOT = { has_variable = british_raj_var }
				}
			}
			c:GBR = {
				trigger_event = { id = raj.1 days = 0 popup = yes }
			}
		}
		else = {
			add_modifier = {
				name = company_crushed_mutiny
				months = normal_modifier_time
			}
		}
		hidden_effect = {
			every_scope_state = {
				limit = {
					owner = ROOT
					has_variable = bic_incorporated_state
				}
				set_state_type = incorporated
				remove_variable = bic_incorporated_state
			}
		}
	}

	weight = 100
	should_be_pinned_by_default = yes
}
﻿slave_owner_paranoia = {

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		OR = {
			has_law = law_type:law_slave_trade
			has_law = law_type:law_legacy_slavery
		}
		radical_fraction = {
			value >= 0.1
			pop_type = slaves
		}
		NOT = { has_journal_entry = je_matter_of_slavery } # Disabled for Brazil
	}
	
	possible = {
		radical_fraction = {
			value >= 0.2
			pop_type = slaves
		}
		any_interest_group = {
			any_scope_character = {
				OR = {
					has_role = politician
					has_role = agitator
				}
				has_ideology = ideology:ideology_abolitionist
			}
		}
		NOT = { c:BRZ ?= this }
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = slave_owner_paranoia_radicalization_high
				trigger = {
					radical_fraction = {
						value >= 0.5
						pop_type = slaves
					}
				}
			}
			triggered_desc = {
				desc = slave_owner_paranoia_radicalization_mid
				trigger = {
					radical_fraction = {
						value >= 0.2
						pop_type = slaves
					}
				}
			}
			triggered_desc = {
				desc = slave_owner_paranoia_radicalization_low
			}
		}
	}

	complete = {
		radical_fraction = {
			value < 0.05
			pop_type = slaves
		}
	}

	# 5 years
	timeout = 1825
	
	on_yearly_pulse = {
		random_events = {
			40  = 0
			10 = slave_owner_paranoia_events.1
			10 = slave_owner_paranoia_events.2
			10 = slave_owner_paranoia_events.3
		}
	}
	
	weight = 200
}
﻿je_airships = {

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = completed_airships_je }
		has_technology_researched = modern_sewerage
	}

	possible = {
		has_technology_researched = steel_frame_buildings
	}

	immediate = {
	}

	complete = {
		has_technology_researched = zeppelins
	}

	on_complete = {
		trigger_event = { id = society_tech_events.301 }
		set_variable = {
			name = completed_airships_je
		}
	}

	timeout = 3650
}

je_romanticism = {

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		has_technology_researched = rationalism
		NOT = { has_variable = completed_romanticism_je }
		NOT = { is_country_type = unrecognized }
	}

	possible = {
		has_technology_researched = romanticism
		NOT = { has_technology_researched = realism }
		any_scope_state = {
			has_building = building_urban_center
		}
	}

	immediate = {
	}

	complete = {
		any_scope_building = {
			is_building_type = building_arts_academy
			has_active_production_method = pm_traditional_art
			occupancy >= 0.9
			level >= 2
		}
	}

	on_complete = {
		trigger_event = { id = society_tech_events.302 }
		set_variable = {
			name = completed_romanticism_je
		}
	}

	fail = {
		has_technology_researched = realism
	}

	timeout = 3650
}

﻿je_sol_1 = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_crises

	is_shown_when_inactive = {
		NOT = { has_variable = completed_sol_je }
		NOT = { has_variable = dismissed_poverty_variable }
		NOT = { has_variable = begging_woman_martyr_variable }
		root.average_sol < 10
	}

	possible = {
		root.average_sol < 7
		OR = {
			ig:ig_petty_bourgeoisie = {
				is_powerful = yes
			}
			ig:ig_industrialists = {
				is_powerful = yes
			}
		}
		OR = {
			has_law = law_type:law_no_social_security
			has_law = law_type:law_no_health_system
		}
		OR = {
			has_technology_researched = modern_sewerage
			has_technology_researched = labor_movement
			has_technology_researched = human_rights
		}
		any_scope_state = {
			is_incorporated = yes
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 10
			}
		}
	}

	immediate = {
		trigger_event = { id = sol_events.1 }
	}

	complete = {
		custom_tooltip = {
			text = je_sol_goal_desc
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_complete = {
		set_variable = {
			name = completed_sol_je
			months = normal_modifier_time
		}
		trigger_event = { id = sol_events.2 }
	}

	invalid = {
		custom_tooltip = {
			text = je_sol_invalid_desc
			OR = {
				has_variable = dismissed_poverty_variable
				has_variable = begging_woman_martyr_variable
			}
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = sol_events.3
			10 = sol_events.4
			10 = sol_events.5
			10 = sol_events.6
		}
	}

	current_value = {
		value = root.average_sol
	}

	goal_add_value = {
		add = 3
	}

	weight = 200

	should_be_pinned_by_default = yes

	transferable = no

	progressbar = yes
}

﻿je_chinese_missions = {
	icon = "gfx/interface/icons/religion_icons/protestant.dds"

	group = je_group_historical_content

	scripted_button = CHI_deport_missionaries_button

	is_shown_when_inactive = {
		exists = c:CHI
		THIS = c:CHI
	}

	possible = {
		OR = {
			has_modifier = opium_wars_lost
			NOT = {
				has_law = law_type:law_closed_borders
			}
		}
		any_neighbouring_state = {
			is_treaty_port = yes
			custom_tooltip = {
				text = owner_is_christian_tt
				owner = {
					religion = {
						has_discrimination_trait = christian
					}
				}
			}
		}
		NOT = {
			has_law = law_type:law_isolationism
		}
	}

	immediate = {
		custom_tooltip = {
			text = missionary_activities_begin_tt
			trigger_event = {
				id = heavenly.1
			}
		}
		every_scope_state = {
			limit = {
				any_neighbouring_state = {
					is_treaty_port = yes
					owner = {
						religion = {
							has_discrimination_trait = christian
						}
					}
				}
			}
			set_variable = open_to_missionaries_state
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_law = law_type:law_no_migration_controls
					any_scope_state = {
						NOT = {
							has_variable = open_to_missionaries_state
						}
					}
				}
				every_scope_state = {
					limit = {
						NOT = {
							has_variable = open_to_missionaries_state
						}
					}
					set_variable = open_to_missionaries_state
				}
			}
			else = {
				every_scope_state = {
					limit = {
						any_neighbouring_state = {
							is_treaty_port = yes
							owner = {
								religion = {
									has_discrimination_trait = christian
								}
							}
						}
						NOT = {
							has_variable = open_to_missionaries_state
						}
					}
					set_variable = open_to_missionaries_state
				}
			}
		}
		random_events = {
			500 = 0
			10 = CHI_missionaries.1
			10 = CHI_missionaries.2
			10 = CHI_missionaries.3
			10 = CHI_missionaries.4
			10 = CHI_missionaries.5
		}
	}

	complete = {
		custom_tooltip = {
			text = missionary_ban_tt
			has_variable = CHI_deported_missionaries
		}
		OR = {
			is_country_type = recognized
			has_law = law_type:law_state_atheism
			has_law = law_type:law_isolationism
			has_law = law_type:law_closed_borders
		}
	}

	weight = 10000
	should_be_pinned_by_default = yes
}

je_heavenly_kingdom_main = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		exists = c:CHI
		THIS = c:CHI
	}

	possible = {
		custom_tooltip = {
			text = missionaries_enough_time_tt
			OR = {
				AND = {
					has_variable = missionary_works_counter
					var:missionary_works_counter >= 5
					game_date >= 1846
				}
				game_date >= 1856
			}
		}
		is_subject = no
		any_scope_state = {
			is_incorporated = yes
			any_scope_pop = {
				has_pop_religion = protestant
			}
			is_capital = no
			state_region = { 
				OR = {
					is_homeland = cu:han 
					is_homeland = cu:hakka 
				}
			}
			turmoil > 0.15
		}
	}

	immediate = {
		random_scope_state = {
			limit = {
				is_incorporated = yes
				any_scope_pop = {
					has_pop_religion = protestant
				}
				is_capital = no
				state_region = { 
					OR = {
						is_homeland = cu:han 
						is_homeland = cu:hakka 
					}
				}
				turmoil > 0.15
			}
			add_modifier = {
				name = god_worshippers
				months = short_modifier_time
			}
		}
		trigger_event = {
			id = heavenly.2
		}
	}

	on_monthly_pulse = {
		random_events = {
			5 = 0
			1 = heavenly.3
		}
	}

	complete = {
		NOT = {
			any_scope_state = {
				has_modifier = god_worshippers
			}
		}
	}

	fail = {
		any_scope_state = {
			has_modifier = god_worshippers
			count >= 4
		}
		any_scope_state = {
			has_modifier = god_worshippers
			any_scope_pop = {
				has_pop_religion = protestant
				religion_accepted = no
			}
			turmoil >= 0.15
		}
	}

	on_fail = {
		trigger_event = {
			id = heavenly.4
		}
	}

	weight = 10000
	should_be_pinned_by_default = yes
}

je_taiping = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = taiping_destroyed
			hidden_trigger = {
				NOT = {
					exists = c:TPG
				}
			}
		}
	}

	immediate = {
		c:TPG = {
			save_scope_as = taiping_scope
		}
	}

	on_complete = {
		trigger_event = { id = heavenly.5 days = 0 }
		hidden_effect = {
			remove_modifier = taiping_taiping_rebellion
		}
	}

	fail = {
		exists = c:TPG
		has_truce_with = c:TPG
	}

	on_fail = {
		if = {
			limit = { has_journal_entry = je_warlord_china }
			chi_remove_1_fragile_unity = yes
		}
		hidden_effect = {
			remove_modifier = taiping_taiping_rebellion
			c:TPG = {
				remove_modifier = taiping_taiping_rebellion
			}
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes

	transferable = no
}

je_taiping_revolution = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		OR = {
			custom_tooltip = {
				text = china_destroyed
				hidden_trigger = {
					NOT = {
						exists = c:CHI
					}
				}
			}
			AND = {
				exists = c:CHI
				has_truce_with = c:CHI		
			}
		}
		
	}

	immediate = {
		c:CHI = {
			save_scope_as = china_scope
		}
	}

	on_complete = {
		trigger_event = { id = heavenly.6 days = 0 }
		custom_tooltip = {
			text = rebellion_effects_remove
			remove_modifier = taiping_taiping_rebellion
			every_interest_group = {
				limit = {
					has_modifier = taiping_taiping_revolution
				}
				remove_modifier = taiping_taiping_revolution
			}
		}
		
	}

	fail = {
		NOT = {
			exists = c:TPG
		}
	}

	weight = 1000
	should_be_pinned_by_default = yes

	transferable = no
}
﻿je_texas_tex = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	complete = {
		is_subject = no
		is_at_war = no
		exists = c:USA
		c:USA = {
			relations:root >= relations_threshold:cordial
		}
	}

	on_complete = {
		trigger_event = { id = texan_war_of_independence.1 }
	}
	
	weight = 100
	
	transferable = no

	invalid = {
		NOT = { exists = c:TEX }
	}
}

je_texas_usa = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content

	complete = {
		exists = c:TEX
		c:TEX = {
			relations:root >= relations_threshold:cordial
			is_subject = no
			is_at_war = no
		}
	}

	on_complete = {
		custom_tooltip = texas_je_tt		
	}

	invalid = {
		OR = {
			NOT = { exists = c:TEX }
			c:TEX = { is_subject = yes }
		}
	}
	
	weight = 100
	
	transferable = no
}
﻿je_urbanization_events_1 = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	group = je_group_internal_affairs
	
	is_shown_when_inactive = {
		is_player = yes
		pop_type_percent_country = {
			pop_type = peasants
			percent > 0.6
		}
	}
	
	possible = {
		NOR = {
			has_law = law_type:law_serfdom 
			has_law = law_type:law_land_based_taxation
		}
		pop_type_percent_country = { #added again so the tooltip is nicer
			pop_type = peasants
			percent > 0.6
		}
	}
	
	complete = {
		pop_type_percent_country = {
			pop_type = peasants
			percent < 0.35
		}
		NOT = {
			has_law = law_type:law_serfdom 
			has_law = law_type:law_land_based_taxation
		}
		ig:ig_industrialists = {
			is_marginal = no
		}
	}
	
	on_complete = {
		trigger_event = { id = urbanization_events.1 }
	}
	
	weight = 10
	transferable = no
}

je_urbanization_events_2 = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_internal_affairs
	
	is_shown_when_inactive = {
		is_player = yes
		any_scope_state = {
			is_incorporated = yes
			has_building = building_urban_center
		}
	}
	
	possible = {
		any_scope_state = {
			is_incorporated = yes
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 5
			}
		}
		NOT = { has_law = law_type:law_agrarianism }
	}
	
	complete = {
		any_scope_state = {
			filter = {
				is_incorporated = yes
			}
			percent >= 0.75
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 5
			}
		}
		any_scope_state = {
			is_incorporated = yes
			any_scope_building = {
				is_building_type = building_urban_center
				level >= 10
			}
		}
	}
	
	on_monthly_pulse = {
		random_events = {
			70 = 0
			10 = urbanization_events.2
			20 = urbanization_events.4
			20 = urbanization_events.6
		}
	}
	
	on_complete = {
		trigger_event = { id = urbanization_events.5 }
	}
	
	weight = 10
	transferable = no
}
﻿je_conquest_of_algeria = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	complete = {
		country_or_subject_owns_entire_state_region = STATE_ORAN
		country_or_subject_owns_entire_state_region = STATE_ALGIERS
		country_or_subject_owns_entire_state_region = STATE_CONSTANTINE
	}

	on_complete = {
		custom_tooltip = je_conquest_of_algeria_tt
		trigger_event = algeria_events.1
	}

	fail = {
		NOT = { has_state_in_state_region = STATE_ORAN }
		NOT = { has_state_in_state_region = STATE_ALGIERS }
		NOT = { has_state_in_state_region = STATE_CONSTANTINE }
	}

	on_fail = {
		trigger_event = algeria_events.3
	}

	on_monthly_pulse = {
		random_events = {
			90 = 0
			10 = algeria_events.5 # Raid Event
		}
	}

	transferable = no

	should_be_pinned_by_default = yes

	weight = 5000
}

je_the_algerian_departements = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	immediate = {
		random_scope_state = {
			limit = {
				state_region = s:STATE_ALGIERS
			}
			save_scope_as = je_algiers_state_scope
		}
		random_scope_state = {
			limit = {
				state_region = s:STATE_ORAN
			}
			save_scope_as = je_oran_state_scope
		}
		random_scope_state = {
			limit = {
				state_region = s:STATE_CONSTANTINE
			}
			save_scope_as = je_constantine_state_scope
		}
		cu:berber = {
			save_scope_as = berber_culture_scope
		}
		cu:maghrebi = {
			save_scope_as = maghrebi_culture_scope
		}
		cu:french = {
			save_scope_as = french_culture_scope
		}
	}
	complete = {
		custom_tooltip = {
			text = je_the_algerian_departements_tt_1
			any_scope_state = {
				state_region = s:STATE_ALGIERS
				is_incorporated = yes
				is_split_state = no
				turmoil < 0.1
			}
			any_scope_state = {
				state_region = s:STATE_ORAN
				is_incorporated = yes
				is_split_state = no
				turmoil < 0.1
			}
			any_scope_state = {
				state_region = s:STATE_CONSTANTINE
				is_incorporated = yes
				is_split_state = no
				turmoil < 0.1
			}
		}
		OR = {
			custom_tooltip = {
				text = je_the_algerian_departements_tt_3
				any_scope_state = {
					state_region = s:STATE_ALGIERS
					culture_percent_state = {
						target = cu:french
					    value >= 0.2
					}
				}
				any_scope_state = {
					state_region = s:STATE_ORAN
					culture_percent_state = {
						target = cu:french
					    value >= 0.2
					}
				}
				any_scope_state = {
					state_region = s:STATE_CONSTANTINE
					culture_percent_state = {
						target = cu:french
					    value >= 0.2
					}
				}
			}
			custom_tooltip = {
				text = je_the_algerian_departements_tt_2
				cu:maghrebi = {
					NOT = { culture_is_discriminated_in = ROOT }
				}
				cu:berber = {
					NOT = { culture_is_discriminated_in = ROOT }
				}
			}
		}
	}

	on_complete = {
		trigger_event = algeria_events.4
	}

	fail = {
		NOT = { has_state_in_state_region = STATE_ORAN }
		NOT = { has_state_in_state_region = STATE_ALGIERS }
		NOT = { has_state_in_state_region = STATE_CONSTANTINE }
	}

	on_fail = {
		trigger_event = algeria_events.3
	}

	on_monthly_pulse = {
		random_events = {
			90 = 0 
			10 = algeria_events.6
		}
	}

	transferable = no

	should_be_pinned_by_default = yes

	weight = 5000
}

je_reconquest_of_algeria = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	complete = {
		custom_tooltip = {
			text = je_reconquest_of_algeria_tt
			exists = c:ALD
			this = c:ALD
		}
		owns_entire_state_region = STATE_ORAN
		owns_entire_state_region = STATE_ALGIERS
		owns_entire_state_region = STATE_CONSTANTINE
	}

	on_complete = {
		trigger_event = algeria_events.8
	}

	fail = {
		NOT = { has_state_in_state_region = STATE_ORAN }
		NOT = { has_state_in_state_region = STATE_ALGIERS }
		NOT = { has_state_in_state_region = STATE_CONSTANTINE }
	}

	transferable = yes

	should_be_pinned_by_default = yes

	weight = 5000
}

je_french_foreign_legion = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	complete = {
		any_scope_state = {
			region = sr:region_north_africa
			any_scope_building = {
				is_building_type = building_barracks
				level >= 20
				occupancy >= 0.5
			}
			count >= 3
		}
	}

	on_complete = {
		trigger_event = { id = algeria_events.9 }
	}

	fail = {
		NOT = { has_state_in_state_region = STATE_ORAN }
		NOT = { has_state_in_state_region = STATE_ALGIERS }
		NOT = { has_state_in_state_region = STATE_CONSTANTINE }
	}

	transferable = yes

	should_be_pinned_by_default = yes

	weight = 5000
}
﻿je_dreyfus_affair = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	immediate = {
		set_variable = {
			name = dreyfus_case_var # Dreyfus' case strength
			value = 0
		}
		set_variable = {
			name = rennes_retrial_var # Time until retrial
			value = 0
		}
	}

	complete = {
		custom_tooltip = {
			text = je_dreyfus_affair_tt.3
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
		custom_tooltip = {
			text = je_dreyfus_affair_tt.1
		}
	}

	on_complete = {
		trigger_event = { 
			id = dreyfus.8 
		}
		custom_tooltip = {
			text = je_dreyfus_affair_tt.4
		}
		if = {
			limit = {
				var:dreyfus_case_var <= 4
			}
			set_variable = dreyfus_trial_reincarceration
		}
		if = {
			limit = {
				var:dreyfus_case_var >= 5
				var:dreyfus_case_var <= 9
			}
			set_variable = dreyfus_trial_lesser_sentence
		}
		if = {
			limit = {
				var:dreyfus_case_var >= 10
			}
			set_variable = dreyfus_trial_exoneration
		}
	}

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = rennes_retrial_var
				add = 1
			}
		}
		random_events = {
			75 = 0
			5 = dreyfus.4
			5 = dreyfus.5
			5 = dreyfus.6
			5 = dreyfus.7
			5 = dreyfus.9
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_dreyfus_status
			}
		}
	}

	current_value = {
		value = var:rennes_retrial_var
	}

	goal_add_value = {
		value = 60  #  5 Years
	}

	weight = 100

	should_be_pinned_by_default = yes
	
	transferable = no

	progressbar = yes
}

﻿je_divided_monarchists = {
	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

	immediate = {
		fra_set_divided_monarchist_variables = yes
		random_law = {
			limit = { type = law_type:law_monarchy }
			save_scope_as = monarchy_scope
		}
	}

	scripted_progress_bar = divided_monarchists_orleanist_progress_bar
	scripted_progress_bar = divided_monarchists_legitimist_progress_bar
	scripted_progress_bar = divided_monarchists_bonapartist_progress_bar

	complete = {
		has_law = law_type:law_monarchy
		custom_tooltip = {
			text = je_divided_monarchists_02_tt
			has_variable = one_true_french_dynasty #Can only ever complete upon finishing the Cement the Rightful Dynasty journal entry.
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_divided_monarchists_03_tt
			fra_clear_divided_monarchist_variables = yes #Removes all variables used for math in this JE, to save memory and performance.
		}
	}

	scripted_button = french_monarchy_bonapartist_button
	scripted_button = french_monarchy_orleanist_button
	scripted_button = french_monarchy_legitimist_button

	status_desc = {
		first_valid = {
			triggered_desc = { # Cementing the Rightful Dynasty is active
				desc = status_dynasty_cementing_fra
				trigger = {
					has_journal_entry = je_cement_the_rightful_dynasty
				}
			}
			triggered_desc = { # In the lead and on the throne
				desc = status_in_lead_and_on_throne_fra
				trigger = {
					OR = {
						AND = {
							ruler_is_orleanist = yes
							scope:journal_entry = { 
								"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
								"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" 
							}
						}
						AND = {
							ruler_is_bonapartist = yes
							scope:journal_entry = { 
								"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
								"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" 
							}
						}
						AND = {
							ruler_is_legitimist = yes
							scope:journal_entry = { 
								"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
								"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" 
							}
						}
					}
				}
			}
			triggered_desc = {
				desc = status_throne_challenged_fra
				trigger = {
					OR = {
						scope:journal_entry = { 
							"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
							"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" 
						}
						scope:journal_entry = { 
							"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
							"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" 
						}
						scope:journal_entry = { 
							"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
							"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" 
						}
					}
				}
			}
			triggered_desc = { # Bar not moving, either no supported or not in government
				desc = status_no_dynasty_fra
				trigger = {
					always = yes
				}
			}
		}
	}

	modifiers_while_active = {
		fra_republican_unrest
	}

	on_weekly_pulse = {
		events = {
			french_pretenders.5
		}
		effect = {
			if = {
				limit = {
					NOT = {
						has_variable = fra_divided_monarchists_freeze #This variable stops iteration, and is granted by reaching 360 with one dynasty. It's reset when this JE is completed, or when je_cement_the_rightful_dynasty fails.
					}
				}
				fra_weekly_pulse_legitimist_progress = yes #Calculates how much the Legitimists will get next month. Updates weekly, but is not added until the monthly.
				fra_weekly_pulse_orleanist_progress = yes  #Calculates how much the Orleanists will get next month. Updates weekly, but is not added until the monthly.
				fra_weekly_pulse_bonapartist_progress = yes  #Calculates how much the Bonapartists will get next month. Updates weekly, but is not added until the monthly.
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_law = law_type:law_monarchy
					scope:journal_entry = { 
						OR = {
							"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" >= 360
							"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" >= 360
							"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" >= 360
						}
					}
					NOT = {
						has_variable = fra_divided_monarchists_freeze
					}
				}
				if = { #Fires the event to enthrone the pretender - 1 if contextualised as coup, 10 if contextualised as reinforcement.
					limit = {
						scope:journal_entry = { 
							"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
							"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" 
						}
					}
					if = {
						limit = {
							ruler_is_bonapartist = yes
						}
						trigger_event = { id = french_pretenders.10 popup = yes} #Reinforcement event - fires if the leading dynasty is the one in power.
					}
					else = {
						trigger_event = { id = french_pretenders.1 popup = yes} #Coup event - fires if the leading dynasty is not the one in power.
					}
				}
				else_if = {
					limit = {
						scope:journal_entry = { 
							"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
							"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" 
						}
					}
					if = {
						limit = {
							ruler_is_orleanist = yes
						}
						trigger_event = { id = french_pretenders.10 popup = yes}
					}
					else = {
						trigger_event = { id = french_pretenders.1 popup = yes}
					}
				}
				else_if = {
					limit = {
						scope:journal_entry = { 
							"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
							"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" 
						}
					}
					if = {
						limit = {
							ruler_is_legitimist = yes
						}
						trigger_event = { id = french_pretenders.10 popup = yes}
					}
					else = {
						trigger_event = { id = french_pretenders.1 popup = yes}
					}
				}
				fra_freeze_divided_monarchist_progress = yes #Freezes the bars so that they no longer accumulate progress on the monthly tick, and stay as they are. In the case that Cement the Rightful Dynasty fails, the bars will be set back.
			}
		}
		random_events = {
			400 = 0
			10 = french_pretenders_pulse.2
			10 = french_pretenders_pulse.3
			50 = french_pretenders_pulse.10
			10 = french_pretenders_pulse.11
			10 = french_pretenders_pulse.12
			10 = french_pretenders_pulse.13
			10 = french_pretenders_pulse.14
			10 = french_pretenders_pulse.15
			10 = french_pretenders_pulse.16
			10 = french_pretenders_pulse.17
			10 = french_pretenders_pulse.18
		}
	}

	fail = {
		any_interest_group = {
			is_marginal = no
			law_stance = {
				law = law_type:law_presidential_republic
				value > neutral
			}
		}
		capital = {
			turmoil >= 0.5
		}
		OR = {
			has_journal_entry = je_springtime_of_the_peoples
			radical_fraction = {
				value >= 0.25
			}
			any_civil_war = {
				civil_war_progress > 0.75
			}
		}
	}

	on_fail = {
		trigger_event = { id = french_pretenders.6 popup = yes }
		if = {
			limit = {
				has_variable = fra_divided_monarchists_freeze
			}
			remove_variable = fra_divided_monarchists_freeze #Clears the freeze variable so that progress can be made if this JE is somehow activated again.
		}
		fra_clear_divided_monarchist_variables = yes #Removes all variables used for math in this JE, to save memory and performance.
	}

	invalid = {
		NOT = { #Previous "Stamp Out Monarchism" requirement is deprecated - this can now come back from the dead properly upon restoring the monarchy.
			has_law = law_type:law_monarchy
		}
	}

	on_invalid = {
		if = {
			limit = {
				has_variable = fra_divided_monarchists_freeze
			}
			remove_variable = fra_divided_monarchists_freeze #Clears the freeze variable so that progress can be made if this JE is somehow activated again.
		}
		fra_clear_divided_monarchist_variables = yes #It should not be possible for this JE to somehow be deleted without these variables being cleared.
	}

	weight = 100

	should_be_pinned_by_default = yes
}

je_cement_the_rightful_dynasty = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content

	immediate = {
		set_variable = {
			name = french_dynastic_primary_progress_var
			value = 0
		}

		if = {
			limit = {
				any_scope_character = { ### This is load-bearing cursed script. Do NOT change this to ruler = { } ###
					is_ruler = yes
					has_variable = legitimist_leader
				}
			}
			set_variable = {
				name = legitimist_restoration_var
			}
		}
		else_if = {
			limit = {
				any_scope_character = {
					is_ruler = yes
					has_variable = orleanist_leader
				}
			}
			set_variable = {
				name = orleanist_restoration_var
			}
		}
		else_if = {
			limit = {
				any_scope_character = {
					is_ruler = yes
					has_variable = bonapartist_leader
				}
			}
			set_variable = {
				name = bonapartist_restoration_var
			}
		}
	}

	is_progressing = {
		NOT = {
			any_civil_war = {
				civil_war_progress > 0.10
			}
		}
		government_legitimacy >= 50
	}

	progress_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_cement_the_rightful_dynasty_progressing_fast
				trigger = {
					scope:journal_entry = {
						is_progressing = yes
					}
					government_legitimacy >= 90
				}
			}
			triggered_desc = {
				desc = je_cement_the_rightful_dynasty_progressing_normal
				trigger = {
					scope:journal_entry = {
						is_progressing = yes
					}
					government_legitimacy >= 75
				}
			}
			triggered_desc = {
				desc = je_cement_the_rightful_dynasty_progressing_slow
				trigger = {
					scope:journal_entry = {
						is_progressing = yes
					}
				}
			}
			triggered_desc = {
				desc = je_cement_the_rightful_dynasty_progressing_civil_war
				trigger = {
					any_civil_war = {
						civil_war_progress > 0.10
					}
				}
			}
			desc = je_cement_the_rightful_dynasty_progressing_low_legitimacy
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
		NOT = {
			any_civil_war = {
				civil_war_progress > 0.10
			}
		}
	}

	on_complete = {
		trigger_event = { id = french_pretenders_pulse.5 popup = yes }
		set_variable = {
			name = one_true_french_dynasty
		}
	}

	fail = {
		OR = {
			NOT = { has_law = law_type:law_monarchy }
			custom_tooltip = {
				text = je_divided_monarchists_02_fail_tt
				OR = {
					AND = {
						has_variable = orleanist_restoration_var
						OR = {
							ruler = {
								OR = {
									has_variable = legitimist_leader
									has_variable = bonapartist_leader
								}
							}
						}
					}
					AND = {
						has_variable = legitimist_restoration_var
						OR = {
							ruler = {
								OR = {
									has_variable = orleanist_leader
									has_variable = bonapartist_leader
								}
							}
						}
					}
					AND = {
						has_variable = bonapartist_restoration_var
						OR = {
							ruler = {
								OR = {
									has_variable = orleanist_leader
									has_variable = legitimist_leader
								}
							}
						}
					}
				}
			}
		}
	}

	on_fail = {
		remove_variable = french_dynastic_primary_progress_var
		if = {
			limit = {
				has_variable = fra_divided_monarchists_freeze
			}
			remove_variable = fra_divided_monarchists_freeze
		}
		if = {
			limit = {
				has_variable = orleanist_restoration_var
			}
			remove_variable = orleanist_restoration_var
		}
		if = {
			limit = {
				has_variable = legitimist_restoration_var
			}
			remove_variable = legitimist_restoration_var
		}
		if = {
			limit = {
				has_variable = bonapartist_restoration_var
			}
			remove_variable = bonapartist_restoration_var
		}
		je:je_divided_monarchists = {
			add_progress = { value = -300 name = divided_monarchists_bonapartist_progress_bar }
			add_progress = { value = -300 name = divided_monarchists_legitimist_progress_bar }
			add_progress = { value = -300 name = divided_monarchists_orleanist_progress_bar }
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					scope:journal_entry = {
						is_progressing = yes
					}
				}
				if = {
					limit = {
						government_legitimacy >= 90
					}
					change_variable = {
						name = french_dynastic_primary_progress_var
						add = 2
					}
				}
				else_if = {
					limit = {
						government_legitimacy >= 75
					}
					change_variable = {
						name = french_dynastic_primary_progress_var
						add = 1
					}
				}
				else = {
					change_variable = {
						name = french_dynastic_primary_progress_var
						add = 0.5
					}
				}
			}
		}
		random_events = {
			90 = 0
			10 = french_pretenders_pulse.1
			5 = french_pretenders_pulse.4
		}
	}

	current_value = {
		value = root.var:french_dynastic_primary_progress_var
	}

	goal_add_value = {
		value = 120
	}

	progressbar = yes

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_indochina = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_foreign_affairs

	immediate = {
		random_country = {
			limit = {
				has_variable = indochina_campaign_target
			}
			save_scope_as = indochina_conquest_target
			capital = {
				state_region = {
					set_variable = indochina_capital_state
					save_scope_as = indochina_capital_state_scope
				}
			}
		}
		set_global_variable = indochina_intervention_happened
	}

	complete = {
		is_subject = no
		is_at_war = no
		OR = {
			trigger_if = {
				limit = {
					exists = scope:indochina_conquest_target
				}
				custom_tooltip = {
					text = conquered_indochina_target_tt
					NOT = { exists = scope:indochina_conquest_target }
				}
			}
			trigger_else = {
				custom_tooltip = {
					text = conquered_indochina_target_blank_tt
					NOT = { exists = scope:indochina_conquest_target }
				}
			}
			AND = {
				exists = scope:indochina_conquest_target
				scope:indochina_conquest_target ?= { is_subject_of = ROOT }
			}
		}
		custom_tooltip = {
			text = indochina_state_controlled_by_us_or_puppet
			any_state = {
				OR = {
					owner = ROOT
					owner = { is_subject_of = ROOT }
				}
				state_region = {
					has_variable = indochina_capital_state
				}
			}
		}
		custom_tooltip = {
			text = indochina_five_states_conquered
			any_state = {
				OR = {
					owner = ROOT
					owner = { is_subject_of = ROOT }
				}
				region = sr:region_indochina
				count >= 5
			}
		}
	}

	on_complete = {
		trigger_event = { id = indochina.4 }
	}
	
	weight = 100
	
	transferable = no

	invalid = {
	}

	should_be_pinned_by_default = yes
}

﻿je_nihilist_movement = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		has_technology_researched = realism
		NOT = {
			has_technology_researched = socialism
		}
		has_law = law_type:law_state_religion
	}

	possible = {
		has_technology_researched = realism
		empty_agitator_slots >= 1
		NOT = {
			has_technology_researched = socialism
		}
		has_law = law_type:law_state_religion
		OR = {
			has_law = law_type:law_monarchy
			has_law = law_type:law_theocracy
		}
		OR = {
			has_law = law_type:law_autocracy
			has_law = law_type:law_oligarchy
		}
		ig:ig_intelligentsia = {
			is_marginal = no
			OR = {
				is_being_suppressed = yes
				ig_approval < 0
			}
		}
	}

	immediate = {
		set_variable = {
			name = nihilism_progress_var
			value = 1
		}
		ig:ig_intelligentsia = {
			save_scope_as = nihilist_ig
		}
		trigger_event = { id = nihilism.1 popup = yes }
	}

	complete = {
		OR = {
			custom_tooltip = {
				text = je_nihilist_movement_trigger_tt_1
				scope:journal_entry = {
					is_goal_complete = yes
				}
				AND = {
					OR = {
						has_law = law_type:law_outlawed_dissent
						has_law = law_type:law_censorship
					}
					any_interest_group = {
						filter = {
							OR = {
								leader = {
									has_ideology = ideology:ideology_atheist
								}
								any_scope_character = {
									has_role = agitator
									has_ideology = ideology:ideology_atheist
								}
							}
						}
						is_being_suppressed = yes
						count = all
					} 
				}
			}
			custom_tooltip = {
				text = je_nihilist_movement_trigger_tt_2
				scope:journal_entry = {
					is_goal_complete = yes
				}
				ig:ig_intelligentsia = {
					OR = {
						ig_approval > 0
						is_marginal = yes
					}
				}
			}
		}
	}

	on_complete = {
		trigger_event = { id = nihilism.2 popup = yes }
	}

	fail = {
		OR = {
			has_law = law_type:law_state_atheism
			has_law = law_type:law_total_separation
		}
	}

	on_fail = {
		add_loyalists = {
			value = medium_radicals
			pop_type = academics
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					OR = {
						ig:ig_intelligentsia = {
							ig_approval > 0
						}
						ig:ig_intelligentsia = {
							is_marginal = yes
						}
						AND = {
							OR = {
								has_law = law_type:law_outlawed_dissent
								has_law = law_type:law_censorship
							}
							any_interest_group = {
								filter = {
									OR = {
										leader = {
											has_ideology = ideology:ideology_atheist
										}
										any_scope_character = {
											has_role = agitator
											has_ideology = ideology:ideology_atheist
										}
									}
								}
								is_being_suppressed = yes
								count = all
							} 
						}
					}
					
				}
				change_variable = {
					name = nihilism_progress_var
					add = 1
				}
			}
		}
		random_events = {
			160 = 0
			30 = nihilism.4
			10 = nihilism.5
			10 = nihilism.6
			10 = nihilism.7
			10 = nihilism.8
			10 = nihilism.9
			10 = nihilism.10
			10 = nihilism.11
			10 = nihilism.12
		}
	}

	timeout = 3650

	on_timeout = {
		trigger_event = { id = nihilism.3 popup = yes }
	}

	current_value = {
		value = root.var:nihilism_progress_var
	}

	goal_add_value = {
		add = 60
	}

	weight = 100

	progressbar = yes

	should_be_pinned_by_default = yes
}

﻿je_the_paris_commune_display = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		has_dlc_feature = voice_of_the_people_content
		NOT = { has_global_variable = paris_commune_happened }
		c:FRA ?= this
		has_technology_researched = socialism
		has_technology_researched = anarchism
		NOT = { has_law = law_type:law_council_republic }
	}

	possible = {
		hidden_trigger = {
			NOT = { has_global_variable = paris_commune_happened }
		}
		c:FRA ?= this
		any_scope_state = {
			state_region = s:STATE_ILE_DE_FRANCE
			turmoil >= 0.2
		}
		OR = {
			custom_tooltip = {
				text = lost_war_tt
				OR = {
					has_variable = recently_lost_war
					AND = {
						has_variable = recently_had_war
						NOT = {
							has_variable = recently_won_war
						}
					}
				}
			}
			custom_tooltip = {
				text = lacks_homeland_tt
				any_state = {
					state_region = { is_homeland = cu:french }
					NOT = { owner = ROOT }
				}
			}
		}
        OR = {
        	socialist_revolution_ongoing = yes
        	liberal_revolution_ongoing = yes
        }
	}

	immediate = {
		trigger_event = { id = paris_commune.1 popup = yes }
	}

	fail = {
		custom_tooltip = {
			text = je_the_paris_commune_france_spawned
			has_variable = paris_commune_spawn
		}
	}

	on_timeout = {

	}

	on_monthly_pulse = {
		
	}

	should_be_pinned_by_default = no

	weight = 8000
}

je_the_paris_commune_france = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_historical_content
	
	can_revolution_inherit = no

	scripted_button = je_the_paris_commune_france_button_a
	scripted_button = je_the_paris_commune_france_button_b

	immediate = {
		add_modifier = {
			name = fra_paris_commune_drain
			multiplier = money_amount_multiplier_more_large
		}

		c:FRA = {
			save_scope_as = france_scope
		}
		c:PRC = {
			save_scope_as = commune_scope
		}
		set_global_variable = {
			name = paris_commune_drift_final_var
			value = 0
		}
		set_variable = { name = PRC_money_transfer value = money_amount_multiplier_very_large }
	}

	complete = {
		custom_tooltip = {
			text = je_the_paris_commune_france_complete
			global_var:paris_commune_progress_var <= 0
		}
	}

	on_complete = {
		trigger_event = { id = paris_commune.2 popup = yes }
		hidden_effect = {
			remove_modifier = fra_paris_commune_drain
		}
	}

	fail = {
		custom_tooltip = {
			text = je_the_paris_commune_communard_complete
			global_var:paris_commune_progress_var >= 100
		}
	}

	on_fail = {
		trigger_event = { id = paris_commune.3 popup = yes }
		hidden_effect = {
			remove_modifier = fra_paris_commune_drain
		}
	}

	invalid = {
		OR = {
			NOT = {
				any_scope_state = {
					state_region = s:STATE_ILE_DE_FRANCE
				}
			}
			has_war_with = c:PRC
			NOT = {
				exists = c:PRC
			}
			has_global_variable = paris_commune_invalid
		}	
	}

	on_invalid = {
		hidden_effect = {
			remove_modifier = fra_paris_commune_drain
		}
	}

	on_timeout = {
		trigger_event = { id = paris_commune.2 popup = yes }
		hidden_effect = {
			remove_modifier = fra_paris_commune_drain
		}
	}

	modifiers_while_active = {
		
	}

	on_weekly_pulse = {
		effect = {
			paris_commune_update_tick = yes
		}
	}

	on_monthly_pulse = {
		effect = {			
			paris_commune_update_tick = yes
			change_global_variable = {
				name = paris_commune_progress_var
				add = global_var:paris_commune_drift_final_var
			}
			if = { #Adversarial system - if you side with France, the automated adversary fires Commune events, if not, it fires Versailles events.
				limit = {
					has_variable = paris_commune_fra_perspective
				}
				random_list = {
					50 = {
						paris_commune_automated_opposition_paris = yes
					}
					50 = {

					}
				}
			}
			else_if = {
				limit = {
					has_variable = paris_commune_prc_perspective
				}
				random_list = {
					50 = {
						paris_commune_automated_opposition_versailles = yes
					}
					50 = {

					}
				}
			}
		}
		random_events = {
			10 = paris_commune_pulse_events.1 # Seizing Church and State
			10 = paris_commune_pulse_events.2 # Forty Warning Shots
			10 = paris_commune_pulse_events.3 # For Want of a Nail
			10 = paris_commune_pulse_events.4 # Petrol Maidens
			10 = paris_commune_pulse_events.5 # Enemy Combatants
			10 = paris_commune_pulse_events.6 # A Priest for Your Captain
			10 = paris_commune_pulse_events.7 # Clapped With Irons
			10 = paris_commune_pulse_events.8 # Four-Hundred Gun Salute
			10 = paris_commune_pulse_events.9 # Our Bodies, Our Rules
			10 = paris_commune_pulse_events.10 # A Fortress Falls
			10 = paris_commune_pulse_events.11 # Working Co-op
			10 = paris_commune_pulse_events.12 # Off to School
			10 = paris_commune_pulse_events.13 # Capital Punishments
			10 = paris_commune_pulse_events.14 # First In, Best Dressed
			10 = paris_commune_pulse_events.15 # Recusing the Republicans
			10 = paris_commune_pulse_events.16 # Go and Fight!
		}
	}

	should_be_pinned_by_default = yes

	weight = 8000

	current_value = {
		value = global_var:paris_commune_progress_var
	}

	goal_add_value = {
		add = 100
	}

	timeout = 730

	progressbar = yes
}

je_the_paris_commune_communards = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_historical_content
	
	can_revolution_inherit = no

	immediate = {
		c:FRA = {
			save_scope_as = france_scope
		}
		c:PRC = {
			save_scope_as = commune_scope
		}
		add_modifier = {
			name = fra_paris_commune_drain_proceeds
			multiplier = c:FRA.var:PRC_money_transfer
		}
	}

	complete = {
		custom_tooltip = {
			text = je_the_paris_commune_communard_complete
			global_var:paris_commune_progress_var >= 100
		}
	}

	on_complete = {
		hidden_effect = {
			c:FRA = {
				trigger_event = { id = paris_commune.3 popup = yes }
			}
		}
		show_as_tooltip = {
			trigger_event = { id = paris_commune.3 popup = yes }
		}
		remove_modifier = fra_paris_commune_drain_proceeds
	}

	fail = {
		custom_tooltip = {
			text = je_the_paris_commune_france_complete
			global_var:paris_commune_progress_var <= 0
		}
	}

	on_fail = {
		show_as_tooltip = {
			trigger_event = { id = paris_commune.2 popup = yes }
		}
		remove_modifier = fra_paris_commune_drain_proceeds
	}

	invalid = {
		OR = {
			NOT = {
				any_scope_state = {
					state_region = s:STATE_ILE_DE_FRANCE
				}
			}
			has_war_with = c:FRA
			NOT = {
				exists = c:FRA
			}
			has_global_variable = paris_commune_invalid
		}	
	}

	on_timeout = {
		show_as_tooltip = {
			trigger_event = { id = paris_commune.2 popup = yes }
		}
		remove_modifier = fra_paris_commune_drain_proceeds
	}

	on_invalid = {
		remove_modifier = fra_paris_commune_drain_proceeds
	}

	should_be_pinned_by_default = yes

	weight = 8000

	current_value = {
		value = global_var:paris_commune_progress_var
	}

	goal_add_value = {
		add = 100
	}

	timeout = 730
	
	progressbar = yes
}
﻿je_the_eastern_border = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

    scripted_button = je_the_eastern_border_treaty_of_aigun
    scripted_button = je_the_eastern_border_treaty_of_beijing
    scripted_button = je_the_eastern_border_russia_chuguchak_protocol
    
    is_shown_when_inactive = {
        exists = c:RUS
        THIS = c:RUS
        is_subject = no
    }
      possible = {
        has_technology_researched = nationalism
        NAND = {
            owns_entire_state_region = STATE_OUTER_MANCHURIA 
            owns_entire_state_region = STATE_JETISY 
            owns_entire_state_region = STATE_TOMSK
            owns_entire_state_region = STATE_KIRGHIZIA  
        }
    }
    immediate = {
        c:CHI = {
            save_scope_as = china_scope
        }
        s:STATE_AMUR = {
            add_claim = c:RUS
        }
        s:STATE_OUTER_MANCHURIA = {
            add_claim = c:RUS
        }
        s:STATE_JETISY = {
            add_claim = c:RUS
        }
        s:STATE_ALTAI = {
            add_claim = c:RUS
        }
        s:STATE_KIRGHIZIA = {
            add_claim = c:RUS
        }
    }
    complete = {
        owns_entire_state_region = STATE_AMUR
        owns_entire_state_region = STATE_OUTER_MANCHURIA 
        owns_entire_state_region = STATE_JETISY 
        owns_entire_state_region = STATE_ALTAI
        OR = {
            owns_entire_state_region = STATE_KIRGHIZIA
            any_country = {
                is_subject_of = c:RUS
                owns_entire_state_region = STATE_KIRGHIZIA
            }
        }
    }
    on_complete = {
        trigger_event = { id = russo_chinese.3 } # The Ruler of the East
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

je_caucasian_war = {
    icon = "gfx/interface/icons/event_icons/event_skull.dds"

    group = je_group_historical_content

    immediate = {
        set_global_variable = caucasian_war_happened
        c:CIR = {
            save_scope_as = circassia_scope
        }
        c:CHC = {
            save_scope_as = imamate_scope
        }
        c:RUS = {
            save_scope_as = russia_scope
        }
        every_scope_state = {
            limit = {
                OR = {
                    state_region = s:STATE_KUBAN
                    state_region = s:STATE_NORTH_CAUCASUS
                    state_region = s:STATE_DAGESTAN
                }
            }
            add_modifier = caucasus_war_attacker
        }
    }

    scripted_button = russia_escalate_caucasian_war

    status_desc = {
        first_valid = {
            triggered_desc = {
                desc = caucasian_war_milyutin_loc
                trigger = {
                    has_variable = milyutin_memorandum_accepted
                }
            }
            triggered_desc = {
                desc = caucasian_war_escalated_loc
                trigger = {
                    OR = {
                        has_variable = escalated_caucasian_war
                        NAND = {
                           c:CHC ?= {
                                has_truce_with = root
                            }
                            c:CIR ?= {
                                has_truce_with = root
                            }
                        }
                    }
                }
            }
            triggered_desc = {
                desc = caucasian_war_non_escalated_loc
                trigger = {
                    c:CHC ?= {
                        has_truce_with = root
                    }
                    c:CIR ?= {
                        has_truce_with = root
                    }
                }
            }    
        }
    }

    complete = {
        custom_tooltip = {
            text = caucasus_secured_tt
            NOT = {
                exists = c:CIR
                exists = c:CHC
            }
        }
		s:STATE_KUBAN = {
			trigger_if = {
				limit = {
					NOT = { root = { has_state_in_state_region = STATE_KUBAN } }
				}
				root = { has_state_in_state_region = STATE_KUBAN }
			}
			region_state:RUS ?= {
				turmoil <= 0.25
				is_split_state = no
			}
		}
		s:STATE_DAGESTAN = {
			trigger_if = {
				limit = {
					NOT = { root = { has_state_in_state_region = STATE_DAGESTAN } }
				}
				root = { has_state_in_state_region = STATE_DAGESTAN }
			}
			region_state:RUS ?= {
				turmoil <= 0.25
				is_split_state = no
			}
		}
		s:STATE_NORTH_CAUCASUS = {
			trigger_if = {
				limit = {
					NOT = { root = { has_state_in_state_region = STATE_NORTH_CAUCASUS } }
				}
				root = { has_state_in_state_region = STATE_NORTH_CAUCASUS }
			}
			region_state:RUS ?= {
				turmoil <= 0.25
				is_split_state = no
			}
		}
    }

    on_complete = {
        set_global_variable = caucasus_consolidated_var
        if = {
            limit = {
                NOT = {
                    has_variable = imamate_defeated
                }
            }
            trigger_event = { id = caucasuswar_end.3 }
        }
        if = {
            limit = {
                NOT = {
                    has_variable = circassia_defeated
                }
            }
            trigger_event = { id = caucasuswar_end.1 }
        }
    }

    fail = {
        custom_tooltip = {
            text = caucasus_lost_tt
            NOT = {
                any_scope_state = {
                    state_region = s:STATE_DAGESTAN
                }
                any_scope_state = {
                    state_region = s:STATE_KUBAN
                }
                any_scope_state = {
                    state_region = s:STATE_NORTH_CAUCASUS
                }
            }
        }
        
    }

    on_fail = {
        set_global_variable = caucasus_failure_var
        trigger_event = { id = caucasuswar_end.4 days = 0 }
        hidden_effect = {
            every_state = {
                limit = {
                    OR = {
                        state_region = s:STATE_KUBAN
                        state_region = s:STATE_NORTH_CAUCASUS
                        state_region = s:STATE_DAGESTAN
                    }
                }
                remove_modifier = caucasus_war_attacker
            }       
        }
    }

    on_weekly_pulse = {
        events = {
            caucasuswar_end.1
            caucasuswar_end.3
        }
    }

    on_monthly_pulse = {
        random_events = {
            200 = 0
            10 = caucasuswar.1
            10 = caucasuswar.2
            10 = caucasuswar.3
            10 = caucasuswar.4
            50 = caucasuswar.6
        }
    }

    weight = 100

    should_be_pinned_by_default = yes
}

je_circassian_expulsions = {
    icon = "gfx/interface/icons/event_icons/event_skull.dds"

    group = je_group_historical_content

    is_shown_when_inactive = {
        has_variable = milyutin_memorandum_accepted
    }

    possible = {
        custom_tooltip = {
            text = circassia_defeated_tt
            NOT = {
                exists = c:CIR
            }
        }
        cu:circassian = {
            culture_is_discriminated_in = ROOT
        }
        owns_entire_state_region = STATE_KUBAN
    }

    immediate = {
        cu:circassian = {
            save_scope_as = circassian_culture_scope
        }
        random_country = {
			limit = {
				any_scope_state = {
                    is_incorporated = yes
					OR = {
						state_region = s:STATE_EASTERN_THRACE
						state_region = s:STATE_KASTAMONU
						state_region = s:STATE_TRABZON
					}
				}
			}
			save_scope_as = expulsion_destination_country
            trigger_event = { id = caucasus_expulsions.2 days = 3 popup = yes }
		}
    }

    scripted_button = russia_halt_circassian_expulsions

    complete = {
        any_scope_state = {
            filter = {
                region = sr:region_caucasus
            }
            custom_tooltip = {
                text = circassians_below_5_percent
                culture_percent_state = {
                    target = cu:circassian
                    value <= 0.05
                }
            }
            percent = 1
        }
    }

    on_complete = {

    }

    fail = {
       OR = {
            custom_tooltip = {
                text = has_halted_deportations_tt
                has_variable = halted_circassian_deportations
            }
            NOT = {
                cu:circassian = {
                    culture_is_discriminated_in = c:RUS
                }
            }
        }
    }

    on_fail = {

    }

    on_monthly_pulse = {
        events = {
            caucasus_expulsions.1
        }
        effect = {
            if = {
                limit = {
                    has_variable = circassian_events_hidden
                    NOT = {
                        has_variable = circassian_expulsion_stall
                    }
                }
                random_scope_state = {
                    limit = {
                        region = sr:region_caucasus
                        any_scope_pop = {
                            culture = cu:circassian
                        }
                    }
                    save_scope_as = circassian_expulsion_state
                }
                random_country = {
                    limit = {
                        any_scope_state = {
                            OR = {
                                state_region = s:STATE_EASTERN_THRACE
                                state_region = s:STATE_KASTAMONU
                                state_region = s:STATE_TRABZON
                            }
                        }
                    }
                    save_scope_as = expulsion_destination_country
                    random_scope_state = {
                        limit = {
                            OR = {
                                state_region = s:STATE_EASTERN_THRACE
                                state_region = s:STATE_KASTAMONU
                                state_region = s:STATE_TRABZON
                            }
                        }
                        save_scope_as = expulsion_destination_state
                    }
                }
                cu:circassian = {
                    save_scope_as = circassian_culture
                }
                set_variable = {
                    name = circassian_expulsion_stall
                    months = 3
                }
                scope:circassian_expulsion_state = {
                    if = {
                        limit = {
                            scope:expulsion_destination_country = {
                                has_variable = refused_circassian_refugees
                            }
                        }
                        kill_population_percent_in_state = {
                            percent = 0.06
                            culture = cu:circassian
                        }
                    }
                    else = {
                        kill_population_percent_in_state = {
                            percent = 0.04
                            culture = cu:circassian
                        }
                    }
                    custom_tooltip = {
                        text = three_pops_deported_tt
                        random_scope_pop = {
                            limit = {
                                culture = cu:circassian
                                strata = poor
                            }
                            move_pop = scope:expulsion_destination_state
                        }
                        random_scope_pop = {
                            limit = {
                                culture = cu:circassian
                                strata = middle
                            }
                            move_pop = scope:expulsion_destination_state
                        }
                        random_scope_pop = {
                            limit = {
                                culture = cu:circassian
                                strata = rich
                            }
                            move_pop = scope:expulsion_destination_state
                        }
                    }
                }
                scope:expulsion_destination_country = {
                    post_notification = ottoman_circassian_refugees_arrived
                }
                post_notification = circassians_deported_message
            }

            random_list = {
                90 = {

                }
                10 = {
                    random_country = {
                        limit = {
                            NOT = {
                                this = root
                            }
                            any_scope_state = {
                                OR = {
                                    state_region = s:STATE_EASTERN_THRACE
                                    state_region = s:STATE_KASTAMONU
                                    state_region = s:STATE_TRABZON
                                }
                            }
                        }
                        trigger_event = { id = caucasus_expulsions.3 popup = yes }
                    }
                }
            }
        }
    }

    weight = 100

    should_be_pinned_by_default = yes
}

je_caucasian_war_circassia = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_historical_content

    modifiers_while_active = {
		caucasus_war_defender_circassia
	}

    immediate = {
         c:RUS = {
            save_scope_as = russia_scope
        }
        s:STATE_KUBAN = {
            save_scope_as = kuban_scope
        }
    }

    status_desc = {
        first_valid = {
            triggered_desc = {
                desc = caucasian_war_milyutin_loc
                trigger = {
                    c:RUS = {
                        has_variable = milyutin_memorandum_accepted
                    }
                }
            }
            triggered_desc = {
                desc = caucasian_war_escalated_loc
                trigger = {
                    OR = {
                        c:RUS = {
                            has_variable = escalated_caucasian_war
                        }
                        NAND = {
                           c:CHC ?= {
                                has_truce_with = c:RUS
                            }
                            c:CIR ?= {
                                has_truce_with = c:RUS
                            }
                        }
                    }
                }
            }
            triggered_desc = {
                desc = caucasian_war_non_escalated_loc
                trigger = {
                    c:CHC ?= {
                        has_truce_with = c:RUS
                    }
                    c:CIR ?= {
                        has_truce_with = c:RUS
                    }
                }
            }    
        }
    }

    complete = {
        custom_tooltip = {
            text = russia_out_of_kuban_tt
            c:RUS ?= {
                NOT = {
                    any_scope_state = {
                        state_region = s:STATE_KUBAN
                    }
                }
            }
        }
    }

    on_complete = {
        trigger_event = { id = caucasuswar_end.2 }
        hidden_effect = {
            set_variable = honor_and_life_achievement
        }
    }

    on_monthly_pulse = {
        effect = {
            
        }
        random_events = {
            100 = 0
            30 = caucasuswar.7
            10 = caucasuswar.10
        }
    }

    weight = 100

    should_be_pinned_by_default = yes
}

je_caucasian_war_imamate = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_historical_content

    modifiers_while_active = {
		caucasus_war_defender_imamate
	}

    immediate = {
        c:RUS = {
            save_scope_as = russia_scope
        }
        s:STATE_NORTH_CAUCASUS = {
            save_scope_as = north_caucasus_scope
        }
        s:STATE_DAGESTAN = {
            save_scope_as = dagestan_scope
        }
    }

    scripted_button = imamate_dispatch_muhammad_amin

    status_desc = {
        first_valid = {
            triggered_desc = {
                desc = caucasian_war_milyutin_loc
                trigger = {
                    c:RUS = {
                        has_variable = milyutin_memorandum_accepted
                    }
                }
            }
            triggered_desc = {
                desc = caucasian_war_escalated_loc
                trigger = {
                    OR = {
                        c:RUS = {
                            has_variable = escalated_caucasian_war
                        }
                        NAND = {
                           c:CHC ?= {
                                has_truce_with = c:RUS
                            }
                            c:CIR ?= {
                                has_truce_with = c:RUS
                            }
                        }
                    }
                }
            }
            triggered_desc = {
                desc = caucasian_war_non_escalated_loc
                trigger = {
                    c:CHC ?= {
                        has_truce_with = c:RUS
                    }
                    c:CIR ?= {
                        has_truce_with = c:RUS
                    }
                }
            }    
        }
    }

    complete = {
        custom_tooltip = {
            text = russia_out_of_dagestan_tt
            c:RUS ?= {
                NOT = {
                    any_scope_state = {
                        state_region = s:STATE_DAGESTAN
                    }
                }
            }
        }
        custom_tooltip = {
            text = russia_out_of_north_caucasus_tt
            c:RUS ?= {
                NOT = {
                    any_scope_state = {
                        state_region = s:STATE_NORTH_CAUCASUS
                    }
                }
            }
        }
    }

    on_complete = {
        trigger_event = { id = caucasuswar_end.5 }
    }

    weight = 100

    should_be_pinned_by_default = yes
}

je_pacify_the_steppes = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_historical_content

    possible = {
        #Enabled at start
    }

    immediate = {
        c:RUS = {
            save_scope_as = russia_scope
        }
        random_character_in_void = {
            limit = {
                has_variable = kenesary_variable
            }
            save_scope_as = kenesary_scope
        }
        set_global_variable = kazakhstan_revolt_happened
    }

    complete = {
        any_subject_or_below = {
            filter = {
                country_has_primary_culture = cu:kazak
            }
            is_subject_type = subject_type_puppet
            liberty_desire <= 25
            percent = 1
        }
    }

    on_complete = {
        trigger_event = { id = kazakhstan_events.3 }
        set_global_variable = kazakhstan_victory_var
    }   

    fail = {
        OR = {
            any_civil_war = {
                civil_war_progress > 0.5
            }
            country_rank < rank_value:great_power
            OR = {
                trigger_if = {
                    limit = {
                        exists = c:KZH
                    }
                    c:KZH ?= {
                        liberty_desire >= 80
                    }
                }
                trigger_if = {
                    limit = {
                        exists = c:UZH
                    }
                    c:UZH ?= {
                        liberty_desire >= 80
                    }
                }
                trigger_if = {
                    limit = {
                        exists = c:OZH
                    }
                    c:OZH ?= {
                        liberty_desire >= 80
                    }
                }
            }   
        }
    }

    on_fail = {
        trigger_event = { id = kazakhstan_events.1 }
        hidden_effect = {
            random_character_in_void = {
                limit = {
                    has_variable = kenesary_variable
                }
                kill_character = {
                    hidden = yes
                }
            }
        }
    }

    invalid = {
        c:KZH ?= {
            NOT = {
                is_subject_of = ROOT
            }
        }
        c:UZH ?= {
            NOT = {
                is_subject_of = ROOT
            }
        }
        c:OZH ?= {
            NOT = {
                is_subject_of = ROOT
            }
        }
    }

    timeout = 3650

    on_timeout = {
        trigger_event = { id = kazakhstan_events.1 }
        hidden_effect = {
            random_character_in_void = {
                limit = {
                    has_variable = kenesary_variable
                }
               kill_character = yes
            }
        }
    }

    on_monthly_pulse = {
        effect = {
            random_list = {
                200 = {

                }
                10 = {
                    random_country = {
                        limit = {
                            country_has_primary_culture = cu:kazak
                            is_subject_of = root
                        }
                        trigger_event = { id = kazakhstan_events.6 }
                    }
                }
                10 = {
                    random_country = {
                        limit = {
                            OR = {
                                country_has_primary_culture = cu:kirgiz	
                                country_has_primary_culture = cu:uzbek	
                                country_has_primary_culture = cu:turkmen	
                                country_has_primary_culture = cu:uighur	
                            }
                            has_interest_marker_in_region = region_central_asia
                            c:RUS.relations:root <= 0
                            NOT = {
                                has_variable = kenesary_recognizer_var
                            }
                        }
                        trigger_event = { id = kazakhstan_events.7 }
                    }
                }
            }
        }
        random_events = {
            200 = 0
            10 = kazakhstan_events.4
            10 = kazakhstan_events.5
            10 = kazakhstan_events.8
        }
    }

    weight = 100

    should_be_pinned_by_default = yes
}

je_the_last_kazakh_khan = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

    group = je_group_historical_content

    immediate = {
        c:RUS = {
            save_scope_as = russia_scope
        }
        c:KAZ = {
            save_scope_as = khanate_scope
            ruler = {
                save_scope_as = kenesary_scope
            }
        }
    }

    complete = {
        OR = {
            custom_tooltip = {
                text = khanate_is_destroyed_tt
                NOT = {
                    exists = c:KAZ
                }
            }
            c:KAZ = {
                is_subject_of = c:RUS
            }
        }
    }

    on_complete = {
        trigger_event = { id = kazakhstan_events.3 }
        set_global_variable = kazakhstan_victory_var
    }

    fail = {
        AND = {
            has_truce_with = c:KAZ
            c:KAZ = {
                NOT = {
                    is_subject_of = ROOT
                }
            }
        }
    }

    on_fail = {
        set_global_variable = kazakhstan_defeat_var
    }

    weight = 100

    should_be_pinned_by_default = yes
}

je_conquest_of_central_asia = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"
    
    group = je_group_historical_content

    scripted_button = je_conquest_of_central_asia_turkmen_button
    
    is_shown_when_inactive = {
        has_dlc_feature = ep1_content
        exists = c:RUS
        THIS = c:RUS
        is_subject = no
        any_scope_state = {
            state_region = s:STATE_URALSK
        }
        any_scope_state = {
            state_region = s:STATE_SYRDARYA
        }
        owns_entire_state_region = STATE_AKTOBE
        owns_entire_state_region = STATE_AKMOLINSK
        owns_entire_state_region = STATE_SEMIRECHE
    }
    possible = {
        has_technology_researched = civilizing_mission
        any_scope_state = {
            state_region = s:STATE_URALSK
        }
        any_scope_state = {
            state_region = s:STATE_SYRDARYA
        }
        owns_entire_state_region = STATE_AKTOBE
        owns_entire_state_region = STATE_AKMOLINSK
        owns_entire_state_region = STATE_SEMIRECHE
    }
    immediate = {
        trigger_event = { id = russian_central_asia.1 } # Central Asia initialisation
        set_global_variable = central_asia_consolidation_happened
        if = {
            limit = {
                exists = c:TRM
            }
            c:TRM = {
                save_scope_as = turkmenia_scope
            }
        }
        else = {
            random_neighbouring_state = {
                limit = {
                    OR = {
                        state_region = s:STATE_TURKMENIA
                        state_region = s:STATE_SYRDARYA
                        state_region = s:STATE_UZBEKIA
                        state_region = s:STATE_KIRGHIZIA
                        state_region = s:STATE_KHIVA
                        state_region = s:STATE_TAJIKISTAN
                    }
                    not = { owner = ROOT }
                }
                owner = {
                    save_scope_as = turkmenia_scope
                }
            }
        }
    }
    complete = {
        country_or_subject_owns_entire_state_region = STATE_SYRDARYA
        country_or_subject_owns_entire_state_region = STATE_UZBEKIA
        country_or_subject_owns_entire_state_region = STATE_KIRGHIZIA
        country_or_subject_owns_entire_state_region = STATE_KHIVA # Chorasmia
        country_or_subject_owns_entire_state_region = STATE_TURKMENIA
        country_or_subject_owns_entire_state_region = STATE_TAJIKISTAN
        country_or_subject_owns_entire_state_region = STATE_FERGANA
        country_or_subject_owns_entire_state_region = STATE_MERZ # Merv
    }
    on_complete = {
        trigger_event = { id = russian_central_asia.2 } # The Great Game
        set_global_variable = khanates_russia_victory_var
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

﻿je_silkworm_diseases = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_crises

	#Activated by event

	complete = {
		OR = {
			custom_tooltip = {
				text = pebrine_cure_tt
				has_variable = pebrine_cure
			}
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		trigger_event = { id = silkworm_diseases.9 }
	}

	fail = {
		NOT = {
			any_scope_state = {
				is_incorporated = yes
				has_building = building_silk_plantation
			}
		}
	}

	on_fail = {
		custom_tooltip = {
			text = pebrine_je_fail_tt
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					has_variable = pebrine_cure
					any_scope_state = {
						filter = {
							has_modifier = modifier_pebrine_state_modifier
							owner = ROOT
						}
						has_decree = decree_encourage_agricultural_industry
						percent > 0.75
					}
				}
				change_variable = {
					name = pebrine_progress_var
					add = 1
				}
			}
			random_list = {
				80 = {

				}
				20 = {
					random_country = {
						limit = {
							any_scope_state = {
								is_incorporated = yes
								any_scope_building = { 
						            is_building_type = building_silk_plantation
						            level >= 2
						        }
							}
							OR = {
								any_country = {
									NOT = { THIS = PREV }
									market = ROOT.market
									any_scope_state = {
										has_modifier = modifier_pebrine_state_modifier
									}
								}
								any_neighbouring_state = { #Why? Africa.
									is_incorporated = yes
									owner = {
										any_scope_state = {
											is_incorporated = yes
											has_modifier = modifier_pebrine_state_modifier
										}
									}
								}
							}
							OR = {	
								country_is_in_europe = yes
								country_is_in_north_america = yes
							}
							NOT = {
								has_variable = pebrine_outbreak_event
							}
						}
						trigger_event = { id = silkworm_diseases.3 weeks = 1 }
					}
				}
			}
		}
		random_events = {
			150 = 0
			40 = silkworm_diseases.2
			20 = silkworm_diseases.4
			20 = silkworm_diseases.5
			20 = silkworm_diseases.6
			150 = silkworm_diseases.7
		}
	}

	invalid = {
		NOT = {
			any_scope_state = {
				is_incorporated = yes
				has_modifier = modifier_pebrine_state_modifier
			}
		}
	}

	immediate = {
		set_variable = {
			name = pebrine_progress_var
			value = 0
		}
		ROOT = {
			save_scope_as = pebrine_country_scope
		}
		every_country = {
			limit = {
				OR = {
					any_scope_state = {
						any_neighbouring_state = {
							owner = ROOT
						}
					}
					any_scope_state = {
						has_modifier = modifier_pebrine_state_modifier
					}
					market = ROOT.market	
				}			
			}
			post_notification = pebrine_spread_notification
		}
	}

	current_value = {
		value = root.var:pebrine_progress_var
	}

	goal_add_value = {
		add = 12
	}

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_central_archives = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	is_shown_when_inactive = {
		is_player = yes
		NOT = { has_variable = central_archives_je_done }
		has_technology_researched = law_enforcement
		any_scope_building = {
			is_building_type = building_government_administration
			NOT = { has_active_production_method = pm_vertical_filing_cabinets }
		}
	}

	possible = {
		has_technology_researched = central_archives
		any_scope_building = {
			is_building_type = building_government_administration
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_government_administration
			level >= 10
			occupancy > 0.9
			has_active_production_method = pm_vertical_filing_cabinets
		}
		any_scope_building = {
			filter = {
				is_building_type = building_government_administration
			}
			percent > 0.75
			occupancy > 0.9
			has_active_production_method = pm_vertical_filing_cabinets
		}
	}

	on_complete = {
		trigger_event = { id = dan_society_tech_events.1 }
		set_variable = {
			name = central_archives_je_done
		}
	}
}

﻿je_acre_dispute = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

	immediate = {
		s:STATE_ACRE = {
			random_scope_state = {
				save_scope_as = acre_state
			}
		}
	}

	complete = {
		country_or_subject_owns_entire_state_region = STATE_ACRE
	}

	on_complete = {
		trigger_event = { id = acre_dispute.3 popup = yes }
	}

	timeout = 1825

	on_timeout = {
		trigger_event = { id = acre_dispute.4 popup = yes }
	}

	should_be_pinned_by_default = yes
}
﻿je_amazonas = {
	icon = "gfx/interface/icons/invention_icons/rubber.dds"

	group = je_group_historical_content
	
	scripted_button = upgrade_amazon_button_1
	scripted_button = upgrade_amazon_button_2
	scripted_button = amazon_border_treaty_button_1
	scripted_button = amazon_border_treaty_button_2
	scripted_button = acre_dispute_button

	immediate = {
		g:rubber = {
			save_scope_as = rubber_scope
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0 
			50 = amazon.1 # devil's railroad
			10 = amazon.2 # hell on earth
			10 = amazonas.8
		}
	}

	complete = {
		any_scope_state = {
			filter = {
				OR = {
					has_state_trait = state_trait_amazon_rainforest
					has_state_trait = state_trait_amazon_rainforest_level_1
					has_state_trait = state_trait_amazon_rainforest_level_2
				}
				has_potential_resource = bg_rubber
			}
			custom_tooltip = {
				text = je_amazonas_tt
				has_state_trait = state_trait_amazon_rainforest_level_2
			}
			count = all
		}
	}

	on_complete = {
		set_variable = je_amazonas_complete_variable
	}

	weight = 100

	should_be_pinned_by_default = yes
}
﻿# Aberdeen Act - GBR
je_aberdeen_act = {
    icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_historical_content

    immediate = {
        c:BRZ = {
            save_scope_as = brazil_scope
        }
    }

    scripted_button = je_aberdeen_act_button

    complete = {
        c:BRZ ?= {
            NOT = { 
                has_law = law_type:law_slave_trade 
            }
        }
    }

    on_complete = {
        trigger_event = { id = brazilian_slavery.1 }
        show_as_tooltip = {
            if = {
                limit = {
                    has_modifier = brazilian_slave_trade_modifier
                }
                remove_modifier = brazilian_slave_trade_modifier
            }
        }
    }

    on_monthly_pulse = {
        random_events = {
            85 = 0
            10 = brazilian_slavery.2 # Slaver Seized
            5 = brazilian_slavery.4 # Slaver Seized (Brazilian Waters)
        }
    }

    fail = {
        NOT = {
            has_law = law_type:law_slavery_banned
        }
    }

    invalid = {
        NOT = {
            exists = c:BRZ
        }
    }

    on_invalid = {
        if = {
            limit = {
                has_modifier = brazilian_slave_trade_modifier
            }
            hidden_effect = {
                remove_modifier = brazilian_slave_trade_modifier
            }
        }
    }

    timeout = 18250 # 50 Years

    weight = 1000
    should_be_pinned_by_default = yes
}

# Abolition of Slavery - BRZ
je_matter_of_slavery = {
    icon = "gfx/interface/icons/law_icons/slave_trade.dds"

	group = je_group_historical_content

    scripted_progress_bar = matter_of_slavery_progress_bar

    immediate = {
        c:GBR ?= {
            save_scope_as = britain_scope
        }
    }

    scripted_button = golden_law_button
    scripted_button = je_slave_trade_suppression_button
    scripted_button = je_slave_trade_end_suppression_button

    complete = {
        has_law = law_type:law_slavery_banned
        has_revolution = no
    }

    fail = {
        custom_tooltip = {
            text = je_matter_of_slavery_fail
            scope:journal_entry = {
                "scripted_bar_progress(matter_of_slavery_progress_bar)" <= 0
            }
        }
    }

    on_complete = {
        if = {
            limit = {
                has_modifier = unrestricted_slave_trade_modifier
            }
            remove_modifier = unrestricted_slave_trade_modifier
        }
        if = {
            limit = {
                has_modifier = restricted_slave_trade_modifier
            }
            remove_modifier = restricted_slave_trade_modifier
        }
        if = {
            limit = {
                has_journal_entry = je_pedro_brazil
            }
            remove_pedropoint_effect = yes
        }
        if = {
            limit = {
                any_interest_group = {
                    has_modifier = restricted_slave_trade_ig_modifier
                }
            }
            every_interest_group = {
                limit = {
                    has_modifier = restricted_slave_trade_ig_modifier
                }
                remove_modifier = restricted_slave_trade_ig_modifier
            }
        }
        trigger_event = { id = brazilian_slavery.7 popup = yes }
    }

    on_fail = {
        trigger_event = { id = brazilian_slavery.13 popup = yes }
        if = {
            limit = {
                NOT = {
                    has_law = law_type:law_slave_trade
                }
            }
            activate_law = law_type:law_slave_trade
        }
        if = {
            limit = {
                has_modifier = unrestricted_slave_trade_modifier
            }
            remove_modifier = unrestricted_slave_trade_modifier
        }
        if = {
            limit = {
                has_modifier = restricted_slave_trade_modifier
            }
            remove_modifier = restricted_slave_trade_modifier
        }
        show_as_tooltip = {
            ig:ig_rural_folk = {
                add_ideology = ideology_pro_slavery
            }
            add_modifier = {
                name = brazil_slaving_pariah_modifier
            }
        }
        custom_tooltip = je_matter_of_slavery_tt_1
        custom_tooltip = je_matter_of_slavery_tt_2
        if = {
            limit = {
                any_interest_group = {
                    has_modifier = restricted_slave_trade_ig_modifier
                }
            }
            every_interest_group = {
                limit = {
                    has_modifier = restricted_slave_trade_ig_modifier
                }
                remove_modifier = restricted_slave_trade_ig_modifier
            }
        }
    }

    on_weekly_pulse = {
        
    }

    on_monthly_pulse = {
        effect = {
            if = {
				limit = {
					scope:journal_entry = {
						"scripted_bar_progress(matter_of_slavery_progress_bar)" < 0
					}
				}
				scope:journal_entry = {
					set_bar_progress = { value = 0 name = matter_of_slavery_progress_bar }
				}
			}
			if = {
				limit = {
					scope:journal_entry = {
						"scripted_bar_progress(matter_of_slavery_progress_bar)" > 360
					}
				}
				scope:journal_entry = {
					set_bar_progress = { value = 360 name = matter_of_slavery_progress_bar }
				}
			}
        }
        random_events = {
            105 = 0
            10 = brazilian_slavery.8 # Slaves Refuse to Work
            10 = brazilian_slavery.9 # Slave Sabotage
            10 = brazilian_slavery.10 # Slave Escape

            # Slave Paranoia Events
            5 = slave_owner_paranoia_events.1 # A Small Conspiracy
            5 = slave_owner_paranoia_events.2 # Hidden Communities
            5 = slave_owner_paranoia_events.3 # Visiting Abolitionist
        }
    }

    status_desc = {
        first_valid = {
            triggered_desc = {
                desc = je_brazilian_slavery_informal_trade
                trigger = {
                    has_law = law_type:law_slave_trade
                    NOT = { 
                        has_variable = var_slave_trade_suppression_var 
                    }
                }
            }
            triggered_desc = {
                desc = je_brazilian_slavery_suppressed_trade
                trigger = {
                    has_law = law_type:law_slave_trade
                    has_variable = var_slave_trade_suppression_var
                }
            }
            triggered_desc = {
                desc = je_brazilian_slavery_banned_trade
                trigger = {
                    has_law = law_type:law_legacy_slavery
                }
            }
        }
    }

    is_progressing = {
        has_law = law_type:law_slavery_banned
    }

    weight = 1000

    should_be_pinned_by_default = yes
}

﻿je_agricultural_development = {
	icon = "gfx/interface/icons/goods_icons/coffee.dds"

	group = je_group_historical_content
	
	is_shown_when_inactive = {
		c:BRZ ?= this
		has_dlc_feature = rp1_content
	}

	possible = {
		has_technology_researched = intensive_agriculture
		any_scope_state = {
			count >= 2
			is_capital = no
			has_building = building_coffee_plantation
			has_building = building_livestock_ranch
			is_incorporated = yes
		}
		country_has_building_group_levels = {
			type = bg_plantations
			value  >= 50
		}
		custom_tooltip = {
			text = is_not_in_other_market_tt
			ROOT.market_capital = {
				owner = ROOT
			}
		}
	}

	immediate = {
		ig:ig_landowners = {
			save_scope_as = landowners_ig
		}
		market_capital.market = {
			mg:coffee = {
				save_scope_as = coffee_scope
			}
		}
		root = {
			save_scope_as = brazil_scope
		}
		set_variable = coffee_with_milk_1_active
		trigger_event = { id = coffee_with_milk.1 }
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = coffee_with_milk.2
			10 = coffee_with_milk.3
		}
	}

	complete = {
		OR = {
			leading_producer_of = g:meat
			leading_producer_of = g:coffee
			leading_producer_of = g:sugar
		}
		trigger_if = {
			limit = {
				has_variable = coffee_with_milk_1_active
			}
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
		trigger_else = {
			custom_tooltip = {
				text = je_agricultural_development_goal_dummy
				always = no
			}
		}
		country_has_building_group_levels = {
			type = bg_plantations
			value  >= 125
		} 
	}

	on_complete = {
		trigger_event = { id = coffee_with_milk.5 }
		set_variable = agricultural_dev_done
	}

	current_value = {
		value = scope:coffee_scope.market_goods_buy_orders
	}

	goal_add_value = {
		value = scope:coffee_scope.market_goods_buy_orders
		multiply = 2.5
	}

	fail = {
		custom_tooltip = {
			text = is_in_other_market_tt
			ROOT.market_capital = {
				NOT = {
					owner = ROOT
				}
			}
		}
	}

	invalid = {
		NOT = {
			any_scope_state = {
				count >= 2
				is_capital = no
				has_building = building_coffee_plantation
				has_building = building_livestock_ranch
				is_incorporated = yes
			}
		}
	}

	weight = 100

	progressbar = yes

	should_be_pinned_by_default = yes
}

je_coffee_with_milk = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		has_dlc_feature = rp1_content
		OR = {
			custom_tooltip = {
				text = agricultural_development_complete_tt
				has_variable = agricultural_dev_done
			}
			has_journal_entry = je_agricultural_development
		}
	}

	possible = {
		ig:ig_landowners = {
			is_powerful = yes
		}
		any_scope_state = {
			count >= 2
			is_capital = no
			has_building = building_coffee_plantation
			has_building = building_livestock_ranch
			is_incorporated = yes
		}
		OR = {
			has_law = law_type:law_landed_voting
			has_law = law_type:law_wealth_voting
		}
		country_has_building_group_levels = {
			type = bg_plantations
			value  >= 100
		} 
	}

	immediate = {
		ig:ig_landowners = {
			save_scope_as = landowners_ig
		}
		root = {
			save_scope_as = brazil_scope
		}
		set_variable = { name = coffee_with_milk_progress value = 0 }
		trigger_event = { id = coffee_with_milk.4 popup = yes }
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					OR = {
						has_law = law_type:law_tenant_farmers
						has_law = law_type:law_serfdom
					}
					ig:ig_landowners = {
						is_powerful = yes
						is_in_government = yes
					}
				}
				change_variable = { name = coffee_with_milk_progress add = 1 }
			}
			else_if = {
				limit = {
					NOR = {
						has_law = law_type:law_tenant_farmers
						has_law = law_type:law_serfdom
					}
					ig:ig_landowners = {
						is_in_government = no
					}
				}
				change_variable = { name = coffee_with_milk_progress subtract = 1 }
			}
		}
		random_events = {
			500 = 0
			25 = coffee_with_milk.6
			250 = coffee_with_milk.7
			100 = coffee_with_milk.8
			25 = coffee_with_milk.9
			25 = coffee_with_milk.10
			100 = coffee_with_milk.11
			25 = coffee_with_milk.15
			25 = coffee_with_milk.16
		}
	}

	complete = {
		OR = {
			custom_tooltip = {
				text = coffee_with_milk_0_tt
				var:coffee_with_milk_progress <= 0
				has_variable = je_coffee_with_milk_start
			}
			custom_tooltip = {
				text = coffee_with_milk_100_tt
				var:coffee_with_milk_progress >= 240
				has_variable = je_coffee_with_milk_start
			}
		}
	}

	on_complete = {
		if = {
			limit = {
				var:coffee_with_milk_progress >= 120
			}
			trigger_event = { id = coffee_with_milk.12 }
			set_variable = completed_coffee_and_milk_je_landowners
		}
		else_if = {
			limit = {
				var:coffee_with_milk_progress < 120
			}
			trigger_event = { id = coffee_with_milk.13 }
		}
	}

	fail = {
		has_law = law_type:law_collectivized_agriculture
	}

	on_fail = {
		trigger_event = { id = coffee_with_milk.14 }
	}

	invalid = {
		NOT = {
			any_scope_state = {
				count >= 2
				is_capital = no
				has_building = building_coffee_plantation
				has_building = building_livestock_ranch
				is_incorporated = yes
			}
		}
	}

	current_value = {
		value = var:coffee_with_milk_progress
	}
	
	goal_add_value = {
		add = 240
	}

	weight = 100

	progressbar = yes

	should_be_pinned_by_default = yes
}

﻿je_cristo_redentor = {
    icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content
    
    is_shown_when_inactive = {
		has_technology_researched = reinforced_concrete
        country_has_primary_culture = cu:brazilian
        any_scope_state = {
            state_region = s:STATE_RIO_DE_JANEIRO
        }
		has_dlc_feature = rp1_content
    }
    possible = {
		has_technology_researched = pneumatic_tools
		has_technology_researched = reinforced_concrete
        country_has_primary_culture = cu:brazilian
        any_scope_state = {
            state_region = s:STATE_RIO_DE_JANEIRO
        }
        NOT = { has_law = law_type:law_state_atheism }
    }
    immediate = {
        random_scope_state = {
            limit = {
                state_region = s:STATE_RIO_DE_JANEIRO
            }
            save_scope_as = rio_state
        }
        ig:ig_devout = {
           save_scope_as = devout_ig
        }
        trigger_event = { id = cristo_redentor.1 popup = yes }
    }
    complete = {
        s:STATE_RIO_DE_JANEIRO.region_state:BRZ = {
			any_scope_building = {
				is_building_type = building_cristo_redentor
				occupancy >= 0.5
			}
        }
    }
    on_complete = {
        trigger_event = { id = cristo_redentor.2 popup = yes }
    }
    invalid = {
        OR = {
            NOT = {
                any_scope_state = {
                    state_region = s:STATE_RIO_DE_JANEIRO
                }
            }
            has_law = law_type:law_state_atheism
            has_variable = cristo_redentor_rejected
        }
    }

    weight = 1000

    should_be_pinned_by_default = yes
}
﻿je_gran_colombia = {
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

    is_shown_when_inactive = {
        country_has_primary_culture = cu:north_andean
		has_dlc_feature = rp1_content
        NOT = {
            OR = {
                country_tier = empire
                country_tier = hegemony
            }
        }
    }
    possible = {
		has_technology_researched = nationalism
        country_has_primary_culture = cu:north_andean
    }
    immediate = {
        trigger_event = { id = gran_colombia.1 popup = yes }
    }
    complete = {
        custom_tooltip = {
            text = formed_gran_colombia_tt
            c:GCO ?= this
        }
    }
    on_complete = {
        trigger_event = { id = gran_colombia.2 popup = yes }
        if = {
            limit = {
                has_modifier = modifier_seeking_gran_colombia
            }
            remove_modifier = modifier_seeking_gran_colombia
        }
    }
    fail = {
        OR = {
            NOT = {
                country_has_primary_culture = cu:north_andean
            }
            custom_tooltip = {
                text = has_rejected_gran_colombia_tt
                has_variable = rejected_gran_colombia
            }
        }
    }
    on_fail = {
        if = {
            limit = {
                has_modifier = modifier_seeking_gran_colombia
            }
            remove_modifier = modifier_seeking_gran_colombia
        }
    }

    weight = 1000

    should_be_pinned_by_default = yes
}

je_la_plata = {
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

    is_shown_when_inactive = {
        country_has_primary_culture = cu:platinean
		has_dlc_feature = rp1_content
        NOT = {
            OR = {
                country_tier = empire
                country_tier = hegemony
            }
        }
    }
    possible = {
		has_technology_researched = nationalism
        country_has_primary_culture = cu:platinean
    }
    immediate = {
        trigger_event = { id = la_plata.1 popup = yes }
    }
    complete = {
        custom_tooltip = {
            text = formed_la_plata_tt
            c:PLT ?= this
        }
    }
    on_complete = {
        trigger_event = { id = la_plata.2 popup = yes }
        if = {
            limit = {
                has_modifier = modifier_seeking_la_plata
            }
            remove_modifier = modifier_seeking_la_plata
        }
    }
    fail = {
        OR = {
            NOT = {
                country_has_primary_culture = cu:platinean
            }
            custom_tooltip = {
                text = has_rejected_la_plata_tt
                has_variable = rejected_la_plata
            }
        }
    }
    on_fail = {
        if = {
            limit = {
                has_modifier = modifier_seeking_la_plata
            }
            remove_modifier = modifier_seeking_la_plata
        }
    }

    weight = 1000

    should_be_pinned_by_default = yes
}

je_andean_federation = {
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs
    
    is_shown_when_inactive = {
        OR = {
            country_has_primary_culture = cu:north_andean
            country_has_primary_culture = cu:south_andean
        }
		has_technology_researched = nationalism
        NOT = {
            has_variable = rejected_gran_colombia
        }
		has_dlc_feature = rp1_content
    }
    possible = {
        has_technology_researched = pan-nationalism
        OR = {
            country_has_primary_culture = cu:north_andean
            country_has_primary_culture = cu:south_andean
        }
        custom_tooltip = {
            text = andean_federation_reqs_tt
            OR = {
                any_scope_state = {
                    state_is_in_south_america = yes
                    is_incorporated = yes
                    count >= 10
                }
                c:GCO ?= this
                c:PBC ?= this
                c:PLT ?= this
            }
        }
    }
    immediate = {
        trigger_event = { id = andean_federation.1 popup = yes }
    }
    complete = {
        custom_tooltip = {
            text = formed_andean_federation_tt
            c:FND ?= this
        }
    }
    on_complete = {
        trigger_event = { id = andean_federation.2 popup = yes }
        show_as_tooltip = {
            if = {
                limit = {
                    NOT = {
                        country_has_primary_culture = cu:south_andean
                    }
                }
                add_primary_culture = cu:south_andean
            }
            if = {
                limit = {
                    NOT = {
                        country_has_primary_culture = cu:north_andean
                    }
                }
                add_primary_culture = cu:north_andean
            }
        }
    }
    fail = {
        OR = {
            NOT = {
                country_has_primary_culture = cu:north_andean
                country_has_primary_culture = cu:south_andean
            }
            custom_tooltip = {
                text = has_rejected_andean_federation_tt
                has_variable = rejected_andean_federation
            }
        }
    }

    weight = 1000

    should_be_pinned_by_default = yes
}
﻿je_haitian_debt = {
    icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	group = je_group_historical_content

    scripted_button = je_haitian_debt_negotiation_button
    scripted_button = je_haitian_debt_payment_button
    scripted_button = je_haitian_cancel_debt_button

    immediate = {
        c:FRA ?= {
            save_scope_as = france_scope
        }
    }
    complete = {
        NOR = {
            has_modifier = modifier_french_independence_payments_4
            has_modifier = modifier_french_independence_payments_3
            has_modifier = modifier_french_independence_payments_2
            has_modifier = modifier_french_independence_payments_1
            has_modifier = modifier_cancelled_haiti_debt
        }
    }

    on_complete = {
        trigger_event = { id = hispaniola_events.1 popup = yes }
        c:FRA = { trigger_event = { id = hispaniola_events.2 popup = yes } }
    }

    invalid = {
        NOT = {
            exists = c:FRA
        }
    }

    fail = {
       has_modifier = modifier_cancelled_haiti_debt
    }

    status_desc = {
        first_valid = {
            triggered_desc = {
                desc = je_haitian_debt_status_4
                trigger = { has_modifier = modifier_french_independence_payments_4 }
            }
            triggered_desc = {
                desc = je_haitian_debt_status_3
                trigger = { has_modifier = modifier_french_independence_payments_3 }
            }
            triggered_desc = {
                desc = je_haitian_debt_status_2
                trigger = { has_modifier = modifier_french_independence_payments_2 }
            }
            triggered_desc = {
                desc = je_haitian_debt_status_1
                trigger = { has_modifier = modifier_french_independence_payments_1 }
            }
        }
    }

    weight = 1000
    should_be_pinned_by_default = yes
}
﻿je_government_petition = {
    icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_internal_affairs
    
    immediate = {
        ROOT = {
            var:desired_law_var = {
                save_scope_as = government_petition_law
            }
        }
        random_interest_group = {
            limit = {
                has_variable = petitioning_ig
            }
            save_scope_as = government_petition_ig
        }
    }

    status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_government_petition_status
			}
		}
	}

    complete = {
        exists = scope:government_petition_law
        has_law = scope:government_petition_law.type
    }

    on_complete = {
        add_loyalists = {
            value = medium_radicals
            interest_group = scope:government_petition_ig
        }
        add_modifier = {
            name = modifier_successfully_met_petition_legitimacy
            months = long_modifier_time
            is_decaying = yes
        }
        remove_variable = desired_law_var
    }

    invalid = {
        OR = {
            scope:government_petition_ig ?= {
                law_stance = {
                    law = scope:government_petition_law.type
                    value < approve
                }
            }
            NOT = {
                exists = scope:government_petition_law
            }
        }
    }

    fail = {
        scope:government_petition_ig ?= {
            is_in_government = no
        }
    }

    on_timeout = {
        if = {
            limit = {
                is_enacting_law = scope:government_petition_law.type
            }
            scope:government_petition_ig = {
                if = {
                    limit = {
                        is_powerful = yes
                    }
                    add_modifier = {
                        name = modifier_failed_to_meet_petition
                        months = long_modifier_time
                        is_decaying = yes
                        multiplier = {
                            add = 1.5
                            divide = {
                                add = 1
                                add = ROOT.enactment_phase
                            }
                        }
                    }
                }
                else = {
                    add_modifier = {
                        name = modifier_failed_to_meet_petition
                        months = long_modifier_time
                        is_decaying = yes
                        multiplier = {
                            add = 1
                            divide = {
                                add = 1
                                add = ROOT.enactment_phase
                            }
                        }
                    }
                }
            }
        }
        else = {
            scope:government_petition_ig = {
                if = {
                    limit = {
                        is_powerful = yes
                    }
                    add_modifier = {
                        name = modifier_failed_to_meet_petition
                        months = long_modifier_time
                        is_decaying = yes
                        multiplier = 1.5
                    }
                }
                else = {
                    add_modifier = {
                        name = modifier_failed_to_meet_petition
                        months = long_modifier_time
                        is_decaying = yes
                    }
                }
            }
        }
        remove_variable = desired_law_var
    }

    on_fail = {
		scope:government_petition_ig = {
			add_modifier = {
				name = modifier_failed_to_meet_petition
				months = long_modifier_time
				is_decaying = yes
				multiplier = 2
			}
		}
        remove_variable = desired_law_var
    }

    on_invalid = {
        remove_variable = desired_law_var
    }

    timeout = 1825

    weight = 1000

    should_be_pinned_by_default = yes
}
﻿je_the_krakow_uprising = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

    is_shown_when_inactive = {
		has_dlc_feature = voice_of_the_people_content
        c:AUS ?= this
        country_rank >= rank_value:major_power
        exists = c:KRA
        NOT = {
            has_variable = dismissed_krakow
        }
    }
    scripted_button = je_the_krakow_uprising_annex_button
    possible = {
        OR = {
            custom_tooltip = {
                text = krakow_uprising_happened_tt
                has_variable = krakow_uprising_happened
            }
        }
    }
    immediate = {
        c:KRA = {
            save_scope_as = krakow_scope
        }
    }
    complete = {
        trigger_if = {
            limit = {
                exists = c:KRA
            }
            NOT = {
                c:KRA = {
                    is_country_alive = yes 
                }
            }
        }
        owns_entire_state_region = STATE_WEST_GALICIA
    }
    on_complete = {
        trigger_event = { id = krakow.2 }
    }
    fail = {
        trigger_if = {
            limit = {
                exists = c:KRA
            }
            NOT = {
                c:KRA = {
                    is_country_alive = yes 
                }
            }
        }
        NOT = {
            owns_entire_state_region = STATE_WEST_GALICIA
        }
    }

    timeout = 3650

    weight = 1000
    should_be_pinned_by_default = yes
}
﻿je_francocracia = {
    icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	group = je_group_historical_content

    immediate = {
        ruler = {
            save_scope_as = francia_character_scope
            set_character_immortal = no
        }
    }

    complete = {
        custom_tooltip = {
            text = je_francocracia_tt
            NOT = {
                ruler = {
                    has_template = PRG_jose_gaspar_rodriguez_de_francia
                }
            }
        }
    }

    on_complete = {
        trigger_event = { id = paraguay.1 popup = yes }
        remove_modifier = hairy_feet_modifier
        set_variable = death_of_francia_var
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

je_modernizing_paraguay = {
    icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_historical_content

    immediate = {
        g:iron = {
            save_scope_as = iron_scope
        }
        g:wood = {
            save_scope_as = wood_scope
        }
    }

    scripted_button = humanita_fortress_button
    scripted_button = ybycui_iron_works_button
    scripted_button = good_health_prg_button
    scripted_button = army_git_good_button

    complete = {
        scope:journal_entry = {
            is_goal_complete = yes
        }
        custom_tooltip = {
            text = je_modernizing_paraguay.tt_1
            has_global_variable = humanita_fortress_global_var
        }
        custom_tooltip = {
            text = je_modernizing_paraguay.tt_2
            has_global_variable = ybycui_iron_works_global_var
        }
        custom_tooltip = {
            text = je_modernizing_paraguay.tt_3
            has_global_variable = paraguay_army_reform_global_var
        }
        custom_tooltip = {
            text = je_modernizing_paraguay.tt_4
            has_global_variable = improve_living_conditions_global_var
        }
    }

    on_monthly_pulse = {
        random_events = {
            100 = 0
            10 = paraguay.2 # Napoleon of South America
        }
    }

    current_value = {
        value = root.gdp
    }

    goal_add_value = {
        value = root.gdp
    }

    progressbar = yes

    on_complete = {
        trigger_event = { id = paraguay.12 popup = yes }
        show_as_tooltip = {
            add_journal_entry = { type = je_expanding_paraguay }
        }
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

je_expanding_paraguay = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

    immediate = {

    }

    complete = {
        owns_entire_state_region = STATE_CORRIENTES
        OR = {
            country_or_subject_owns_entire_state_region = STATE_URUGUAY
            country_or_subject_owns_entire_state_region = STATE_SANTA_FE
            country_or_subject_owns_entire_state_region = STATE_PARANA
            country_or_subject_owns_entire_state_region = STATE_RIO_GRANDE_DO_SUL
        }
    }

    fail = {
        custom_tooltip = {
            text = lost_war_tt
            OR = {
                has_variable = recently_lost_war
                AND = {
                    has_variable = recently_had_war
                    NOT = {
                        has_variable = recently_won_war
                    }
                }
            }
        }
    }

    on_fail = {
        trigger_event = { id = paraguay.8 popup = yes }
        show_as_tooltip = {
            if = {
                limit = {
                    any_scope_state = {
                        has_modifier = ybycui_iron_works_modifier
                    }
                }
                random_scope_state = {
                    limit = {
                        has_modifier = ybycui_iron_works_modifier
                    }
                    remove_modifier = ybycui_iron_works_modifier
                }
            }
            if = {
                limit = {
                    any_scope_state = {
                        has_modifier = ybycui_prisoner_workforce_modifier
                    }
                }
                random_scope_state = {
                    limit = {
                        has_modifier = ybycui_prisoner_workforce_modifier
                    }
                    remove_modifier = ybycui_prisoner_workforce_modifier
                }
            }
            if = {
                limit = {
                    any_scope_state = {
                        has_modifier = ybycui_steelworks
                    }
                }
                random_scope_state = {
                    limit = {
                        has_modifier = ybycui_steelworks
                    }
                    remove_modifier = ybycui_steelworks
                }
            }
            if = {
                limit = {
                    any_scope_state = {
                        has_modifier = humanita_fortress_modifier
                    }
                }
                random_scope_state = {
                    limit = {
                        has_modifier = humanita_fortress_modifier
                    }
                    remove_modifier = humanita_fortress_modifier
                }
            }
            if = {
                limit = {
                    any_scope_state = {
                        has_modifier = vaccinations_prg_modifier
                    }
                }
                random_scope_state = {
                    limit = {
                        has_modifier = vaccinations_prg_modifier
                    }
                    remove_modifier = vaccinations_prg_modifier
                }
            }
            if = {
                limit = {
                    any_scope_state = {
                        has_modifier = barracks_boost_paraguay_quantity_modifier
                    }
                }
                random_scope_state = {
                    limit = {
                        has_modifier = barracks_boost_paraguay_quantity_modifier
                    }
                    remove_modifier = barracks_boost_paraguay_quantity_modifier
                }
            }
            if = {
                limit = {
                    has_modifier = barracks_boost_paraguay_quality_modifier
                }
                remove_modifier = barracks_boost_paraguay_quality_modifier
            }
            if = {
                limit = {
                    any_scope_character = {
                        has_modifier = napoleon_of_the_americas_modifier
                    }
                }
                random_character = {
                    limit = {
                        has_modifier = napoleon_of_the_americas_modifier
                    }
                    kill_character = yes
                }
            }
            if = {
                limit = {
                    any_scope_character = {
                        has_modifier = el_excelentisimo_modifier
                    }
                }
                random_character = {
                    limit = {
                        has_modifier = el_excelentisimo_modifier
                    }
                    kill_character = yes
                }
            }
            if = {
                limit = {
                    ruler = {
                        NOR = {
                            has_modifier = el_excelentisimo_modifier
                            has_modifier = napoleon_of_the_americas_modifier
                        }
                    }
                }
                ruler = {
                    kill_character = yes
                }
            }
            if = {
                limit = {
                    any_scope_state = {
                        state_region = s:STATE_BAJO_PARAGUAY
                    }
                }
                s:STATE_BAJO_PARAGUAY.region_state:PRG = {
                    add_modifier = {
                        name = thus_unto_tyrants_modifier
                        months = long_modifier_time
                    }
                }
            }
            add_modifier = {
                name = a_broken_land_modifier
                months = long_modifier_time
            }
        }
    }

    on_complete = {
        trigger_event = { id = paraguay.9 popup = yes }
        set_variable = paraguay_war_victory_achievement
    }

    invalid = {
        is_subject = yes
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

je_paraguayan_war = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

    immediate = {
        c:PRG ?= {
            save_scope_as = paraguay_scope
        }
    }

    complete = {
        OR = {
            AND = {
                custom_tooltip = {
                    text = je_paraguayan_war_tt_1
                    OR = {
                        c:PRG ?= {
                            has_variable = recently_lost_war
                        }
                    }
                    has_variable = recently_won_war
                }
                c:PRG = {
                    NOT = {
                        has_state_in_state_region = STATE_MATO_GROSSO
                        has_state_in_state_region = STATE_CORRIENTES
                        has_state_in_state_region = STATE_CHACO
                    }
                }
            }
            AND = {
                custom_tooltip = {
                    text = je_paraguayan_war_tt_1
                    has_variable = recently_won_war
                }
                NOT = { 
                    c:PRG = { 
                        is_country_alive = yes 
                    } 
                }
            }
        }
    }
    
    fail = {
        custom_tooltip = {
            text = je_paraguayan_war_tt_2
            c:PRG ?= {
                has_variable = recently_won_war
            }
            has_variable = recently_lost_war
        }
        c:PRG ?= {
            has_state_in_state_region = STATE_CORRIENTES
            OR = {
                country_or_subject_owns_entire_state_region = STATE_URUGUAY
                country_or_subject_owns_entire_state_region = STATE_SANTA_FE
                country_or_subject_owns_entire_state_region = STATE_PARANA
                country_or_subject_owns_entire_state_region = STATE_RIO_GRANDE_DO_SUL
            }
        }
    }

    on_fail = {
        trigger_event = { id = paraguay.10 popup = yes }
    }

    on_complete = {
        trigger_event = { id = paraguay.7 popup = yes }
    }

    invalid = {
        c:PRG ?= {
            has_journal_entry = je_expanding_paraguay
            NOT = {
                has_war_with = root
            }
            any_diplomatic_play = {
                is_war = yes
                initiator = prev
                target = {
                    any_scope_state = {
                        OR = {
                            state_region = s:STATE_CORRIENTES
                            state_region = s:STATE_URUGUAY
                            state_region = s:STATE_SANTA_FE
                            state_region = s:STATE_PARANA
                            state_region = s:STATE_RIO_GRANDE_DO_SUL
                        }
                    }
                    root = {
                        has_interest_marker_in_region = prev.capital.region
                    }
                }
                OR = {
                    has_play_goal = conquer_state
                    has_play_goal = return_state
                    has_play_goal = make_tributary
                    has_play_goal = make_protectorate
                }
            }
        }
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

﻿je_christ_of_nations = {
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

    scripted_button = christ_of_nations_button

    is_shown_when_inactive = {
        OR = {
            c:POL ?= this
            c:KRA ?= this
            AND = {
                c:GAL ?= this
                ruler = {
                    culture = cu:polish
                }
            }
        }
        NOT = {
            sr:region_poland = {
                any_scope_state = {
                    count = all
                    owner = root
                }
            }
        }
    }

    possible = {
        has_technology_researched = nationalism
    }

    immediate = {
        cu:polish = {
            save_scope_as = polish_culture_scope
        }
    }

    complete = {
        sr:region_poland = {
            any_scope_state = {
                count = all
                owner = root
            }
        }
    }

    on_complete = {
        trigger_event = { id = poland_events.4 days = 0 popup = yes }
    }

    should_be_pinned_by_default = yes
}

je_poland_lithuania = {
    icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

    is_shown_when_inactive = {
       country_has_primary_culture = cu:polish
    }

    possible = {
        has_technology_researched = pan-nationalism
        custom_tooltip = {
            text = je_poland_lithuania_tt
            c:PLC ?= THIS
        }
    }

    immediate = {
        trigger_event = { id = poland_events.6 popup = yes }
    }

    complete = {
        owns_entire_state_region = STATE_MINSK
        owns_entire_state_region = STATE_KIEV
        any_scope_state = {
            state_region = {
                OR = {
                    is_homeland = cu:ukrainian
                    is_homeland = cu:byelorussian
                }
            }
            count >=7
        }
    }

    on_complete = {
        set_variable = greater_commonwealth_var
        trigger_event = { id = poland_events.7 popup = yes }
        custom_tooltip = plc_discrimination_tt
        show_as_tooltip = {
            add_primary_culture = cu:ukrainian
            add_primary_culture = cu:byelorussian
            add_loyalists = {
                culture = cu:ukrainian
                value = 0.1
            }
            add_loyalists = {
                culture = cu:byelorussian
                value = 0.1
            }
        }
        custom_tooltip = plc_discrimination_tt_2
        show_as_tooltip = {
            add_loyalists = {
                culture = cu:polish
                value = 0.1
            }
        }
    }

    should_be_pinned_by_default = yes
}
﻿je_positivist_movement = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_internal_affairs
	
	is_shown_when_inactive = {
		has_technology_researched = psychiatry
		has_global_variable = positivism_invented
		has_dlc_feature = rp1_content
	}

	possible = {
		has_technology_researched = philosophical_pragmatism
		radical_fraction = {
			value >= 0.1
		}
		OR = {
			country_has_state_religion = rel:catholic
			has_law = law_type:law_state_atheism
		}
		custom_tooltip = {
			text = is_democratic_tt
			country_has_voting_franchise = yes
		}
	}

	immediate = {
		set_variable = {
			name = positivism_progress_var
			value = 0
		}
		trigger_event = { id = positivism.2 popup = yes }
		set_variable = positivism_happened
	}

	scripted_button = je_positivist_movement_embrace_positivism_button
	scripted_button = je_positivist_movement_suppress_positivism_button

	on_weekly_pulse = {
		effect = {
			clamp_variable = {
				name = positivism_progress_var
				max = 100
				min = 0
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			
		}
		random_events = {
			100 = 0
			10 = positivism_pulse.1
			10 = positivism_pulse.2
			10 = positivism_pulse.3
			10 = positivism_pulse.4
			10 = positivism_pulse.5
			10 = bp1_misc.3
		}
	}

	complete = {
		exists = var:positivism_progress_var
		custom_tooltip = {
			text = positivism_at_100_tt
			var:positivism_progress_var >= 100
		}
	}

	on_complete = {
		custom_tooltip = positivism_effects_most_tt
		trigger_event = { id = positivism.3 popup = yes }
	}

	timeout = 3650

	on_timeout = {
		if = {
			limit = {
				var:positivism_progress_var >= 50
			}
			custom_tooltip = {
				text = positivism_positive_epoch_tt
				trigger_event = { id = positivism.3 popup = yes }
			}
			if = {
				limit = {
					var:positivism_progress_var >= 85
				}
				custom_tooltip = positivism_effects_most_tt
			}
			else_if = {
				limit = {
					var:positivism_progress_var >= 65
				}
				custom_tooltip = positivism_effects_avg_tt
			}
			else = {
				custom_tooltip = positivism_effects_least_tt
			}
		}
		else = {
			custom_tooltip = {
				text = positivism_peculiar_cult_tt
				trigger_event = { id = positivism.4 popup = yes }
			}
			if = {
				limit = {
					var:positivism_progress_var >= 35
				}
				custom_tooltip = positivism_effects_least_tt
			}
			else_if = {
				limit = {
					var:positivism_progress_var >= 15
				}
				custom_tooltip = positivism_effects_avg_tt
			}
			else = {
				custom_tooltip = positivism_effects_most_tt
			}
		}
	}

	current_value = {
		value = root.var:positivism_progress_var
	}

	goal_add_value = {
		add = 100
	}

	weight = 100

	progressbar = yes

	should_be_pinned_by_default = yes
}

﻿je_the_red_scare = {
    icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_crises

    is_shown_when_inactive = {
		has_global_variable = labour_movement_researched
    }
    possible = {
        custom_tooltip = {
            text = red_scare_unlock_tt
			any_in_global_list = {
                variable = aes_country_list
                has_diplomatic_relevance = root
                has_law = law_type:law_council_republic
            }
        }
        NOT = {
            has_law = law_type:law_council_republic
        }
    }
    immediate = {
        ordered_country = {
			limit = {
                has_diplomatic_relevance = root
				has_law = law_type:law_council_republic
			}
			order_by = country_rank

			save_scope_as = red_scare_target_nation
		}
        trigger_event = { id = red_scare.1 }
    }
    on_monthly_pulse = {
        random_events = {
            300 = 0
            10 = red_scare.2
            10 = red_scare.3
            10 = red_scare.4
            10 = red_scare.5
            10 = red_scare.6
            10 = red_scare.7
            10 = red_scare.8
            10 = red_scare.9
            10 = red_scare.10
            10 = red_scare.11
            10 = red_scare.12
            10 = red_scare.14
            10 = red_scare.15
        }
    }
    fail = {
        OR = {
            has_law = law_type:law_council_republic
            any_civil_war = {
                this.political_movement ?= {
                    any_supporting_interest_group = {
                        law_stance = {
                            law = law_type:law_council_republic
                            value > neutral
                        }
                    }
                }
                is_civil_war_type = revolution
                civil_war_progress > 0.75
            }
        }
    }
    invalid = {
        NOT = {
			any_in_global_list = {
                variable = aes_country_list
                has_diplomatic_relevance = root
                has_law = law_type:law_council_republic
            }
        }
    }

    timeout = 3650

    on_timeout = {
        trigger_event = { id = red_scare.20 }
    }

    weight = 1000
    should_be_pinned_by_default = yes
}

﻿je_unite_the_principalities = {
    icon = "gfx/interface/icons/event_icons/event_military.dds"

	group = je_group_historical_content

    is_shown_when_inactive = {
		country_has_primary_culture = cu:romanian
    }
    scripted_button = je_unite_the_principalities_button
    possible = {
        has_technology_researched = nationalism
        NOT = {
            any_overlord_or_above ?= { # Can't unite the principalities if you're already the lesser in a pact with another Romanian state
                country_has_primary_culture = cu:romanian
            }
        }
    }
    immediate = {
    }
    complete = {
        custom_tooltip = {
            text = je_unite_the_principalities_united_two_principalities_tt
            has_variable = ROM_united_principality
        }
        custom_tooltip = {
            text = je_unite_the_principalities_friend_with_all_great_powers_tt
            NOT = {
                any_country = {
                    country_rank >= rank_value:great_power
                    NOT = { has_war_with = ROOT }
                    has_interest_marker_in_region = ROOT.capital.region
                    relations:root < 0
                }
            }
        }
    }
    on_complete = {
    }
    fail = { # the JE fails if there are no other Romanian countries, or if ROOT is Romania
        OR = {
            custom_tooltip = {
                text = je_unite_the_principalities_no_other_romanians_tt
                NOT = {
                    any_country = {
                        NOT = { this = ROOT }
                        country_has_primary_culture = cu:romanian 
                    }
                }
            }
            custom_tooltip = {
                text = je_unite_the_principalities_romania_is_real_tt
                exists = c:ROM
            }
        }
    }

    # timeout = 0 # no timeout. Romania is eternal.

    weight = 1000
    should_be_pinned_by_default = yes
}

je_all_for_one = {
    icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_historical_content

    scripted_button = je_south_bessarabian_retrocession
    scripted_button = je_marea_unire

    on_monthly_pulse = {
        effect = {
            change_variable = {
                name = romanian_union_var
                add = 1
            }
        }
    }

    complete = {
        scope:journal_entry = { is_goal_complete = yes }
    }

    immediate = {
        random_neighbouring_state = {
            limit = {
                owner = {
                    has_variable = romania_union_partner
                }
            }
            owner = {
                save_scope_as = romania_lesser_union_partner
            }
        }
    }

    on_complete = {
        trigger_event = {
            id = romania.3
        }
    }

    fail = {
        OR = {
            AND = {
                exists = c:ROM
                NOT = { c:ROM ?= this }
            }
            NOT = { exists = scope:romania_lesser_union_partner }
            scope:romania_lesser_union_partner = {
                NOT = { is_subject_of = ROOT }
            }
        }
    }

    on_fail = {
        hidden_effect = {
            remove_variable = ROM_united_principality
        }
    }

    current_value = {
        value = root.var:romanian_union_var
    }

    goal_add_value = {
        value = 120
    }

    progressbar = yes

    weight = 10000
    should_be_pinned_by_default = yes
}

﻿je_south_american_national_identity_emergence = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_internal_affairs

	is_shown_when_inactive = {
		capital = {
			state_is_in_south_america = yes
		}
		any_primary_culture = {
			NOR = { 
				cu:central_american = this 
				cu:caribeno = this
			}
			has_discrimination_trait = hispanophone
		}
		hidden_trigger = {
			NOT = { has_variable = completed_culture_genesis }
		}
		hidden_trigger = {
			NOR = {
				c:GCO ?= this
				c:PBC ?= this
				c:FND ?= this
				c:PLT ?= this
			}
		}
		is_revolutionary = no
	}

	possible = {
		has_technology_researched = nationalism
		hidden_trigger = {
			NOT = { has_variable = completed_culture_genesis }
		}
	}

	immediate = {
		set_national_identity_vars = yes
		set_variable = { name = national_identity_progress_var value = 0 }
		calculate_national_identity_progress = yes
		if = {
			limit = {
				c:ARG ?= this
			}
			cu:platinean = {
				save_scope_as = old_national_culture
			}
			cu:argentine = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:PEU ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:peruvian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:NPU ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:peruvian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:SPU ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:peruvian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:BOL ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:bolivian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:ECU ?= this
			}
			cu:north_andean = {
				save_scope_as = old_national_culture
			}
			cu:ecuadorian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:CHL ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:chilean = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:VNZ ?= this
			}
			cu:north_andean = {
				save_scope_as = old_national_culture
			}
			cu:venezuelan = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:URU ?= this
			}
			cu:platinean = {
				save_scope_as = old_national_culture
			}
			cu:uruguayan = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:PRG ?= this
			}
			cu:platinean = {
				save_scope_as = old_national_culture
			}
			cu:paraguayan = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:CLM ?= this
			}
			cu:north_andean = {
				save_scope_as = old_national_culture
			}
			cu:colombian = {
				save_scope_as = new_national_culture
			}
		}
		trigger_event = { id = culture_south_america.4 popup = yes }
	}

	on_weekly_pulse = {
		effect = {
			calculate_national_identity_progress = yes
		}
	}

	on_monthly_pulse = {
		effect = {
			add_national_identity_progress = yes
		}
	}

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		clear_national_identity_vars = yes
		trigger_event = {
			id = culture_south_america.1 popup = yes
		}
		show_as_tooltip = {
			if = {
				limit = {
					c:ARG ?= this
				}
				add_primary_culture = cu:argentine
				remove_primary_culture = cu:platinean
			}
			if = {
				limit = {
					c:PEU ?= this
				}
				add_primary_culture = cu:peruvian
				remove_primary_culture = cu:south_andean
			}
			if = {
				limit = {
					c:NPU ?= this
				}
				add_primary_culture = cu:peruvian
				remove_primary_culture = cu:south_andean
			}
			if = {
				limit = {
					c:SPU ?= this
				}
				add_primary_culture = cu:peruvian
				remove_primary_culture = cu:south_andean
			}
			if = {
				limit = {
					c:BOL ?= this
				}
				add_primary_culture = cu:bolivian
				remove_primary_culture = cu:south_andean
			}
			if = {
				limit = {
					c:ECU ?= this
				}
				add_primary_culture = cu:ecuadorian
				remove_primary_culture = cu:north_andean
			}
			if = {
				limit = {
					c:CHL ?= this
				}
				add_primary_culture = cu:chilean
				remove_primary_culture = cu:south_andean
			}
			if = {
				limit = {
					c:VNZ ?= this
				}
				add_primary_culture = cu:venezuelan
				remove_primary_culture = cu:north_andean
			}
			if = {
				limit = {
					c:URU ?= this
				}
				add_primary_culture = cu:uruguayan
				remove_primary_culture = cu:platinean
			}
			if = {
				limit = {
					c:PRG ?= this
				}
				add_primary_culture = cu:paraguayan
				remove_primary_culture = cu:platinean
			}
			if = {
				limit = {
					c:CLM ?= this
				}
				add_primary_culture = cu:colombian
				remove_primary_culture = cu:north_andean
			}
		}
		hidden_effect = {
			set_variable = completed_culture_genesis
		}
	}

	fail = {
		custom_tooltip = {
			text = completed_pan_national_project_tt
			OR = {
				c:GCO ?= this
				c:FND ?= this
				c:PBC ?= this
				c:PLT ?= this
			}
		}
	}

	on_fail = {
		hidden_effect = {
			set_variable = completed_culture_genesis
		}
	}

	current_value = {
		value = root.var:national_identity_progress_var
	}

	goal_add_value = {
		add = 100
	}

	weight = 100

	progressbar = yes

	should_be_pinned_by_default = yes
}


je_south_american_national_identity = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_internal_affairs

	# Now activated by event

	modifiers_while_active = {
		modifier_assimilation_nnc
	}

	immediate = {
		if = {
			limit = {
				c:ARG ?= this
			}
			cu:platinean = {
				save_scope_as = old_national_culture
			}
			cu:argentine = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:PEU ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:peruvian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:NPU ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:peruvian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:SPU ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:peruvian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:BOL ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:bolivian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:ECU ?= this
			}
			cu:north_andean = {
				save_scope_as = old_national_culture
			}
			cu:ecuadorian = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:CHL ?= this
			}
			cu:south_andean = {
				save_scope_as = old_national_culture
			}
			cu:chilean = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:VNZ ?= this
			}
			cu:north_andean = {
				save_scope_as = old_national_culture
			}
			cu:venezuelan = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:URU ?= this
			}
			cu:platinean = {
				save_scope_as = old_national_culture
			}
			cu:uruguayan = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:PRG ?= this
			}
			cu:platinean = {
				save_scope_as = old_national_culture
			}
			cu:paraguayan = {
				save_scope_as = new_national_culture
			}
		}
		if = {
			limit = {
				c:CLM ?= this
			}
			cu:north_andean = {
				save_scope_as = old_national_culture
			}
			cu:colombian = {
				save_scope_as = new_national_culture
			}
		}
	}

	complete = {
		NOR = {
			trigger_if = {
				limit = {
					OR = {
						c:ARG ?= this
						c:URU ?= this
						c:PRG ?= this
					}
				}
				any_scope_state = {
					state_region = {
						is_homeland = cu:platinean
					}
				}
			}
			trigger_if = {
				limit = {
					OR = {
						c:PEU ?= this
						c:NPU ?= this
						c:SPU ?= this
						c:BOL ?= this
						c:CHL ?= this
					}
				}
				any_scope_state = {
					state_region = {
						is_homeland = cu:south_andean
					}
				}
			}
			trigger_if = {
				limit = {
					OR = {
						c:ECU ?= this
						c:VNZ ?= this
						c:CLM ?= this
					}
				}
				any_scope_state = {
					state_region = {
						is_homeland = cu:north_andean
					}
				}
			}
		}
	}

	on_complete = {
		trigger_event = {
			id = culture_south_america.3
		}
		add_loyalists = {
			value = large_radicals
			culture = scope:new_national_culture
		}
	}

	scripted_button = je_south_american_national_identity_integrate_a_state

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_populist_unrest = {
	icon = "gfx/interface/icons/invention_icons/nationalism.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		c:BRZ ?= this
		OR = {
			has_technology_researched = socialism
			has_technology_researched = anarchism
			has_technology_researched = corporatism
		}
		has_dlc_feature = rp1_content
	}

	possible = {
		has_technology_researched = political_agitation
		ig:ig_landowners = { 
			is_in_government = yes
			is_strongest_ig_in_government = yes
		}
		ig:ig_petty_bourgeoisie = {
			is_marginal = no
		}
		OR = {
			AND = {
				has_law = law_type:law_monarchy
				custom_tooltip = {
					text = completed_coffee_and_milk_je_tt
					OR = {
						has_variable = completed_coffee_and_milk_je_landowners
						has_journal_entry = je_coffee_with_milk
					}
				}
			}
			has_law = law_type:law_presidential_republic
			has_law = law_type:law_parliamentary_republic
		}
		OR = {
			has_law = law_type:law_wealth_voting
			has_law = law_type:law_landed_voting
		}
	}

	scripted_progress_bar = populist_unrest_progress_bar

	immediate = {
		ig:ig_landowners = {
			save_scope_as = landowners_ig
		}
		ig:ig_petty_bourgeoisie = {
			save_scope_as = pb_ig
		}
		set_populism_vars = yes
		trigger_event = { id = BRZ_populism.1 days = 1 popup = yes }
	}

	on_weekly_pulse = {
		effect = {
			calculate_populism_progress = yes
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = BRZ_populism.2
			10 = BRZ_populism.4
			10 = BRZ_populism.5
			10 = BRZ_populism.6
			100 = BRZ_populism.7
			10 = BRZ_populism.8
			10 = BRZ_populism.9
			10 = bp1_misc.2
		}
	}

	complete = {
		custom_tooltip = {
			text = BRZ_populism_100_tt
			scope:journal_entry = {
				"scripted_bar_progress(populist_unrest_progress_bar)" >= 100
			}
		}
	}

	on_complete = {
		clear_populism_vars = yes
		trigger_event = { id = BRZ_vargas.1 popup = yes }
		show_as_tooltip = {
			activate_law = law_type:law_autocracy
			if = {
				limit = {
					NOT = {
						has_law = law_type:law_presidential_republic
					}
				}
				activate_law = law_type:law_presidential_republic
			}
			add_journal_entry = {
				type = je_new_republic
			}
		}
	}

	fail = {
		custom_tooltip = {
			text = BRZ_populism_0_tt
			scope:journal_entry = {
				"scripted_bar_progress(populist_unrest_progress_bar)" <= 0
			}
		}
	}

	on_fail = {
		clear_populism_vars = yes
		trigger_event = { id = BRZ_populism.3 popup = yes }
	}

	weight = 100

	should_be_pinned_by_default = yes
}

je_new_republic = {
	icon = "gfx/interface/icons/invention_icons/central_planning.dds"

	group = je_group_historical_content

	immediate = {
		ruler = {
			save_scope_as = vargas_scope
			set_character_immortal = yes
			interest_group = {
				save_scope_as = pb_scope
			}
		}
		root = {
			save_scope_as = brazil_scope
		}
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = BRZ_vargas.4
			10 = BRZ_vargas.5
			10 = BRZ_vargas.6
			10 = BRZ_vargas.7
			10 = BRZ_vargas.8
		}
	}

	fail = {
		custom_tooltip = {
			text = vargas_out_tt
			has_variable = new_republic_start
			NOT = {
				ruler = {
					interest_group = {
						is_interest_group_type = ig_petty_bourgeoisie
					}
				}
			}
		}
	}

	on_fail = {
		trigger_event = { id = BRZ_vargas.3 popup = yes }
		hidden_effect = {
			scope:vargas_scope = {
				set_character_immortal = no
			}
		}
	}

	complete = {
		NOT = {
			any_interest_group = {
				is_marginal = no
				leader = {
					has_socialist_ideology = yes
				}
			}
		}
		OR = {
			has_law = law_type:law_regulatory_bodies
			has_law = law_type:law_worker_protections
		}
		has_law = law_type:law_compulsory_primary_school
		has_law = law_type:law_censorship
		has_law = law_type:law_autocracy
		has_law = law_type:law_interventionism
		has_law = law_type:law_presidential_republic
	}

	on_complete = {
		trigger_event = { id = BRZ_vargas.2 popup = yes }
		hidden_effect = {
			scope:vargas_scope = {
				set_character_immortal = no
			}
		}
		set_variable = estado_novo_achievement
	}

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_brazilian_nation_building = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_historical_content

	immediate = {
		cu:brazilian = {
			save_scope_as = brazilian_culture
		}
		cu:paulista = {
			save_scope_as = paulista_culture
		}
		cu:sulista = {
			save_scope_as = sulista_culture
		}
		cu:nordestino = {
			save_scope_as = nordestino_culture
		}
		cu:amazonic = {
			save_scope_as = amazonic_culture
		}
	}

	complete = {
		has_technology_researched = nationalism
		custom_tooltip = {
			text = je_brazilian_nation_building_integrate_nordestino_complete_tt
			has_variable = nordestinos_integrated
		}
		custom_tooltip = {
			text = je_brazilian_nation_building_integrate_sulista_complete_tt
			has_variable = sulistas_integrated
		}
		custom_tooltip = {
			text = je_brazilian_nation_building_integrate_paulista_complete_tt
			has_variable = paulistas_integrated
		}
		custom_tooltip = {
			text = je_brazilian_nation_building_integrate_amazonic_complete_tt
			has_variable = amazonics_integrated
		}
	}

	on_complete = {
		trigger_event = { id = culture_brazil.2 popup = yes }
		show_as_tooltip = {
			add_modifier = {
				name = brz_brasil_brasileiro
				months = long_modifier_time
			}
		}
		if = {
			limit = {
				has_journal_entry = je_pedro_brazil
			}
			add_pedropoint_effect = yes
		}
	}

	timeout = 18262

	on_timeout = {
		trigger_event = { id = culture_brazil.7 popup = yes }
	}

	scripted_button = je_brazilian_nation_building_integrate_nordestino
	scripted_button = je_brazilian_nation_building_integrate_sulista
	scripted_button = je_brazilian_nation_building_integrate_paulista
	scripted_button = je_brazilian_nation_building_integrate_amazonic

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_consolidate_afghanistan = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		has_interest_marker_in_region = region_persia
		country_rank >= rank_value:great_power
		has_dlc_feature = ep1_content
		NOT = {
			has_global_variable = afghan_borders_solidified
		}
	}

	scripted_button = je_consolidate_afghanistan_durand_line
	scripted_button = je_consolidate_afghanistan_indus_line
	scripted_button = je_consolidate_afghanistan_southeast_status_quo
	scripted_button = je_consolidate_afghanistan_torkestan_line
	scripted_button = je_consolidate_afghanistan_amu_darya_line
	scripted_button = je_consolidate_afghanistan_north_status_quo
	scripted_button = je_consolidate_afghanistan_offer_compensation
	scripted_button = je_consolidate_afghanistan_threaten_reprisals
	scripted_button = je_consolidate_afghanistan_approve_of_treaty
	scripted_button = je_consolidate_afghanistan_retract_treaty
	scripted_button = je_consolidate_afghanistan_resolve_southwest_conflict
	scripted_button = je_consolidate_afghanistan_resolve_northern_conflict

	invalid = {
		NOT = {
			exists = c:AFG
		}
	}

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					has_variable = afghan_notification_sender
					scope:gp_scope = {
						has_variable = afghanistan_delimitation_treaty_approved
					}
					scope:rival_gp_scope = {
						has_variable = afghanistan_delimitation_treaty_approved
					}
					c:AFG = {
						NOT = {
							has_variable = received_afghan_border_notification
						}
					}
				}
				if = {
					limit = {
						NOT = { c:AFG ?= { has_variable = afg_proposal_ai_cooldown } }
					}
					c:AFG = {
						trigger_event = { id = gg_afghanistan.1 popup = yes }
					}
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				exists = c:AFG
			}
			c:AFG ?= {
				save_scope_as = afghanistan_scope
			}
		}
		save_scope_as = gp_scope
		if = {
			limit = {
				NOT = {
					any_country = {
						has_variable = afghan_notification_sender
					}
				}
			}
			set_variable = afghan_notification_sender
		}
		if = {
			limit = {
				c:GBR ?= this
				exists = c:RUS
				OR = {
					any_country = {
						is_subject_of = c:RUS
						NOT = {
							c:AFG ?= this
						}
						overlord ?= {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
					c:RUS ?= {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						any_neighbouring_state = {
							c:AFG ?= owner
						}
						NOT = {
							THIS = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					c:RUS = {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						any_neighbouring_state = {
							c:AFG ?= owner
						}
						NOT = {
							THIS = ROOT
						}
					}
				}
				c:RUS = {
					save_scope_as = rival_gp_scope
				}
			}
			else_if = {
				limit = {
					any_country = {
						is_subject_of = c:RUS
						NOT = {
							c:AFG ?= this
						}
						overlord ?= {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
				}
				ordered_country = {
					limit = {
						is_subject_of = c:RUS
						NOT = {
							c:AFG ?= this
						}
						overlord = {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
					order_by = gdp
					overlord = {
						save_scope_as = rival_gp_scope
					}
					save_scope_as = rival_afghan_partition_proxy
				}
			}
		}
		else_if = {
			limit = {
				c:RUS ?= this
				exists = c:GBR
				OR = {
					any_country = {
						is_subject_of = c:GBR
						NOT = {
							c:AFG ?= this
						}
						overlord ?= {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
					c:GBR ?= {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						any_neighbouring_state = {
							c:AFG ?= owner
						}
						NOT = {
							THIS = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					c:GBR = {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						any_neighbouring_state = {
							c:AFG ?= owner
						}
						NOT = {
							THIS = ROOT
						}
					}
				}
				c:GBR = {
					save_scope_as = rival_gp_scope
				}
			}
			else_if = {
				limit = {
					any_country = {
						is_subject_of = c:GBR
						NOT = {
							c:AFG ?= this
						}
						overlord ?= {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
				}
				ordered_country = {
					limit = {
						is_subject_of = c:GBR
						NOT = {
							c:AFG ?= this
						}
						overlord = {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
					order_by = gdp
					overlord = {
						save_scope_as = rival_gp_scope
					}
					save_scope_as = rival_afghan_partition_proxy
				}
			}
		}
		else = {
			if = {
				limit = {
					any_country = {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						any_neighbouring_state = {
							c:AFG ?= owner
						}
						NOT = {
							THIS = ROOT
						}
					}
				}
				random_country = {
					limit = {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						any_neighbouring_state = {
							c:AFG ?= owner
						}
						NOT = {
							THIS = ROOT
						}
					}
					save_scope_as = rival_gp_scope
				}
			}
			else_if = {
				limit = {
					any_country = {
						is_subject = yes
						NOT = {
							c:AFG ?= this
						}
						overlord ?= {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
				}
				ordered_country = {
					limit = {
						is_subject = yes
						NOT = {
							c:AFG ?= this
						}
						overlord = {
							country_rank >= rank_value:great_power
							has_interest_marker_in_region = region_persia
							NOT = {
								THIS = ROOT
							}
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
					order_by = gdp
					overlord = {
						save_scope_as = rival_gp_scope
					}
					save_scope_as = rival_afghan_partition_proxy
				}
			}
		}

		if = {
			limit = {
				any_country = {
					is_subject_of = ROOT
					NOT = {
						c:AFG ?= this
					}
					any_neighbouring_state = {
						c:AFG ?= owner
					}
				}
			}
			ordered_country = {
				limit = {
					is_subject_of = ROOT
					NOT = {
						c:AFG ?= this
					}
					any_neighbouring_state = {
						c:AFG ?= owner
					}
				}
				order_by = gdp
				save_scope_as = afghan_partition_proxy
			}
		}
	}
	
	possible = {
		custom_tooltip = {
			text = afghanistan_exists_tt
			exists = c:AFG
		}
		custom_tooltip ={
			text = state_is_bordering_afghanistan_tt
			OR = {
				any_scope_state = {
					OR = {
						region = sr:region_central_asia
						region = sr:region_north_india
					}
					any_neighbouring_state = {
						c:AFG ?= owner
					}
				}
				any_country = {
					is_subject_of = ROOT
					NOT = {
						c:AFG ?= this
					}
					any_scope_state = {
						OR = {
							region = sr:region_central_asia
							region = sr:region_north_india
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
				}
			}
		}
		custom_tooltip = {
			text = is_bordering_afghanistan_tt
			any_country = {
				OR = {
					THIS = ROOT
					is_subject_of = ROOT
				}
				NOT = {
					c:AFG ?= this
				}
				any_neighbouring_state = {
					c:AFG ?= owner
				}
			}
		}
		custom_tooltip = {
			text = another_gp_is_bordering_afghanistan_tt
			OR = {
				any_country = {
					country_rank >= rank_value:great_power
					NOT = {
						THIS = ROOT
					}
					has_interest_marker_in_region = region_persia
					any_scope_state = {
						OR = {
							region = sr:region_central_asia
							region = sr:region_north_india
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
				}
				any_country = {
					is_subject = yes
					NOT = {
						c:AFG ?= this
					}
					overlord ?= {
						country_rank >= rank_value:great_power
						has_interest_marker_in_region = region_persia
						NOT = {
							THIS = ROOT
						}
					}
					any_scope_state = {
						OR = {
							region = sr:region_central_asia
							region = sr:region_north_india
						}
						any_neighbouring_state = {
							c:AFG ?= owner
						}
					}
				}
			}
		}
	}

	complete = {
		trigger_if = {
			limit = {
				exists = scope:gp_scope								
			}
			custom_tooltip = {
				text = first_gp_approves_tt
				scope:gp_scope ?= {
					has_variable = afghanistan_delimitation_treaty_approved
				}	
			}
		}
		trigger_if = {
			limit = {
				exists = scope:rival_gp_scope
			}
			custom_tooltip = {
				text = second_gp_approves_tt
				scope:rival_gp_scope ?= {
					has_variable = afghanistan_delimitation_treaty_approved
				}
			}
		}
		trigger_if = {
			limit = {
				exists = scope:afghanistan_scope
			}
			custom_tooltip = {
				text = afghanistan_approves_tt
				c:AFG = {
					has_variable = afghanistan_delimitation_treaty_approved
				}
			}
		}
	}

	on_complete = {
		if = {
			limit = {
				exists = c:AFG
			}
			custom_tooltip = {
				text = afghanistan_abandon_claims_tt
				every_state = {
					limit = {
						has_claim_by = c:AFG
					}
					state_region = {
						remove_claim = c:AFG
					}
				}
			}
		}
		if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_durand_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = scope:rival_gp_scope
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_indus_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
						NOT = {
							state_region = {
								is_homeland = cu:pashtun
							}
						}
					}
					set_state_owner = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
						NOT = {
							state_region = {
								is_homeland = cu:pashtun
							}
						}
					}
					set_state_owner = scope:rival_gp_scope
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_status_quo
				}
			}
			custom_tooltip = status_quo_southeast_tt
		}

		if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_torkestan_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
					}
					set_state_owner = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
					}
					set_state_owner = scope:rival_gp_scope
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_amu_darya_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
					}
					set_state_owner = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
					}
					set_state_owner = scope:rival_gp_scope
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_status_quo_north
				}
			}
			custom_tooltip = status_quo_north_tt
		}
		if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_compensation_for_afghanistan
				}
			}
			scope:rival_gp_scope ?= {
				create_diplomatic_pact = {
					country = c:AFG
					type = bankroll
				}
				set_variable = { name = forced_bankroll_time value = c:AFG months = 24 }
			}
		}
		if = {
			limit = {
				ROOT = {
					has_variable = proposed_durand_line
				}
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = ROOT
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_indus_line
				}
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
					}
					set_state_owner = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
					}
					set_state_owner = ROOT
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_status_quo
				}
			}
			custom_tooltip = status_quo_southeast_tt
		}

		if = {
			limit = {
				has_variable = proposed_torkestan_line
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
					}
					set_state_owner = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
					}
					set_state_owner = ROOT
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_amu_darya_line
				}
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
					}
					set_state_owner = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
					}
					set_state_owner = ROOT
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
					}
					set_state_owner = c:AFG
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_status_quo_north
				}
			}
			custom_tooltip = status_quo_north_tt
		}
		if = {
			limit = {
				ROOT = {
					has_variable = proposed_compensation_for_afghanistan
				}
			}
			create_diplomatic_pact = {
				country = c:AFG
				type = bankroll
			}
			set_variable = { name = forced_bankroll_time value = c:AFG months = 24 }
		}
		set_global_variable = afghan_borders_solidified
		hidden_effect = {
			clear_afghanistan_variables = yes
		}
	}

	timeout = 365

	on_timeout = {
		custom_tooltip = {
			text = negotiations_failure_tt

		}
		if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_durand_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = scope:rival_afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:rival_afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = scope:rival_gp_scope
						}
					}
					state_region = {
						add_claim = scope:rival_gp_scope
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_indus_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
						NOT = {
							has_claim_by = scope:rival_afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:rival_afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
						NOT = {
							has_claim_by = scope:rival_gp_scope
						}
					}
					state_region = {
						add_claim = scope:rival_gp_scope
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_status_quo
				}
			}
			custom_tooltip = status_quo_southeast_tt
		}

		if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_torkestan_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
						NOT = {
							has_claim_by = scope:rival_afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:rival_afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
						NOT = {
							has_claim_by = scope:rival_gp_scope
						}
					}
					state_region = {
						add_claim = scope:rival_gp_scope
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_amu_darya_line
				}
			}
			if = {
				limit = {
					exists = scope:rival_afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
						NOT = {
							has_claim_by = scope:rival_afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:rival_afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
						NOT = {
							has_claim_by = scope:rival_gp_scope
						}
					}
					state_region = {
						add_claim = scope:rival_gp_scope
					}
				}
				every_state = {
					limit = {
						OR = {
							scope:rival_gp_scope ?= owner
							scope:rival_afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:rival_gp_scope ?= {
					has_variable = proposed_status_quo_north
				}
			}
			custom_tooltip = status_quo_north_tt
		}
		if = {
			limit = {
				ROOT = {
					has_variable = proposed_durand_line
				}
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = scope:afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = ROOT
						}
					}
					state_region = {
						add_claim = ROOT
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOR = {
							state_region = s:STATE_PASHTUNISTAN
							state_region = s:STATE_QUETTA
							state_region = s:STATE_BALUCHISTAN
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_indus_line
				}
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
						NOT = {
							has_claim_by = scope:afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_north_india
							region = sr:region_himalayas
						}
						NOT = {
							has_claim_by = ROOT
						}
					}
					state_region = {
						add_claim = ROOT
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_status_quo
				}
			}
			custom_tooltip = status_quo_southeast_tt
		}

		if = {
			limit = {
				has_variable = proposed_torkestan_line
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
						NOT = {
							has_claim_by = scope:afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						OR = {
							region = sr:region_central_asia
							state_region = s:STATE_BALKH
						}
						NOT = {
							has_claim_by = ROOT
						}
					}
					state_region = {
						add_claim = ROOT
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
							NOT = {
								this = s:STATE_BALKH
							}
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		else_if = {
			limit = {
				ROOT = {
					has_variable = proposed_amu_darya_line
				}
			}
			if = {
				limit = {
					exists = scope:afghan_partition_proxy
				}
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
						NOT = {
							has_claim_by = scope:afghan_partition_proxy
						}
					}
					state_region = {
						add_claim = scope:afghan_partition_proxy
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
			else = {
				every_state = {
					limit = {
						c:AFG ?= owner
						region = sr:region_central_asia
						NOT = {
							has_claim_by = ROOT
						}
					}
					state_region = {
						add_claim = ROOT
					}
				}
				every_state = {
					limit = {
						OR = {
							ROOT ?= owner
							scope:afghan_partition_proxy ?= owner
						}
						state_region = {
							is_homeland = cu:pashtun
						}
						NOT = {
							has_claim_by = c:AFG
						}
					}
					state_region = {
						add_claim = c:AFG
					}
				}
			}
		}
		
		hidden_effect = {
			clear_afghanistan_variables = yes
		}
	}

	weight = 1001
}

je_unify_afghanistan = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

	scripted_button = je_afghan_unification_appeal_to_russia_button
	scripted_button = je_afghan_unification_appeal_to_britain_button

	possible = {
		capital ?= {
			region = sr:region_persia
		}
		OR = {
			country_has_primary_culture = cu:pashtun
			country_has_primary_culture = cu:tajik
		}
	}

	complete = {
		custom_tooltip = {
			text = has_formed_afghanistan_tt
			c:AFG ?= this
		}
	}
	
	on_complete = {

	}
		
	weight = 1000
}

﻿je_donghak_movement = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_historical_content

	modifiers_while_active = {
		modifier_donghak_movement
	}

	is_shown_when_inactive = {
		country_has_primary_culture = cu:korean
		has_technology_researched = egalitarianism
		has_dlc_feature = ep1_content
	}

	possible = {
		has_technology_researched = human_rights
		NOT = {
			has_law = law_type:law_isolationism
		}
		any_power_bloc = {
			power_bloc_leader = {
				country_is_in_europe = yes
			}
			leverage_advantage = { target = ROOT value > 0 }
		}
		radical_fraction = {
			value >= 0.1
		}
	}

	immediate = {
		ig:ig_rural_folk = {
			save_scope_as = donghak_ig
		}
		trigger_event = { id = gg_korea.1 popup = yes }
	}

	on_monthly_pulse = {
		random_events = {
			100 = 0
			10 = gg_korea.4
		}
	}

	complete = {
		OR = {
			radical_fraction = {
				value <= 0.05
			}
			custom_tooltip = {
				text = donghak_petition_complete_tt
				has_variable = donghak_petition_complete
			}
		}
	}

	on_complete = {
		show_as_tooltip = {
			remove_modifier = modifier_donghak_movement
		}
	}

	fail = {
		any_political_movement = {
			is_revolutionary_movement = yes
			any_supporting_interest_group = {
				is_interest_group_type = ig_rural_folk
			}
		}
	}

	on_fail = {
		trigger_event = { id = gg_korea.2 popup = yes }
	}

	weight = 1000
}

je_gyojo_shinwon = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	group = je_group_crises

	# Added by event

	timeout = 3650

	modifiers_while_active = {
		modifier_donghak_petition_accepted
	}

	immediate = {
		ig:ig_rural_folk = {
			save_scope_as = donghak_ig
		}
		ig:ig_landowners = {
			save_scope_as = yangban_ig
		}
		random_law = {
			limit = {
				type = law_type:law_isolationism
			}
			save_scope_as = donghak_desired_law_1
		}
		random_law = {
			limit = {
				type = law_type:law_freedom_of_conscience
			}
			save_scope_as = donghak_desired_law_2
		}
		random_law = {
			limit = {
				type = law_type:law_total_separation
			}
			save_scope_as = donghak_desired_law_3
		}
	}

	complete = {
		has_law = law_type:law_isolationism
		NOT = {
			has_law = law_type:law_state_religion
		}
		ig:ig_landowners = {
			is_powerful = no
			is_in_government = no
		}
	}

	on_complete = {
		trigger_event = { id = gg_korea.5 popup = yes }
        hidden_effect = {
            set_variable = hermit_kingdom_achievement
        }
	}

	fail = {
		any_political_movement = {
			is_revolutionary_movement = yes
			any_supporting_interest_group = {
				is_interest_group_type = ig_rural_folk
			}
		}
	}

	on_timeout = {
		trigger_event = { id = gg_korea.6 popup = yes }
	}

	weight = 1000
}

je_korean_rebellion = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	group = je_group_crises

	# Added by event

	immediate = {
		c:KOR = {
			save_scope_as = korea_scope
			ruler = {
				save_scope_as = korea_ruler_scope
			}
		}
		random_country = {
			limit = {
				civil_war_origin_country = scope:korea_scope
			}
			save_scope_as = korea_rebellion_scope
		}
	}

	complete = {
		trigger_if = {
			limit = {
				has_variable = sided_with_korean_gov
			}
			scope:korea_scope = {
				has_revolution = no
				custom_tooltip = {
					text = korean_ruler_retained_tt
					scope:korea_ruler_scope = {
						is_ruler = yes
					}
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = sided_with_korean_rebels
			}
			scope:korea_scope = {
				has_revolution = no
				custom_tooltip = {
					text = korean_ruler_deposed_tt
					NOT = {
						scope:korea_ruler_scope ?= {
							is_ruler = yes
						}
					}
				}
			}
		}
	}

	on_complete = {
		if = {
			limit = {
				c:JAP ?= this
				c:KOR ?= {
					is_subject = yes
					overlord ?= {
						OR = {
							country_has_primary_culture = cu:han
							country_has_primary_culture = cu:manchu
						}
					}
				}
			}
			custom_tooltip = {
				text = japan_demands_korea_tt
				trigger_event = { id = gg_korea.8 days = 7 popup = yes}
			}
		}
		add_modifier = {
			name = modifier_victory_in_korean_intervention
			months = long_modifier_time
		}
	}

	fail = {
		trigger_if = {
			limit = {
				has_variable = sided_with_korean_gov
				scope:korea_scope = {
					has_revolution = yes
				}
			}
			scope:korea_rebellion_scope = {
				custom_tooltip = {
					text = korea_fail_condition_war_tt
					has_war_with = scope:korea_scope
				}
				custom_tooltip = {
					text = korea_fail_condition_gov_tt
					NOT = {
						is_diplomatic_play_enemy_of = ROOT
					}
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = sided_with_korean_rebels
				scope:korea_scope = {
					has_revolution = yes
				}
			}
			scope:korea_scope = {
				custom_tooltip = {
					text = korea_fail_condition_war_tt
					has_war_with = scope:korea_rebellion_scope
				}
				custom_tooltip = {
					text = korea_fail_condition_rebels_tt
					NOT = {
						is_diplomatic_play_enemy_of = ROOT
					}
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = sided_with_korean_gov
				scope:korea_scope = {
					has_revolution = no
				}
			}
			scope:korea_scope = {
				has_revolution = no
				custom_tooltip = {
					text = korean_ruler_deposed_tt
					NOT = {
						scope:korea_ruler_scope ?= {
							is_ruler = yes
						}
					}
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = sided_with_korean_rebels
				scope:korea_scope = {
					has_revolution = no
				}
			}
			scope:korea_scope = {
				has_revolution = no
				custom_tooltip = {
					text = korean_ruler_retained_tt
					scope:korea_ruler_scope ?= {
						is_ruler = yes
					}
				}
			}
		}
	}

	on_fail = {
		add_modifier = {
			name = modifier_failed_korean_intervention
			months = normal_modifier_time
		}
	}

	weight = 1000
}

﻿je_pro_lobby_opportunity = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/relations_icons/friendly.dds"

	group = je_group_crises

	timeout = 1825

	immediate = {
		random_political_lobby = {
			limit = {
				target = scope:target
				is_political_lobby_type = lobby_pro_country
			}
			save_scope_as = relevant_lobby
			target = {
				save_scope_as = relevant_country
			}
		}
		ROOT = {
			set_variable = { name = pro_lobby_opportunity_target value = scope:target }
		}
	}

	complete = {
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_defensive_pact
			}
			has_diplomatic_pact = {
				who = scope:target
				type = defensive_pact
			}
		}
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_alliance
			}
			has_diplomatic_pact = {
				who = scope:target
				type = alliance
			}
		}
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_trade_agreement
			}
			has_diplomatic_pact = {
				who = scope:target
				type = trade_agreement
			}
		}
		trigger_if = {
			limit = {
				OR = {
					has_variable = pro_lobby_proposal_power_bloc
				}
			}
			scope:target = {
				is_power_bloc_leader = yes
			}
			is_in_same_power_bloc = scope:target
		}
		trigger_if = {
			limit = {
				OR = {
					has_variable = pro_lobby_proposal_power_bloc_invite
				}
			}
			is_power_bloc_leader = yes
			is_in_same_power_bloc = scope:target
		}
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_investment_agreement
			}
			OR = {
				has_diplomatic_pact = {
					who = scope:target
					type = foreign_investment_agreement
				}
				has_diplomatic_pact = {
					who = scope:target
					type = foreign_investment_rights
				}
			}
		}
	}

	invalid = {
		NOT = {
			exists = scope:target
		}
	}

	on_complete = {
		clear_pro_lobby_vars = yes
	}

	on_timeout = {
		clear_pro_lobby_vars = yes
	}

	weight = 1000
}

je_anti_lobby_opportunity = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/relations_icons/friendly.dds"

	group = je_group_crises

	timeout = 1825

	immediate = {
		random_political_lobby = {
			limit = {
				target = scope:target
				is_political_lobby_type = lobby_anti_country
			}
			save_scope_as = relevant_lobby
			target = {
				save_scope_as = relevant_country
			}
		}
		var:anti_lobby_third_party_var = {
			save_scope_as = third_party_country
		}
		ROOT = {
			set_variable = { name = anti_lobby_opportunity_target value = scope:third_party_country }
		}
	}

	complete = {
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_defensive_pact
			}
			has_diplomatic_pact = {
				who = scope:third_party_country
				type = defensive_pact
			}
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_alliance
			}
			has_diplomatic_pact = {
				who = scope:third_party_country
				type = alliance
			}
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_trade_agreement
			}
			has_diplomatic_pact = {
				who = scope:third_party_country
				type = trade_agreement
			}
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_power_bloc
			}
			scope:third_party_country = {
				is_power_bloc_leader = yes
			}
			is_in_same_power_bloc = scope:third_party_country
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_power_bloc_invite
			}
			is_power_bloc_leader = yes
			is_in_same_power_bloc = scope:third_party_country
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_investment_agreement
			}
			OR = {
				has_diplomatic_pact = {
					who = scope:target
					type = foreign_investment_agreement
				}
				has_diplomatic_pact = {
					who = scope:target
					type = foreign_investment_rights
				}
			}
		}
	}
	
	invalid = {
		NOT = {
			exists = scope:third_party_country
		}
	}

	on_complete = {
		clear_anti_lobby_vars = yes
	}

	on_timeout = {
		clear_anti_lobby_vars = yes
	}

	weight = 1000
}

je_pro_lobby_demand = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/relations_icons/hostile.dds"

	group = je_group_crises

	timeout = 1825

	immediate = {
		random_political_lobby = {
			limit = {
				target = scope:target
				is_political_lobby_type = lobby_pro_country
			}
			save_scope_as = relevant_lobby
			target = {
				save_scope_as = relevant_country
			}
		}
		var:pro_lobby_third_party_var = {
			save_scope_as = third_party_country
		}
		ROOT = {
			set_variable = { name = pro_lobby_demand_target value = scope:third_party_country }
		}
	}

	complete = {
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_break_alliance
			}
			NOT = {
				has_diplomatic_pact = {
					who = scope:third_party_country
					type = alliance
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_break_defensive_pact
			}
			NOT = {
				has_diplomatic_pact = {
					who = scope:third_party_country
					type = defensive_pact
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_break_trade_agreement
			}
			NOT = {
				has_diplomatic_pact = {
					who = scope:third_party_country
					type = trade_agreement
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = pro_lobby_proposal_embargo
			}
			has_diplomatic_pact = {
				who = scope:third_party_country
				type = embargo
				is_initiator = yes
			}
		}
		trigger_else_if = {
			limit = {
				has_variable = pro_lobby_proposal_rivalry
			}
			has_diplomatic_pact = {
				who = scope:third_party_country
				type = rivalry
				is_initiator = yes
			}
		}
		trigger_else_if = {
			limit = {
				has_variable = pro_lobby_proposal_war
			}
			OR = {
				has_war_with = scope:third_party_country
				custom_tooltip = {
					text = enforced_wargoal_on_rival_2_tt
					has_variable = enforced_wargoal_on_enemy
				}
			}
		}
		trigger_else_if = {
			limit = {
				has_variable = pro_lobby_proposal_leave_power_bloc
			}
			NOT = {
				is_in_same_power_bloc = scope:third_party_country
			}
		}
	}

	invalid = {
		NOT = {
			exists = scope:third_party_country
		}
	}

	on_complete = {
		scope:relevant_lobby = {
			change_appeasement = {
				amount = 3
				factor = appeasement_lobby_request_accepted
			}
		}
		clear_pro_lobby_vars = yes
	}

	on_timeout = {
		scope:relevant_lobby = {
			change_appeasement = {
				amount = -5
				factor = appeasement_lobby_request_ignored
			}
		}
		clear_pro_lobby_vars = yes
	}

	weight = 1000
}

je_anti_lobby_demand = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/relations_icons/hostile.dds"

	group = je_group_crises

	timeout = 1825

	immediate = {
		random_political_lobby = {
			limit = {
				target = scope:target
				is_political_lobby_type = lobby_anti_country
			}
			save_scope_as = relevant_lobby
			target = {
				save_scope_as = relevant_country
			}
		}
		ROOT = {
			set_variable = { name = anti_lobby_demand_target value = scope:target }
		}
	}

	complete = {
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_break_alliance
			}
			NOT = {
				has_diplomatic_pact = {
					who = scope:target
					type = alliance
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_break_defensive_pact
			}
			NOT = {
				has_diplomatic_pact = {
					who = scope:target
					type = defensive_pact
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_break_trade_agreement
			}
			NOT = {
				has_diplomatic_pact = {
					who = scope:target
					type = trade_agreement
				}
			}
		}
		trigger_if = {
			limit = {
				has_variable = anti_lobby_proposal_embargo
			}
			has_diplomatic_pact = {
				who = scope:target
				type = embargo
				is_initiator = yes
			}
		}
		trigger_else_if = {
			limit = {
				has_variable = anti_lobby_proposal_rivalry
			}
			has_diplomatic_pact = {
				who = scope:target
				type = rivalry
				is_initiator = yes
			}
		}
		trigger_else_if = {
			limit = {
				has_variable = anti_lobby_proposal_war
			}
			OR = {
				has_war_with = scope:target
				custom_tooltip = {
					text = enforced_wargoal_on_rival_tt
					has_variable = enforced_wargoal_on_enemy
				}
			}
		}
		trigger_else_if = {
			limit = {
				has_variable = anti_lobby_proposal_leave_power_bloc
			}
			NOT = {
				is_in_same_power_bloc = scope:target
			}
		}
	}
	
	invalid = {
		NOT = {
			exists = scope:target
		}
	}

	on_complete = {
		scope:relevant_lobby = {
			change_appeasement = {
				amount = 3
				factor = appeasement_lobby_request_accepted
			}
		}
		clear_anti_lobby_vars = yes
	}

	on_timeout = {
		scope:relevant_lobby = {
			change_appeasement = {
				amount = -5
				factor = appeasement_lobby_request_ignored
			}
		}
		clear_anti_lobby_vars = yes
	}

	weight = 1000
}
﻿je_earn_recognition = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_foreign_affairs

	is_shown_when_inactive = {
		is_country_type = unrecognized
	}

	possible = {
		is_country_type = unrecognized
		has_technology_researched = colonization
		OR = {
			country_rank >= rank_value:unrecognized_major_power
			any_overlord_or_above = {
				country_rank >= rank_value:great_power
			}
		}
	}

	immediate = {
		set_variable = {
			name = recognition_progress_var
			value = 0
		}
	}

	complete = {
		any_country = {
			country_rank >= rank_value:great_power
			relations:root >= relations_threshold:amicable
		}
		scope:journal_entry = {
			is_goal_complete = yes
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_earn_recognition_tt
			trigger_event = { id = earn_recognition_events.1 days = 0 popup = yes }
		}
		show_as_tooltip = {
			set_country_type = recognized
		}
	}

	fail = {
	}

	on_fail = {
	}

	on_monthly_pulse = {
		effect = {
			# Wargoal enforced scores are handled in the on_wargoal_enforced on_action
			# Advance Conditions
			if = {
				limit = {
					# Your GDP per Capita is relatively high
					gdp_per_capita_ranking <= 20
				}
				change_variable = {
					name = recognition_progress_var
					add = 1
				}
			}
			if = {
				limit = {
					# Your Standard of Living is relatively high
					sol_ranking <= 20
				}
				change_variable = {
					name = recognition_progress_var
					add = 1
				}
			}			
			if = {
				limit = {
					# Country has voting rights
					country_has_voting_franchise = yes
				}
				change_variable = {
					name = recognition_progress_var
					add = 1
				}
			}
			if = {
				limit = {
					# Literacy rating is high-isch
					literacy_rate >= 0.4
				}
				change_variable = {
					name = recognition_progress_var
					add = 1
				}
			}
			# Deplete Conditions
			if = {
				limit = {
					# Slavery is legal
					NOT = {
						has_law = law_type:law_slavery_banned
					}
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			if = {
				limit = {
					# Serfdom is legal
					has_law = law_type:law_serfdom
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			if = {
				limit = {
					# Traditional economic system
					has_law = law_type:law_traditionalism
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			if = {
				limit = {
					# 'Draconic' law
					has_law = law_type:law_outlawed_dissent
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			if = {
				limit = {
					# Literacy rating is low
					literacy_rate <= 0.2
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			if = {
				limit = {
					# Your GDP per Capita is relatively low
					gdp_per_capita_ranking >= 50
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			if = {
				limit = {
					# Your Standard of Living is relatively low
					sol_ranking >= 50
				}
				change_variable = {
					name = recognition_progress_var
					add = -1
				}
			}
			clamp_variable = { name = recognition_progress_var max = 200 min = 0 }
		}
	}

	current_value = {
		value = root.var:recognition_progress_var
	}

	goal_add_value = {
		value = 200
	}

	progressbar = yes

	weight = 100

	should_be_pinned_by_default = yes
}

﻿je_reunify_china = {
	should_be_pinned_by_default = yes
	icon = "gfx/interface/icons/invention_icons/wargaming.dds"

	group = je_group_foreign_affairs

	modifiers_while_active = {
		modifier_chinese_warlord_era
	}

	is_shown_when_inactive = {
		has_global_variable = china_shatters
	}

	possible = {
		custom_tooltip = {
			text = china_shattered_tt
			has_global_variable = china_shatters
		}
		OR = {
			country_has_primary_culture = cu:han
			country_has_primary_culture = cu:manchu
		}
	}

	complete = {
		trigger_if = {
			limit = {
				global_var:chinese_central_government ?= this
			}
			custom_tooltip = {
				text = no_independent_chinese_countries_tt
				any_country = {
					filter = {
						OR = {
							any_primary_culture = {
								has_discrimination_trait = han_chinese
							}
							country_has_primary_culture = cu:yi
							country_has_primary_culture = cu:manchu
						}
						OR = {
							capital.region = sr:region_north_china
							capital.region = sr:region_south_china
							capital.region = sr:region_manchuria
							capital.region = sr:region_central_asia
							capital.region = sr:region_himalayas
						}
					}
					OR = {
						THIS = ROOT
						is_subject_of = ROOT
					}
					percent = 1
				}
			}
		}
		trigger_else = {
			trigger_if = {
				limit = {
					global_var:chinese_central_government ?= {
						is_country_alive = yes
					}
				}
				custom_tooltip = {
					text = central_government_defeated_tt
					OR = {
						NOT = {
							exists = global_var:chinese_central_government
						}
						global_var:chinese_central_government ?= {
							is_country_alive = no
						}
					}
				}
			}
			custom_tooltip = {
				text = no_independent_chinese_countries_tt
				any_country = {
					filter = {
						OR = {
							any_primary_culture = {
								has_discrimination_trait = han_chinese
							}
							country_has_primary_culture = cu:yi
							country_has_primary_culture = cu:manchu
						}
						OR = {
							capital.region = sr:region_north_china
							capital.region = sr:region_south_china
							capital.region = sr:region_manchuria
							capital.region = sr:region_central_asia
							capital.region = sr:region_himalayas
						}
					}
					OR = {
						THIS = ROOT
						is_subject_of = ROOT
					}
					percent = 1
				}
			}
		}
		OR = {
			owns_entire_state_region = STATE_NANJING
			owns_entire_state_region = STATE_BEIJING
		}
		custom_tooltip = {
			text = has_formed_china_tt
			c:CHI ?= this
		}
		NOT = {
			has_law = law_type:law_peasant_levies
		}
	}
	
	on_complete = {
		remove_global_variable = chinese_central_government
		trigger_event = { id = warlord_china_events.101 popup = yes }
	}
		
	weight = 1000
}
﻿je_unite_the_nations = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
	
	group = je_group_foreign_affairs

	scripted_button = je_unite_the_nations_proclaim_turtle_island_button
    scripted_button = je_unite_the_nations_organize_the_tribes_button
    scripted_button = je_unite_the_nations_offer_confederation_button

	is_shown_when_inactive = {
		NOT = { is_country_type = decentralized }
		country_is_in_north_america = yes
		any_primary_culture = {
			has_discrimination_trait = indigenous_american_heritage
		}
		OR = {
			NOT = {
				exists = c:TIS
			}
			AND = {
				exists = c:TIS
				c:TIS = this
			}
		}
	}

	possible = {
		is_subject = no
	}

	complete = {
		custom_tooltip = {
			text = je_unite_the_nations_complete_tt
			NOT = { 
				any_country = { 
					country_is_in_north_america = yes 
					is_country_type = decentralized 
					any_primary_culture = {
						shares_heritage_trait_with_any_primary_culture = ROOT
					}
				} 
			}
		}
        any_scope_state = {
            owner = root
            is_homeland_of_country_cultures = ROOT
            count >= 5
        }
	}

	on_complete = {
		if = {
			limit = { is_country_type = unrecognized }
			set_country_type = recognized
		}
		add_modifier = {
			name = turtle_island_state_of_nations
			months = -1 # FOREVER
		}
	}

	fail = {
	}

	on_fail = {
	}

	on_monthly_pulse = {
	}
	on_yearly_pulse = {
	}

	#current_value = {
	#}

	#goal_add_value = {
	#	value = 120
	#}

	#progressbar = yes

	weight = 100

	should_be_pinned_by_default = yes
}


